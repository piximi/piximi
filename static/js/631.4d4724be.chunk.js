/*! For license information please see 631.4d4724be.chunk.js.LICENSE.txt */
(self.webpackChunkpiximi=self.webpackChunkpiximi||[]).push([[631],{7405:function(t,e,n){"use strict";n.d(e,{ro:function(){return s}});var r=n(87462);function a(t,e,n){var r=[],a=(n/=100)*(e/=100),i=t/60,o=a*(1-Math.abs(i%2-1)),s=n-a;return r=i>=0&&i<1?[a,o,0]:i>=1&&i<2?[o,a,0]:i>=2&&i<3?[0,a,o]:t>=3&&i<4?[0,o,a]:t>=4&&i<5?[o,0,a]:t>=5&&i<=6?[a,0,o]:[0,0,0],{r:Math.round(255*(r[0]+s)),g:Math.round(255*(r[1]+s)),b:Math.round(255*(r[2]+s))}}function i(t,e,n){var r=function(t,e,n){return{h:t,s:2*(e*=(n<50?n:100-n)/100)/(n+e)*100,v:n+e}}(t,e,n);return a(r.h,r.s,r.v)}var o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function s(t){return function(t){var e=o[t.toLowerCase()];if(!e)return;return{r:e[0],g:e[1],b:e[2],a:100}}(t)||function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:100}}(t)||function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:100}}(t)||function(t){var e=t.match(/rgb\(([^)]+)\)/);if(e){var n=e[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100}}}(t)||function(t){var e=t.match(/rgba\(([^)]+)\)/);if(e){var n=e[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100*n[3]}}}(t)||function(t){var e=t.match(/hsl\(([^)]+)\)/);if(e){var n=e[1].split(/ *, */),a=i(parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10));return(0,r.Z)({},a,{a:100})}}(t)||function(t){var e=t.match(/hsla\(([^)]+)\)/);if(e){var n=e[1].split(/ *, */),a=parseInt(n[0],10),o=parseInt(n[1],10),s=parseInt(n[2],10),u=parseInt(100*parseFloat(n[3]),10),c=i(a,o,s);return(0,r.Z)({},c,{a:u})}}(t)}},94229:function(t,e,n){"use strict";n.d(e,{O:function(){return v}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=n(97326),u=n(88301),c=n(61120),l=n(60136),h=n(29388),f=n(87884),d=n(23193),p=f.GDt.ZA,v=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(){var t;return(0,i.Z)(this,n),(t=e.call(this)).blockSize=48,t.firstUse=!0,t.data=new f.JLz((0,s.Z)(t),(0,f.SRH)()),t}return(0,o.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(t,e,n){this.firstUse&&(this.firstUse=!1,(0,f.OBj)().get("IS_NODE")&&f.Wap.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:t,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(t,e,n){var r;if("string"===e&&null!=n&&n.length>0&&f.D5U.isString(n[0])){var a=n.map((function(t){return f.D5U.encodeString(t)}));r=this.write(a,t,e)}else r=this.write(n,t,e);return{dataId:r,shape:t,dtype:e}}},{key:"refCount",value:function(t){return this.data.has(t)?this.data.get(t).refCount:0}},{key:"incRef",value:function(t){this.data.get(t).refCount++}},{key:"decRef",value:function(t){this.data.has(t)&&this.data.get(t).refCount--}},{key:"move",value:function(t,e,n,r,a){this.data.set(t,{values:e,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readSync(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"readSync",value:function(t){var e=this.data.get(t),n=e.dtype,r=e.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return f.Wap.mergeRealAndImagArrays(a,i)}return f.D5U.convertBackendValuesAndArrayBuffer(this.data.get(t).values,n)}},{key:"bufferSync",value:function(t){var e=this.readSync(t.dataId);if("string"===t.dtype)try{var n=e.map((function(t){return f.D5U.decodeString(t)}));return(0,f.f3b)(t.shape,t.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,f.f3b)(t.shape,t.dtype,e)}},{key:"makeOutput",value:function(t,e,n){return(0,f.SRH)().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,t),this)}},{key:"disposeData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(t)){if(this.data.get(t).refCount--,!e&&this.data.get(t).refCount>0)return!1;var n=this.data.get(t).complexTensorInfos;null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(t)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(t){this.disposeData(t.dataId)}},{key:"time",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.D5U.now(),e(),a=f.D5U.now()-n,t.abrupt("return",{kernelMs:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(t){(0,d.H)([t],"where");var e=this.readSync(t.dataId);return p(t.shape,e)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return(0,u.Z)((0,c.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(f.Zuw);v.nextDataId=0},49966:function(t,e,n){"use strict";n.d(e,{P6:function(){return i.i}});var r=n(87884),a=n(94229),i=n(20874);(0,r.jqO)("cpu",(function(){return new a.O}),1)},23193:function(t,e,n){"use strict";n.d(e,{H:function(){return a}});var r=n(87884);function a(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){null!=t&&r.D5U.assert("complex64"!==t.dtype,(function(){return"".concat(e," does not support complex64 tensors in the CPU backend.")}))}))}},74338:function(t,e,n){"use strict";n.d(e,{P6:function(){return r.P6}});var r=n(49966);n(33602)},96220:function(t,e,n){"use strict";n.d(e,{bk:function(){return i},fC:function(){return o}});var r=n(87884),a=n(23193);function i(t){for(var e=new Float32Array(t.length),n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}var o={kernelName:r.SYM,backendName:"cpu",kernelFunc:function(t){var e=t.inputs.x,n=t.backend;(0,a.H)(e,"abs");var o=new Float32Array(r.D5U.sizeFromShape(e.shape));return o=i(n.data.get(e.dataId).values),n.makeOutput(o,e.shape,e.dtype)}}},60173:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.VGw,(function(t){return Math.acos(t)})),i={kernelName:r.VGw,backendName:"cpu",kernelFunc:a}},13639:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.SpW,(function(t){return Math.acosh(t)})),i={kernelName:r.SpW,backendName:"cpu",kernelFunc:a}},25589:function(t,e,n){"use strict";n.d(e,{EH:function(){return o},IH:function(){return u},j4:function(){return c}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t+e})),s=(0,i.H)((function(t,e,n,r){return{real:t+n,imag:e+r}})),u=(0,i.j)(r.mm_,o,s),c={kernelName:r.mm_,backendName:"cpu",kernelFunc:u}},29631:function(t,e,n){"use strict";n.d(e,{_:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.Xze,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=e;(0,a.H)(e,"addN");for(var o=i.map((function(t){return n.data.get(t.dataId).values})),s=(0,r.f3b)(i[0].shape,i[0].dtype),u=s.values,c=0;c<i.length;c++)for(var l=o[c],h=0;h<u.length;h++)u[h]+=l[h];return n.makeTensorInfo(s.shape,s.dtype,s.values)}}},45122:function(t,e,n){"use strict";n.d(e,{O:function(){return u}});var r=n(29439),a=n(87884),i=n(23193),o=n(28899),s=n(65257);var u={kernelName:a.oT6,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.axis,h=u.keepDims;(0,i.H)(c,"all");var f=a.D5U.parseAxisParam(l,c.shape),d=f,p=a.Wap.getAxesPermutation(d,c.shape.length),v=c;null!=p&&(v=(0,s.p)({inputs:{x:c},backend:n,attrs:{perm:p}}),d=a.Wap.getInnerMostAxes(d.length,c.shape.length)),a.Wap.assertAxesAreInnerMostDims("all",d,v.shape.length);for(var g=a.Wap.computeOutAndReduceShapes(v.shape,d),m=(0,r.Z)(g,2),y=m[0],b=m[1],w=a.D5U.sizeFromShape(b),x=a.D5U.makeZerosTypedArray(a.D5U.sizeFromShape(y),v.dtype),k=n.data.get(v.dataId).values,I=0;I<x.length;++I){for(var S=I*w,_=k[S],C=0;C<w;++C){var E=k[S+C];_=_&&E}x[I]=_}null!=p&&n.disposeIntermediateTensorInfo(v);var A=n.makeTensorInfo(y,v.dtype,x);if(h){var T=a.Wap.expandShapeToKeepDim(y,f),N=(0,o.X)({inputs:{x:A},backend:n,attrs:{shape:T}});return n.disposeIntermediateTensorInfo(A),N}return A}}},80629:function(t,e,n){"use strict";n.d(e,{H:function(){return u}});var r=n(29439),a=n(87884),i=n(23193),o=n(28899),s=n(65257);var u={kernelName:a.IKK,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.axis,h=u.keepDims;(0,i.H)(c,"any");var f=a.D5U.parseAxisParam(l,c.shape),d=f,p=a.Wap.getAxesPermutation(d,c.shape.length),v=c;null!=p&&(v=(0,s.p)({inputs:{x:c},backend:n,attrs:{perm:p}}),d=a.Wap.getInnerMostAxes(d.length,c.shape.length)),a.Wap.assertAxesAreInnerMostDims("any",d,v.shape.length);for(var g=a.Wap.computeOutAndReduceShapes(v.shape,d),m=(0,r.Z)(g,2),y=m[0],b=m[1],w=a.D5U.sizeFromShape(b),x=a.D5U.makeZerosTypedArray(a.D5U.sizeFromShape(y),v.dtype),k=n.data.get(v.dataId).values,I=0;I<x.length;++I){for(var S=I*w,_=k[S],C=0;C<w;++C){var E=k[S+C];_=_||E}x[I]=_}null!=p&&n.disposeIntermediateTensorInfo(v);var A=n.makeTensorInfo(y,v.dtype,x);if(h){var T=a.Wap.expandShapeToKeepDim(y,f),N=(0,o.X)({inputs:{x:A},backend:n,attrs:{shape:T}});return n.disposeIntermediateTensorInfo(A),N}return A}}},36593:function(t,e,n){"use strict";n.d(e,{d:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(65257);var s={kernelName:a.sJF,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.axis;(0,i.H)(u,"argMax");var l=a.D5U.parseAxisParam(c,u.shape),h=a.Wap.getAxesPermutation(l,u.shape.length),f=u,d=[];null!=h&&(f=(0,o.p)({inputs:{x:u},backend:n,attrs:{perm:h}}),d.push(f),l=a.Wap.getInnerMostAxes(l.length,f.shape.length)),l=[l[0]],a.Wap.assertAxesAreInnerMostDims("argMax",l,f.shape.length);for(var p=a.Wap.computeOutAndReduceShapes(f.shape,l),v=(0,r.Z)(p,2),g=v[0],m=v[1],y=a.D5U.sizeFromShape(g),b=a.D5U.makeZerosTypedArray(y,"int32"),w=a.D5U.sizeFromShape(m),x=n.data.get(f.dataId).values,k=0;k<b.length;++k){for(var I=k*w,S=x[I],_=0,C=0;C<w;++C){var E=x[I+C];E>S&&(S=E,_=C)}b[k]=_}return d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(g,"int32",b)}}},72098:function(t,e,n){"use strict";n.d(e,{O:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(65257);var s={kernelName:a.aJk,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.axis;(0,i.H)(u,"argMin");var l=a.D5U.parseAxisParam(c,u.shape),h=a.Wap.getAxesPermutation(l,u.shape.length),f=u,d=[];null!=h&&(f=(0,o.p)({inputs:{x:u},backend:n,attrs:{perm:h}}),d.push(f),l=a.Wap.getInnerMostAxes(l.length,f.shape.length)),l=[l[0]],a.Wap.assertAxesAreInnerMostDims("argMin",l,f.shape.length);for(var p=a.Wap.computeOutAndReduceShapes(f.shape,l),v=(0,r.Z)(p,2),g=v[0],m=v[1],y=a.D5U.sizeFromShape(g),b=a.D5U.makeZerosTypedArray(y,"int32"),w=a.D5U.sizeFromShape(m),x=n.data.get(f.dataId).values,k=0;k<b.length;++k){for(var I=k*w,S=x[I],_=0,C=0;C<w;++C){var E=x[I+C];E<S&&(S=E,_=C)}b[k]=_}return d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(g,"int32",b)}}},5328:function(t,e,n){"use strict";n.d(e,{h:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.M2y,(function(t){return Math.asin(t)})),i={kernelName:r.M2y,backendName:"cpu",kernelFunc:a}},25381:function(t,e,n){"use strict";n.d(e,{W:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.qw7,(function(t){return Math.asinh(t)})),i={kernelName:r.qw7,backendName:"cpu",kernelFunc:a}},17399:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.jMg,(function(t){return Math.atan(t)})),i={kernelName:r.jMg,backendName:"cpu",kernelFunc:a}},11203:function(t,e,n){"use strict";n.d(e,{tj:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return Math.atan2(t,e)})),s=(0,i.j)(r.QCc,o),u={kernelName:r.QCc,backendName:"cpu",kernelFunc:s}},29797:function(t,e,n){"use strict";n.d(e,{B:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.Oyi,(function(t){return Math.atanh(t)})),i={kernelName:r.Oyi,backendName:"cpu",kernelFunc:a}},95777:function(t,e,n){"use strict";n.d(e,{U:function(){return s}});var r=n(87884),a=n(23193),i=n(56703),o=n(59090);var s={kernelName:r.JhU,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x;(0,a.H)(u,"avgPool");var c=s.filterSize,l=s.strides,h=s.pad,f=s.dimRoundingMode;r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(l,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(l," and dilations '").concat(1,"'")}));var d,p=r.Wap.computePool2DInfo(u.shape,c,l,1,h,f);if(1===p.filterWidth&&1===p.filterHeight&&r.D5U.arraysEqual(p.inShape,p.outShape))d=(0,o.y)({inputs:{x:u},backend:n});else{var v=n.data.get(u.dataId).values,g=r.D5U.computeStrides(u.shape),m=(0,i.d_)(v,u.shape,u.dtype,g,p,"avg");d=n.makeTensorInfo(p.outShape,u.dtype,m.values)}return d}}},60726:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(87884),a=n(23193),i=n(56703);var o={kernelName:r._k9,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.filterSize,c=o.strides,l=o.pad,h=o.dimRoundingMode,f=o.dataFormat;(0,a.H)(s,"avgPool3d");var d=r.Wap.computePool3DInfo(s.shape,u,c,1,l,h,f),p=n.data.get(s.dataId).values,v=(0,i.Hc)(p,s.shape,s.dtype,r.D5U.computeStrides(s.shape),d,"avg");return n.makeTensorInfo(v.shape,"float32",v.values)}}},80761:function(t,e,n){"use strict";n.d(e,{Y:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.IMb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.dy,s=e.input,u=i.filterSize,c=i.strides,l=i.pad,h=i.dimRoundingMode;(0,a.H)([o,s],"avgPool3DGrad");for(var f=r.Wap.computePool3DInfo(s.shape,u,c,1,l,h),d=f.strideDepth,p=f.strideHeight,v=f.strideWidth,g=f.filterDepth,m=f.filterHeight,y=f.filterWidth,b=f.dilationDepth,w=f.dilationHeight,x=f.dilationWidth,k=f.effectiveFilterDepth,I=f.effectiveFilterHeight,S=f.effectiveFilterWidth,_=k-1-f.padInfo.front,C=S-1-f.padInfo.left,E=I-1-f.padInfo.top,A=(0,r.f3b)(s.shape,"float32"),T=1/(g*m*y),N=n.bufferSync(o),D=0;D<f.batchSize;++D)for(var R=0;R<f.inChannels;++R)for(var Z=0;Z<f.inDepth;++Z)for(var M=0;M<f.inHeight;++M)for(var F=0;F<f.inWidth;++F){for(var O=Z-_,B=M-E,L=F-C,P=0,U=0;U<k;U+=b){var z=(O+U)/d;if(!(z<0||z>=f.outDepth||Math.floor(z)!==z))for(var W=0;W<I;W+=w){var V=(B+W)/p;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(var G=0;G<S;G+=x){var j=(L+G)/v;if(!(j<0||j>=f.outWidth||Math.floor(j)!==j))P+=N.get(D,z,V,j,R)}}}A.set(P*T,D,Z,M,F,R)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}}},31747:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.ROF,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.dy,s=e.input,u=s;(0,a.H)([o,s],"avgPoolGrad");for(var c=i.filterSize,l=i.strides,h=i.pad,f=r.Wap.computePool2DInfo(u.shape,c,l,1,h),d=f.strideHeight,p=f.strideWidth,v=f.filterHeight,g=f.filterWidth,m=f.dilationHeight,y=f.dilationWidth,b=f.effectiveFilterHeight,w=f.effectiveFilterWidth,x=w-1-f.padInfo.left,k=b-1-f.padInfo.top,I=(0,r.f3b)(u.shape,"float32"),S=1/(v*g),_=n.data.get(o.dataId).values,C=(0,r.f3b)(o.shape,"float32",_),E=0;E<f.batchSize;++E)for(var A=0;A<f.inChannels;++A)for(var T=0;T<f.inHeight;++T)for(var N=0;N<f.inWidth;++N){for(var D=T-k,R=N-x,Z=0,M=0;M<b;M+=m){var F=(D+M)/d;if(!(F<0||F>=f.outHeight||Math.floor(F)!==F))for(var O=0;O<w;O+=y){var B=(R+O)/p;if(!(B<0||B>=f.outWidth||Math.floor(B)!==B))Z+=C.get(E,F,B,A)}}I.set(Z*S,E,T,N,A)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}}},16600:function(t,e,n){"use strict";n.d(e,{W:function(){return u},Z:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(28899);function s(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.a,c=e.b,l=s.transposeA,h=s.transposeB;(0,i.H)([u,c],"matMul");var f=u.shape.length,d=c.shape.length,p=l?u.shape[f-2]:u.shape[f-1],v=h?c.shape[d-1]:c.shape[d-2],g=l?u.shape[f-1]:u.shape[f-2],m=h?c.shape[d-2]:c.shape[d-1],y=u.shape.slice(0,-2),b=c.shape.slice(0,-2),w=a.D5U.sizeFromShape(y),x=a.D5U.sizeFromShape(b),k=a.Jyw.assertAndGetBroadcastShape(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([g,m]);a.D5U.assert(p===v,(function(){return"Error in matMul: inner shapes (".concat(p,") and (")+"".concat(v,") of Tensors with shapes ").concat(u.shape," and ")+"".concat(c.shape," and transposeA=").concat(l)+" and transposeB=".concat(h," must match.")}));for(var I=l?[w,p,g]:[w,g,p],S=h?[x,m,v]:[x,v,m],_=(0,o.X)({inputs:{x:u},backend:n,attrs:{shape:I}}),C=(0,o.X)({inputs:{x:c},backend:n,attrs:{shape:S}}),E=l?_.shape[1]:_.shape[2],A=l?_.shape[2]:_.shape[1],T=h?C.shape[1]:C.shape[2],N=Math.max(w,x),D=n.data.get(_.dataId).values,R=n.data.get(C.dataId).values,Z=a.D5U.computeStrides(_.shape),M=a.D5U.computeStrides(C.shape),F=l?[Z[0],1,Z[1]]:[Z[0],Z[1],1],O=(0,r.Z)(F,3),B=O[0],L=O[1],P=O[2],U=h?[1,M[1],M[0]]:[M[1],1,M[0]],z=(0,r.Z)(U,3),W=z[0],V=z[1],G=z[2],j=A*T,H=(0,a.f3b)([N,A,T],_.dtype),X=H.values,q=n.blockSize,Y=0;Y<N;Y++)for(var K=Y%w,Q=Y%x,J=0;J<A;J+=q)for(var $=Math.min(J+q,A),tt=0;tt<T;tt+=q)for(var et=Math.min(tt+q,T),nt=0;nt<E;nt+=q)for(var rt=Math.min(nt+q,E),at=J;at<$;at++)for(var it=tt;it<et;it++){for(var ot=0,st=nt;st<rt;st++){ot+=D[K*B+at*L+st*P]*R[st*W+it*V+Q*G]}X[Y*j+(at*T+it)]+=ot}return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(k,H.dtype,H.values)}var u={kernelName:a.XLW,backendName:"cpu",kernelFunc:s}},6088:function(t,e,n){"use strict";n.d(e,{C:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.sHE,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.scale,u=e.offset,c=e.mean,l=e.variance;r.D5U.assert(c.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),r.D5U.assert(null==u||c.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),r.D5U.assert(null==s||c.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),(0,a.H)([o,c,l,s,u],"batchNorm");var h=i.varianceEpsilon;null==h&&(h=.001);for(var f=n.data.get(o.dataId).values,d=n.data.get(c.dataId).values,p=n.data.get(l.dataId).values,v=s?n.data.get(s.dataId).values:new Float32Array([1]),g=u?n.data.get(u.dataId).values:new Float32Array([0]),m=new Float32Array(f.length),y=g.length,b=v.length,w=p.length,x=d.length,k=0,I=0,S=0,_=0,C=0;C<f.length;++C)m[C]=g[k++]+(f[C]-d[I++])*v[S++]/Math.sqrt(p[_++]+h),k>=y&&(k=0),I>=x&&(I=0),S>=b&&(S=0),_>=w&&(_=0);return n.makeTensorInfo(o.shape,o.dtype,m)}}},3944:function(t,e,n){"use strict";n.d(e,{g:function(){return u}});var r=n(87884),a=n(23193),i=n(28899),o=n(22126),s=n(65257);var u={kernelName:r.zws,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.blockShape,h=u.crops;(0,a.H)([c],"batchToSpaceND");var f=l.reduce((function(t,e){return t*e})),d=r.Wap.getReshaped(c.shape,l,f),p=r.Wap.getPermuted(d.length,l.length),v=r.Wap.getReshapedPermuted(c.shape,l,f),g=r.Wap.getSliceBeginCoords(h,l.length),m=r.Wap.getSliceSize(v,h,l.length),y=(0,i.X)({inputs:{x:c},backend:n,attrs:{shape:d}}),b=(0,s.p)({inputs:{x:y},backend:n,attrs:{perm:p}}),w=(0,i.X)({inputs:{x:b},backend:n,attrs:{shape:v}}),x=(0,o.tP)({inputs:{x:w},backend:n,attrs:{begin:g,size:m}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),x}}},6718:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});var r=n(87884),a=n(73737);var i={kernelName:r.zvY,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=e.weights,s=r.size,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,l=(0,a.W)(u,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,l)}}},73737:function(t,e,n){"use strict";n.d(e,{W:function(){return a},i:function(){return i}});var r=n(87884);function a(t,e,n,a,i){for(var o=r.D5U.sizeFromShape(a),s=r.D5U.makeZerosTypedArray(i,n),u=0;u<t.length;u++){var c=t[u];if(c<0)throw new Error("Input x must be non-negative!");c>=i||(s[c]+=o>0?e[u]:1)}return s}function i(t,e,n){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.shape[0],o=t.shape[1],s=(0,r.f3b)([i,n],e.dtype),u=0;u<i;u++)for(var c=0;c<o;c++){var l=t.get(u,c);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(a?s.set(1,u,l):e.size>0?s.set(s.get(u,l)+e.get(u,c),u,l):s.set(s.get(u,l)+1,u,l))}return s}},47380:function(t,e,n){"use strict";n.d(e,{u:function(){return a}});var r=n(87884);var a={kernelName:r.eEB,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.s0,i=e.s1,o=n.data.get(a.dataId).values,s=n.data.get(i.dataId).values,u=r.Wap.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}}},60570:function(t,e,n){"use strict";n.d(e,{Mq:function(){return f},pj:function(){return h},sJ:function(){return l}});var r=n(29439),a=n(87884),i=n(69341),o=n(94842),s=n(36545),u=n(59090),c=n(36241);function l(t,e,n,o){if("int32"===o)return[e,"int32",Int32Array.from(t)];if("bool"===o){var s=a.D5U.toTypedArray([0],n),u=(0,i.b)((function(t,e){return t!==e?1:0}))(e,[],t,s,"bool"),c=(0,r.Z)(u,2),l=c[0];return[c[1],"bool",l]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(o))}function h(t){var e=t.inputs,n=t.backend,i=t.attrs,f=e.x,d=i.dtype;if("complex64"===d){if("complex64"===f.dtype)return(0,u.y)({inputs:{x:f},backend:n});var p=(0,o.l)(n,f.shape,f.dtype),v=h({inputs:{x:f},backend:n,attrs:{dtype:"float32"}}),g=(0,s.P)({inputs:{real:v,imag:p},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}if("complex64"===f.dtype){var m=(0,c.k)({inputs:{input:f},backend:n}),y=h({inputs:{x:m},backend:n,attrs:{dtype:d}});return n.disposeIntermediateTensorInfo(m),y}if(!a.D5U.hasEncodingLoss(f.dtype,d)){var b=(0,u.y)({inputs:{x:f},backend:n});return{dataId:b.dataId,shape:b.shape,dtype:d}}var w=l(n.data.get(f.dataId).values,f.shape,f.dtype,d),x=(0,r.Z)(w,3),k=x[0],I=x[1],S=x[2];return n.makeTensorInfo(k,I,S)}var f={kernelName:a.RFZ,backendName:"cpu",kernelFunc:h}},94351:function(t,e,n){"use strict";n.d(e,{__:function(){return o},y2:function(){return u}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return Math.ceil(t)})),s=(0,i.O)(r.gJX,o),u={kernelName:r.gJX,backendName:"cpu",kernelFunc:s}},26604:function(t,e,n){"use strict";n.d(e,{w:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.xnO,(function(t,e){var n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t})),i={kernelName:r.xnO,backendName:"cpu",kernelFunc:a}},36545:function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.real,a=e.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}n.d(e,{P:function(){return r},z:function(){return a}});var a={kernelName:n(87884).Zz9,backendName:"cpu",kernelFunc:r}},8519:function(t,e,n){"use strict";n.d(e,{s:function(){return a}});var r=n(87884),a={kernelName:r.yj2,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs.x,n=t.backend,a=new Float32Array(r.D5U.sizeFromShape(e.shape)),i=n.data.get(e.dataId),o=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,l=0;l<u.length;l++){var h=u[l],f=c[l];a[l]=Math.hypot(h,f)}return n.makeOutput(a,e.shape,"float32")}}},98962:function(t,e,n){"use strict";n.d(e,{X:function(){return h},z:function(){return l}});var r=n(87884),a=n(36545),i=n(46563),o=n(59090),s=n(95845),u=n(36241),c=n(28899);function l(t){var e=t.inputs,n=t.backend,h=t.attrs.axis,f=r.D5U.parseAxisParam(h,e[0].shape)[0],d=e.map((function(t){return t.shape}));r.Wap.assertParamsConsistent(d,f);var p=r.Wap.computeOutShape(e.map((function(t){return t.shape})),f);if(0===r.D5U.sizeFromShape(p))return n.makeTensorInfo(p,e[0].dtype,[]);var v=e.filter((function(t){return r.D5U.sizeFromShape(t.shape)>0}));if(1===v.length)return(0,o.y)({inputs:{x:v[0]},backend:n});if("complex64"===v[0].dtype){var g=v.map((function(t){return(0,u.k)({inputs:{input:t},backend:n})})),m=v.map((function(t){return(0,s.a)({inputs:{input:t},backend:n})})),y=l({inputs:g,backend:n,attrs:{axis:f}}),b=l({inputs:m,backend:n,attrs:{axis:f}}),w=(0,a.P)({inputs:{real:y,imag:b},backend:n});return g.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),m.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),w}var x=v.map((function(t){var e=[-1,r.D5U.sizeFromShape(t.shape.slice(f))];return(0,c.X)({inputs:{x:t},backend:n,attrs:{shape:e}})})),k=x.map((function(t){return{vals:n.data.get(t.dataId).values,shape:t.shape}}));p=r.Wap.computeOutShape(x.map((function(t){return t.shape})),1);var I=1===x[0].shape[0],S=(0,i.j)(k,p,e[0].dtype,I),_=r.Wap.computeOutShape(v.map((function(t){return t.shape})),f),C=n.makeTensorInfo(_,e[0].dtype,S);return x.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),C}var h={kernelName:r.Eh3,backendName:"cpu",kernelFunc:l}},46563:function(t,e,n){"use strict";n.d(e,{j:function(){return a}});var r=n(87884);function a(t,e,n,a){var i=r.D5U.getArrayFromDType(n,r.D5U.sizeFromShape(e));if(a&&"string"!==n){var o=0;t.forEach((function(t){var e=r.D5U.sizeFromShape(t.shape);i.set(t.vals,o),o+=e}))}else{var s=0;t.forEach((function(t){for(var a="string"===n?r.Wap.fromUint8ToStringArray(t.vals):t.vals,o=0,u=0;u<t.shape[0];++u)for(var c=u*e[1]+s,l=0;l<t.shape[1];++l)i[c+l]=a[o++];s+=t.shape[1]}))}return i}},51526:function(t,e,n){"use strict";n.d(e,{N:function(){return i},o:function(){return o}});var r=n(87884),a=n(23193);function i(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.filter,u=i.strides,c=i.pad,l=i.dataFormat,h=i.dilations,f=i.dimRoundingMode;(0,a.H)([o,s],"conv2d");for(var d=r.Wap.convertConv2DDataFormat(l),p=r.Wap.computeConv2DInfo(o.shape,s.shape,u,h,c,f,!1,d),v=p.filterHeight,g=p.filterWidth,m=p.dilationHeight,y=p.dilationWidth,b=p.padInfo.left,w=p.padInfo.top,x="channelsLast"===p.dataFormat,k=new r.YDk(p.outShape,o.dtype),I=r.D5U.computeStrides(o.shape),S=r.D5U.computeStrides(s.shape),_=I[0],C=x?I[1]:I[2],E=x?I[2]:1,A=x?1:I[1],T=k.strides[0],N=x?k.strides[1]:k.strides[2],D=x?k.strides[2]:1,R=x?1:k.strides[1],Z=n.data.get(o.dataId).values,M=n.data.get(s.dataId).values,F=k.values,O=0;O<p.batchSize;++O)for(var B=O*_,L=O*T,P=0;P<p.outHeight;++P)for(var U=L+P*N,z=P*p.strideHeight-w,W=0;W<v;++W){var V=z+W*m;if(!(V<0||V>=p.inHeight))for(var G=W*S[0],j=B+V*C,H=0;H<p.outWidth;++H)for(var X=U+H*D,q=H*p.strideWidth-b,Y=0;Y<g;++Y){var K=q+Y*y;if(!(K<0||K>=p.inWidth))for(var Q=j+K*E,J=G+Y*S[1],$=0;$<p.inChannels;++$){for(var tt=Z[Q+$*A],et=0;et<p.outChannels;++et)F[X+et*R]+=tt*M[J+et];J+=p.outChannels}}}return n.makeTensorInfo(k.shape,k.dtype,F)}var o={kernelName:r.mhS,backendName:"cpu",kernelFunc:i}},81103:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.wUP,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.dy,u=i.strides,c=i.pad,l=i.dataFormat,h=i.dimRoundingMode,f=i.filterShape;(0,a.H)([o,s],"conv2dBackpropFilter");for(var d=r.Wap.convertConv2DDataFormat(l),p=r.Wap.computeConv2DInfo(o.shape,f,u,1,c,h,!1,d),v=p.strideHeight,g=p.strideWidth,m=p.filterHeight,y=p.filterWidth,b="channelsLast"===p.dataFormat,w=new r.YDk(p.filterShape,"float32"),x=p.padInfo.left,k=p.padInfo.top,I=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,_=new r.YDk(o.shape,o.dtype,I),C=new r.YDk(s.shape,s.dtype,S),E=0;E<m;++E)for(var A=Math.max(0,Math.ceil((k-E)/v)),T=Math.min(p.outHeight,(p.inHeight+k-E)/v),N=0;N<y;++N)for(var D=Math.max(0,Math.ceil((x-N)/g)),R=Math.min(p.outWidth,(p.inWidth+x-N)/g),Z=0;Z<p.inChannels;++Z)for(var M=0;M<p.outChannels;++M){for(var F=0,O=0;O<p.batchSize;++O)for(var B=A;B<T;++B)for(var L=E+B*v-k,P=D;P<R;++P){var U=N+P*g-x;F+=b?_.get(O,L,U,Z)*C.get(O,B,P,M):_.get(O,Z,L,U)*C.get(O,M,B,P)}w.set(F,E,N,Z,M)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}}},90397:function(t,e,n){"use strict";n.d(e,{g:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.wm,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.filter,c=o.inputShape,l=o.strides,h=o.pad,f=o.dataFormat,d=o.dimRoundingMode;(0,i.H)([s,u],"conv2dBackpropInput");var p=a.D5U.computeStrides(u.shape),v=a.D5U.computeStrides(s.shape),g=a.Wap.convertConv2DDataFormat(f),m=a.Wap.computeConv2DInfo(c,u.shape,l,1,h,d,!1,g),y=new a.YDk(m.inShape,"float32"),b=y.values,w=n.data.get(s.dataId).values,x=n.data.get(u.dataId).values,k=(0,r.Z)(p,3),I=k[0],S=k[1],_=k[2],C=m.batchSize,E=m.filterHeight,A=m.filterWidth,T=m.inChannels,N=m.inHeight,D=m.inWidth,R=m.outChannels,Z=m.outHeight,M=m.outWidth,F=m.strideHeight,O=m.strideWidth;g=m.dataFormat;for(var B=E-1-m.padInfo.top,L=A-1-m.padInfo.left,P="channelsLast"===g,U=y.strides[0],z=P?y.strides[1]:y.strides[2],W=P?y.strides[2]:1,V=P?1:y.strides[1],G=v[0],j=P?v[1]:v[2],H=P?v[2]:1,X=P?1:v[1],q=0;q<C;++q)for(var Y=0;Y<T;++Y)for(var K=0;K<N;++K)for(var Q=K-B,J=Math.max(0,Math.ceil(Q/F)),$=Math.min(Z,(E+Q)/F),tt=0;tt<D;++tt){for(var et=tt-L,nt=Math.max(0,Math.ceil(et/O)),rt=Math.min(M,(A+et)/O),at=0,it=J;it<$;++it)for(var ot=it*F-Q,st=nt;st<rt;++st)for(var ut=G*q+j*it+H*st,ct=I*(E-1-ot)+S*(A-1-(st*O-et))+_*Y,lt=0;lt<R;++lt){at+=w[ut+X*lt]*x[ct+lt]}b[U*q+z*K+W*tt+V*Y]=at}return n.makeTensorInfo(y.shape,y.dtype,y.values)}}},4241:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.x12,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.filter,u=i.strides,c=i.pad,l=i.dilations;(0,a.H)([o,s],"conv3d");for(var h=r.Wap.computeConv3DInfo(o.shape,s.shape,u,l,c),f=h.filterDepth,d=h.filterHeight,p=h.filterWidth,v=h.dilationDepth,g=h.dilationHeight,m=h.dilationWidth,y=h.padInfo,b=y.front,w=y.left,x=y.top,k=new r.YDk(h.outShape,o.dtype),I=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,_=k.values,C=r.D5U.computeStrides(o.shape),E=r.D5U.computeStrides(s.shape),A=0;A<h.batchSize;++A)for(var T=A*C[0],N=A*k.strides[0],D=0;D<h.outDepth;++D)for(var R=N+D*k.strides[1],Z=D*h.strideDepth-b,M=0;M<f;++M){var F=Z+M*v;if(!(F<0||F>=h.inDepth))for(var O=M*E[0],B=T+F*C[1],L=0;L<h.outHeight;++L)for(var P=R+L*k.strides[2],U=L*h.strideHeight-x,z=0;z<d;++z){var W=U+z*g;if(!(W<0||W>=h.inHeight))for(var V=O+z*E[1],G=B+W*C[2],j=0;j<h.outWidth;++j)for(var H=P+j*h.outChannels,X=j*h.strideWidth-w,q=0;q<p;++q){var Y=X+q*m;if(!(Y<0||Y>=h.inWidth))for(var K=V+q*E[2],Q=G+Y*h.inChannels,J=K,$=0;$<h.inChannels;++$){for(var tt=I[Q+$],et=0;et<h.outChannels;++et)_[H+et]+=tt*S[J+et];J+=h.outChannels}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}}},82751:function(t,e,n){"use strict";n.d(e,{$:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.o2y,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=e.dy,c=o.strides,l=o.pad,h=o.filterShape;(0,i.H)([s,u],"conv3dBackpropFilterV2");for(var f=a.D5U.computeStrides(s.shape),d=a.D5U.computeStrides(u.shape),p=a.Wap.computeConv3DInfo(s.shape,h,c,1,l),v=p.strideDepth,g=p.strideHeight,m=p.strideWidth,y=p.filterDepth,b=p.filterHeight,w=p.filterWidth,x=new a.YDk(p.filterShape,"float32"),k=x.values,I=(0,r.Z)(x.strides,4),S=I[0],_=I[1],C=I[2],E=I[3],A=n.data.get(u.dataId).values,T=(0,r.Z)(d,4),N=T[0],D=T[1],R=T[2],Z=T[3],M=n.data.get(s.dataId).values,F=(0,r.Z)(f,4),O=F[0],B=F[1],L=F[2],P=F[3],U=p.padInfo.front,z=p.padInfo.left,W=p.padInfo.top,V=0;V<y;++V)for(var G=Math.max(0,Math.ceil((U-V)/v)),j=Math.min(p.outDepth,(p.inDepth+U-V)/v),H=V*S,X=0;X<b;++X)for(var q=Math.max(0,Math.ceil((W-X)/g)),Y=Math.min(p.outHeight,(p.inHeight+W-X)/g),K=X*_+H,Q=0;Q<w;++Q)for(var J=Math.max(0,Math.ceil((z-Q)/m)),$=Math.min(p.outWidth,(p.inWidth+z-Q)/m),tt=Q*C+K,et=0;et<p.inChannels;++et)for(var nt=et*E+tt,rt=0;rt<p.outChannels;++rt){for(var at=0,it=0;it<p.batchSize;++it)for(var ot=it*O,st=it*N,ut=G;ut<j;++ut)for(var ct=(V+ut*v-U)*B+ot,lt=ut*D+st,ht=q;ht<Y;++ht)for(var ft=(X+ht*g-W)*L+ct,dt=ht*R+lt,pt=J;pt<$;++pt){var vt=pt*Z+dt;at+=M[(Q+pt*m-z)*P+ft+et]*A[vt+rt]}k[nt+rt]=at}return n.makeTensorInfo(x.shape,x.dtype,x.values)}}},68617:function(t,e,n){"use strict";n.d(e,{n:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.ik2,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.filter,c=o.pad,l=o.strides,h=o.inputShape;(0,i.H)([s],"conv3dBackpropInputV2");for(var f=a.D5U.computeStrides(s.shape),d=a.D5U.computeStrides(u.shape),p=a.Wap.computeConv3DInfo(h,u.shape,l,1,c),v=new a.YDk(p.inShape,"float32"),g=v.values,m=(0,r.Z)(v.strides,4),y=m[0],b=m[1],w=m[2],x=m[3],k=n.data.get(s.dataId).values,I=(0,r.Z)(f,4),S=I[0],_=I[1],C=I[2],E=I[3],A=n.data.get(u.dataId).values,T=(0,r.Z)(d,4),N=T[0],D=T[1],R=T[2],Z=T[3],M=p.batchSize,F=p.filterDepth,O=p.filterHeight,B=p.filterWidth,L=p.inChannels,P=p.inDepth,U=p.inHeight,z=p.inWidth,W=p.outChannels,V=p.outDepth,G=p.outHeight,j=p.outWidth,H=p.strideDepth,X=p.strideHeight,q=p.strideWidth,Y=F-1-p.padInfo.front,K=O-1-p.padInfo.top,Q=B-1-p.padInfo.left,J=0;J<M;++J)for(var $=0;$<L;++$)for(var tt=0;tt<P;++tt)for(var et=tt-Y,nt=Math.max(0,Math.ceil(et/H)),rt=Math.min(V,(F+et)/H),at=0;at<U;++at)for(var it=at-K,ot=Math.max(0,Math.ceil(it/X)),st=Math.min(G,(O+it)/X),ut=0;ut<z;++ut){for(var ct=ut-Q,lt=Math.max(0,Math.ceil(ct/q)),ht=Math.min(j,(B+ct)/q),ft=0,dt=nt;dt<rt;++dt)for(var pt=dt*H-et,vt=ot;vt<st;++vt)for(var gt=vt*X-it,mt=lt;mt<ht;++mt)for(var yt=S*J+_*dt+C*vt+E*mt,bt=N*(F-1-pt)+D*(O-1-gt)+R*(B-1-(mt*q-ct))+Z*$,wt=0;wt<W;++wt){ft+=k[yt+wt]*A[bt+wt]}g[y*J+b*tt+w*at+x*ut+$]=ft}return n.makeTensorInfo(v.shape,v.dtype,v.values)}}},39029:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.mc4,(function(t){return Math.cos(t)})),i={kernelName:r.mc4,backendName:"cpu",kernelFunc:a}},61603:function(t,e,n){"use strict";n.d(e,{q:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.TR1,(function(t){return Math.cosh(t)})),i={kernelName:r.TR1,backendName:"cpu",kernelFunc:a}},51963:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(29439),a=n(87884);var i={kernelName:a.VcC,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.backend,i=t.attrs,o=e.image,s=e.boxes,u=e.boxInd,c=i.cropSize,l=i.method,h=i.extrapolationValue,f=(0,r.Z)(o.shape,4),d=f[0],p=f[1],v=f[2],g=f[3],m=s.shape[0],y=(0,r.Z)(c,2),b=y[0],w=y[1],x=(0,a.f3b)([m,b,w,g],"float32"),k=n.data.get(s.dataId).values,I=n.data.get(u.dataId).values,S=n.data.get(o.dataId).values,_=a.D5U.computeStrides(o.shape),C=a.D5U.computeStrides(x.shape),E=0;E<m;E++){var A=4*E,T=k[A],N=k[A+1],D=k[A+2],R=k[A+3],Z=I[E];if(!(Z>=d))for(var M=b>1?(D-T)*(p-1)/(b-1):0,F=w>1?(R-N)*(v-1)/(w-1):0,O=0;O<b;O++){var B=b>1?T*(p-1)+O*M:.5*(T+D)*(p-1);if(B<0||B>p-1)for(var L=0;L<w;L++)for(var P=0;P<g;P++){var U=P+L*C[2]+O*C[1]+E*C[0];x.values[U]=h}else if("bilinear"===l)for(var z=Math.floor(B),W=Math.ceil(B),V=B-z,G=0;G<w;G++){var j=w>1?N*(v-1)+G*F:.5*(N+R)*(v-1);if(j<0||j>v-1)for(var H=0;H<g;H++){var X=H+G*C[2]+O*C[1]+E*C[0];x.values[X]=h}else for(var q=Math.floor(j),Y=Math.ceil(j),K=j-q,Q=0;Q<g;Q++){var J=Q+q*_[2]+z*_[1]+Z*_[0],$=S[J],tt=S[J=Q+Y*_[2]+z*_[1]+Z*_[0]],et=S[J=Q+q*_[2]+W*_[1]+Z*_[0]],nt=$+(tt-$)*K,rt=et+(S[J=Q+Y*_[2]+W*_[1]+Z*_[0]]-et)*K;J=Q+G*C[2]+O*C[1]+E*C[0],x.values[J]=nt+(rt-nt)*V}}else for(var at=0;at<w;++at){var it=w>1?N*(v-1)+at*F:.5*(N+R)*(v-1);if(it<0||it>v-1)for(var ot=0;ot<g;ot++){var st=ot+at*C[2]+O*C[1]+E*C[0];x.values[st]=h}else for(var ut=Math.round(it),ct=Math.round(B),lt=0;lt<g;lt++){var ht=lt+ut*_[2]+ct*_[1]+Z*_[0],ft=lt+at*C[2]+O*C[1]+E*C[0];x.values[ft]=S[ht]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}}},20793:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(87884),a=n(23193),i=n(65257);var o={kernelName:r.Byc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.axis,c=o.exclusive,l=o.reverse;(0,a.H)(s,"cumprod");var h=r.Wap.getAxesPermutation([u],s.shape.length),f=s;null!=h&&(f=(0,i.p)({inputs:{x:s},backend:n,attrs:{perm:h}}));var d=r.Wap.getInnerMostAxes(1,s.shape.length)[0];if(d!==f.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(f.shape.length-1," but got axis=").concat(d));for(var p=(0,r.x8V)(f.dtype,"int32"),v=r.D5U.makeOnesTypedArray(r.D5U.sizeFromShape(f.shape),p),g=n.data.get(f.dataId).values,m=f.shape[f.shape.length-1],y=l?function(t,e){return t+m-e-1}:function(t,e){return t+e},b=0;b<g.length;b+=m)for(var w=0;w<m;w++){var x=y(b,w);if(0===w)v[x]=c?1:g[x];else{var k=y(b,w-1);v[x]=c?g[k]*v[k]:g[x]*v[k]}}var I=n.makeTensorInfo(f.shape,p,v);if(null!=h){var S=r.Wap.getUndoAxesPermutation(h),_=(0,i.p)({inputs:{x:I},backend:n,attrs:{perm:S}});return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(f),_}return I}}},33277:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(87884),a=n(23193),i=n(65257);var o={kernelName:r.iHb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.axis,c=o.exclusive,l=o.reverse;(0,a.H)(s,"cumsum");var h=r.Wap.getAxesPermutation([u],s.shape.length),f=s;null!=h&&(f=(0,i.p)({inputs:{x:s},backend:n,attrs:{perm:h}}));var d=r.Wap.getInnerMostAxes(1,s.shape.length)[0];if(d!==f.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(f.shape.length-1," but got axis=").concat(d));for(var p=(0,r.x8V)(f.dtype,"int32"),v=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(f.shape),p),g=n.data.get(f.dataId).values,m=f.shape[f.shape.length-1],y=l?function(t,e){return t+m-e-1}:function(t,e){return t+e},b=0;b<g.length;b+=m)for(var w=0;w<m;w++){var x=y(b,w);if(0===w)v[x]=c?0:g[x];else{var k=y(b,w-1);v[x]=c?g[k]+v[k]:g[x]+v[k]}}var I=n.makeTensorInfo(f.shape,p,v);if(null!=h){var S=r.Wap.getUndoAxesPermutation(h),_=(0,i.p)({inputs:{x:I},backend:n,attrs:{perm:S}});return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(f),_}return I}}},98356:function(t,e,n){"use strict";n.d(e,{R:function(){return i}});var r=n(87884),a=n(73737);var i={kernelName:r.QRR,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=e.weights,s=r.size,u=r.binaryOutput;if(1===i.shape.length){var c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,h=(0,a.W)(c,l,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,h)}if(2===i.shape.length){var f=n.bufferSync(i),d=n.bufferSync(o),p=(0,a.i)(f,d,s,u);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(i.shape.length,"."))}}},77:function(t,e,n){"use strict";n.d(e,{d:function(){return a}});var r=n(87884);var a={kernelName:r.T0n,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.blockSize,s=a.dataFormat;r.D5U.assert("NHWC"===s,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s)}));for(var u=i.shape[0],c=i.shape[1],l=i.shape[2],h=i.shape[3],f=c*o,d=l*o,p=h/(o*o),v=n.data.get(i.dataId).values,g=new Float32Array(u*f*d*p),m=0,y=0;y<u;++y)for(var b=0;b<f;++b)for(var w=Math.floor(b/o),x=b%o,k=0;k<d;++k)for(var I=Math.floor(k/o),S=(x*o+k%o)*p,_=0;_<p;++_){var C=_+S+h*(I+l*(w+c*y));g[m++]=v[C]}return n.makeTensorInfo([u,f,d,p],i.dtype,g)}}},99360:function(t,e,n){"use strict";n.d(e,{X:function(){return o},p:function(){return i}});var r=n(87884),a=n(23193);function i(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.filter,u=i.strides,c=i.pad,l=i.dilations,h=i.dimRoundingMode;(0,a.H)([o,s],"depthwiseConv2DNative");var f=r.D5U.computeStrides(o.shape),d=r.D5U.computeStrides(s.shape),p=l;null==p&&(p=[1,1]),r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(u,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(p,"'")}));for(var v=r.Wap.computeConv2DInfo(o.shape,s.shape,u,p,c,h,!0),g=v.filterHeight,m=v.filterWidth,y=v.dilationHeight,b=v.dilationWidth,w=v.padInfo,x=w.left,k=w.top,I=v.outChannels/v.inChannels,S=new r.YDk(v.outShape,o.dtype),_=n.data.get(o.dataId).values,C=n.data.get(s.dataId).values,E=S.values,A=0;A<v.batchSize;++A)for(var T=A*f[0],N=A*S.strides[0],D=0;D<v.outHeight;++D)for(var R=N+D*S.strides[1],Z=D*v.strideHeight-k,M=0;M<g;++M){var F=Z+M*y;if(!(F<0||F>=v.inHeight))for(var O=M*d[0],B=T+F*f[1],L=0;L<v.outWidth;++L)for(var P=R+L*S.strides[2],U=L*v.strideWidth-x,z=0;z<m;++z){var W=U+z*b;if(!(W<0||W>=v.inWidth))for(var V=O+z*d[1],G=B+W*v.inChannels,j=P,H=V,X=0;X<v.inChannels;++X){for(var q=_[G+X],Y=0;Y<I;++Y)E[j+Y]+=q*C[H+Y];j+=I,H+=I}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}var o={kernelName:r.cie,backendName:"cpu",kernelFunc:i}},55413:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.sL$,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.dy,u=i.strides,c=i.dilations,l=i.pad,h=i.dimRoundingMode,f=i.filterShape;(0,a.H)([o,s],"depthwiseConv2dNativeBackpropFilter");for(var d=r.Wap.computeConv2DInfo(o.shape,f,u,c,l,h,!0),p=d.strideHeight,v=d.strideWidth,g=d.filterHeight,m=d.filterWidth,y=new r.YDk(d.filterShape,"float32"),b=d.padInfo.left,w=d.padInfo.top,x=d.outChannels/d.inChannels,k=n.data.get(o.dataId).values,I=new r.YDk(o.shape,o.dtype,k),S=n.data.get(s.dataId).values,_=new r.YDk(s.shape,s.dtype,S),C=0;C<g;++C)for(var E=Math.max(0,Math.ceil((w-C)/p)),A=Math.min(d.outHeight,(d.inHeight+w-C)/p),T=0;T<m;++T)for(var N=Math.max(0,Math.ceil((b-T)/v)),D=Math.min(d.outWidth,(d.inWidth+b-T)/v),R=0;R<d.outChannels;++R){for(var Z=Math.trunc(R/x),M=R%x,F=0,O=0;O<d.batchSize;++O)for(var B=E;B<A;++B)for(var L=C+B*p-w,P=N;P<D;++P){var U=T+P*v-b;F+=I.get(O,L,U,Z)*_.get(O,B,P,R)}y.set(F,C,T,Z,M)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}}},64811:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.y7R,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.filter,c=o.strides,l=o.dilations,h=o.pad,f=o.dimRoundingMode,d=o.inputShape;(0,i.H)([s,u],"depthwiseConv2DNativeBackpropInput");for(var p=a.D5U.computeStrides(s.shape),v=a.D5U.computeStrides(u.shape),g=a.Wap.computeConv2DInfo(d,u.shape,c,l,h,f,!0),m=new a.YDk(g.inShape,"float32"),y=m.values,b=(0,r.Z)(m.strides,3),w=b[0],x=b[1],k=b[2],I=n.data.get(s.dataId).values,S=(0,r.Z)(p,3),_=S[0],C=S[1],E=S[2],A=n.data.get(u.dataId).values,T=(0,r.Z)(v,3),N=T[0],D=T[1],R=T[2],Z=g.batchSize,M=g.filterHeight,F=g.filterWidth,O=g.inChannels,B=g.inHeight,L=g.inWidth,P=g.outChannels,U=g.outHeight,z=g.outWidth,W=g.strideHeight,V=g.strideWidth,G=M-1-g.padInfo.top,j=F-1-g.padInfo.left,H=P/O,X=0;X<Z;++X)for(var q=0;q<O;++q)for(var Y=0;Y<B;++Y)for(var K=Y-G,Q=Math.max(0,Math.ceil(K/W)),J=Math.min(U,(M+K)/W),$=0;$<L;++$){for(var tt=$-j,et=Math.max(0,Math.ceil(tt/V)),nt=Math.min(z,(F+tt)/V),rt=0,at=Q;at<J;++at)for(var it=at*W-K,ot=et;ot<nt;++ot)for(var st=_*X+C*at+E*ot,ut=N*(M-1-it)+D*(F-1-(ot*V-tt))+R*q,ct=0;ct<H;++ct){rt+=I[st+(q*H+ct)]*A[ut+ct]}y[w*X+x*Y+k*$+q]=rt}return n.makeTensorInfo(m.shape,m.dtype,m.values)}}},16146:function(t,e,n){"use strict";n.d(e,{y:function(){return i}});var r=n(93433),a=n(87884);var i={kernelName:a.$w,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.backend,i=e.x,o=a.D5U.sizeFromShape(i.shape),s=n.data.get(i.dataId).values,u=(0,a.f3b)([o,o],i.dtype),c=u.values,l=0;l<s.length;l++)c[l*o+l]=s[l];var h=[].concat((0,r.Z)(i.shape),(0,r.Z)(i.shape));return n.makeTensorInfo(h,u.dtype,u.values)}}},15508:function(t,e,n){"use strict";n.d(e,{T:function(){return a}});var r=n(87884),a={kernelName:r.p4S,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=a.strides,u=a.pad,c=a.dilations,l=n,h=l.data.get(i.dataId).values,f=i.shape.length,d=l.data.get(o.dataId).values,p=o.shape.length,v=r.Wap.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),g=v.batchSize,m=v.inHeight,y=v.inWidth,b=v.inChannels,w=v.outHeight,x=v.outWidth,k=v.padInfo,I=v.strideHeight,S=v.strideWidth,_=v.filterHeight,C=v.filterWidth,E=v.dilationHeight,A=v.dilationWidth,T=v.outShape,N=r.D5U.sizeFromShape(T),D=T.length,R=r.D5U.getArrayFromDType(i.dtype,N),Z=0;Z<g;++Z)for(var M=0;M<w;++M)for(var F=M*I-k.top,O=0;O<x;++O)for(var B=O*S-k.left,L=0;L<b;++L){for(var P=Number.MIN_SAFE_INTEGER,U=0;U<_;++U){var z=F+U*E;if(z>=0&&z<m)for(var W=0;W<C;++W){var V=B+W*A;if(V>=0&&V<y){var G=r.D5U.locToIndex([Z,z,V,L],f,r.D5U.computeStrides(i.shape)),j=r.D5U.locToIndex([U,W,L],p,r.D5U.computeStrides(o.shape)),H=h[G]+d[j];H>P&&(P=H)}}}R[r.D5U.locToIndex([Z,M,O,L],D,r.D5U.computeStrides(T))]=P}return{dataId:l.write(r.D5U.toTypedArray(R,i.dtype),T,i.dtype),shape:T,dtype:i.dtype}}}},40949:function(t,e,n){"use strict";n.d(e,{R:function(){return a}});var r=n(87884),a={kernelName:r.Vn9,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=e.dy,u=a.strides,c=a.pad,l=a.dilations,h=n,f=r.D5U.toNestedArray(i.shape,h.data.get(i.dataId).values),d=r.D5U.toNestedArray(o.shape,h.data.get(o.dataId).values),p=r.Wap.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",l),v=p.batchSize,g=p.inHeight,m=p.inWidth,y=p.inChannels,b=p.outHeight,w=p.outWidth,x=p.padInfo,k=p.strideHeight,I=p.strideWidth,S=p.filterHeight,_=p.filterWidth,C=p.dilationHeight,E=p.dilationWidth,A=p.outShape;r.D5U.assert(s.rank===A.length,(function(){return"Error in ".concat(r.Vn9,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(s.rank)}));for(var T=r.D5U.toNestedArray(A,h.data.get(s.dataId).values),N=r.D5U.makeZerosNestedTypedArray(o.shape,o.dtype),D=0;D<v;++D)for(var R=0;R<b;++R)for(var Z=R*k-x.top,M=0;M<w;++M)for(var F=M*I-x.left,O=0;O<y;++O){for(var B=Number.MIN_SAFE_INTEGER,L=0,P=0,U=0;U<S;++U){var z=Z+U*C;if(z>=0&&z<g)for(var W=0;W<_;++W){var V=F+W*E;if(V>=0&&V<m){var G=f[D][z][V][O]+d[U][W][O];G>B&&(B=G,L=U,P=W)}}}N[L][P][O]+=T[D][R][M][O]}return{dataId:h.write(r.D5U.toTypedArray(N,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}}},39332:function(t,e,n){"use strict";n.d(e,{B:function(){return a}});var r=n(87884),a={kernelName:r.ekb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=e.dy,u=a.strides,c=a.pad,l=a.dilations,h=n,f=r.D5U.toNestedArray(i.shape,h.data.get(i.dataId).values),d=r.D5U.toNestedArray(o.shape,h.data.get(o.dataId).values),p=r.Wap.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",l),v=p.batchSize,g=p.inHeight,m=p.inWidth,y=p.inChannels,b=p.outHeight,w=p.outWidth,x=p.padInfo,k=p.strideHeight,I=p.strideWidth,S=p.filterHeight,_=p.filterWidth,C=p.dilationHeight,E=p.dilationWidth,A=p.outShape;r.D5U.assert(s.rank===A.length,(function(){return"Error in ".concat(r.ekb,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(s.rank)}));for(var T=r.D5U.toNestedArray(A,h.data.get(s.dataId).values),N=r.D5U.makeZerosNestedTypedArray(i.shape,i.dtype),D=0;D<v;++D)for(var R=0;R<b;++R)for(var Z=R*k-x.top,M=0;M<w;++M)for(var F=M*I-x.left,O=0;O<y;++O){for(var B=Number.MIN_SAFE_INTEGER,L=Z<0?0:Z,P=F<0?0:F,U=0;U<S;++U){var z=Z+U*C;if(z>=0&&z<g)for(var W=0;W<_;++W){var V=F+W*E;if(V>=0&&V<m){var G=f[D][z][V][O]+d[U][W][O];G>B&&(B=G,L=z,P=V)}}}N[D][L][P][O]+=T[D][R][M][O]}return{dataId:h.write(r.D5U.toTypedArray(N,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}}},61849:function(t,e,n){"use strict";n.d(e,{G:function(){return c}});var r=n(37762),a=n(87884),i=n(18244),o=n(28899),s=n(41538),u=n(65257);var c={kernelName:a.$g6,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,c=t.attrs.equation,l=e,h=a.Wap.decodeEinsumEquation(c,l.length),f=h.allDims,d=h.summedDims,p=h.idDims;a.Wap.checkEinsumDimSizes(f.length,p,l);for(var v=a.Wap.getEinsumComputePath(d,p),g=v.path,m=v.steps,y=m.length,b=null,w=f.length,x=[],k=0;k<y;++k){var I,S=(0,r.Z)(m[k]);try{for(S.s();!(I=S.n()).done;){var _=I.value,C=a.Wap.getEinsumPermutation(w,p[_]),E=C.permutationIndices,A=C.expandDims,T=void 0;a.Wap.isIdentityPermutation(E)?T=l[_]:(T=(0,u.p)({inputs:{x:l[_]},backend:n,attrs:{perm:E}}),x.push(T));for(var N=T.shape.slice(),D=0;D<A.length;++D)N.splice(A[D],0,1);a.D5U.arraysEqual(T.shape,N)||(T=(0,o.X)({inputs:{x:T},backend:n,attrs:{shape:N}}),x.push(T)),null===b?b=T:(b=(0,i.Jp)({inputs:{a:T,b:b},backend:n}),x.push(b))}}catch(F){S.e(F)}finally{S.f()}k<y-1&&(g[k]>=0&&(b=(0,s.S)({inputs:{x:b},backend:n,attrs:{axis:g[k]-(f.length-w),keepDims:!1}}),x.push(b)),w--)}for(var R=0,Z=x;R<Z.length;R++){var M=Z[R];M!==b&&n.disposeIntermediateTensorInfo(M)}return b}}},37742:function(t,e,n){"use strict";n.d(e,{$:function(){return i},p:function(){return a}});var r=n(87884),a=(0,n(91844).A)(r.SX0,(function(t){return t>=0?t:Math.exp(t)-1})),i={kernelName:r.SX0,backendName:"cpu",kernelFunc:a}},45045:function(t,e,n){"use strict";n.d(e,{q:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.HEU,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=e.dy,o=e.y;(0,a.H)([i,o],"eluGrad");for(var s=new Float32Array(r.D5U.sizeFromShape(o.shape)),u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,l=0;l<u.length;++l){var h=u[l];s[l]=h>=1?c[l]:c[l]*(h+1)}return n.makeTensorInfo(o.shape,"float32",s)}}},68116:function(t,e,n){"use strict";n.d(e,{Dg:function(){return s},Kx:function(){return u},tW:function(){return o}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t===e?1:0})),s=(0,i.j)(r.hdR,o,null,"bool"),u={kernelName:r.hdR,backendName:"cpu",kernelFunc:s}},18072:function(t,e,n){"use strict";n.d(e,{F:function(){return f}});var r=n(87884),a=n(91844),i=r.Wap.ERF_P,o=r.Wap.ERF_A1,s=r.Wap.ERF_A2,u=r.Wap.ERF_A3,c=r.Wap.ERF_A4,l=r.Wap.ERF_A5,h=(0,a.A)(r.Omj,(function(t){var e=Math.sign(t),n=Math.abs(t),r=1/(1+i*n);return e*(1-((((l*r+c)*r+u)*r+s)*r+o)*r*Math.exp(-n*n))})),f={kernelName:r.Omj,backendName:"cpu",kernelFunc:h}},66880:function(t,e,n){"use strict";n.d(e,{Qq:function(){return s},Ro:function(){return o},SX:function(){return u}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return Math.exp(t)})),s=(0,i.O)(r.NEP,o,"float32"),u={kernelName:r.NEP,backendName:"cpu",kernelFunc:s}},99131:function(t,e,n){"use strict";n.d(e,{d:function(){return i},p:function(){return o}});var r=n(87884),a=n(28899);function i(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.input,s=i.dim,u=o.shape.length,c=o.shape.slice(),l=s;return s<0&&(r.D5U.assert(-(u+1)<=s,(function(){return"Axis must be in the interval [".concat(-(u+1),", ").concat(u,"]")})),l=u+s+1),c.splice(l,0,1),(0,a.X)({inputs:{x:o},backend:n,attrs:{shape:c}})}var o={kernelName:r.YFo,backendName:"cpu",kernelFunc:i}},21354:function(t,e,n){"use strict";n.d(e,{OF:function(){return o},Vu:function(){return u}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return Math.expm1(t)})),s=(0,i.O)(r.Y0y,o),u={kernelName:r.Y0y,backendName:"cpu",kernelFunc:s}},75268:function(t,e,n){"use strict";n.d(e,{r:function(){return o}});var r=n(87884),a=n(71618),i=n(28899);var o={kernelName:r.vwp,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=e.input,s=r.D5U.sizeFromShape(o.shape),u=o.shape[o.shape.length-1],c=s/u,l=(0,i.X)({inputs:{x:o},backend:n,attrs:{shape:[c,u]}}),h=(0,a.n)(l,!1,n),f=(0,i.X)({inputs:{x:h},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),f}}},42338:function(t,e,n){"use strict";n.d(e,{h:function(){return a},v:function(){return i}});var r=n(87884);function a(t){var e=t.backend,n=t.attrs,a=n.shape,i=n.value,o=n.dtype||r.D5U.inferDtype(i),s=r.D5U.getArrayFromDType(o,r.D5U.sizeFromShape(a));return function(t,e,n){t.fill(e)}(s,i),e.makeTensorInfo(a,o,s)}var i={kernelName:r.deh,backendName:"cpu",kernelFunc:a}},16404:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(29439),a=n(87884),i={kernelName:a.Uyb,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=(t.attrs,t.backend),i=e.image,o=n,s=a.D5U.getTypedArrayFromDType(i.dtype,a.D5U.sizeFromShape(i.shape)),u=(0,r.Z)(i.shape,4),c=u[0],l=u[1],h=u[2],f=u[3],d=o.data.get(i.dataId).values,p=0;p<c;p++)for(var v=p*h*l*f,g=0;g<l;g++)for(var m=g*(h*f),y=0;y<h;y++)for(var b=y*f,w=0;w<f;w++){var x=Math.round(h-y-1),k=v+m+b+w,I=d[k];if(x>=0&&x<h)I=d[v+m+x*f+w];s[k]=I}return{dataId:o.write(s,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}}},97224:function(t,e,n){"use strict";n.d(e,{Ao:function(){return u},r6:function(){return o}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return Math.floor(t)})),s=(0,i.O)(r.OR,o),u={kernelName:r.OR,backendName:"cpu",kernelFunc:s}},19025:function(t,e,n){"use strict";n.d(e,{EE:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return Math.floor(t/e)})),s=(0,i.j)(r.jeX,o,null,"int32"),u={kernelName:r.jeX,backendName:"cpu",kernelFunc:s}},44585:function(t,e,n){"use strict";n.d(e,{L:function(){return u}});var r=n(87884),a=n(6904),i=n(25589),o=n(51526),s=n(28899);var u={kernelName:r._V0,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,u=e.x,c=e.filter,l=e.bias,h=e.preluActivationWeights,f=r.strides,d=r.pad,p=r.dataFormat,v=r.dilations,g=r.dimRoundingMode,m=r.activation,y=r.leakyreluAlpha,b=(0,o.N)({inputs:{x:u,filter:c},backend:n,attrs:{strides:f,pad:d,dataFormat:p,dilations:v,dimRoundingMode:g}});if(l){var w=b;if("NCHW"===p&&1===l.shape.length&&1!==l.shape[0]){var x=(0,s.X)({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});b=(0,i.IH)({inputs:{a:b,b:x},backend:n}),n.disposeIntermediateTensorInfo(x)}else b=(0,i.IH)({inputs:{a:b,b:l},backend:n});n.disposeIntermediateTensorInfo(w)}if(m){var k=b;if("NCHW"===p&&"prelu"===m&&1===h.shape.length&&1!==h.shape[0]){var I=(0,s.X)({inputs:{x:h},backend:n,attrs:{shape:[h.shape[0],1,1]}});b=(0,a.Q)(n,b,m,I,y),n.disposeIntermediateTensorInfo(I)}else b=(0,a.Q)(n,b,m,h,y);n.disposeIntermediateTensorInfo(k)}return b}}},22476:function(t,e,n){"use strict";n.d(e,{X:function(){return s}});var r=n(87884),a=n(6904),i=n(25589),o=n(99360);var s={kernelName:r.luS,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,s=e.x,u=e.filter,c=e.bias,l=e.preluActivationWeights,h=r.strides,f=r.pad,d=r.dataFormat,p=r.dilations,v=r.dimRoundingMode,g=r.activation,m=r.leakyreluAlpha,y=(0,o.p)({inputs:{x:s,filter:u},backend:n,attrs:{strides:h,pad:f,dataFormat:d,dilations:p,dimRoundingMode:v}});if(c){var b=y;y=(0,i.IH)({inputs:{a:y,b:c},backend:n}),n.disposeIntermediateTensorInfo(b)}if(g){var w=y;y=(0,a.Q)(n,y,g,l,m),n.disposeIntermediateTensorInfo(w)}return y}}},99307:function(t,e,n){"use strict";n.d(e,{o:function(){return o}});var r=n(29439),a=n(87884),i=n(34351);var o={kernelName:a.q1x,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=e.params,s=e.indices,u=a.D5U.sizeFromShape(o.shape),c=s.shape,l=c[c.length-1],h=a.Wap.prepareAndValidate(o,s),f=(0,r.Z)(h,4),d=f[0],p=f[1],v=f[2],g=f[3];if(0===p)return n.makeTensorInfo(d,o.dtype,[]);var m=n.data.get(s.dataId).values,y=n.bufferSync(o),b=(0,i.m)(m,y,o.dtype,p,l,v,g,o.shape,u);return n.makeTensorInfo(d,o.dtype,b.values)}}},34351:function(t,e,n){"use strict";n.d(e,{m:function(){return i}});var r=n(93433),a=n(87884);function i(t,e,n,i,o,s,u,c,l){for(var h=(0,a.f3b)([i,s],n),f=0;f<i;f++){for(var d=[],p=0,v=0;v<o;v++){var g=t[f*o+v];p+=g*u[v],d.push(g)}if(p<0||p>=l/s)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(c));for(var m=0;m<s;m++)h.values[f*s+m]=e.get.apply(e,(0,r.Z)(e.indexToLoc(p*s+m)))}return h}},72003:function(t,e,n){"use strict";n.d(e,{c:function(){return s}});var r=n(87884),a=n(23193),i=n(82666),o=n(28899);var s={kernelName:r.qi_,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=e.indices,l=s.axis,h=s.batchDims;(0,a.H)([u,c],"gatherV2");for(var f=r.D5U.parseAxisParam(l,u.shape)[0],d=n.data.get(c.dataId).values,p=u.shape[f],v=function(){var t=d[g];r.D5U.assert(t<=p-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(p-1,"]")}))},g=0;g<d.length;++g)v();var m=h;null==h&&(m=0);var y=r.D5U.sizeFromShape(c.shape),b=r.Wap.segment_util.collectGatherOpShapeInfo(u,c,f,m),w=(0,o.X)({inputs:{x:u},backend:n,attrs:{shape:[b.batchSize,b.outerSize,b.dimSize,b.sliceSize]}}),x=(0,o.X)({inputs:{x:c},backend:n,attrs:{shape:[b.batchSize,y/b.batchSize]}}),k=[b.batchSize,b.outerSize,y/b.batchSize,b.sliceSize],I=n.bufferSync(x),S=n.bufferSync(w),_=(0,i.i)(S,I,k);return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(b.outputShape,_.dtype,_.values)}}},82666:function(t,e,n){"use strict";n.d(e,{i:function(){return a}});var r=n(87884);function a(t,e,n){for(var a=(0,r.f3b)(n,t.dtype),i=0;i<a.size;++i){var o=a.indexToLoc(i).slice(),s=o[0],u=o[2],c=e.locToIndex([s,u]);o[2]=e.values[c];var l=t.locToIndex(o);0<=l&&l<t.values.length&&(a.values[i]=t.values[l])}return a}},69075:function(t,e,n){"use strict";n.d(e,{Ce:function(){return u},o:function(){return o}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t>e?1:0})),s=(0,i.j)(r.iZT,o,null,"bool"),u={kernelName:r.iZT,backendName:"cpu",kernelFunc:s}},26985:function(t,e,n){"use strict";n.d(e,{HL:function(){return o},V:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t>=e?1:0})),s=(0,i.j)(r.Acj,o,null,"bool"),u={kernelName:r.Acj,backendName:"cpu",kernelFunc:s}},19174:function(t,e,n){"use strict";n.d(e,{K:function(){return o}});var r=n(87884),a=n(71618),i=n(28899);var o={kernelName:r.Qg5,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=e.input,s=r.D5U.sizeFromShape(o.shape),u=o.shape[o.shape.length-1],c=s/u,l=(0,i.X)({inputs:{x:o},backend:n,attrs:{shape:[c,u]}}),h=(0,a.n)(l,!0,n),f=(0,i.X)({inputs:{x:h},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),f}}},59090:function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}n.d(e,{I:function(){return a},y:function(){return r}});var a={kernelName:n(87884).iJz,backendName:"cpu",kernelFunc:r}},95845:function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}n.d(e,{K:function(){return a},a:function(){return r}});var a={kernelName:n(87884).J_u,backendName:"cpu",kernelFunc:r}},26680:function(t,e,n){"use strict";n.d(e,{m:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.avt,(function(t){return Number.isFinite(t)?1:0}),"bool"),i={kernelName:r.avt,backendName:"cpu",kernelFunc:a}},44258:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.iWB,(function(t){return Math.abs(t)===1/0?1:0}),"bool"),i={kernelName:r.iWB,backendName:"cpu",kernelFunc:a}},60336:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.r7n,(function(t){return Number.isNaN(t)?1:0}),"bool"),i={kernelName:r.r7n,backendName:"cpu",kernelFunc:a}},2862:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.eZ0,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=i.depthRadius,u=i.bias,c=i.alpha,l=i.beta;(0,a.H)(o,"LRN");var h=o.shape[3],f=h-1,d=n.data.get(o.dataId).values,p=r.D5U.sizeFromShape(o.shape),v=new Float32Array(p);function g(t){for(var e=t%h,n=t-e+Math.max(0,e-s),r=t-e+Math.min(e+s,f),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<p;m++){var y=g(m),b=d[m]*Math.pow(u+c*y,-l);v[m]=b}return n.makeTensorInfo(o.shape,o.dtype,v)}}},24488:function(t,e,n){"use strict";n.d(e,{f:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.Hhh,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.y,u=e.dy,c=i.depthRadius,l=i.bias,h=i.alpha,f=i.beta;(0,a.H)(u,"LRNGrad");for(var d=r.D5U.sizeFromShape(u.shape),p=u.shape[3],v=n.data.get(u.dataId).values,g=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,y=new Float32Array(d),b=d,w=0;w<b;w++){for(var x=w%p,k=w-x+Math.max(0,x-c),I=w-x+Math.min(p,x+c+1),S=0,_=k;_<I;_++)S+=Math.pow(g[_],2);S=h*S+l;for(var C=k;C<I;C++){var E=-2*h*f*g[C]*m[w]/S;w===C&&(E+=Math.pow(S,-f)),E*=v[w],y[C]+=E}}return n.makeTensorInfo(u.shape,o.dtype,y)}}},76455:function(t,e,n){"use strict";n.d(e,{O:function(){return o},h:function(){return i}});var r=n(87884),a=n(23193);function i(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=i.alpha;(0,a.H)([o],"leakyRelu");for(var u=r.D5U.sizeFromShape(o.shape),c=n.data.get(o.dataId).values,l=r.D5U.getTypedArrayFromDType("float32",u),h=0;h<c.length;h++)l[h]=c[h]<0?s*c[h]:c[h];return n.makeTensorInfo(o.shape,"float32",l)}var o={kernelName:r.J$2,backendName:"cpu",kernelFunc:i}},39813:function(t,e,n){"use strict";n.d(e,{rO:function(){return o},zh:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t<e?1:0})),s=(0,i.j)(r.vtC,o,null,"bool"),u={kernelName:r.vtC,backendName:"cpu",kernelFunc:s}},18734:function(t,e,n){"use strict";n.d(e,{lx:function(){return o},m3:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t<=e?1:0})),s=(0,i.j)(r.CAk,o,null,"bool"),u={kernelName:r.CAk,backendName:"cpu",kernelFunc:s}},59243:function(t,e,n){"use strict";n.d(e,{j:function(){return i}});var r=n(87884),a=n(21491);var i={kernelName:r.e7N,backendName:"cpu",kernelFunc:function(t){var e=t.backend,n=t.attrs,r=n.start,i=n.stop,o=n.num,s=(0,a.b)(r,i,o);return e.makeTensorInfo([s.length],"float32",s)}}},21491:function(t,e,n){"use strict";n.d(e,{b:function(){return a}});var r=n(87884);function a(t,e,n){var a=(e-t)/(n-1),i=r.D5U.makeZerosTypedArray(n,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+a;return i}},68298:function(t,e,n){"use strict";n.d(e,{vX:function(){return o},xM:function(){return u}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return Math.log(t)})),s=(0,i.O)(r.ZbH,o),u={kernelName:r.ZbH,backendName:"cpu",kernelFunc:s}},63275:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.kU,(function(t){return Math.log1p(t)})),i={kernelName:r.kU,backendName:"cpu",kernelFunc:a}},60530:function(t,e,n){"use strict";n.d(e,{Er:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t&&e})),s=(0,i.j)(r.PYm,o,null,"bool"),u={kernelName:r.PYm,backendName:"cpu",kernelFunc:s}},65062:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.VfG,(function(t){return t?0:1}),"bool"),i={kernelName:r.VfG,backendName:"cpu",kernelFunc:a}},57433:function(t,e,n){"use strict";n.d(e,{vV:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t||e})),s=(0,i.j)(r.MZg,o,null,"bool"),u={kernelName:r.MZg,backendName:"cpu",kernelFunc:s}},61784:function(t,e,n){"use strict";n.d(e,{F:function(){return c},s:function(){return u}});var r=n(29439),a=n(87884),i=n(23193),o=n(4771),s=n(31103);function u(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.reductionIndices,h=u.keepDims,f=n,d=c.shape,p=d.length,v=a.D5U.parseAxisParam(l,d),g=v,m=a.Wap.getAxesPermutation(g,p),y=f.data.get(c.dataId).values;if(null!=m){for(var b=new Array(p),w=0;w<b.length;w++)b[w]=d[m[w]];y=(0,s.H)(y,d,c.dtype,m,b),g=a.Wap.getInnerMostAxes(g.length,p),d=b}(0,i.H)(c,"max"),a.Wap.assertAxesAreInnerMostDims("max",g,p);var x=a.Wap.computeOutAndReduceShapes(d,g),k=(0,r.Z)(x,2),I=k[0],S=k[1],_=a.D5U.sizeFromShape(S),C=(0,o.B)(y,_,I,c.dtype),E=f.write(C,I,c.dtype),A=I;h&&(A=a.Wap.expandShapeToKeepDim(I,v));return{dataId:E,shape:A,dtype:c.dtype}}var c={kernelName:a.YoZ,backendName:"cpu",kernelFunc:u}},8292:function(t,e,n){"use strict";n.d(e,{u:function(){return s}});var r=n(87884),a=n(23193),i=n(56703),o=n(59090);var s={kernelName:r.mTV,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x;(0,a.H)(u,"maxPool");var c=s.filterSize,l=s.strides,h=s.pad,f=s.dimRoundingMode;r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(l,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(l," and dilations '").concat(1,"'")}));var d,p=r.Wap.computePool2DInfo(u.shape,c,l,1,h,f);if(1===p.filterWidth&&1===p.filterHeight&&r.D5U.arraysEqual(p.inShape,p.outShape))d=(0,o.y)({inputs:{x:u},backend:n});else{var v=n.data.get(u.dataId).values,g=r.D5U.computeStrides(u.shape),m=(0,i.d_)(v,u.shape,u.dtype,g,p,"max");d=n.makeTensorInfo(p.outShape,u.dtype,m.values)}return d}}},26743:function(t,e,n){"use strict";n.d(e,{m:function(){return o}});var r=n(87884),a=n(23193),i=n(56703);var o={kernelName:r.OAf,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.filterSize,c=o.strides,l=o.pad,h=o.dimRoundingMode,f=o.dataFormat;(0,a.H)(s,"maxPool3d");var d=r.Wap.computePool3DInfo(s.shape,u,c,1,l,h,f),p=n.data.get(s.dataId).values,v=(0,i.Hc)(p,s.shape,s.dtype,r.D5U.computeStrides(s.shape),d,"max");return n.makeTensorInfo(v.shape,"float32",v.values)}}},38067:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(87884),a=n(23193),i=n(56703);var o={kernelName:r.OU7,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.input,c=o.filterSize,l=o.strides,h=o.pad,f=o.dimRoundingMode;(0,a.H)([s,u],"maxPool3DGrad");for(var d=r.Wap.computePool3DInfo(u.shape,c,l,1,h,f),p=n.bufferSync(u),v=(0,i.TW)(p,d),g=d.strideDepth,m=d.strideHeight,y=d.strideWidth,b=d.dilationDepth,w=d.dilationHeight,x=d.dilationWidth,k=d.effectiveFilterDepth,I=d.effectiveFilterHeight,S=d.effectiveFilterWidth,_=k-1-d.padInfo.front,C=S-1-d.padInfo.left,E=I-1-d.padInfo.top,A=(0,r.f3b)(u.shape,"float32"),T=n.bufferSync(s),N=0;N<d.batchSize;++N)for(var D=0;D<d.inChannels;++D)for(var R=0;R<d.inDepth;++R)for(var Z=0;Z<d.inHeight;++Z)for(var M=0;M<d.inWidth;++M){for(var F=R-_,O=Z-E,B=M-C,L=0,P=0;P<k;P+=b){var U=(F+P)/g;if(!(U<0||U>=d.outDepth||Math.floor(U)!==U))for(var z=0;z<I;z+=w){var W=(O+z)/m;if(!(W<0||W>=d.outHeight||Math.floor(W)!==W))for(var V=0;V<S;V+=x){var G=(B+V)/y;if(!(G<0||G>=d.outWidth||Math.floor(G)!==G)){var j=k*I*S-1-v.get(N,U,W,G,D)===P*I*S+z*S+V?1:0;if(0!==j)L+=T.get(N,U,W,G,D)*j}}}}A.set(L,N,R,Z,M,D)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}}},50005:function(t,e,n){"use strict";n.d(e,{f:function(){return o}});var r=n(87884),a=n(23193),i=n(56703);var o={kernelName:r.OV7,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.input,c=e.output,l=u;(0,a.H)([u,c],"maxPoolGrad");for(var h=o.filterSize,f=o.strides,d=o.pad,p=o.dimRoundingMode,v=r.Wap.computePool2DInfo(l.shape,h,f,1,d,p),g=n.data.get(l.dataId).values,m=(0,r.f3b)(v.outShape,l.dtype,(0,i.sF)(g,l.shape,l.dtype,v).values),y=v.strideHeight,b=v.strideWidth,w=v.dilationHeight,x=v.dilationWidth,k=v.effectiveFilterHeight,I=v.effectiveFilterWidth,S=I-1-v.padInfo.left,_=k-1-v.padInfo.top,C=(0,r.f3b)(l.shape,"float32"),E=n.data.get(s.dataId).values,A=(0,r.f3b)(s.shape,"float32",E),T=0;T<v.batchSize;++T)for(var N=0;N<v.inChannels;++N)for(var D=0;D<v.inHeight;++D)for(var R=0;R<v.inWidth;++R){for(var Z=D-_,M=R-S,F=0,O=0;O<k;O+=w){var B=(Z+O)/y;if(!(B<0||B>=v.outHeight||Math.floor(B)!==B))for(var L=0;L<I;L+=x){var P=(M+L)/b;if(!(P<0||P>=v.outWidth||Math.floor(P)!==P)){var U=k*I-1-m.get(T,B,P,N)===O*I+L?1:0;if(0!==U)F+=A.get(T,B,P,N)*U}}}C.set(F,T,D,R,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}}},69301:function(t,e,n){"use strict";n.d(e,{q:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(8585),s={kernelName:a.vFR,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,s=t.backend,u=e.x,c=n.filterSize,l=n.strides,h=n.pad,f=n.includeBatchInIndex,d=s;(0,i.H)(u,"MaxPoolWithArgmax");var p=d.data.get(u.dataId).values,v=a.Wap.computePool2DInfo(u.shape,c,l,[1,1],h),g=(0,o.V)(p,u.shape,u.dtype,f,v),m=(0,r.Z)(g,2),y=m[0],b=m[1],w=d.write(y,v.outShape,u.dtype),x=d.write(b,v.outShape,u.dtype);return[{dataId:w,shape:v.outShape,dtype:u.dtype},{dataId:x,shape:v.outShape,dtype:"int32"}]}}},8585:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var r=n(87884),a=n(56703);function i(t,e,n,i,o){var s=r.D5U.computeStrides(e),u=(0,a.d_)(t,e,n,s,o,"max"),c=(0,a.sF)(t,e,n,o,!0,i);return[u.values,c.values]}},4771:function(t,e,n){"use strict";n.d(e,{B:function(){return a}});var r=n(87884);function a(t,e,n,a){for(var i=r.D5U.getTypedArrayFromDType(a,r.D5U.sizeFromShape(n)),o=0;o<i.length;++o){for(var s=o*e,u=t[s],c=0;c<e;++c){var l=t[s+c];(Number.isNaN(l)||l>u)&&(u=l)}i[o]=u}return i}},89518:function(t,e,n){"use strict";n.d(e,{eJ:function(){return u},wS:function(){return o}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return Math.max(t,e)})),s=(0,i.j)(r.BMI,o),u={kernelName:r.BMI,backendName:"cpu",kernelFunc:s}},60124:function(t,e,n){"use strict";n.d(e,{$:function(){return s}});var r=n(87884),a=n(60570),i=n(88860),o=n(41538);var s={kernelName:r.q2K,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.axis,l=s.keepDims,h=r.D5U.parseAxisParam(c,u.shape),f=r.Wap.computeOutAndReduceShapes(u.shape,h)[1],d=r.D5U.sizeFromShape(f),p=[],v=n.makeTensorInfo([],"float32",new Float32Array([d]));p.push(v);var g=(0,a.pj)({inputs:{x:u},backend:n,attrs:{dtype:"float32"}});p.push(g);var m=(0,i.hi)({inputs:{a:g,b:v},backend:n});p.push(m);var y=(0,o.S)({inputs:{x:m},backend:n,attrs:{axis:c,keepDims:l}});return p.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),y}}},8484:function(t,e,n){"use strict";n.d(e,{L:function(){return u}});var r=n(29439),a=n(87884),i=n(23193),o=n(28899),s=n(65257);var u={kernelName:a.c17,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.axis,h=u.keepDims;(0,i.H)(c,"min");var f=a.D5U.parseAxisParam(l,c.shape),d=f,p=a.Wap.getAxesPermutation(d,c.shape.length),v=c;null!=p&&(v=(0,s.p)({inputs:{x:c},backend:n,attrs:{perm:p}}),d=a.Wap.getInnerMostAxes(d.length,c.shape.length)),a.Wap.assertAxesAreInnerMostDims("min",d,v.shape.length);for(var g=a.Wap.computeOutAndReduceShapes(v.shape,d),m=(0,r.Z)(g,2),y=m[0],b=m[1],w=a.D5U.sizeFromShape(b),x=a.D5U.makeZerosTypedArray(a.D5U.sizeFromShape(y),v.dtype),k=n.data.get(v.dataId).values,I=0;I<x.length;++I){for(var S=I*w,_=k[S],C=0;C<w;++C){var E=k[S+C];(Number.isNaN(E)||E<_)&&(_=E)}x[I]=_}null!=p&&n.disposeIntermediateTensorInfo(v);var A=n.makeTensorInfo(y,v.dtype,x);if(h){var T=a.Wap.expandShapeToKeepDim(y,f),N=(0,o.X)({inputs:{x:A},backend:n,attrs:{shape:T}});return n.disposeIntermediateTensorInfo(A),N}return A}}},38094:function(t,e,n){"use strict";n.d(e,{u0:function(){return u},vP:function(){return o}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return Math.min(t,e)})),s=(0,i.j)(r.q8u,o),u={kernelName:r.q8u,backendName:"cpu",kernelFunc:s}},89027:function(t,e,n){"use strict";n.d(e,{t:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.jQs,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=i.paddings,u=i.mode;(0,a.H)(o,"mirrorPad");for(var c=s.map((function(t,e){return t[0]+o.shape[e]+t[1]})),l=s.map((function(t){return t[0]})),h=s.map((function(t,e){return t[0]+o.shape[e]})),f="reflect"===u?0:1,d=n.data.get(o.dataId).values,p=o.shape.length,v=r.D5U.computeStrides(o.shape),g=r.D5U.sizeFromShape(c),m=c.length,y=r.D5U.computeStrides(c),b=r.D5U.getTypedArrayFromDType(o.dtype,g),w=0;w<g;w++){for(var x=r.D5U.indexToLoc(w,m,y),k=0;k<m;k++)x[k]<l[k]?x[k]=2*l[k]-x[k]-f:x[k]>=h[k]&&(x[k]=2*(h[k]-1)-x[k]+f);x=x.map((function(t,e){return t-l[e]}));var I=r.D5U.locToIndex(x,p,v);b[w]=d[I]}return{dataId:n.write(b,c,o.dtype),shape:c,dtype:o.dtype}}}},83359:function(t,e,n){"use strict";n.d(e,{M7:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),s=(0,i.j)(r.Vbg,o),u={kernelName:r.Vbg,backendName:"cpu",kernelFunc:s}},65545:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var r=n(87884),a=n(96699),i=n(23193),o=n(98767);var s={kernelName:r.NZg,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.logits,c=s.numSamples,l=s.seed,h=s.normalized;(0,i.H)(u,"multinomial");for(var f=h?u:(0,o.X)({inputs:{logits:u},backend:n,attrs:{dim:-1}}),d=f.shape[0],p=f.shape[1],v=n.data.get(f.dataId).values,g=[d,c],m=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(g),"int32"),y=0;y<d;++y){var b=y*p,w=new Float32Array(p-1);w[0]=v[b];for(var x=1;x<w.length;++x)w[x]=w[x-1]+v[b+x];for(var k=a.alea(l.toString()),I=y*c,S=0;S<c;++S){var _=k();m[I+S]=w.length;for(var C=0;C<w.length;C++)if(_<w[C]){m[I+S]=C;break}}}return h||n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(g,"int32",m)}}},18244:function(t,e,n){"use strict";n.d(e,{$3:function(){return o},Jp:function(){return u},f$:function(){return c}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t*e})),s=(0,i.H)((function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}})),u=(0,i.j)(r.wYn,o,s),c={kernelName:r.wYn,backendName:"cpu",kernelFunc:u}},54569:function(t,e,n){"use strict";n.d(e,{AF:function(){return u},uC:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(18244);function s(t,e,n){var r=a.D5U.createScalarValue(-1,n);return(0,o.$3)([],e,r,t,n)}var u={kernelName:a.kuV,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.x;(0,i.H)(a,"neg");var o=s(n.data.get(a.dataId).values,a.shape,a.dtype),u=(0,r.Z)(o,2),c=u[0],l=u[1];return n.makeTensorInfo(l,a.dtype,c)}}},82115:function(t,e,n){"use strict";n.d(e,{r:function(){return o}});var r=n(87884),a=n(23193),i=r.GDt.GP;var o={kernelName:r.uv1,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.boxes,s=e.scores,u=r.maxOutputSize,c=r.iouThreshold,l=r.scoreThreshold;(0,a.H)(o,"NonMaxSuppression");var h=n.data.get(o.dataId).values,f=n.data.get(s.dataId).values,d=i(h,f,u,c,l).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}}},82043:function(t,e,n){"use strict";n.d(e,{L:function(){return o}});var r=n(87884),a=n(23193),i=r.GDt.qP;var o={kernelName:r.cye,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.boxes,s=e.scores,u=r.maxOutputSize,c=r.iouThreshold,l=r.scoreThreshold,h=r.padToMaxOutputSize;(0,a.H)(o,"NonMaxSuppressionPadded");var f=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,p=i(f,d,u,c,l,h),v=p.selectedIndices,g=p.validOutputs;return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}}},44859:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(87884),a=n(23193),i=r.GDt.pA;var o={kernelName:r.W0H,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.boxes,s=e.scores,u=r.maxOutputSize,c=r.iouThreshold,l=r.scoreThreshold,h=r.softNmsSigma;(0,a.H)(o,"NonMaxSuppressionWithScore");var f=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,p=i(f,d,u,c,l,h),v=p.selectedIndices,g=p.selectedScores;return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}}},21566:function(t,e,n){"use strict";n.d(e,{Gj:function(){return o},nP:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t!==e?1:0})),s=(0,i.j)(r.yQU,o,null,"bool"),u={kernelName:r.yQU,backendName:"cpu",kernelFunc:s}},69255:function(t,e,n){"use strict";n.d(e,{w:function(){return o}});var r=n(93433),a=n(87884),i=n(23193);var o={kernelName:a.we_,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.indices,u=o.dtype,c=o.depth,l=o.onValue,h=o.offValue;(0,i.H)(s,"oneHot");var f=a.D5U.sizeFromShape(s.shape),d=new Float32Array(f*c);d.fill(h);for(var p=n.data.get(s.dataId).values,v=0;v<f;++v)p[v]>=0&&p[v]<c&&(d[v*c+p[v]]=l);return n.makeTensorInfo([].concat((0,r.Z)(s.shape),[c]),u,d)}}},62170:function(t,e,n){"use strict";n.d(e,{H:function(){return c}});var r=n(87884),a=n(36545),i=n(42338),o=n(95845),s=n(36241),u=n(91607);var c={kernelName:r.qWM,backendName:"cpu",kernelFunc:function t(e){var n=e.inputs,r=e.backend,c=n.x;if("string"===c.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===c.dtype){var l=(0,s.k)({inputs:{input:c},backend:r}),h=t({inputs:{x:l},backend:r}),f=(0,o.a)({inputs:{input:c},backend:r}),d=(0,u.P)({inputs:{x:f},backend:r}),p=(0,a.P)({inputs:{real:h,imag:d},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(d),p}return(0,i.h)({backend:r,attrs:{shape:c.shape,value:1,dtype:c.dtype}})}}},33116:function(t,e,n){"use strict";n.d(e,{P:function(){return o},W:function(){return s}});var r=n(87884),a=n(98962),i=n(99131);function o(t){var e=t.inputs,n=t.backend,o=t.attrs.axis;if(1===e.length)return(0,i.d)({inputs:{input:e[0]},backend:n,attrs:{dim:o}});var s=e[0].shape,u=e[0].dtype;e.forEach((function(t){r.D5U.assertShapesMatch(s,t.shape,"All tensors passed to stack must have matching shapes"),r.D5U.assert(u===t.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var c=[],l=e.map((function(t){var e=(0,i.d)({inputs:{input:t},backend:n,attrs:{dim:o}});return c.push(e),e})),h=(0,a.z)({inputs:l,backend:n,attrs:{axis:o}});return c.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),h}var s={kernelName:r.QiL,backendName:"cpu",kernelFunc:o}},5557:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.lyA,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=i.paddings,u=i.constantValue;(0,a.H)(o,"pad");var c=s.map((function(t,e){return t[0]+o.shape[e]+t[1]})),l=s.map((function(t){return t[0]})),h=n.data.get(o.dataId).values,f=r.D5U.sizeFromShape(o.shape),d=o.shape.length,p=r.D5U.computeStrides(o.shape),v=r.D5U.sizeFromShape(c),g=c.length,m=r.D5U.computeStrides(c),y=r.D5U.getTypedArrayFromDType(o.dtype,v);0!==u&&y.fill(u);for(var b=0;b<f;b++){var w=r.D5U.indexToLoc(b,d,p).map((function(t,e){return t+l[e]}));y[r.D5U.locToIndex(w,g,m)]=h[b]}return{dataId:n.write(y,c,o.dtype),shape:c,dtype:o.dtype}}}},13828:function(t,e,n){"use strict";n.d(e,{z$:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return Math.pow(t,e)})),s=(0,i.j)(r.pe_,o),u={kernelName:r.pe_,backendName:"cpu",kernelFunc:s}},28176:function(t,e,n){"use strict";n.d(e,{A:function(){return s},M:function(){return u}});var r=n(29439),a=n(87884),i=n(23193),o=(0,n(69341).b)((function(t,e){return t<0?e*t:t}));function s(t){var e=t.inputs,n=t.backend,a=e.x,s=e.alpha;(0,i.H)([a,s],"prelu");var u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,l=o(a.shape,s.shape,u,c,"float32"),h=(0,r.Z)(l,2),f=h[0],d=h[1];return n.makeTensorInfo(d,"float32",f)}var u={kernelName:a.o0g,backendName:"cpu",kernelFunc:s}},89120:function(t,e,n){"use strict";n.d(e,{Iz:function(){return u},Qg:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(65257);function s(t,e,n,i){for(var o=a.Wap.computeOutAndReduceShapes(t,i),s=(0,r.Z)(o,2),u=s[0],c=s[1],l=(0,a.x8V)(e,"int32"),h=a.D5U.makeZerosTypedArray(a.D5U.sizeFromShape(u),l),f=a.D5U.sizeFromShape(c),d=0;d<h.length;++d){for(var p=d*f,v=1,g=0;g<f;++g)v*=n[p+g];h[d]=v}return{outVals:h,outShape:u,outDtype:l}}var u={kernelName:a.DlI,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,u=e.x,c=r.axis,l=r.keepDims;(0,i.H)(u,"prod");var h=u.shape.length,f=a.D5U.parseAxisParam(c,u.shape),d=a.Wap.getAxesPermutation(f,h),p=f,v=u,g=[];null!=d&&(v=(0,o.p)({inputs:{x:u},backend:n,attrs:{perm:d}}),g.push(v),p=a.Wap.getInnerMostAxes(p.length,h));var m=n.data.get(v.dataId).values,y=s(v.shape,v.dtype,m,p),b=y.outVals,w=y.outShape,x=y.outDtype,k=w;return l&&(k=a.Wap.expandShapeToKeepDim(w,f)),g.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(k,x,b)}}},45029:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(29439),a=n(87884),i=n(82376);var o={kernelName:a.dDz,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=e.paramsNestedSplits,s=e.paramsDenseValues,u=e.indices,c=a.outputRaggedRank,l=o.map((function(t){return n.data.get(t.dataId).values})),h=o.map((function(t){return t.shape})),f=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,p=(0,i.c)(l,h,f,s.shape,s.dtype,d,u.shape,c),v=(0,r.Z)(p,3),g=v[0],m=v[1],y=v[2],b=g.map((function(t){return n.makeTensorInfo([t.length],"int32",t)})),w=n.makeTensorInfo(y,s.dtype,m);return b.concat([w])}}},82376:function(t,e,n){"use strict";n.d(e,{c:function(){return u}});var r=n(37762),a=n(87884);function i(t,e,n,r){var a=[],i=0,o=e.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(t,e){for(var n=0;n<t.length;++n){var r=t[n],a=n===t.length-1?e:t[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<e.length-1;++c){u*=e[c];for(var l=e[c+1],h=1;h<u+1;++h)s[c].push(h*l)}for(var f=0;f<t.length;++f){for(var d=t[f],p=t[f]+1,v=0;v<n.length;++v){var g=n[v],m=v+e.length-1;if(m>=0)for(var y=s[m],b=y[y.length-1]-g[d],w=d;w<p;++w)s[m].push(g[w+1]+b);d=g[d],p=g[p]}p!==d&&(a.push([d,p]),i+=p-d)}return{outSplits:s,valueSlices:a,numValues:i}}function o(t,e){for(var n=t.slice(0,e);n.length<e;)n.push(1);for(var r=e;r<t.length;r++)n[e-1]*=t[r];return n}function s(t,e,n,i,s){var u=e.slice();u[0]=s;var c=a.D5U.getArrayFromDType(n,a.D5U.sizeFromShape(u)),l=t.length;return function(t,e,n,a,i,s){var u,c=o(e,2)[1],l=o(s,2)[1],h=0,f=(0,r.Z)(n);try{for(f.s();!(u=f.n()).done;)for(var d=u.value,p=d[0];p<d[1];++p){for(var v=0;v<a;++v)i[h*l+v]=t[p*c+v];++h}}catch(g){f.e(g)}finally{f.f()}}(t,e,i,0===l?0:l/e[0],c,u),[c,u]}function u(t,e,n,r,o,u,c,l){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===e[0].length)throw new Error("Split tensors must not be scalars");if(function(t,e,n){t.forEach((function(t,r){if(t<0||t>=n){var i=a.D5U.indexToLoc(r,e.length,a.D5U.computeStrides(e)).join(",");throw new Error("indices[".concat(i,"] = ").concat(t," is not in [0, ").concat(n,")"))}}))}(u,c,e[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var h=i(u,c,t,r[0]),f=h.outSplits,d=h.valueSlices,p=h.numValues,v=function(t){for(var e=[],n=function(){var n=t[r].length,i=a.D5U.getArrayFromDType("int32",n);e.push(i),t[r].forEach((function(t,e){return i[e]=t}))},r=0;r<t.length;++r)n();return e}(f),g=s(n,r,o,d,p);return[v,g[0],g[1]]}},88432:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(29439),a=n(87884),i=n(45203);var o={kernelName:a.CQl,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.starts,o=e.limits,s=e.deltas,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,h=(0,i.S)(u,a.shape,a.dtype,c,o.shape,l,s.shape),f=(0,r.Z)(h,2),d=f[0],p=f[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([p.length],a.dtype,p)]}}},45203:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var r=n(87884),a=2147483647;function i(t,e,n,i,o,s,u){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(u.length>1)throw new Error("deltas must be a scalar or vector");var c=0===e.length,l=0===o.length,h=0===u.length,f=[];c||f.push(e[0]),l||f.push(o[0]),h||f.push(u[0]);for(var d=1;d<f.length;++d)if(f[d]!==f[d-1])throw new Error("starts, limits, and deltas must have the same shape");var p=0===f.length?1:f[0],v=r.D5U.getArrayFromDType("int32",p+1);v[0]=0;for(var g=0;g<p;++g){var m=c?t[0]:t[g],y=l?i[0]:i[g],b=h?s[0]:s[g];if(0===b)throw new Error("Requires delta != 0");var w=void 0;if(b>0&&y<m||b<0&&y>m)w=0;else if((w=Math.ceil(Math.abs((y-m)/b)))>a)throw new Error("Requires ((limit - start) / delta) <= ".concat(a));v[g+1]=v[g]+w}for(var x=v[p],k=r.D5U.getArrayFromDType(n,x),I=0,S=0;S<p;++S)for(var _=v[S+1]-v[S],C=c?t[0]:t[S],E=h?s[0]:s[S],A=0;A<_;++A)k[I++]=C,C+=E;return[v,k]}},51598:function(t,e,n){"use strict";n.d(e,{P:function(){return o}});var r=n(29439),a=n(87884),i=n(76846);var o={kernelName:a.BiW,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=e.shape,s=e.values,u=e.defaultValue,c=e.rowPartitionTensors,l=a.rowPartitionTypes,h=n.data.get(o.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,p=c.map((function(t){return n.data.get(t.dataId).values})),v=c.map((function(t){return t.shape})),g=(0,i.p)(h,o.shape,f,s.shape,s.dtype,d,u.shape,p,v,l),m=(0,r.Z)(g,2),y=m[0],b=m[1];return n.makeTensorInfo(y,s.dtype,b)}}},76846:function(t,e,n){"use strict";n.d(e,{p:function(){return h}});var r=n(37762),a=n(15671),i=n(43144),o=n(87884),s=o.Wap.RowPartitionType,u=function(){function t(e,n,r,i,s,u,c,l,h,f){(0,a.Z)(this,t),this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=u,this.defaultValueShape=c,this.rowPartitionValues=l,this.rowPartitionValuesShapes=h,this.rowPartitionTypes=o.Wap.getRowPartitionTypesHelper(f),this.raggedRank=o.Wap.getRaggedRank(this.rowPartitionTypes)}return(0,i.Z)(t,[{key:"getRowPartitionTypeByDimension",value:function(t){return this.rowPartitionTypes[0]===s.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}},{key:"getRowPartitionTensor",value:function(t){return this.rowPartitionTypes[0]===s.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}},{key:"getMaxWidth",value:function(e){var n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case s.VALUE_ROWIDS:return t.getMaxWidthValueRowID(n);case s.ROW_SPLITS:return t.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(s[this.getRowPartitionTypeByDimension(e-1)]))}}},{key:"tensorShapeFromTensor",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===e.length){if(-1===t[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return l(t,n)}},{key:"calculateOutputSize",value:function(t){var e=this.valuesShape,n=this.defaultValueShape;o.Wap.validateDefaultValueShape(n,e);var r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=o.Wap.combineRaggedTensorToTensorShapes(this.raggedRank,r,e);a[0]<0&&(a[0]=t);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(t,e,n){for(var r=Math.min(t,n),a=[],i=0,s=0;s<r;++s,i+=e)a.push(i);for(var u=r;u<t;++u)a.push(-1);return o.D5U.assert(a.length===t,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(t,e,n,r){for(var a=t.length,i=[],o=0;o<a-1;++o){var s=t[o+1]-t[o],u=Math.min(r,s),c=e[o];-1===c&&(u=0);for(var l=0;l<u;++l)i.push(c),c+=n;for(var h=0;h<s-u;++h)i.push(-1)}if(a>0&&i.length!==t[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(t,e,n,r){var a=t.length,i=[];if(0===a)return[];var o=0,s=t[0];if(s>=e.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(e.length));var u=e[s];i.push(u);for(var c=1;c<a;++c){var l=t[c];if(l===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=l,l>=e.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(e.length));u=e[l]}i.push(u)}if(i.length!==t.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(t,e,n,r){var a=this.getRowPartitionTensor(t),i=this.getRowPartitionTypeByDimension(t);switch(i){case s.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,e,n,r);case s.ROW_SPLITS:if(a.length-1>e.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(e.length));return this.calculateOutputIndexRowSplit(a,e,n,r);default:throw new Error("Unsupported partition type: ".concat(s[i]))}}},{key:"getFirstDimensionSize",value:function(){var t=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var e=this.rowPartitionTypes[0];switch(e){case s.FIRST_DIM_SIZE:return t[0];case s.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case s.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(s[e]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var t=this.getFirstDimensionSize(),e=this.calculateOutputSize(t),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*e[r+1];var a=l(e,!1),i=o.D5U.getArrayFromDType(this.valuesDType,o.D5U.sizeFromShape(a));if(n[0]*e[0]>0){for(var s=this.calculateFirstParentOutputIndex(t,n[0],e[0]),u=1;u<=this.raggedRank;++u){s=this.calculateOutputIndex(u-1,s,n[u],e[u])}this.setOutput(this.raggedRank,s,i,a)}return[a,i]}},{key:"setOutput",value:function(t,e,n,r){if(0!==n.length){var a=this.values,i=n,s=r.slice();s=s.slice(t+1);var u=o.D5U.sizeFromShape(s),l=e.length,h=this.defaultValue;if(h.length!==u&&1!==h.length){var f=this.defaultValueShape;(0,o.lub)((function(){var t=(0,o.XLQ)(h,f),e=(0,o.UFq)(t,s);h=e.dataSync()}))}for(var d=0,p=0,v=0,g=0;g<=l;++g){var m=g<l?e[g]:-1;if(m!==v){if(p<v){var y=a.subarray(d*u);c(i.subarray(p*u),y,(v-p)*u)}if(g>=l){var b=n.length;m=Math.floor(b/u)}if(m>v)if(1===this.defaultValue.length)i.subarray(v*u,m*u).fill(this.defaultValue[0]),v=m;else for(;m>v;){c(i.slice(v*u),h,u),++v}m<0?(d=g+1,p=v):(d=g,v=(p=v)+1)}else++v}}}}],[{key:"getMaxWidthRowSplit",value:function(t){var e=t.length;if(0===e||1===e)return 0;for(var n=0,r=0;r<e-1;++r){var a=t[r+1]-t[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(t){var e=t.length;if(0===e)return 0;for(var n=0,r=t[0],a=0,i=1;i<e;++i){var o=t[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(e-n,a)}}]),t}();function c(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function l(t,e){var n,a=[],i=(0,r.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o<0){if(!e)throw new Error("Dimension ".concat(o," must be >= 0"));if(o<-1)throw new Error("Dimension ".concat(o," must be >= -1"));o=-1}a.push(o)}}catch(s){i.e(s)}finally{i.f()}return a}function h(t,e,n,r,a,i,o,s,c,l){return new u(t,e,n,r,a,i,o,s,c,l).compute()}},46610:function(t,e,n){"use strict";n.d(e,{K:function(){return i}});var r=n(87884),a=n(66284);var i={kernelName:r.e6w,backendName:"cpu",kernelFunc:function(t){var e=t.backend,n=t.attrs,r=n.start,i=n.stop,o=n.dtype,s=n.step,u=(0,a.b)(r,i,s,o);return e.makeTensorInfo([u.length],o,u)}}},66284:function(t,e,n){"use strict";n.d(e,{b:function(){return a}});var r=n(87884);function a(t,e,n,a){if(t===e||t<e&&n<0||e<t&&n>1)return r.D5U.makeZerosTypedArray(0,a);var i=Math.abs(Math.ceil((e-t)/n)),o=r.D5U.makeZerosTypedArray(i,a);e<t&&1===n&&(n=-1),o[0]=t;for(var s=1;s<o.length;s++)o[s]=o[s-1]+n;return o}},36241:function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}n.d(e,{O:function(){return a},k:function(){return r}});var a={kernelName:n(87884).xJR,backendName:"cpu",kernelFunc:r}},88860:function(t,e,n){"use strict";n.d(e,{hi:function(){return s},v_:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t/e})),s=(0,i.j)(r.oHH,o),u={kernelName:r.oHH,backendName:"cpu",kernelFunc:s}},36381:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.$HU,(function(t){return 1/t})),i={kernelName:r.$HU,backendName:"cpu",kernelFunc:a}},64095:function(t,e,n){"use strict";n.d(e,{F:function(){return i},U:function(){return a}});var r=n(87884),a=(0,n(91844).A)(r.qkr,(function(t){return Math.max(0,t)})),i={kernelName:r.qkr,backendName:"cpu",kernelFunc:a}},3576:function(t,e,n){"use strict";n.d(e,{N:function(){return i},b:function(){return a}});var r=n(87884),a=(0,n(91844).A)(r.SbG,(function(t){return Math.min(Math.max(0,t),6)})),i={kernelName:r.SbG,backendName:"cpu",kernelFunc:a}},28899:function(t,e,n){"use strict";n.d(e,{X:function(){return a},b:function(){return i}});var r=n(87884);function a(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.shape,s=r.D5U.sizeFromShape(i.shape),u=r.D5U.inferFromImplicitShape(o,s),c=r.D5U.sizeFromShape(u);r.D5U.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(i.dataId);var l=n.data.get(i.dataId);if(null!=l.complexTensorInfos){var h=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;h.shape=u,f.shape=u}return{dataId:i.dataId,shape:u,dtype:i.dtype}}var i={kernelName:r.HZH,backendName:"cpu",kernelFunc:a}},8533:function(t,e,n){"use strict";n.d(e,{T:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a._Yw,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.images,u=o.alignCorners,c=o.halfPixelCenters,l=o.size;(0,i.H)(s,"resizeBilinear");for(var h=a.D5U.computeStrides(s.shape),f=(0,r.Z)(l,2),d=f[0],p=f[1],v=(0,r.Z)(s.shape,4),g=v[0],m=v[1],y=v[2],b=v[3],w=n.data.get(s.dataId).values,x=new Float32Array(a.D5U.sizeFromShape([g,d,p,b])),k=[u&&d>1?m-1:m,u&&p>1?y-1:y],I=[u&&d>1?d-1:d,u&&p>1?p-1:p],S=0,_=k[0]/I[0],C=k[1]/I[1],E=0;E<g;E++)for(var A=0;A<d;A++){var T=void 0;T=c?_*(A+.5)-.5:_*A;for(var N=Math.max(0,Math.floor(T)),D=T-N,R=Math.min(m-1,Math.ceil(T)),Z=E*h[0]+N*h[1],M=E*h[0]+R*h[1],F=0;F<p;F++){var O=void 0;O=c?C*(F+.5)-.5:C*F;for(var B=Math.max(0,Math.floor(O)),L=O-B,P=Math.min(y-1,Math.ceil(O)),U=Z+B*h[2],z=M+B*h[2],W=Z+P*h[2],V=M+P*h[2],G=0;G<b;G++){var j=w[U+G],H=w[z+G],X=j+(w[W+G]-j)*L,q=X+(H+(w[V+G]-H)*L-X)*D;x[S++]=q}}}return n.makeTensorInfo([g,d,p,b],"float32",x)}}},47742:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.zbQ,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.images,u=e.dy,c=o.alignCorners;(0,i.H)([u,s],"resizeBilinearGrad");for(var l=a.D5U.computeStrides(s.shape),h=(0,r.Z)(s.shape,4),f=h[0],d=h[1],p=h[2],v=h[3],g=(0,r.Z)(u.shape,3),m=g[1],y=g[2],b=new Float32Array(f*d*p*v),w=[c&&m>1?d-1:d,c&&y>1?p-1:p],x=[c&&m>1?m-1:m,c&&y>1?y-1:y],k=w[0]/x[0],I=w[1]/x[1],S=n.data.get(u.dataId).values,_=0,C=0;C<f;C++)for(var E=C*l[0],A=0;A<m;A++)for(var T=A*k,N=Math.floor(T),D=Math.min(Math.ceil(T),d-1),R=E+N*l[1],Z=E+D*l[1],M=T-N,F=1-M,O=0;O<y;O++)for(var B=O*I,L=Math.floor(B),P=Math.min(Math.ceil(B),p-1),U=B-L,z=1-U,W=R+L*l[2],V=R+P*l[2],G=Z+L*l[2],j=Z+P*l[2],H=F*z,X=F*U,q=M*z,Y=M*U,K=0;K<v;K++){var Q=S[_++];b[W+K]+=Q*H,b[V+K]+=Q*X,b[G+K]+=Q*q,b[j+K]+=Q*Y}return n.makeTensorInfo([f,p,d,v],"float32",b)}}},54621:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.dpD,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.images,u=o.alignCorners,c=o.halfPixelCenters,l=o.size;(0,i.H)(s,"resizeNearestNeighbor");for(var h=a.D5U.computeStrides(s.shape),f=(0,r.Z)(l,2),d=f[0],p=f[1],v=(0,r.Z)(s.shape,4),g=v[0],m=v[1],y=v[2],b=v[3],w=n.data.get(s.dataId).values,x=new Float32Array(g*d*p*b),k=[u&&d>1?m-1:m,u&&p>1?y-1:y],I=[u&&d>1?d-1:d,u&&p>1?p-1:p],S=k[0]/I[0],_=k[1]/I[1],C=0,E=0;E<g;E++)for(var A=E*h[0],T=0;T<d;T++){var N=c?S*(T+.5):S*T,D=Math.min(m-1,u?Math.round(N):Math.floor(N));c&&(D=Math.max(0,D));for(var R=A+D*h[1],Z=0;Z<p;Z++){var M=c?_*(Z+.5):_*Z,F=Math.min(y-1,u?Math.round(M):Math.floor(M));c&&(F=Math.max(0,F));for(var O=R+F*h[2],B=0;B<b;B++){var L=w[O+B];x[C++]=L}}}return n.makeTensorInfo([g,d,p,b],s.dtype,x)}}},97734:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(29439),a=n(87884),i=n(23193);var o={kernelName:a.Hmb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.images,u=e.dy,c=o.alignCorners;(0,i.H)([u,s],"resizeNearestNeighborGrad");for(var l=a.D5U.computeStrides(s.shape),h=a.D5U.computeStrides(u.shape),f=(0,r.Z)(s.shape,4),d=f[0],p=f[1],v=f[2],g=f[3],m=(0,r.Z)(u.shape,3),y=m[1],b=m[2],w=new Float32Array(d*p*v*g),x=n.data.get(u.dataId).values,k=[c&&y>1?p-1:p,c&&b>1?v-1:v],I=[c&&y>1?y-1:y,c&&b>1?b-1:b],S=k[0]/I[0],_=k[1]/I[1],C=1/S,E=1/_,A=2*Math.ceil(C)+2,T=2*Math.ceil(E)+2,N=0;N<d;N++)for(var D=N*l[0],R=0;R<p;R++)for(var Z=D+R*l[1],M=Math.floor(R*C),F=Math.floor(M-A/2),O=0;O<v;O++)for(var B=Z+O*l[2],L=Math.floor(O*E),P=Math.floor(L-T/2),U=0;U<g;U++){for(var z=0,W=0;W<A;W++){var V=W+F;if(!(V<0||V>=y)){var G=D+V*h[1],j=V*S;if(R===Math.min(p-1,c?Math.round(j):Math.floor(j)))for(var H=0;H<T;H++){var X=H+P;if(!(X<0||X>=b)){var q=G+X*h[2],Y=X*_;O===Math.min(v-1,c?Math.round(Y):Math.floor(Y))&&(z+=x[q+U])}}}}w[B+U]=z}return n.makeTensorInfo(s.shape,s.dtype,w)}}},24190:function(t,e,n){"use strict";n.d(e,{q:function(){return s}});var r=n(93433),a=n(87884),i=n(23193),o=n(59090);var s={kernelName:a.mKl,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.dims;(0,i.H)(u,"reverse");var l=u.shape.length,h=a.D5U.parseAxisParam(c,u.shape);if(0===l)return(0,o.y)({inputs:{x:u},backend:n});for(var f=new a.YDk(u.shape,u.dtype),d=n.bufferSync(u),p=function(){var t=f.indexToLoc(v),e=t.slice();h.forEach((function(t){return e[t]=u.shape[t]-1-e[t]})),f.set.apply(f,[d.get.apply(d,(0,r.Z)(e))].concat((0,r.Z)(t)))},v=0;v<f.size;v++)p();return n.makeTensorInfo(f.shape,f.dtype,f.values)}}},2698:function(t,e,n){"use strict";n.d(e,{c:function(){return i}});var r=n(29439),a=n(87884),i={kernelName:a.b9H,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.attrs,i=t.backend,o=e.image,s=n.radians,u=n.fillValue,c=n.center,l=i,h=a.D5U.getTypedArrayFromDType(o.dtype,a.D5U.sizeFromShape(o.shape)),f=(0,r.Z)(o.shape,4),d=f[0],p=f[1],v=f[2],g=f[3],m=a.Wap.getImageCenter(c,p,v),y=(0,r.Z)(m,2),b=y[0],w=y[1],x=Math.sin(s),k=Math.cos(s),I=l.data.get(o.dataId).values,S=0;S<d;S++)for(var _=S*v*p*g,C=0;C<p;C++)for(var E=C*(v*g),A=0;A<v;A++)for(var T=A*g,N=0;N<g;N++){var D=[d,C,A,N],R=D[2],Z=D[1],M=(R-b)*k-(Z-w)*x,F=(R-b)*x+(Z-w)*k;M=Math.round(M+b),F=Math.round(F+w);var O=u;if("number"!==typeof u&&(O=3===N?255:u[N]),M>=0&&M<v&&F>=0&&F<p)O=I[_+F*(v*g)+M*g+N];h[_+E+T+N]=O}return{dataId:l.write(h,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}}},21766:function(t,e,n){"use strict";n.d(e,{q:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.e07,(function(t){var e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1})),i={kernelName:r.e07,backendName:"cpu",kernelFunc:a}},78105:function(t,e,n){"use strict";n.d(e,{FY:function(){return u},zd:function(){return o}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return 1/Math.sqrt(t)})),s=(0,i.O)(r.bV0,o),u={kernelName:r.bV0,backendName:"cpu",kernelFunc:s}},13022:function(t,e,n){"use strict";n.d(e,{b:function(){return i}});var r=n(87884),a=n(28567);var i={kernelName:r.xQA,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.indices,s=e.updates,u=i.shape,c=r.Wap.calculateShapes(s,o,u),l=c.sliceRank,h=c.numUpdates,f=c.sliceSize,d=c.strides,p=c.outputSize,v=n.bufferSync(o),g=n.bufferSync(s),m=(0,a.N)(v,g,u,p,f,h,l,d,0,!0);return n.makeTensorInfo(u,m.dtype,m.values)}}},28567:function(t,e,n){"use strict";n.d(e,{N:function(){return a}});var r=n(87884);function a(t,e,n,a,i,o,s,u,c,l){var h=[a/i,i],f=t.values,d=e.values;if(0===a)return(0,r.f3b)(n,e.dtype);var p=(0,r.f3b)(h,e.dtype);"string"===typeof c||"number"===typeof c?p.values.fill(c):"boolean"===typeof c&&p.values.fill(+c);for(var v=0;v<o;v++){for(var g=[],m=0,y=0;y<s;y++){var b=f[v*s+y];g.push(b),m+=b*u[y]}if(m<0||m>=a/i)throw new Error("Invalid indices: ".concat(g," does not index into ").concat(n));for(var w=0;w<i;w++)l?p.values[m*i+w]+=d[v*i+w]:p.values[m*i+w]=0===e.rank?d[0]:d[v*i+w]}return p}},9520:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(87884),a=n(14932);var i={kernelName:r.nr8,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.sortedSequence,o=e.values,s=r.side,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,l=(0,a.U)(u,c,i.shape[0],i.shape[1],o.shape[1],s);return n.makeTensorInfo(o.shape,"int32",l)}}},14932:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(87884);function a(t,e){for(var n=0,r=t.length,a=0;n<r;)t[a=Math.floor((n+r)/2)]<e?n=a+1:r=a;return r}function i(t,e){for(var n=0,r=t.length,a=0;n<r;)t[a=Math.floor((n+r)/2)]<=e?n=a+1:r=a;return r}function o(t,e,n,o,s,u){for(var c=r.D5U.getArrayFromDType("int32",n*s),l=0;l<n;++l)for(var h=t.slice(l*o,(l+1)*o),f=l*s,d=0;d<s;++d)c[f+d]="left"===u?a(h,e[d+f]):i(h,e[d+f]);return c}},10241:function(t,e,n){"use strict";n.d(e,{$:function(){return i}});var r=n(87884),a=n(23193);var i={kernelName:r.PhF,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=e.condition,o=e.t,s=e.e;(0,a.H)([i,o,s],"select");for(var u=i.shape.length,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,f=(0,r.x8V)(o.dtype,s.dtype),d=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(o.shape),f),p=0,v=0===u||u>1||1===o.shape.length?1:r.D5U.sizeFromShape(o.shape.slice(1)),g=0;g<c.length;g++)for(var m=0;m<v;m++)1===c[g]?d[p++]=l[g]:d[p++]=h[g];return n.makeTensorInfo(o.shape,f,d)}}},36082:function(t,e,n){"use strict";n.d(e,{D:function(){return u}});var r=n(87884),a=n(91844),i=r.Wap.SELU_SCALEALPHA,o=r.Wap.SELU_SCALE,s=(0,a.A)(r.oFR,(function(t){return t>=0?o*t:i*(Math.exp(t)-1)})),u={kernelName:r.oFR,backendName:"cpu",kernelFunc:s}},294:function(t,e,n){"use strict";n.d(e,{BP:function(){return u},VY:function(){return o},XD:function(){return s}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return 1/(1+Math.exp(-t))})),s=(0,i.A)(r.a5O,(function(t){return 1/(1+Math.exp(-t))})),u={kernelName:r.a5O,backendName:"cpu",kernelFunc:s}},65828:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.i5y,(function(t){return t<0?-1:t>0?1:0})),i={kernelName:r.i5y,backendName:"cpu",kernelFunc:a}},19952:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.RQH,(function(t){return Math.sin(t)})),i={kernelName:r.RQH,backendName:"cpu",kernelFunc:a}},26020:function(t,e,n){"use strict";n.d(e,{J:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.wYB,(function(t){return Math.sinh(t)})),i={kernelName:r.wYB,backendName:"cpu",kernelFunc:a}},22126:function(t,e,n){"use strict";n.d(e,{C6:function(){return c},rT:function(){return s},tP:function(){return u}});var r=n(29439),a=n(93433),i=n(87884),o=n(23193);function s(t,e,n,r,o){var s=i.kuN.isSliceContinous(r,e,n),u=i.D5U.sizeFromShape(n),c=i.D5U.computeStrides(r);if(s){var l=i.kuN.computeFlatOffset(e,c);return"string"===o?t.slice(l,l+u):t.subarray(l,l+u)}for(var h="string"===o?i.Wap.fromUint8ToStringArray(t):t,f=(0,i.f3b)(r,o,h),d=(0,i.f3b)(n,o),p=0;p<d.size;++p){var v=d.indexToLoc(p),g=v.map((function(t,n){return t+e[n]}));d.set.apply(d,[f.get.apply(f,(0,a.Z)(g))].concat((0,a.Z)(v)))}return"string"===o?i.Wap.fromStringArrayToUint8(d.values):d.values}function u(t){var e=t.inputs,n=t.backend,a=t.attrs,u=e.x,c=a.begin,l=a.size;(0,o.H)(u,"slice");var h=i.kuN.parseSliceParams(u,c,l),f=(0,r.Z)(h,2),d=f[0],p=f[1];i.kuN.assertParamsValid(u,d,p);var v=s(n.data.get(u.dataId).values,d,p,u.shape,u.dtype);return n.makeTensorInfo(p,u.dtype,v)}var c={kernelName:i.p2w,backendName:"cpu",kernelFunc:u}},98767:function(t,e,n){"use strict";n.d(e,{D:function(){return h},X:function(){return l}});var r=n(87884),a=n(66880),i=n(61784),o=n(88860),s=n(28899),u=n(51802),c=n(41538);function l(t){var e=t.inputs,n=t.backend,l=t.attrs,h=e.logits,f=l.dim,d=h.shape.length,p=f;if(-1===p&&(p=d-1),p!==d-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(d," and dim was ").concat(p));var v=r.D5U.parseAxisParam([p],h.shape),g=(0,i.s)({inputs:{x:h},backend:n,attrs:{reductionIndices:v,keepDims:!1}}),m=r.Wap.expandShapeToKeepDim(g.shape,v),y=(0,s.X)({inputs:{x:g},backend:n,attrs:{shape:m}}),b=(0,u.lu)({inputs:{a:h,b:y},backend:n}),w=(0,a.Qq)({inputs:{x:b},backend:n}),x=(0,c.S)({inputs:{x:w},backend:n,attrs:{axis:v,keepDims:!1}}),k=(0,s.X)({inputs:{x:x},backend:n,attrs:{shape:m}}),I=(0,o.hi)({inputs:{a:w,b:k},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),I}var h={kernelName:r.Gcp,backendName:"cpu",kernelFunc:l}},99867:function(t,e,n){"use strict";n.d(e,{W:function(){return s}});var r=n(87884),a=n(91844),i=Math.log(1.1920928955078125e-7)+2,o=(0,a.A)(r.MRv,(function(t){var e=t>-i,n=t<i,r=Math.exp(t);return n?r:e?t:Math.log(1+r)})),s={kernelName:r.MRv,backendName:"cpu",kernelFunc:o}},18097:function(t,e,n){"use strict";n.d(e,{J:function(){return c}});var r=n(93433),a=n(87884),i=n(23193),o=n(5557),s=n(28899),u=n(65257);var c={kernelName:a.TQc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,c=t.attrs,l=e.x,h=c.blockShape,f=c.paddings;(0,i.H)([l],"spaceToBatchND");var d=a.D5U.sizeFromShape(h),p=[[0,0]];p.push.apply(p,(0,r.Z)(f));for(var v=1+h.length;v<l.shape.length;++v)p.push([0,0]);var g=o.S.kernelFunc({inputs:{x:l},backend:n,attrs:{paddings:p,constantValue:0}}),m=a.Wap.getReshaped(g.shape,h,d,!1),y=a.Wap.getPermuted(m.length,h.length,!1),b=a.Wap.getReshapedPermuted(g.shape,h,d,!1),w={x:g},x={shape:m},k=(0,s.X)({inputs:w,backend:n,attrs:x}),I={x:k},S={perm:y},_=(0,u.p)({inputs:I,backend:n,attrs:S}),C={x:_},E={shape:b},A=(0,s.X)({inputs:C,backend:n,attrs:E});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(_),A}}},58902:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var r=n(29439),a=n(87884),i=n(78337);var o={kernelName:a.O3z,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.indices,o=e.values,s=e.denseShape,u=e.defaultValue;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(s.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(o.shape));if(0!==u.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(u.shape));var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values[0],d=(0,i.c)(c,a.shape,a.dtype,l,o.dtype,h,f),p=(0,r.Z)(d,5),v=p[0],g=p[1],m=p[2],y=p[3],b=p[4];return[n.makeTensorInfo(g,a.dtype,v),n.makeTensorInfo([g[0]],o.dtype,m),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map((function(t){return Number(t)})))),n.makeTensorInfo([b.length],a.dtype,new Int32Array(b))]}}},78337:function(t,e,n){"use strict";n.d(e,{c:function(){return a}});var r=n(87884);function a(t,e,n,a,i,o,s){var u=e[0],c=o[0],l=new Array(c),h=new Array(u),f=e[1];if(0===c){if(0!==u)throw new Error(r.Wap.getSparseFillEmptyRowsIndicesDenseShapeMismatch(u));return[r.D5U.getArrayFromDType(n,0),[0,f],r.D5U.getArrayFromDType(i,0),l,h]}for(var d=!0,p=0,v=new Array(c).fill(0),g=0;g<u;++g){var m=t[g*f];if(m<0)throw new Error(r.Wap.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,m));if(m>=c)throw new Error(r.Wap.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,m,c));++v[m],d=d&&m>=p,p=m}for(var y=!0,b=0;b<c;++b){var w=0===v[b];l[b]=w,y=y&&!w,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(y&&d){for(var x=t,k=a,I=0;I<u;++I)h[I]=I;return[x,[u,f],k,l,h]}for(var S=v[c-1],_=r.D5U.getArrayFromDType(n,S*f),C=r.D5U.getArrayFromDType(i,S),E=new Array(c).fill(0),A=0;A<u;++A){var T=t[A*f],N=E[T],D=(0===T?0:v[T-1])+N;E[T]++;for(var R=0;R<f;++R)_[D*f+R]=t[A*f+R];C[D]=a[A],h[A]=D}for(var Z=0;Z<c;++Z){if(0===E[Z]){var M=0===Z?0:v[Z-1];_[M*f+0]=Z;for(var F=1;F<f;++F)_[M*f+F]=0;C[M]=s}}return[_,[S,f],C,l,h]}},69823:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var r=n(29439),a=n(87884),i=n(63634);var o={kernelName:a.nhH,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.inputIndices,o=e.inputShape,s=e.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(o.shape));if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(s.shape));var u=Array.from(n.data.get(o.dataId).values),c=n.data.get(a.dataId).values,l=Array.from(n.data.get(s.dataId).values),h=(0,i.U)(c,a.shape,a.dtype,u,l),f=(0,r.Z)(h,3),d=f[0],p=f[1],v=f[2];return[n.makeTensorInfo(p,a.dtype,d),n.makeTensorInfo([v.length],s.dtype,new Int32Array(v))]}}},63634:function(t,e,n){"use strict";n.d(e,{U:function(){return a}});var r=n(87884);function a(t,e,n,a,i){for(var o=r.D5U.sizeFromShape(a),s=e[0],u=i.length,c=[],l=1,h=-1,f=0;f<u;++f){var d=i[f];if(-1===d){if(-1!==h)throw new Error(r.Wap.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(h,f));h=f,c.push(1)}else{if(d<0)throw new Error(r.Wap.getSparseReshapeNegativeOutputDimErrorMessage(f,d));l*=d,c.push(d)}}if(-1!==h){if(l<=0)throw new Error(r.Wap.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var p=Math.trunc(o/l);if(l*p!==o)throw new Error(r.Wap.getSparseReshapeInputOutputMultipleErrorMessage(a,c));c[h]=p}if(r.D5U.sizeFromShape(c)!==o)throw new Error(r.Wap.getSparseReshapeInputOutputMismatchErrorMessage(a,c));var v=a.length,g=[];if(v>0){g[v-1]=1;for(var m=v-2;m>=0;--m)g[m]=g[m+1]*a[m+1]}var y=[];if(u>0){y[u-1]=1;for(var b=u-2;b>=0;--b)y[b]=y[b+1]*c[b+1]}for(var w=r.D5U.getArrayFromDType(n,s*u),x=0;x<s;++x){for(var k=0,I=0;I<v;++I)k+=t[x*v+I]*g[I];for(var S=0;S<u;++S)w[x*u+S]=Math.trunc(k/y[S]),k%=y[S]}return[w,[s,u],c]}},86033:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(29439),a=n(87884),i=n(35440);var o={kernelName:a.w3H,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.data,o=e.indices,s=e.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(o.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(s.shape));if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");var u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,h=(0,i.V)(u,a.shape,a.dtype,c,l,!0),f=(0,r.Z)(h,2),d=f[0],p=f[1];return n.makeTensorInfo(p,a.dtype,d)}}},35440:function(t,e,n){"use strict";n.d(e,{V:function(){return a}});var r=n(87884);function a(t,e,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=a.length,c=[e[0],t.length/e[0]],l=c[1],h=u>0?i[u-1]+1:0;if(h<0)throw new Error(r.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var f=e.slice();f[0]=h;var d=f.reduce((function(t,e){return t*e}),1),p=r.D5U.getArrayFromDType(n,d);if(0===u)return h>0&&p.fill(s),[p,f];if(h<=0)throw new Error(r.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var v=0,g=1,m=0,y=i[v];;){var b=0;if(g<u){if(y===(b=i[g])){++g;continue}if(y>=b)throw new Error(r.Wap.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=h)throw new Error(r.Wap.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,h));y>m&&p.fill(s,m*l,y*l);for(var w=v;w<g;++w){var x=a[w];if(x<0||x>=c[0])throw new Error(r.Wap.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(w,a[w],c[0]));for(var k=0;k<l;k++)p[y*l+k]+=t[x*l+k]}if(o)for(var I=0;I<l;I++)p[y*l+I]/=g-v;if(v=g,m=y+1,y=b,++g>u)break}return m<h&&p.fill(s,m*l,h*l),[p,f]}},41256:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(29439),a=n(87884),i=n(35440);var o={kernelName:a.ZjV,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.data,o=e.indices,s=e.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(o.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(s.shape));if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");var u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,h=(0,i.V)(u,a.shape,a.dtype,c,l),f=(0,r.Z)(h,2),d=f[0],p=f[1];return n.makeTensorInfo(p,a.dtype,d)}}},7834:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});var r=n(87884),a=n(28567);var i={kernelName:r.D2d,backendName:"cpu",kernelFunc:function(t){var e,n=t.inputs,i=t.backend,o=t.attrs,s=n.sparseIndices,u=n.sparseValues,c=n.defaultValue,l=o.outputShape,h=r.Wap.calculateShapes(u,s,l),f=h.sliceRank,d=h.numUpdates,p=h.sliceSize,v=h.strides,g=h.outputSize,m=!1,y=i.bufferSync(s);switch(u.dtype){case"bool":var b=i.bufferSync(u),w=Boolean(i.data.get(c.dataId).values[0]);e=(0,a.N)(y,b,l,g,p,d,f,v,w,m);break;case"float32":var x=i.bufferSync(u),k=i.data.get(c.dataId).values[0];e=(0,a.N)(y,x,l,g,p,d,f,v,k,m);break;case"int32":var I=i.bufferSync(u),S=i.data.get(c.dataId).values[0];e=(0,a.N)(y,I,l,g,p,d,f,v,S,m);break;case"string":var _=i.bufferSync(u),C=r.D5U.decodeString(i.data.get(c.dataId).values[0]);e=(0,a.N)(y,_,l,g,p,d,f,v,C,m);break;default:throw new Error("Unsupported type ".concat(u.dtype))}return i.makeTensorInfo(l,e.dtype,e.values)}}},14478:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(93433),a=n(87884),i=n(22126);var o={kernelName:a.L8s,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.numOrSizeSplits,c=o.axis,l=a.D5U.parseAxisParam(c,s.shape)[0],h=a.Wap.prepareSplitSize(s,u,l),f=new Array(s.shape.length).fill(0),d=s.shape.slice();return h.map((function(t){var e=(0,r.Z)(d);e[l]=t;var a=(0,i.tP)({inputs:{x:s},backend:n,attrs:{begin:f,size:e}});return f[l]+=t,a}))}}},4165:function(t,e,n){"use strict";n.d(e,{cz:function(){return u},zT:function(){return o}});var r=n(87884),a=n(50422),i=n(91844),o=(0,a.a)((function(t){return Math.sqrt(t)})),s=(0,i.A)(r.FKq,(function(t){return Math.sqrt(t)})),u={kernelName:r.FKq,backendName:"cpu",kernelFunc:s}},53848:function(t,e,n){"use strict";n.d(e,{g:function(){return i}});var r=n(87884),a=n(23193),i={kernelName:r.bK0,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n;(0,a.H)(r,"square");for(var o=i.data.get(r.dataId).values,s=new Float32Array(o.length),u=0;u<o.length;++u){var c=o[u];s[u]=c*c}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}}},72616:function(t,e,n){"use strict";n.d(e,{MS:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){var n=t-e;return n*n})),s=(0,i.j)(r._tC,o),u={kernelName:r._tC,backendName:"cpu",kernelFunc:s}},52612:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.h8e,(function(t,e){var n=e;return isNaN(t)?NaN:t>0?1:n.alpha})),i={kernelName:r.h8e,backendName:"cpu",kernelFunc:a}},94043:function(t,e,n){"use strict";n.d(e,{f:function(){return u}});var r=n(87884),a=n(23193),i=n(28899),o=n(22126),s=n(47497);var u={kernelName:r.jQk,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.begin,h=u.end,f=u.strides,d=u.beginMask,p=u.endMask,v=u.ellipsisMask,g=u.newAxisMask,m=u.shrinkAxisMask;(0,a.H)(c,"stridedSlice");var y,b=r.kuN.sliceInfo(c.shape,l,h,f,d,p,v,g,m),w=b.finalShapeSparse,x=b.finalShape,k=b.isIdentity,I=b.sliceDim0,S=b.isSimpleSlice,_=b.begin,C=b.end,E=b.strides;if(k)y=(0,i.X)({inputs:{x:c},backend:n,attrs:{shape:x}});else if(I||S){r.D5U.assert(c.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(c.shape.length)}));var A=r.kuN.computeOutShape(_,C,E),T=(0,o.tP)({inputs:{x:c},backend:n,attrs:{begin:_,size:A}});y=(0,i.X)({inputs:{x:T},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(T)}else{var N=n.bufferSync(c),D=(0,s.t)(w,N,E,_);y=n.makeTensorInfo(x,D.dtype,D.values)}return y}}},47497:function(t,e,n){"use strict";n.d(e,{t:function(){return i}});var r=n(93433),a=n(87884);function i(t,e,n,i){for(var o=(0,a.f3b)(t,e.dtype),s=0;s<o.size;s++){for(var u=o.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*n[l]+i[l];o.set.apply(o,[e.get.apply(e,c)].concat((0,r.Z)(u)))}return o}},95674:function(t,e,n){"use strict";n.d(e,{a:function(){return o}});var r=n(29439),a=n(87884),i=n(18294);var o={kernelName:a._JP,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=a.separator,s=a.nGramWidths,u=a.leftPad,c=a.rightPad,l=a.padWidth,h=a.preserveShortSequences,f=e.data,d=e.dataSplits,p=n.data.get(f.dataId).values,v=n.data.get(d.dataId).values,g=(0,i.A)(p,v,o,s,u,c,l,h),m=(0,r.Z)(g,2),y=m[0],b=m[1];return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",b)]}}},18294:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var r=n(15671),a=n(43144),i=n(87884),o=function(){function t(e,n,a,o,s,u){(0,r.Z)(this,t),this.separator=i.D5U.encodeString(e),this.nGramWidths=n,this.leftPad=i.D5U.encodeString(a),this.rightPad=i.D5U.encodeString(o),this.padWidth=s,this.preserveShort=u}return(0,a.Z)(t,[{key:"getPadWidth",value:function(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}},{key:"getNumNGrams",value:function(t,e){var n=this.getPadWidth(e);return Math.max(0,t+2*n-e+1)}},{key:"createNGrams",value:function(t,e,n,r,a,i){for(var o=this,s=function(){var s=o.getPadWidth(i),c=Math.max(0,s-u),l=Math.max(0,s-(a-(u+1))),h=i-(c+l),f=e+(c>0?0:u-s),d=0;d+=c*o.leftPad.length;for(var p=0;p<h;++p)d+=t[f+p].length;d+=l*o.rightPad.length,d+=(c+l+h-1)*o.separator.length,n[r+u]=new Uint8Array(d);for(var v=n[r+u],g=0,m=function(t){return t.forEach((function(t){return v[g++]=t}))},y=0;y<c;++y)m(o.leftPad),m(o.separator);for(var b=0;b<h-1;++b)m(t[f+b]),m(o.separator);if(h>0){m(t[f+h-1]);for(var w=0;w<l;++w)m(o.separator),m(o.rightPad)}else{for(var x=0;x<l-1;++x)m(o.rightPad),m(o.separator);m(o.rightPad)}},u=0;u<a;++u)s()}},{key:"compute",value:function(t,e){var n=this,r=t.length,a=e.length;if(a>0){var o=e[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var s=1;s<a;++s){var u=e[s]>=o;if(!(u=u&&e[s]<=r))throw new Error("Invalid split value ".concat(e[s],", must be in [").concat(o,", ").concat(r,"]"));o=e[s]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var c=a-1,l=i.D5U.getArrayFromDType("int32",a);if(0===r||0===a){for(var h=new Array(r),f=0;f<=c;++f)l[f]=0;return[h,l]}l[0]=0;for(var d=function(){var t=e[p]-e[p-1],r=0;n.nGramWidths.forEach((function(e){r+=n.getNumNGrams(t,e)})),n.preserveShort&&t>0&&0===r&&(r=1),l[p]=l[p-1]+r},p=1;p<=c;++p)d();for(var v=new Array(l[c]),g=function(r){var a=e[r],i=l[r];if(n.nGramWidths.forEach((function(o){var s=e[r+1]-e[r],u=n.getNumNGrams(s,o);n.createNGrams(t,a,v,i,u,o),i+=u})),n.preserveShort&&i===l[r]){var o=e[r+1]-e[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(t,a,v,i,1,s)}},m=0;m<c;++m)g(m);return[v,l]}}]),t}();function s(t,e,n,r,a,i,s,u){return new o(n,r,a,i,s,u).compute(t,e)}},6039:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(29439),a=n(87884),i=n(60998);var o={kernelName:a.s1s,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs.skipEmpty,o=e.input,s=e.delimiter;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));var u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values[0],l=(0,i.Q)(u,c,a),h=(0,r.Z)(l,3),f=h[0],d=h[1],p=h[2],v=d.length;return[n.makeTensorInfo([v,2],"int32",f),n.makeTensorInfo([v],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(p))]}}},60998:function(t,e,n){"use strict";n.d(e,{Q:function(){return i}});var r=n(87884);function a(t,e,n,r){if(t.length)if(0!==e.length)if(1!==e.length){for(var a=0,i=0;i<t.length+1;i++)if(i===t.length||-1!==e.indexOf(t[i])){var o=t.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=e[0],u=t.indexOf(s);-1!==u;){var c=t.subarray(0,u);n&&0===c.length||r.push(c),u=(t=t.subarray(u+1)).indexOf(s)}n&&0===t.length||r.push(t)}else for(var l=0;l<t.length;++l)r.push(t.subarray(l,l+1))}function i(t,e,n){for(var i=t.length,o=[],s=0,u=0,c=new Array(i),l=0;l<i;++l){var h=o.length;a(t[l],e,n,o);var f=o.length-h;c[l]=f,s+=f,u=Math.max(u,f)}for(var d=r.D5U.getArrayFromDType("int32",2*s),p=new Array(s),v=[i,u],g=0,m=0;m<i;++m)for(var y=0;y<c[m];++y)d[2*g]=m,d[2*g+1]=y,p[g]=o[g],++g;return[d,p,v]}},8821:function(t,e,n){"use strict";n.d(e,{C:function(){return i}});var r=n(87884),a=n(71489);var i={kernelName:r.XkS,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs.numBuckets,i=e.input;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.data.get(i.dataId).values,s=(0,a.h)(o,r);return n.makeTensorInfo(i.shape,"int32",s)}}},71489:function(t,e,n){"use strict";n.d(e,{h:function(){return a}});var r=n(87884);function a(t,e){for(var n=r.D5U.getArrayFromDType("int32",t.length),a=0;a<t.length;++a)n[a]=r.D5U.fingerPrint64(t[a]).modulo(e).getLowBitsUnsigned();return n}},51802:function(t,e,n){"use strict";n.d(e,{GR:function(){return c},VY:function(){return o},lu:function(){return u}});var r=n(87884),a=n(69341),i=n(69501),o=(0,a.b)((function(t,e){return t-e})),s=(0,i.H)((function(t,e,n,r){return{real:t-n,imag:e-r}})),u=(0,i.j)(r.Tr8,o,s),c={kernelName:r.Tr8,backendName:"cpu",kernelFunc:u}},41538:function(t,e,n){"use strict";n.d(e,{S:function(){return h},y:function(){return f}});var r=n(29439),a=n(87884),i=n(23193),o=n(94842),s=n(60570),u=n(59090),c=n(28899),l=n(65257);function h(t){var e,n=t.inputs,h=t.backend,f=t.attrs,d=n.x,p=f.axis,v=f.keepDims;(0,i.H)(d,"sum");var g=(e="bool"===d.dtype?(0,s.pj)({inputs:{x:d},backend:h,attrs:{dtype:"int32"}}):(0,u.y)({inputs:{x:d},backend:h})).shape.length,m=a.D5U.parseAxisParam(p,e.shape),y=a.Wap.getAxesPermutation(m,g),b=m,w=e;null!=y&&(w=(0,l.p)({inputs:{x:e},backend:h,attrs:{perm:y}}),b=a.Wap.getInnerMostAxes(b.length,g)),a.Wap.assertAxesAreInnerMostDims("sum",b,w.shape.length);for(var x=a.Wap.computeOutAndReduceShapes(w.shape,b),k=(0,r.Z)(x,2),I=k[0],S=k[1],_=a.Wap.upcastType(w.dtype,"int32"),C=(0,o.l)(h,I,_),E=a.D5U.sizeFromShape(S),A=h.data.get(C.dataId).values,T=h.data.get(w.dataId).values,N=0;N<A.length;++N){for(var D=N*E,R=0,Z=0;Z<E;++Z)R+=T[D+Z];A[N]=R}if(v){var M=a.Wap.expandShapeToKeepDim(C.shape,m),F=C;C=(0,c.X)({inputs:{x:C},backend:h,attrs:{shape:M}}),h.disposeIntermediateTensorInfo(F)}return h.disposeIntermediateTensorInfo(e),null!=y&&h.disposeIntermediateTensorInfo(w),C}var f={kernelName:a.GBy,backendName:"cpu",kernelFunc:h}},6808:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.sEM,(function(t){return Math.tan(t)})),i={kernelName:r.sEM,backendName:"cpu",kernelFunc:a}},89486:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(87884),a=(0,n(91844).A)(r.MIZ,(function(t){return Math.tanh(t)})),i={kernelName:r.MIZ,backendName:"cpu",kernelFunc:a}},59266:function(t,e,n){"use strict";n.d(e,{o:function(){return o}});var r=n(87884),a=n(23193),i=n(57129);var o={kernelName:r.n9L,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.x,s=r.reps;(0,a.H)(o,"tile");var u=(0,i.R)(n.bufferSync(o),s);return n.makeTensorInfo(u.shape,u.dtype,u.values)}}},57129:function(t,e,n){"use strict";n.d(e,{R:function(){return a}});var r=n(87884);function a(t,e){for(var n=new Array(t.rank),a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];for(var i=(0,r.f3b)(n,t.dtype),o=0;o<i.values.length;++o){for(var s=i.indexToLoc(o),u=new Array(t.rank),c=0;c<u.length;c++)u[c]=s[c]%t.shape[c];var l=t.locToIndex(u);i.values[o]=t.values[l]}return i}},48393:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var r=n(29439),a=n(87884),i=n(23193),o=n(79516);var s={kernelName:a.cWu,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,s=e.x,u=a.k,c=a.sorted;(0,i.H)(s,"topk");var l=n.data.get(s.dataId).values,h=(0,o.W)(l,s.shape,s.dtype,u,c),f=(0,r.Z)(h,2),d=f[0],p=f[1];return[n.makeTensorInfo(d.shape,d.dtype,d.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}}},79516:function(t,e,n){"use strict";n.d(e,{W:function(){return o}});var r=n(87884),a=function(t,e){var n=e.value-t.value;return 0===n?t.index-e.index:n};function i(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1;o>n;){if(o-n>600){var s=o-n+1,u=e-n+1,c=Math.log(s),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(s-l)/s)*Math.sign(u-s/2);i(t,e,Math.max(n,Math.floor(e-u*l/s+h)),Math.min(o,Math.floor(e+(s-u)*l/s+h)))}var f=t[e],d=n,p=o;for(r.D5U.swap(t,n,e),a(t[o],f)>0&&r.D5U.swap(t,n,o);d<p;){for(r.D5U.swap(t,d,p),d++,p--;a(t[d],f)<0;)d+=1;for(;a(t[p],f)>0;)p-=1}0===a(t[n],f)?r.D5U.swap(t,n,p):(p+=1,r.D5U.swap(t,p,o)),p<=e&&(n=p+1),e<=p&&(o=p-1)}}function o(t,e,n,o,s){for(var u=e[e.length-1],c=t.length/u,l=u,h=r.D5U.getTypedArrayFromDType(n,c*o),f=r.D5U.getTypedArrayFromDType("int32",c*o),d=function(){var e=p*l,n=t.subarray(e,e+l),r=new Array(n.length);n.forEach((function(t,e){return r[e]={value:t,index:e}})),o<r.length&&(i(r,o),r=r.slice(0,o)),s&&r.sort(a);for(var u=p*o,c=h.subarray(u,u+o),d=f.subarray(u,u+o),v=0;v<o;v++)c[v]=r[v].value,d[v]=r[v].index},p=0;p<c;p++)d();var v=e.slice();return v[v.length-1]=o,[(0,r.f3b)(v,n,h),(0,r.f3b)(v,"int32",f)]}},83596:function(t,e,n){"use strict";n.d(e,{M:function(){return i}});var r=n(29439),a=n(87884);var i={kernelName:a.wx7,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,i=t.backend,s=e.image,l=e.transforms,h=n.interpolation,f=n.fillMode,d=n.fillValue,p=n.outputShape,v=(0,r.Z)(s.shape,4),g=v[0],m=v[1],y=v[2],b=v[3],w=null!=p?p:[m,y],x=(0,r.Z)(w,2),k=x[0],I=x[1],S=[g,k,I,b],_=a.D5U.computeStrides(s.shape),C=_[0],E=_[1],A=_[2],T=a.D5U.computeStrides(S),N=T[0],D=T[1],R=T[2],Z=a.D5U.getTypedArrayFromDType(s.dtype,a.D5U.sizeFromShape(S));Z.fill(d);for(var M=i.data.get(s.dataId).values,F=i.data.get(l.dataId).values,O=0;O<g;++O){for(var B=1===l.shape[0]?F:F.subarray(8*O,8*O+8),L=0;L<k;++L)for(var P=0;P<I;++P)for(var U=0;U<b;++U){var z=void 0,W=B[6]*P+B[7]*L+1;if(0!==W){var V=(B[0]*P+B[1]*L+B[2])/W,G=(B[3]*P+B[4]*L+B[5])/W,j=o(V,y,f),H=o(G,m,f);switch(h){case"nearest":z=u(M,m,y,C,E,A,O,H,j,U,d);break;case"bilinear":z=c(M,m,y,C,E,A,O,H,j,U,d);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(h))}Z[O*N+L*D+P*R+U]=z}}return i.makeTensorInfo(S,s.dtype,Z)}return{dataId:i.write(Z,S,s.dtype),shape:s.shape,dtype:s.dtype}}};function o(t,e,n){switch(n){case"reflect":return function(t,e){var n=t;if(n<0)if(e<=1)n=0;else{var r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{var i=2*e;(n-=i*Math.trunc(n/i))>=e&&(n=i-n-1)}return a.D5U.clamp(0,n,e-1)}(t,e);case"wrap":return function(t,e){var n=t;if(n<0)if(e<=1)n=0;else{var r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{var i=e-1;n-=e*Math.trunc(n/i)}return a.D5U.clamp(0,n,e-1)}(t,e);case"nearest":return function(t,e){return a.D5U.clamp(0,t,e-1)}(t,e);default:return function(t,e){return t}(t)}}function s(t,e,n,r,a,i,o,s,u,c,l){return 0<=s&&s<e&&0<=u&&u<n?t[o*r+s*a+u*i+c]:l}function u(t,e,n,r,a,i,o,u,c,l,h){return s(t,e,n,r,a,i,o,Math.round(u),Math.round(c),l,h)}function c(t,e,n,r,a,i,o,u,c,l,h){var f=Math.floor(u),d=Math.floor(c),p=f+1,v=d+1;return(p-u)*((v-c)*s(t,e,n,r,a,i,o,f,d,l,h)+(c-d)*s(t,e,n,r,a,i,o,f,v,l,h))+(u-f)*((v-c)*s(t,e,n,r,a,i,o,p,d,l,h)+(c-d)*s(t,e,n,r,a,i,o,p,v,l,h))}},65257:function(t,e,n){"use strict";n.d(e,{b:function(){return s},p:function(){return o}});var r=n(87884),a=n(23193),i=n(31103);function o(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,s=n.perm;(0,a.H)(o,"transpose");for(var u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[s[l]];var h=r.data.get(o.dataId).values,f=(0,i.H)(h,o.shape,o.dtype,s,c);return{dataId:r.write(f,c,o.dtype),shape:c,dtype:o.dtype}}var s={kernelName:r.G3Y,backendName:"cpu",kernelFunc:o}},31103:function(t,e,n){"use strict";n.d(e,{H:function(){return a}});var r=n(87884);function a(t,e,n,a,i){for(var o=e.length,s=r.D5U.sizeFromShape(e),u=r.D5U.computeStrides(e),c=r.D5U.computeStrides(i),l=r.D5U.getTypedArrayFromDType(n,r.D5U.sizeFromShape(i)),h=0;h<s;++h){for(var f=r.D5U.indexToLoc(h,o,u),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[a[p]];l[r.D5U.locToIndex(d,o,c)]=t[h]}return l}},72411:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(87884),a=n(23193),i=n(24242);var o={kernelName:r.kpP,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=n.axis,s=e.x;(0,a.H)(s,"unique");var u=r.data.get(s.dataId).values,c=(0,i.S)(u,o,s.shape,s.dtype),l=c.outputValues,h=c.outputShape,f=c.indices;return[r.makeTensorInfo(h,s.dtype,l),r.makeTensorInfo([f.length],"int32",f)]}}},24242:function(t,e,n){"use strict";n.d(e,{S:function(){return a}});var r=n(87884);function a(t,e,n,a){for(var i=r.D5U.parseAxisParam(e,n)[0],o=[1,n[0],1],s=0;s<i;s++)o[0]*=n[s];o[1]=n[i];for(var u=i+1;u<n.length;u++)o[2]*=n[u];for(var c={},l=new Int32Array(n[i]),h=new r.YDk(o,a,t),f=[],d=1===o[0]&&1===o[2],p=0;p<n[i];p++){var v=void 0;if(d)v=t[p].toString();else{for(var g=[],m=0;m<o[0];m++)for(var y=0;y<o[2];y++)g.push(h.get(m,p,y));v=g.join(",")}if(void 0!==c[v])l[p]=c[v];else{var b=Object.keys(c).length;c[v]=b,l[p]=b,f.push(p)}}var w=o.slice();w[1]=Object.keys(c).length;var x=new r.YDk(w,a);f.forEach((function(t,e){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(h.get(n,t,r),n,e,r)}));var k=n.slice();return k[i]=w[1],{outputValues:x.values,outputShape:k,indices:l}}},76471:function(t,e,n){"use strict";n.d(e,{y:function(){return o}});var r=n(87884),a=n(28899),i=n(22126);var o={kernelName:r.ToN,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.value,s=r.axis;s<0&&(s+=o.shape.length);for(var u=o.shape.length,c=o.shape[s],l=new Array(u-1),h=0,f=0;f<u;f++)f!==s&&(l[h++]=o.shape[f]);var d=new Array(u).fill(0),p=o.shape.slice();p[s]=1;for(var v=new Array(c),g=0;g<v.length;g++){d[s]=g;var m=(0,i.tP)({inputs:{x:o},backend:n,attrs:{begin:d,size:p}});v[g]=(0,a.X)({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return v}}},15962:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var r=n(87884),a=n(23193),i=n(60570),o=n(68116),s=n(99131),u=n(18244),c=n(33116),l=n(41538);var h={kernelName:r.Qvg,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,h=t.attrs,f=e.x,d=e.segmentIds,p=h.numSegments;(0,a.H)(f,"unsortedSegmentSum");for(var v=[],g=[],m=f.shape.length-d.shape.length,y=d,b=0;b<m;++b){var w=(0,s.d)({inputs:{input:y},backend:n,attrs:{dim:b+1}});y=w,g.push(w)}for(var x=0;x<p;++x){var k=r.D5U.createScalarValue(x,"int32"),I=n.makeTensorInfo([],"int32",k),S=(0,o.Dg)({inputs:{a:I,b:y},backend:n}),_=(0,i.pj)({inputs:{x:S},backend:n,attrs:{dtype:"float32"}}),C=(0,u.Jp)({inputs:{a:_,b:f},backend:n}),E=(0,l.S)({inputs:{x:C},backend:n,attrs:{axis:0,keepDims:!1}});v.push(E),g.push(I),g.push(S),g.push(_),g.push(C),g.push(E)}var A=(0,c.P)({inputs:v,backend:n,attrs:{axis:0}});return g.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),A}}},91607:function(t,e,n){"use strict";n.d(e,{A:function(){return c},P:function(){return u}});var r=n(87884),a=n(36545),i=n(42338),o=n(95845),s=n(36241);function u(t){var e=t.inputs,n=t.backend,r=e.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var c=(0,s.k)({inputs:{input:r},backend:n}),l=u({inputs:{x:c},backend:n}),h=(0,o.a)({inputs:{input:r},backend:n}),f=u({inputs:{x:h},backend:n}),d=(0,a.P)({inputs:{real:l,imag:f},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),d}return(0,i.h)({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var c={kernelName:r.RuY,backendName:"cpu",kernelFunc:u}},37571:function(t,e,n){"use strict";n.d(e,{d:function(){return s}});var r=n(87884),a=n(6904),i=n(25589),o=n(16600);var s={kernelName:r.usg,backendName:"cpu",kernelFunc:function(t){var e,n,r,s=t.inputs,u=t.backend,c=t.attrs,l=s.a,h=s.b,f=s.bias,d=s.preluActivationWeights,p=c.transposeA,v=c.transposeB,g=c.activation,m=c.leakyreluAlpha,y=[];e=(0,o.Z)({inputs:{a:l,b:h},attrs:{transposeA:p,transposeB:v},backend:u}),f&&(n=(0,i.IH)({inputs:{a:e,b:f},backend:u}),y.push(e),e=n),g&&(r=(0,a.Q)(u,e,g,d,m),y.push(e),e=r);for(var b=0,w=y;b<w.length;b++){var x=w[b];u.disposeIntermediateTensorInfo(x)}return e}}},33602:function(t,e,n){"use strict";for(var r=n(87884),a=n(37571),i=n(96220),o=n(60173),s=n(13639),u=n(25589),c=n(29631),l=n(45122),h=n(80629),f=n(36593),d=n(72098),p=n(5328),v=n(25381),g=n(17399),m=n(11203),y=n(29797),b=n(95777),w=n(60726),x=n(80761),k=n(31747),I=n(16600),S=n(6088),_=n(3944),C=n(6718),E=n(47380),A=n(60570),T=n(94351),N=n(26604),D=n(36545),R=n(8519),Z=n(98962),M=n(51526),F=n(81103),O=n(90397),B=n(4241),L=n(82751),P=n(68617),U=n(39029),z=n(61603),W=n(51963),V=n(20793),G=n(33277),j=n(98356),H=n(77),X=n(99360),q=n(55413),Y=n(64811),K=n(16146),Q=n(15508),J=n(40949),$=n(39332),tt=n(61849),et=n(37742),nt=n(45045),rt=n(68116),at=n(18072),it=n(66880),ot=n(99131),st=n(21354),ut=n(75268),ct=n(42338),lt=n(16404),ht=n(97224),ft=n(19025),dt=n(44585),pt=n(22476),vt=n(99307),gt=n(72003),mt=n(69075),yt=n(26985),bt=n(59090),wt=n(19174),xt=n(95845),kt=n(26680),It=n(44258),St=n(60336),_t=n(76455),Ct=n(39813),Et=n(18734),At=n(59243),Tt=n(68298),Nt=n(63275),Dt=n(60530),Rt=n(65062),Zt=n(57433),Mt=n(2862),Ft=n(24488),Ot=n(61784),Bt=n(89518),Lt=n(8292),Pt=n(26743),Ut=n(38067),zt=n(50005),Wt=n(69301),Vt=n(60124),Gt=n(8484),jt=n(38094),Ht=n(89027),Xt=n(83359),qt=n(65545),Yt=n(18244),Kt=n(54569),Qt=n(82115),Jt=n(82043),$t=n(44859),te=n(21566),ee=n(69255),ne=n(62170),re=n(33116),ae=n(5557),ie=n(13828),oe=n(28176),se=n(89120),ue=n(45029),ce=n(88432),le=n(51598),he=n(46610),fe=n(36241),de=n(88860),pe=n(36381),ve=n(64095),ge=n(3576),me=n(28899),ye=n(8533),be=n(47742),we=n(54621),xe=n(97734),ke=n(24190),Ie=n(2698),Se=n(21766),_e=n(78105),Ce=n(13022),Ee=n(9520),Ae=n(10241),Te=n(36082),Ne=n(294),De=n(65828),Re=n(19952),Ze=n(26020),Me=n(22126),Fe=n(98767),Oe=n(99867),Be=n(18097),Le=n(58902),Pe=n(69823),Ue=n(86033),ze=n(41256),We=n(7834),Ve=n(14478),Ge=n(4165),je=n(53848),He=n(72616),Xe=n(52612),qe=n(94043),Ye=n(95674),Ke=n(6039),Qe=n(8821),Je=n(51802),$e=n(41538),tn=n(6808),en=n(89486),nn=n(59266),rn=n(48393),an=n(83596),on=n(65257),sn=n(72411),un=n(76471),cn=n(15962),ln=n(91607),hn=0,fn=[a.d,i.fC,o.r,s.v,u.j4,c._,l.O,h.H,f.d,d.O,p.h,v.W,g.E,m.tj,y.B,b.U,w.z,x.Y,k.v,I.W,S.C,_.g,C.e,E.u,A.Mq,T.y2,N.w,D.z,R.s,Z.X,M.o,F.d,O.g,B.L,L.$,P.n,U.D,z.q,W.L,V.c,G.z,j.R,H.d,X.X,q.v,Y.G,K.y,Q.T,J.R,$.B,tt.G,et.$,nt.q,rt.Kx,at.F,it.SX,ot.p,st.Vu,ut.r,ct.v,lt.v,ht.Ao,ft.EE,dt.L,pt.X,vt.o,gt.c,mt.Ce,yt.V,bt.I,wt.K,xt.K,kt.m,It.v,St.a,_t.O,Ct.zh,Et.m3,At.j,Tt.xM,Nt.n,Dt.Er,Rt.E,Zt.vV,Mt.r,Ft.f,Ot.F,Bt.eJ,Lt.u,Pt.m,Ut.J,zt.f,Wt.q,Vt.$,Gt.L,jt.u0,Ht.t,Xt.M7,qt.A,Yt.f$,Kt.AF,Qt.r,Jt.L,$t.h,te.nP,ee.w,ne.H,re.W,ae.S,ie.z$,oe.M,se.Iz,ue.G,ce.N,le.P,he.K,fe.O,de.v_,pe.a,ve.F,ge.N,me.b,ye.T,be.G,we.G,xe.S,ke.q,Ie.c,Se.q,_e.FY,Ce.b,Ee.L,Ae.$,Te.D,Ne.BP,De.l,Re.d,Ze.J,Me.C6,Fe.D,Oe.W,Be.J,Le.l,Pe.d,Ue.A,ze.O,We.e,Ve.q,Ge.cz,je.g,He.MS,Xe.a,qe.f,Ye.a,Ke.U,Qe.C,Je.GR,$e.y,tn.a,en.r,nn.o,rn.o,an.M,on.b,sn.q,un.y,cn.Z,ln.A];hn<fn.length;hn++){var dn=fn[hn];(0,r.wCN)(dn)}},69341:function(t,e,n){"use strict";n.d(e,{b:function(){return a}});var r=n(87884);function a(t){return function(e,n,a,i,o){var s=r.Wap.assertAndGetBroadcastShape(e,n),u=s.length,c=r.D5U.computeStrides(s),l=r.D5U.sizeFromShape(s),h=r.D5U.getTypedArrayFromDType(o,l),f=e.length,d=n.length,p=r.D5U.computeStrides(e),v=r.D5U.computeStrides(n),g=r.Wap.getBroadcastDims(e,s),m=r.Wap.getBroadcastDims(n,s);if(g.length+m.length===0)for(var y=0;y<h.length;++y)h[y]=t(a[y%a.length],i[y%i.length]);else for(var b=function(){var e=r.D5U.indexToLoc(w,u,c),n=e.slice(-f);g.forEach((function(t){return n[t]=0}));var o=r.D5U.locToIndex(n,f,p),s=e.slice(-d);m.forEach((function(t){return s[t]=0}));var l=r.D5U.locToIndex(s,d,v);h[w]=t(a[o],i[l])},w=0;w<h.length;++w)b();return[h,s]}}},69501:function(t,e,n){"use strict";n.d(e,{H:function(){return c},j:function(){return u}});var r=n(29439),a=n(87884),i=n(23193),o=n(60570),s=n(36545);function u(t,e,n,u){return null==n?function(n){var o=n.inputs,s=n.backend,c=o.a,l=o.b,h=s;(0,i.H)([c,l],t);var f=h.data.get(c.dataId).values,d=h.data.get(l.dataId).values,p="string"===c.dtype?a.Wap.fromUint8ToStringArray(f):f,v="string"===c.dtype?a.Wap.fromUint8ToStringArray(d):d,g=u||c.dtype,m=e(c.shape,l.shape,p,v,g),y=(0,r.Z)(m,2),b=y[0],w=y[1];return h.makeTensorInfo(w,g,b)}:function(t){var a=t.inputs,i=t.backend,c=a.a,l=a.b,h=i;if("complex64"===c.dtype||"complex64"===l.dtype){var f=(0,o.pj)({inputs:{x:c},backend:h,attrs:{dtype:"complex64"}}),d=h.data.get(f.dataId),p=d.complexTensorInfos.real,v=d.complexTensorInfos.imag,g=h.data.get(p.dataId).values,m=h.data.get(v.dataId).values,y=(0,o.pj)({inputs:{x:l},backend:h,attrs:{dtype:"complex64"}}),b=h.data.get(y.dataId),w=b.complexTensorInfos.real,x=b.complexTensorInfos.imag,k=h.data.get(w.dataId).values,I=h.data.get(x.dataId).values,S=n(c.shape,l.shape,g,m,k,I),_=(0,r.Z)(S,3),C=_[0],E=_[1],A=_[2],T=h.makeTensorInfo(A,"float32",C),N=h.makeTensorInfo(A,"float32",E),D=(0,s.P)({inputs:{real:T,imag:N},backend:h});return h.disposeIntermediateTensorInfo(f),h.disposeIntermediateTensorInfo(y),h.disposeIntermediateTensorInfo(T),h.disposeIntermediateTensorInfo(N),D}var R=h.data.get(c.dataId).values,Z=h.data.get(l.dataId).values,M=u||c.dtype,F=e(c.shape,l.shape,R,Z,M),O=(0,r.Z)(F,2),B=O[0],L=O[1];return h.makeTensorInfo(L,M,B)}}function c(t){return function(e,n,r,i,o,s){var u=a.Wap.assertAndGetBroadcastShape(e,n),c=a.D5U.sizeFromShape(u),l=u.length,h=a.D5U.computeStrides(u),f=a.D5U.getTypedArrayFromDType("float32",c),d=a.D5U.getTypedArrayFromDType("float32",c),p=a.Wap.getBroadcastDims(e,u),v=a.Wap.getBroadcastDims(n,u),g=a.Wap.mergeRealAndImagArrays(r,i),m=a.Wap.mergeRealAndImagArrays(o,s),y=e.length,b=a.D5U.computeStrides(e),w=n.length,x=a.D5U.computeStrides(n);if(p.length+v.length===0)for(var k=0;k<f.length;k++){var I=k%g.length,S=k%m.length,_=t(g[2*I],g[2*I+1],m[2*S],m[2*S+1]);f[k]=_.real,d[k]=_.imag}else for(var C=function(){var e=a.D5U.indexToLoc(E,l,h),n=e.slice(-y);p.forEach((function(t){return n[t]=0}));var r=a.D5U.locToIndex(n,y,b),i=e.slice(-w);v.forEach((function(t){return i[t]=0}));var o=a.D5U.locToIndex(i,w,x),s=t(g[2*r],g[2*r+1],m[2*o],m[2*o+1]);f[E]=s.real,d[E]=s.imag},E=0;E<f.length;E++)C();return[f,d,u]}}},71618:function(t,e,n){"use strict";n.d(e,{n:function(){return p}});var r=n(87884),a=n(25589),i=n(36545),o=n(98962),s=n(59090),u=n(95845),c=n(18244),l=n(36241),h=n(88860),f=n(22126),d=n(51802);function p(t,e,n){for(var a=t.shape,o=a[0],s=a[1],u=n.data.get(t.dataId),c=u.complexTensorInfos.real,l=u.complexTensorInfos.imag,h=[o,s],d=r.D5U.sizeFromShape(h),p=r.D5U.getTypedArrayFromDType("float32",d),g=r.D5U.getTypedArrayFromDType("float32",d),m=0;m<o;m++){for(var y=(0,f.tP)({inputs:{x:c},backend:n,attrs:{begin:[m,0],size:[1,s]}}),b=(0,f.tP)({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,s]}}),w=(0,i.P)({inputs:{real:y,imag:b},backend:n}),x=v(w,e,n),k=x.real,I=x.imag,S=r.Wap.mergeRealAndImagArrays(k,I),_=0;_<s;_++){var C=r.Wap.getComplexWithIndex(S,_);p[m*s+_]=C.real,g[m*s+_]=C.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w)}var E=n.makeTensorInfo(h,"float32",p),A=n.makeTensorInfo(h,"float32",g),T=(0,i.P)({inputs:{real:E,imag:A},backend:n});return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(A),T}function v(t,e,n){var a=r.D5U.sizeFromShape(t.shape),i=n.data.get(t.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,u=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((x=a)&x-1)){var c=g(o,u,a,e,n),l=[t.shape[0],t.shape[1]];if(e){var f=n.makeTensorInfo(l,"float32",c.real),d=n.makeTensorInfo(l,"float32",c.imag),p=n.makeTensorInfo([],"float32",r.D5U.createScalarValue(a,"float32")),v=(0,s.y)({inputs:{x:p},backend:n}),m=h.v_.kernelFunc({inputs:{a:f,b:p},backend:n}),y=h.v_.kernelFunc({inputs:{a:d,b:v},backend:n}),b=n.data.get(m.dataId).values,w=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),{real:b,imag:w}}return c}var x,k=function(t,e,n){for(var a=new Float32Array(2*e),i=0;i<e;i++){for(var o=0,s=0,u=0;u<e;u++){var c=r.Wap.exponent(i*u,e,n),l=r.Wap.getComplexWithIndex(t,u);o+=l.real*c.real-l.imag*c.imag,s+=l.real*c.imag+l.imag*c.real}n&&(o/=e,s/=e),r.Wap.assignToTypedArray(a,o,s,i)}return a}(r.Wap.mergeRealAndImagArrays(o,u),a,e);return r.Wap.splitRealAndImagArrays(k)}function g(t,e,n,s,h){if(1===n)return{real:t,imag:e};var f=r.Wap.mergeRealAndImagArrays(t,e),p=n/2,v=r.Wap.complexWithEvenIndex(f),m=v.real,y=v.imag,b=[m.length],w=h.makeTensorInfo(b,"float32",m),x=h.makeTensorInfo(b,"float32",y),k=(0,i.P)({inputs:{real:w,imag:x},backend:h}),I=r.Wap.complexWithOddIndex(f),S=I.real,_=I.imag,C=[S.length],E=h.makeTensorInfo(C,"float32",S),A=h.makeTensorInfo(C,"float32",_),T=(0,i.P)({inputs:{real:E,imag:A},backend:h}),N=g(m,y,p,s,h),D=N.real,R=N.imag,Z=[D.length],M=h.makeTensorInfo(Z,"float32",D),F=h.makeTensorInfo(Z,"float32",R),O=(0,i.P)({inputs:{real:M,imag:F},backend:h}),B=g(S,_,p,s,h),L=B.real,P=B.imag,U=[L.length],z=h.makeTensorInfo(U,"float32",L),W=h.makeTensorInfo(U,"float32",P),V=(0,i.P)({inputs:{real:z,imag:W},backend:h}),G=r.Wap.exponents(n,s),j=[G.real.length],H=h.makeTensorInfo(j,"float32",G.real),X=h.makeTensorInfo(j,"float32",G.imag),q=(0,i.P)({inputs:{real:H,imag:X},backend:h}),Y=(0,c.Jp)({inputs:{a:q,b:V},backend:h}),K=(0,a.IH)({inputs:{a:O,b:Y},backend:h}),Q=(0,d.lu)({inputs:{a:O,b:Y},backend:h}),J=(0,l.k)({inputs:{input:K},backend:h}),$=(0,l.k)({inputs:{input:Q},backend:h}),tt=(0,u.a)({inputs:{input:K},backend:h}),et=(0,u.a)({inputs:{input:Q},backend:h}),nt=(0,o.z)({inputs:[J,$],backend:h,attrs:{axis:0}}),rt=(0,o.z)({inputs:[tt,et],backend:h,attrs:{axis:0}}),at=h.data.get(nt.dataId).values,it=h.data.get(rt.dataId).values;return h.disposeIntermediateTensorInfo(w),h.disposeIntermediateTensorInfo(x),h.disposeIntermediateTensorInfo(k),h.disposeIntermediateTensorInfo(E),h.disposeIntermediateTensorInfo(A),h.disposeIntermediateTensorInfo(T),h.disposeIntermediateTensorInfo(M),h.disposeIntermediateTensorInfo(F),h.disposeIntermediateTensorInfo(O),h.disposeIntermediateTensorInfo(z),h.disposeIntermediateTensorInfo(W),h.disposeIntermediateTensorInfo(V),h.disposeIntermediateTensorInfo(H),h.disposeIntermediateTensorInfo(X),h.disposeIntermediateTensorInfo(q),h.disposeIntermediateTensorInfo(Y),h.disposeIntermediateTensorInfo(K),h.disposeIntermediateTensorInfo(Q),h.disposeIntermediateTensorInfo(J),h.disposeIntermediateTensorInfo(tt),h.disposeIntermediateTensorInfo($),h.disposeIntermediateTensorInfo(et),h.disposeIntermediateTensorInfo(nt),h.disposeIntermediateTensorInfo(rt),{real:at,imag:it}}},6904:function(t,e,n){"use strict";n.d(e,{Q:function(){return l}});var r=n(37742),a=n(59090),i=n(76455),o=n(28176),s=n(64095),u=n(3576),c=n(294);function l(t,e,n,l,h){if("linear"===n)return(0,a.y)({inputs:{x:e},backend:t});if("relu"===n)return(0,s.U)({inputs:{x:e},backend:t});if("elu"===n)return(0,r.p)({inputs:{x:e},backend:t});if("relu6"===n)return(0,u.b)({inputs:{x:e},backend:t});if("prelu"===n)return(0,o.A)({inputs:{x:e,alpha:l},backend:t});if("leakyrelu"===n)return(0,i.h)({inputs:{x:e},backend:t,attrs:{alpha:h}});if("sigmoid"===n)return(0,c.XD)({inputs:{x:e},backend:t});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}},56703:function(t,e,n){"use strict";n.d(e,{Hc:function(){return o},TW:function(){return s},d_:function(){return a},sF:function(){return i}});var r=n(87884);function a(t,e,n,a,i,o){for(var s=i.strideHeight,u=i.strideWidth,c=i.dilationHeight,l=i.dilationWidth,h=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=(0,r.f3b)(i.outShape,n),m=g.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],w=i.outShape[3],x=0;x<i.batchSize;++x)for(var k=x*y,I=x*a[0],S=0;S<i.inChannels;++S)for(var _=0;_<i.outHeight;++_)for(var C=_*s-d,E=Math.max(0,C),A=Math.min(i.inHeight,h+C),T=k+_*b,N=0;N<i.outWidth;++N){for(var D=N*u-p,R=Math.max(0,D),Z=Math.min(i.inWidth,f+D),M=v,F=0,O=0,B=E;B<A;B+=c){for(var L=I+B*a[1],P=R;P<Z;P+=l){var U=t[L+P*a[2]+S];"max"===o&&U>M?M=U:"avg"===o&&(F+=U,O++)}if(isNaN(M))break}m[T+N*w+S]="avg"===o?F/O:M}return g}function i(t,e,n,a){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=(0,r.f3b)(a.outShape,"int32"),u=a.strideHeight,c=a.strideWidth,l=a.dilationHeight,h=a.dilationWidth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,v=a.padInfo.left,g=(0,r.f3b)(e,n,t),m=0;m<a.batchSize;++m)for(var y=0;y<a.inChannels;++y)for(var b=0;b<a.outHeight;++b){for(var w=b*u-p,x=w;x<0;)x+=l;for(var k=Math.min(a.inHeight,f+w),I=0;I<a.outWidth;++I){for(var S=I*c-v,_=S;_<0;)_+=h;for(var C=Math.min(a.inWidth,d+S),E=Number.NEGATIVE_INFINITY,A=-1,T=x;T<k;T+=l)for(var N=T-w,D=_;D<C;D+=h){var R=D-S,Z=g.get(m,T,D,y);Z>E&&(E=Z,A=i?o?((m*a.inHeight+T)*a.inWidth+D)*a.inChannels+y:(T*a.inWidth+D)*a.inChannels+y:N*d+R)}s.set(A,m,b,I,y)}}return s}function o(t,e,n,a,i,o){for(var s=i.strideDepth,u=i.strideHeight,c=i.strideWidth,l=i.dilationDepth,h=i.dilationHeight,f=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=i.padInfo.front,m=i.padInfo.top,y=i.padInfo.left,b="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=(0,r.f3b)(i.outShape,n),x=w.values,k=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],I=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],_=i.outShape[4],C=0;C<i.batchSize;++C)for(var E=C*k,A=C*a[0],T=0;T<i.inChannels;++T)for(var N=0;N<i.outDepth;++N){for(var D=N*s-g,R=D;R<0;)R+=l;for(var Z=Math.min(i.inDepth,d+D),M=E+N*I,F=0;F<i.outHeight;++F){for(var O=F*u-m,B=O;B<0;)B+=h;for(var L=Math.min(i.inHeight,p+O),P=M+F*S,U=0;U<i.outWidth;++U){for(var z=U*c-y,W=z;W<0;)W+=f;for(var V=Math.min(i.inWidth,v+z),G=P+U*_,j=b,H=0,X=0,q=R;q<Z;q+=l){for(var Y=A+q*a[1],K=B;K<L;K+=h){for(var Q=Y+K*a[2],J=W;J<V;J+=f){var $=t[Q+J*a[3]+T];if("max"===o&&$>j?j=$:"avg"===o&&(H+=$,X++),isNaN(j))break}if(isNaN(j))break}if(isNaN(j))break}x[G+T]="avg"===o?H/Math.max(X,1):j}}}return w}function s(t,e){for(var n=(0,r.f3b)(e.outShape,"int32"),a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,v=e.padInfo.left,g=0;g<e.batchSize;++g)for(var m=0;m<e.inChannels;++m)for(var y=0;y<e.outDepth;++y){for(var b=y*a-d,w=b;w<0;)w+=s;for(var x=Math.min(e.inDepth,l+b),k=0;k<e.outHeight;++k){for(var I=k*i-p,S=I;S<0;)S+=u;for(var _=Math.min(e.inHeight,h+I),C=0;C<e.outWidth;++C){for(var E=C*o-v,A=E;A<0;)A+=c;for(var T=Math.min(e.inWidth,f+E),N=Number.NEGATIVE_INFINITY,D=-1,R=w;R<x;R+=s)for(var Z=R-b,M=S;M<_;M+=u)for(var F=M-I,O=A;O<T;O+=c){var B=O-E,L=t.get(g,R,M,O,m);L>=N&&(N=L,D=Z*h*f+F*h+B)}n.set(D,g,y,k,C,m)}}}return n}},50422:function(t,e,n){"use strict";n.d(e,{a:function(){return a}});var r=n(87884);function a(t){return function(e,n,a){for(var i=r.D5U.getTypedArrayFromDType(n,e.length),o=0;o<e.length;++o)i[o]=t(e[o],a);return i}}},91844:function(t,e,n){"use strict";n.d(e,{A:function(){return i},O:function(){return o}});var r=n(87884),a=n(23193);function i(t,e,n){return function(i){var o=i.inputs,s=i.attrs,u=i.backend,c=o.x;if((0,a.H)(c,t),"string"===c.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var l=u,h=l.data.get(c.dataId).values,f=r.D5U.sizeFromShape(c.shape),d=n||c.dtype,p=r.D5U.getArrayFromDType(d,f),v=0;v<f;++v)p[v]=e(h[v],s);return l.makeTensorInfo(c.shape,d,p)}}function o(t,e,n){return function(r){var i=r.inputs,o=r.attrs,s=r.backend,u=i.x;if((0,a.H)(u,t),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var c=s,l=c.data.get(u.dataId).values,h=n||u.dtype,f=e(l,h,o);return c.makeTensorInfo(u.shape,h,f)}}},94842:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(87884),a=n(36545);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var o=i(t,e,"float32"),s=i(t,e,"float32");return(0,a.P)({inputs:{real:o,imag:s},backend:t})}var u=r.D5U.makeZerosTypedArray(r.D5U.sizeFromShape(e),n);return t.makeTensorInfo(e,n,u)}},20874:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},62873:function(t,e,n){"use strict";n.d(e,{p:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.outputShape=[],this.outputShape=e,this.variableNames=n.map((function(t,e){return"T".concat(e)}));var r=[];this.variableNames.forEach((function(t){r.push("float v".concat(t," = get").concat(t,"AtOutCoords();"))}));var i=this.variableNames.map((function(t){return"v".concat(t)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(i,";\n        setOutput(result);\n      }\n    ")}))},58086:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((function(t,e){return"T".concat(e)}));var r=[];this.variableNames.forEach((function(t){r.push("vec4 v".concat(t," = get").concat(t,"AtOutCoords();"))}));var i=this.variableNames.map((function(t){return"v".concat(t)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(i,";\n        setOutput(result);\n      }\n    ")}))},42199:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["A"];var i=e.windowSize,o=e.batchSize,s=e.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,s];var u="max"===n?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(i,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(i,"; i++) {\n          int inIdx = ").concat(c,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(u," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}))},52339:function(t,e,n){"use strict";n.d(e,{t:function(){return u}});var r=n(43144),a=n(15671),i=n(87884),o=n(20889),s=n(97437),u=(0,r.Z)((function t(e,n,r,u){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,i.D5U.assert(e.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var c=e[e.length-1],l=Math.ceil(c/n);this.outputShape=e.slice(0,-1),l>1&&this.outputShape.push(l),u||this.variableNames.push("bestIndicesA");var h,f,d=this.outputShape,p=d.length,v=(0,s.kW)(p),g=(0,o.Ky)("coords",p);if(1===l){f=p+1;var m=(0,s.kW)(f);h="\n        ".concat(m," sourceLocR = ").concat(m,"(").concat(g.join(),", 0);\n        ++").concat(g[p-1],";\n        ").concat(m," sourceLocG = ").concat(m,"(").concat(g.join(),", 0);\n        ++").concat(g[p-2],";\n        ").concat(m," sourceLocA = ").concat(m,"(").concat(g.join(),", 0);\n        --").concat(g[p-1],";\n        ").concat(m," sourceLocB = ").concat(m,"(").concat(g.join(),", 0);\n        --").concat(g[p-2],";")}else f=p,h="\n        ".concat(v," sourceLocR = coords;\n        ++").concat(g[p-1],";\n        ").concat(v," sourceLocG = coords;\n        ++").concat(g[p-2],";\n        ").concat(v," sourceLocA = coords;\n        --").concat(g[p-1],";\n        ").concat(v," sourceLocB = coords;\n        --").concat(g[p-2],";");var y=["x","y","z","w","u","v"].slice(0,f),b="."+y[f-1],w=y.map((function(t){return"int "+t})),x=(0,o.Ky)("sourceLocR",f-1).concat("inIdx.r"),k=(0,o.Ky)("sourceLocG",f-1).concat("inIdx.g"),I=(0,o.Ky)("sourceLocB",f-1).concat("inIdx.b"),S=(0,o.Ky)("sourceLocA",f-1).concat("inIdx.a"),_="max"===r?"greaterThan":"lessThan",C=u?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(k.join(),"),\n                             getBestIndicesAChannel(").concat(I.join(),"),\n                             getBestIndicesAChannel(").concat(S.join(),")));"),E="vec4(\n            getAChannel(".concat(x.join(),"),\n            hasNextCol ? getAChannel(").concat(k.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(I.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(S.join(),") : 0.)"),A=u?"":"\n      float getBestIndicesAChannel(".concat(w.join(),") {\n        return getChannel(getBestIndicesA(").concat(y.join(),"),\n                                          vec2(").concat(y.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(w.join(),") {\n        return getChannel(getA(").concat(y.join(),"),\n                               vec2(").concat(y.slice(-2).join(),"));\n      }\n      ").concat(A,"\n      void main() {\n        ").concat(v," coords = getOutputCoords();\n        bool hasNextCol = ").concat(g[p-1]," < ").concat(d[p-1]-1,";\n        bool hasNextRow = ").concat(g[p-2]," < ").concat(d[p-2]-1,";\n        ").concat(h,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(b,", sourceLocG").concat(b,",\n          sourceLocB").concat(b,", sourceLocA").concat(b,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(E,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(C,"\n          vec4 candidate = ").concat(E,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(_,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}))},30533:function(t,e,n){"use strict";n.d(e,{o:function(){return i},z:function(){return o}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,h=c-1-e.padInfo.top,f=l-1-e.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(h,", ").concat(f,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(c,";\n            wR += ").concat(s,") {\n          float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(u,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,l=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,v=f-1-e.padInfo.front,g=d-1-e.padInfo.top,m=p-1-e.padInfo.left,y=1/(n*r*i);this.userCode="\n      const ivec3 pads = ivec3(".concat(v,", ").concat(g,", ").concat(m,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(c,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(h,") {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}))},5474:function(t,e,n){"use strict";n.d(e,{QC:function(){return M}});var r=n(29439),a=n(74165),i=n(93433),o=n(15861),s=n(15671),u=n(43144),c=n(97326),l=n(60136),h=n(29388),f=(n(86119),n(87884)),d=n(51157),p=n(98858),v=n(82097),g=n(78241),m=n(45792),y=n(84381),b=n(957),w=n(79780),x=n(1752),k=n(99391),I=n(44169),S=n(64443),_=n(70957),C=n(65904),E=n(36595),A=n(29190),T=n(19684),N=n(97333),D=f.GDt.ZA,R={};var Z=(0,f.OBj)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var M=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r,a,i;if((0,s.Z)(this,n),(r=e.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!(0,f.OBj)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=t){if(t instanceof w.A)a=t;else{var o=(0,d.jl)((0,f.OBj)().getNumber("WEBGL_VERSION"),t);a=new w.A(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var u=(0,d.jl)((0,f.OBj)().getNumber("WEBGL_VERSION"));a=new w.A(u),r.binaryCache=((i=(0,f.OBj)().getNumber("WEBGL_VERSION"))in R||(R[i]={}),R[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new C.I(r.gpgpu),r.numMBBeforeWarning=null==(0,f.OBj)().global.screen?1024:(0,f.OBj)().global.screen.height*(0,f.OBj)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new f.JLz((0,c.Z)(r),(0,f.SRH)()),r}return(0,u.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(t,e,n,r,a,i){var o=this.makeTensorInfo(e,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:t,texShape:[r,a]},s.texShape=[r,a];var u=N.ih(e),c=new y.F(u,!1,i),l=this.runWebGLProgram(c,[o],n,[[r,a]]);return l.shape=e,s.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}},{key:"write",value:function(t,e,n){if(((0,f.OBj)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,f.OBj)().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:_.v2.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(t){return this.texData.has(t)?this.texData.get(t).refCount:0}},{key:"incRef",value:function(t){this.texData.get(t).refCount++}},{key:"decRef",value:function(t){this.texData.has(t)&&this.texData.get(t).refCount--}},{key:"move",value:function(t,e,n,r,a){if((0,f.OBj)().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:_.v2.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(t){this.disposeData(t.dataId)}},{key:"readSync",value:function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,a=e.complexTensorInfos,i=e.slice,o=e.shape,s=e.isPacked;if(null!=i){var u;u=s?new A.cc(o,E.bl):new E.l(o,E.bl);var c=this.runWebGLProgram(u,[{dataId:t,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var h,d,p=null!=this.activeTimers;if(p&&(h=f.D5U.now()),"complex64"===r){var v=this.readSync(a.real.dataId),g=this.readSync(a.imag.dataId);d=f.Wap.mergeRealAndImagArrays(v,g)}else d=this.getValuesFromTexture(t);return p&&(this.downloadWaitMs+=f.D5U.now()-h),this.convertAndCacheOnCPU(t,d)}},{key:"read",value:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(e){var n,r,o,s,u,c,l,h,d,p,v,g,m,y,b,w,x,k,I,S,C,T,D;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pendingRead.has(e)){t.next=3;break}return n=this.pendingRead.get(e),t.abrupt("return",new Promise((function(t){return n.push(t)})));case 3:if(r=this.texData.get(e),o=r.values,s=r.shape,u=r.slice,c=r.dtype,l=r.complexTensorInfos,h=r.isPacked,null==u){t.next=11;break}return d=h?new A.cc(s,E.bl):new E.l(s,E.bl),p=this.runWebGLProgram(d,[{dataId:e,shape:s,dtype:c}],c),v=this.read(p.dataId),this.disposeIntermediateTensorInfo(p),t.abrupt("return",v);case 11:if(null==o){t.next=13;break}return t.abrupt("return",this.convertAndCacheOnCPU(e));case 13:if(!(0,f.OBj)().getBool("DEBUG")){t.next=16;break}if((0,f.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==(0,f.OBj)().getNumber("WEBGL_VERSION")){t.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(g=null,"complex64"!==c&&(0,f.OBj)().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),b=this.texData.get(m.dataId),g=(y=this.gpgpu).createBufferFromTexture.apply(y,[b.texture.texture].concat((0,i.Z)(_.Yz(s))))),this.pendingRead.set(e,[]),"complex64"===c){t.next=22;break}return t.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==c){t.next=31;break}return t.next=25,Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]);case 25:x=t.sent,k=x[0],I=x[1],w=f.Wap.mergeRealAndImagArrays(k,I),t.next=32;break;case 31:null==g?w=this.getValuesFromTexture(e):(S=f.D5U.sizeFromShape(s),w=this.gpgpu.downloadFloat32MatrixFromBuffer(g,S));case 32:return null!=m&&this.disposeIntermediateTensorInfo(m),null!=g&&(C=this.gpgpu.gl,N.O7(C,(function(){return C.deleteBuffer(g)}))),T=this.convertAndCacheOnCPU(e,w),D=this.pendingRead.get(e),this.pendingRead.delete(e),D.forEach((function(t){return t(T)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&(0,f.SRH)().removeDataId(e,this),this.pendingDeletes--),t.abrupt("return",T);case 40:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"readToGPU",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(t),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new A.cc(a,E.bl):new E.l(a,E.bl);var l=this.runWebGLProgram(c,[{dataId:t,shape:a,dtype:o}],o),h=this.readToGPU(l,e);return this.disposeIntermediateTensorInfo(l),h}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(t,e.customTexShape),p=(0,f.SRH)().makeTensorFromTensorInfo(d),v=this.texData.get(d.dataId);return Object.assign({tensorRef:p},v.texture)}},{key:"bufferSync",value:function(t){var e=this.readSync(t.dataId);if("string"===t.dtype)try{var n=e.map((function(t){return f.D5U.decodeString(t)}));return(0,f.f3b)(t.shape,t.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,f.f3b)(t.shape,t.dtype,e)}},{key:"checkNumericalProblems",value:function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!N.qF(n)){if((0,f.OBj)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(t){var e=this.texData.get(t),n=e.shape,r=e.dtype,a=e.isPacked,o=f.D5U.sizeFromShape(n);if((0,f.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s,u=this.decode(t),c=this.texData.get(u.dataId),l=(s=this.gpgpu).downloadMatrixFromPackedTexture.apply(s,[c.texture.texture].concat((0,i.Z)(_.Yz(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(u),l}var h=(0,f.OBj)().getBool("WEBGL_PACK")&&!0===a,d=h?N.ih(n):n,p=h?new m.d(d):new g.q(d),v=this.runWebGLProgram(p,[{shape:d,dtype:r,dataId:t}],"float32"),y=this.texData.get(v.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture.texture,y.texShape[0],y.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(v),b}},{key:"timerAvailable",value:function(){return(0,f.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(t){var e=this,n=this.activeTimers,r=[],i=!1;null==this.programTimersStack?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t();var s=f.D5U.flatten(this.activeTimers.map((function(t){return t.query}))).filter((function(t){return null!=t})),u=f.D5U.flatten(this.activeTimers.map((function(t){return t.name}))).filter((function(t){return null!=t}));this.activeTimers=n,i&&(this.programTimersStack=null);var c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((0,f.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){t.next=8;break}return t.next=3,Promise.all(s);case 3:n=t.sent,c.kernelMs=f.D5U.sum(n),c.getExtraProfileInfo=function(){return n.map((function(t,e){return{name:u[e],ms:t}})).map((function(t){return"".concat(t.name,": ").concat(t.ms)})).join(", ")},t.next=9;break;case 8:c.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return e.uploadWaitMs=0,e.downloadWaitMs=0,t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return(0,f.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:f.D5U.now(),endMs:null}}},{key:"endTimer",value:function(t){return(0,f.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=f.D5U.now(),t)}},{key:"getQueryTime",value:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(e){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((0,f.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){t.next=2;break}return t.abrupt("return",this.gpgpu.waitForQueryAndGetTime(e));case 2:return n=e,t.abrupt("return",n.endMs-n.startMs);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"disposeData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(e?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!e&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);var n=this.texData.get(t).complexTensorInfos;return null!=n&&(this.disposeData(n.real.dataId,e),this.disposeData(n.imag.dataId,e)),this.texData.delete(t),!0}},{key:"releaseGPUData",value:function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,a=e.texShape,i=e.usage,o=e.isPacked,s=e.slice,u=s&&s.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(t);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}},{key:"getDataInfo",value:function(t){return this.texData.get(t)}},{key:"shouldExecuteOnCPU",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z;return(0,f.OBj)().getBool("WEBGL_CPU_FORWARD")&&t.every((function(t){return null==e.texData.get(t.dataId).texture&&f.D5U.sizeFromShape(t.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(t){f.Wap.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return D(t.shape,e)}},{key:"packedUnaryOp",value:function(t,e,n){var r=new A.cc(t.shape,e),a=this.compileAndRun(r,[t],n);return(0,f.SRH)().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){var e=(0,k.CJ)(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if((0,f.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,E.Et,t.dtype);var n=new E.l(t.shape,E.Et),r=this.compileAndRun(n,[t]);return(0,f.SRH)().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(t,e,n){var r;if("string"===e&&null!=n&&n.length>0&&f.D5U.isString(n[0])){var a=n.map((function(t){return f.D5U.encodeString(t)}));r=this.write(a,t,e)}else r=this.write(n,t,e);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:e}}},{key:"makeOutput",value:function(t,e,n){return(0,f.SRH)().makeTensorFromTensorInfo(this.makeTensorInfo(t,e,n),this)}},{key:"unpackTensor",value:function(t){var e=new T.W(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}},{key:"packTensor",value:function(t){var e=new I.U(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}},{key:"packedReshape",value:function(t,e){var n=[N.Cp(t.shape)].concat((0,i.Z)(N.W8(t.shape))),r={dtype:t.dtype,shape:n,dataId:t.dataId},a=[N.Cp(e)].concat((0,i.Z)(N.W8(e))),o=new S.v(a,n),s=[n],u=this.runWebGLProgram(o,[r],t.dtype,s,!0);return{dataId:u.dataId,shape:e,dtype:u.dtype}}},{key:"decode",value:function(t,e){var n=this.texData.get(t),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=e){var o=f.D5U.sizeFromShape(a),s=e[0]*e[1]*4;f.D5U.assert(o<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,c=N.ih(a);u=r?new v.G(c):new p._(c);var l=[null!=e?e:_.Yz(c)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(u,[{shape:c,dtype:i,dataId:t}],i,l,!0,e).dataId}}},{key:"runWebGLProgram",value:function(t,e,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(t.outputShape,n),u=this.texData.get(s.dataId);if(t.packedOutput&&(u.isPacked=!0),t.outPackingScheme===_.m1.DENSE){var c=null!=o?o:_.Yz(t.outputShape);u.texShape=c.map((function(t){return 2*t}))}if(null!=t.outTexUsage&&(u.usage=t.outTexUsage),0===f.D5U.sizeFromShape(s.shape))return u.values=f.D5U.getTypedArrayFromDType(s.dtype,0),s;var l=[],h=e.map((function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&f.D5U.sizeFromShape(e.shape)<=(0,f.OBj)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}if(a.uploadToGPU(e.dataId),!!n.isPacked!==!!t.packedInputs)e=n.isPacked?a.unpackTensor(e):a.packTensor(e),l.push(e),n=a.texData.get(e.dataId);else if(n.isPacked&&!N.oT(n.shape,e.shape)){var r=e,i=e.shape;e.shape=n.shape,e=a.packedReshape(e,i),l.push(e),n=a.texData.get(e.dataId),r.shape=i}return{shape:e.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,p={shape:s.shape,texData:u,isUniform:!1},v=x.mi(t,h,p),g=this.getAndSaveBinary(v,(function(){return x.IJ(a.gpgpu,t,h,p)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),(0,f.OBj)().get("ENGINE_COMPILE_ONLY")||x._s(this.gpgpu,g,h,p,r),l.forEach((function(t){return a.disposeIntermediateTensorInfo(t)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(d)}));var y=(0,f.OBj)().get("WEBGL_FLUSH_THRESHOLD");if(y>0){var b=f.D5U.now();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!(0,f.OBj)().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var w=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),w}return s}},{key:"compileAndRun",value:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||e[0].dtype,this.runWebGLProgram(t,e,n,r,a)}},{key:"getAndSaveBinary",value:function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var t=this;if(!this.disposed){if(!(0,f.OBj)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,f.lub)((function(){if(!(0,f.OBj)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=(0,f.OBj)().getBool("DEBUG");(0,f.OBj)().set("DEBUG",!1);var n=t.abs((0,f.iD$)(1e-8)).dataSync()[0];if((0,f.OBj)().set("DEBUG",e),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(t){var e=this.texData.get(t),n=e.shape,a=e.dtype,i=e.values,o=e.texture,s=e.usage,u=e.isPacked;if(null==o){var c,l=null!=this.activeTimers;l&&(c=f.D5U.now());var h=e.texShape;if(null==h&&(h=N.Yf(n,u),e.texShape=h),null!=i){var d,p=N.ih(n),v=h[1],g=h[0],m=i instanceof Uint8Array||i instanceof Uint8ClampedArray;if(u||!m){var w=_.qe(h[0],h[1]),x=(0,r.Z)(w,2);v=x[0],g=x[1]}d=u?new b.Z(p,m):new y.F(p,m);var k=m?[g,v]:h,I=this.makeTensorInfo(k,a),S=this.texData.get(I.dataId);S.usage=m?_.v2.PIXELS:_.v2.UPLOAD,S.texShape=k,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(I.dataId),v,g,i);var C=[[g,v]],E=this.runWebGLProgram(d,[I],a,C,!0),A=this.texData.get(E.dataId);e.texShape=A.texShape,e.isPacked=A.isPacked,e.usage=A.usage,(0,f.OBj)().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(e.texture=A.texture,e.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(I),l&&(this.uploadWaitMs+=f.D5U.now()-c)}else{var T=this.acquireTexture(h,s,a,u);e.texture=T}}}},{key:"convertAndCacheOnCPU",value:function(t,e){var n=this.texData.get(t),r=n.dtype;return null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype ".concat(e))}(e,r)),n.values}},{key:"acquireTexture",value:function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)}},{key:"computeBytes",value:function(t,e){return t[0]*t[1]*f.D5U.bytesPerElement(e)}},{key:"checkCompileCompletion",value:function(){for(var t=0,e=Object.entries(this.binaryCache);t<e.length;t++){var n=(0,r.Z)(e[t],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(){var e,n,i,o,s,u,c,l,h=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],!this.gpgpu.parallelCompilationExtension){t.next=6;break}for(n=0,i=Object.entries(this.binaryCache);n<i.length;n++)o=(0,r.Z)(i[n],2),s=o[1],e.push(this.checkCompletionAsync_(s));return t.abrupt("return",Promise.all(e));case 6:u=(0,a.Z)().mark((function t(){var n,i,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,r.Z)(l[c],2),i=n[1],o=new Promise((function(t){try{h.checkCompletion_(i),t(!0)}catch(e){throw e}})),e.push(o);case 3:case"end":return t.stop()}}),t)})),c=0,l=Object.entries(this.binaryCache);case 8:if(!(c<l.length)){t.next=13;break}return t.delegateYield(u(),"t0",10);case 10:c++,t.next=8;break;case 13:return t.abrupt("return",Promise.all(e));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){t.next=4;break}return t.abrupt("return",this.checkCompletion_(e));case 4:return t.next=6,(0,f.glt)();case 6:return t.abrupt("return",this.checkCompletionAsync_(e));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(t){if(!1===this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw N.w4(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var t=0,e=Object.entries(this.binaryCache);t<e.length;t++){var n=(0,r.Z)(e[t],2)[1],a=(0,x.Yv)(this.gpgpu,n.program,n.webGLProgram),i=a.uniformLocations,o=a.customUniformLocations,s=a.infLoc,u=a.nanLoc,c=a.inShapesLocations,l=a.inTexShapesLocations,h=a.outShapeLocation,f=a.outShapeStridesLocation,d=a.outTexShapeLocation;n.uniformLocations=i,n.customUniformLocations=o,n.infLoc=s,n.nanLoc=u,n.inShapesLocations=c,n.inTexShapesLocations=l,n.outShapeLocation=h,n.outShapeStridesLocation=f,n.outTexShapeLocation=d}}},{key:"createTensorFromGPUData",value:function(t,e,n){t.channels=t.channels||"RGBA";var r=t.texture,a=t.height,i=t.width,o=t.channels,s=(0,f.SRH)().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,e,n,a,i,o);return(0,f.SRH)().makeTensorFromDataId(u,e,n,s)}}]),n}(f.Zuw);M.nextDataId=0},76873:function(t,e,n){"use strict";n.d(e,{ic:function(){return i.i}});var r=n(87884),a=n(5474),i=n(68787),o=n(61701);r.C2$.isBrowser()&&(0,r.jqO)("webgl",(function(){return new a.QC}),2);o.kS},44815:function(t,e,n){"use strict";n.d(e,{w:function(){return o}});var r=n(43144),a=n(15671),i=n(87884),o=(0,r.Z)((function t(e,n,r,o,s,u){(0,a.Z)(this,t),this.outputShape=[],this.variableNames=["x","mean","variance"],i.Wap.assertAndGetBroadcastShape(e,n),i.Wap.assertAndGetBroadcastShape(e,r);var c="0.0";null!=o&&(i.Wap.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),c="getOffsetAtOutCoords()");var l="1.0";null!=s&&(i.Wap.assertAndGetBroadcastShape(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(c,";\n        float scale = ").concat(l,";\n        float inv = scale * inversesqrt(variance + float(").concat(u,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}))},29541:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(43144),a=n(15671),i=n(87884),o=(0,r.Z)((function t(e,n,r,o,s,u){(0,a.Z)(this,t),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],i.Wap.assertAndGetBroadcastShape(e,n),i.Wap.assertAndGetBroadcastShape(e,r);var c="vec4(0.0)";null!=o&&(i.Wap.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),c="getOffsetAtOutCoords()");var l="vec4(1.0)";null!=s&&(i.Wap.assertAndGetBroadcastShape(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(c,";\n        vec4 scale = ").concat(l,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(u,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}))},55968:function(t,e,n){"use strict";n.d(e,{S:function(){return s},x:function(){return o}});var r=n(43144),a=n(15671),i=n(87884),o={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},s=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=i.Wap.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}))},3784:function(t,e,n){"use strict";n.d(e,{D1:function(){return s},t6:function(){return u}});var r=n(43144),a=n(15671),i=n(87884),o=n(1752),s="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",u=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["A","B"],this.outputShape=i.Wap.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=(0,o.C9)(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}))},63561:function(t,e,n){"use strict";n.d(e,{E2:function(){return l},my:function(){return c}});var r=n(43144),a=n(15671),i=n(87884),o=n(1752),s=n(20889),u=n(97437),c="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",l=(0,r.Z)((function t(e,n,r){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.Z)(this,t),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i.Wap.assertAndGetBroadcastShape(n,r);var l=this.outputShape.length;this.enableShapeUniforms=(0,o.C9)(l);var h="";if(c)if(0===l||1===i.D5U.sizeFromShape(this.outputShape))h="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var f=(0,u.kW)(l);if(h="\n          ".concat(f," coords = getOutputCoords();\n        "),1===l)this.enableShapeUniforms?h+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":h+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var d=(0,s.Ky)("coords",l);this.enableShapeUniforms?h+="\n            bool nextRowOutOfBounds =\n              (".concat(d[l-2]," + 1) >= outShape[").concat(l," - 2];\n            bool nextColOutOfBounds =\n              (").concat(d[l-1]," + 1) >= outShape[").concat(l," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):h+="\n            bool nextRowOutOfBounds =\n              (".concat(d[l-2]," + 1) >= ").concat(this.outputShape[l-2],";\n            bool nextColOutOfBounds =\n              (").concat(d[l-1]," + 1) >= ").concat(this.outputShape[l-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(h,"\n\n        setOutput(result);\n      }\n    ")}))},51157:function(t,e,n){"use strict";n.d(e,{jl:function(){return s},nd:function(){return o}});var r=n(87884),a={},i={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function o(t,e){a[t]=e}function s(t,e){if(!(t in a)||null!=e){var n=function(t,e){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==e?function(t){if("undefined"!==typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t):e;n.addEventListener("webglcontextlost",(function(e){e.preventDefault(),delete a[t]}),!1),(0,r.OBj)().getBool("SOFTWARE_WEBGL_ENABLED")&&(i.failIfMajorPerformanceCaveat=!1);if(1===t)return n.getContext("webgl",i)||n.getContext("experimental-webgl",i);return n.getContext("webgl2",i)}(t,e);if(null===n)return console.log("Could not get context for WebGL version",t),null;a[t]=n}var o=a[t];return null==o||o.isContextLost()?(delete a[t],s(t)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),a[t])}},96583:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}))},2903:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}))},44753:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}))},68911:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(43144),a=n(15671),i=n(87884),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.outputShape=[],this.outputShape=i.Wap.computeOutShape(e,1),this.variableNames=e.map((function(t,e){return"T".concat(e)}));var n=new Array(e.length-1);n[0]=e[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+e[r][1];for(var o=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],s=1;s<n.length;s++){var u=n[s-1];o.push("else if (yC < ".concat(n[s],") ")+"setOutput(getT".concat(s,"(yR, yC-").concat(u,"));"))}var c=n.length,l=n[n.length-1];o.push("else setOutput(getT".concat(c,"(yR, yC-").concat(l,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(o.join("\n        "),"\n      }\n    ")}))},59094:function(t,e,n){"use strict";n.d(e,{R:function(){return u}});var r=n(43144),a=n(15671),i=n(87884),o=n(20889),s=n(97437),u=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=i.Wap.computeOutShape(e,n);var r=this.outputShape,u=r.length,l=(0,s.kW)(u),h=(0,o.Ky)("coords",u),f=["x","y","z","w","u","v"].slice(0,u);this.variableNames=e.map((function(t,e){return"T".concat(e)}));var d=new Array(e.length-1);d[0]=e[0][n];for(var p=1;p<d.length;p++)d[p]=d[p-1]+e[p][n];for(var v=f[n],g=f.slice(-2),m=f.join(),y="if (".concat(v," < ").concat(d[0],") {\n        return getChannel(\n            getT0(").concat(m,"), vec2(").concat(g.join(),"));\n        }"),b=1;b<d.length;b++){var w=d[b-1];y+="\n        if (".concat(v," < ").concat(d[b],"  && ").concat(v," >= ").concat(d[b-1],") {\n          return getChannel(\n            getT").concat(b,"(").concat(c(f,v,w),"),\n            vec2(").concat(c(g,v,w),"));\n        }")}var x=d.length,k=d[d.length-1];y+="\n        return getChannel(\n          getT".concat(x,"(").concat(c(f,v,k),"),\n          vec2(").concat(c(g,v,k),"));"),this.userCode="\n      float getValue(".concat(f.map((function(t){return"int "+t})),") {\n        ").concat(y,"\n      }\n\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(h,"), 0., 0., 0.);\n\n        ").concat(h[u-1]," = ").concat(h[u-1]," + 1;\n        if (").concat(h[u-1]," < ").concat(r[u-1],") {\n          result.g = getValue(").concat(h,");\n        }\n\n        ").concat(h[u-2]," = ").concat(h[u-2]," + 1;\n        if (").concat(h[u-2]," < ").concat(r[u-2],") {\n          result.a = getValue(").concat(h,");\n        }\n\n        ").concat(h[u-1]," = ").concat(h[u-1]," - 1;\n        if (").concat(h[u-2]," < ").concat(r[u-2]," &&\n            ").concat(h[u-1]," < ").concat(r[u-1],") {\n          result.b = getValue(").concat(h,");\n        }\n        setOutput(result);\n      }\n    ")}));function c(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?"".concat(t," - ").concat(n):t})).join()}},66550:function(t,e,n){"use strict";n.d(e,{FF:function(){return s},Ng:function(){return i},P2:function(){return o},cc:function(){return u}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,o=e.padInfo.left,s="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              if (").concat(s,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s="channelsLast"===e.dataFormat,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left,l=s?1:2,h=s?2:3,f=s?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(h,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(s,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),s=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,o=e.padInfo.front,s=e.padInfo.top,u=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(s,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(i," - ").concat(u,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),u=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,u=e.strideWidth,c=n-1-e.padInfo.front,l=r-1-e.padInfo.top,h=i-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(c,", ").concat(l,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(s,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(i,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(i," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}))},85695:function(t,e,n){"use strict";n.d(e,{g:function(){return o},u:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,o=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(s," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,s=n-1-e.padInfo.top,u=r-1-e.padInfo.left,c=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(c,"; dm++) {\n              int d2 = d1 * ").concat(c," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}))},56754:function(t,e,n){"use strict";n.d(e,{I:function(){return i},S:function(){return o}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.Z)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,l=e.strideWidth,h=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,v=4*Math.floor(e.inChannels/4),g=e.inChannels%4,m="channelsLast"===e.dataFormat,y=m?1:2,b=m?2:3,w=m?3:1,x="",k="";r&&(x=i?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(c,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(w,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(h,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(v,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===g,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(v,") *\n                    getW(wR, wC, ").concat(v,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(v,", xR, xC) *\n                    getW(wR, wC, ").concat(v,", d2);\n              }\n\n            } else if (").concat(2===g,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(v,", d2),\n                getW(wR, wC, ").concat(v," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(v,"),\n                  getX(batch, xR, xC, ").concat(v," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(v,", xR, xC),\n                  getX(batch, ").concat(v," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===g,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(v,", d2),\n                getW(wR, wC, ").concat(v," + 1, d2),\n                getW(wR, wC, ").concat(v," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(v,"),\n                  getX(batch, xR, xC, ").concat(v," + 1),\n                  getX(batch, xR, xC, ").concat(v," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(v,", xR, xC),\n                  getX(batch, ").concat(v," + 1, xR, xC),\n                  getX(batch, ").concat(v," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(I,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,o=e.strideDepth,s=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,l=e.dilationHeight,h=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,p=e.filterWidth,v=4*Math.floor(e.inChannels/4),g=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(s,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(i,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(c,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(v,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===g,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(v,") *\n                  getW(wF, wR, wC, ").concat(v,", d2);\n              } else if (").concat(2===g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(v,"),\n                  getX(batch, xF, xR, xC, ").concat(v," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(v,", d2),\n                  getW(wF, wR, wC, ").concat(v," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(v,"),\n                  getX(batch, xF, xR, xC, ").concat(v," + 1),\n                  getX(batch, xF, xR, xC, ").concat(v," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(v,", d2),\n                  getW(wF, wR, wC, ").concat(v," + 1, d2),\n                  getW(wF, wR, wC, ").concat(v," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}))},15518:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(43144),a=n(15671),i=n(1752),o=(0,r.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.Z)(this,t),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length);var u=e.filterHeight,c=e.filterWidth,l=e.outChannels/e.inChannels,h="",f="";r&&(h=o?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):s?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),f="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(h,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(l,";\n        int q = d2 - d1 * ").concat(l,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(u,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(c,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}))},37113:function(t,e,n){"use strict";n.d(e,{i:function(){return s}});var r=n(43144),a=n(15671),i=n(87884),o=n(1752),s=(0,r.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.Z)(this,t),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length);for(var c=e.padInfo.left,l=e.strideWidth,h=e.dilationWidth,f=e.filterHeight,d=e.filterWidth,p=d,v="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",g=0;g<d;g++)v+="\n           vec4 xTexelC".concat(2*g,";\n           int xTexelC").concat(2*g,"Ready;\n           vec4 xTexelC").concat(2*g+1,";\n           int xTexelC").concat(2*g+1,"Ready;\n           vec4 xC").concat(g,";");v+="\n     for (int r = 0; r < ".concat(f,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(var m=0;m<d;m++)v+="\n           xTexelC".concat(2*m," = vec4(0.0);\n           xTexelC").concat(2*m,"Ready = 0;\n           xTexelC").concat(2*m+1," = vec4(0.0);\n           xTexelC").concat(2*m+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");v+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var y=0;y<(p+1)/2;y++){var b=2*y;if(v+="\n           xC = xCCorner + ".concat(b*h,";\n           "),1===l){if(b<d&&(c%2===1?(v+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                   xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(b,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(b,"Ready = 1;\n                 }\n               "),v+=1===h&&b>0?"\n                 xC".concat(b," = vec4(xTexelC").concat(b-2,".zw, xTexelC").concat(b,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(b," = vec4(previous.zw, xTexelC").concat(b,".xy);\n                   } else {\n                     xC").concat(b," = vec4(0.0, 0.0, xTexelC").concat(b,".xy);\n                   }\n                   ")):v+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                   xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(b,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(b,"Ready = 1;\n                 }\n\n                 xC").concat(b," = xTexelC").concat(b,";\n                 "),b+1<d)){var w=c%2===0?i.D5U.nearestLargerEven(h):h;h%2===0&&c%2===1||h%2!==0&&c%2!==1?(v+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(w,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                     xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(b+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(b+1,"Ready = 1;\n                   }\n                   "),v+=h>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(b+1," = vec4(previous.zw, xTexelC").concat(b+1,".xy);\n                     } else {\n                      xC").concat(b+1," = vec4(0.0, 0.0, xTexelC").concat(b+1,".xy);\n                     }\n                     "):"\n                     xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".xy);\n                     ")):v+=1===w?"\n                     xC".concat(b+1," = xTexelC").concat(b,";\n                     "):"\n                     xCOffset = xC + ".concat(w,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                       xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(b+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(b+1,"Ready = 1;\n                     }\n\n                     xC").concat(b+1," = xTexelC").concat(b+1,";\n                     ")}}else b<d&&(c%2===1?(v+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                   xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(b,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(b,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                   xTexelC").concat(b+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(b+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(b+1,"Ready = 1;\n                 }\n\n                 xC").concat(b," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n               "),b+1<d&&(v+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(b+1," = vec4(xTexelC").concat(b+1,".xy, final.xy);\n                 "))):(v+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                   xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(b,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(b,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                   xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(b+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(b+1,"Ready = 1;\n                 }\n\n                 xC").concat(b," = vec4(\n                   xTexelC").concat(b,".xy, xTexelC").concat(b+1,".xy);\n               "),b+1<d&&(v+="\n                   xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n                 "))));b<d&&(v+="\n             wTexel = getW(r, ".concat(b,", d1, d2);\n             dotProd += xC").concat(b,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(b,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),b+1<d&&(v+="\n               wTexel = getW(r, ".concat(b+1,", d1, d2);\n               dotProd += xC").concat(b+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(b+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}v+="\n     }\n   ",v+="\n     }\n   ",v+="\n     }\n   ";var x="",k="";r&&(x=s?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):u?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),k="result = activation(result);");var I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(x,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(v,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(I,"\n         ").concat(k,"\n         setOutput(result);\n       }\n     ")}))},21275:function(t,e,n){"use strict";n.d(e,{f:function(){return s}});var r=n(43144),a=n(15671),i=n(87884),o=n(1752),s=(0,r.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.Z)(this,t),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length);for(var c=e.outChannels/e.inChannels,l=e.padInfo.left,h=e.strideWidth,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,v=p,g="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",m=0;m<p;m++)g+="\n          vec4 xTexelC".concat(2*m,";\n          int xTexelC").concat(2*m,"Ready;\n          vec4 xTexelC").concat(2*m+1,";\n          int xTexelC").concat(2*m+1,"Ready;\n          vec4 xC").concat(m,";");g+="\n    for (int r = 0; r < ".concat(d,"; r++) {\n      ");for(var y=0;y<p;y++)g+="\n          xTexelC".concat(2*y," = vec4(0.0);\n          xTexelC").concat(2*y,"Ready = 0;\n          xTexelC").concat(2*y+1," = vec4(0.0);\n          xTexelC").concat(2*y+1,"Ready = 0;\n          xC").concat(y," = vec4(0.0);");g+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var b=0;b<(v+1)/2;b++){var w=2*b;if(g+="\n          xC = xCCorner + ".concat(w*f,";\n          "),1===h){if(w<p&&(l%2===1?(g+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(w,"Ready == 0) {\n                  xTexelC").concat(w," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(w,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(w,"Ready = 1;\n                }\n              "),g+=1===f&&w>0?"\n                xC".concat(w," = vec4(xTexelC").concat(w-2,".zw, xTexelC").concat(w,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(w," = vec4(previous.zw, xTexelC").concat(w,".xy);\n                  } else {\n                    xC").concat(w," = vec4(0.0, 0.0, xTexelC").concat(w,".xy);\n                  }\n                  ")):g+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(w,"Ready == 0) {\n                  xTexelC").concat(w," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(w,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(w,"Ready = 1;\n                }\n\n                xC").concat(w," = xTexelC").concat(w,";\n                "),w+1<p)){var x=l%2===0?i.D5U.nearestLargerEven(f):f;f%2===0&&l%2===1||f%2!==0&&l%2!==1?(g+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(x,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(w+1,"Ready == 0) {\n                    xTexelC").concat(w+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(w+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(w+1,"Ready = 1;\n                  }\n                  "),g+=f>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(w+1," = vec4(previous.zw, xTexelC").concat(w+1,".xy);\n                    } else {\n                     xC").concat(w+1," = vec4(0.0, 0.0, xTexelC").concat(w+1,".xy);\n                    }\n                    "):"\n                    xC".concat(w+1," = vec4(xTexelC").concat(w,".zw, xTexelC").concat(w+1,".xy);\n                    ")):g+=1===x?"\n                    xC".concat(w+1," = xTexelC").concat(w,";\n                    "):"\n                    xCOffset = xC + ".concat(x,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(w+1,"Ready == 0) {\n                      xTexelC").concat(w+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(w+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(w+1,"Ready = 1;\n                    }\n\n                    xC").concat(w+1," = xTexelC").concat(w+1,";\n                    ")}}else w<p&&(l%2===1?(g+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(w,"Ready == 0) {\n                  xTexelC").concat(w," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(w,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(w,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(w+1,"Ready == 0) {\n                  xTexelC").concat(w+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(w+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(w+1,"Ready = 1;\n                }\n\n                xC").concat(w," = vec4(xTexelC").concat(w,".zw, xTexelC").concat(w+1,".zw);\n              "),w+1<p&&(g+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(w+1," = vec4(xTexelC").concat(w+1,".xy, final.xy);\n                "))):(g+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(w,"Ready == 0) {\n                  xTexelC").concat(w," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(w,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(w,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(w+1,"Ready == 0) {\n                  xTexelC").concat(w+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(w+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(w+1,"Ready = 1;\n                }\n\n                xC").concat(w," = vec4(\n                  xTexelC").concat(w,".xy, xTexelC").concat(w+1,".xy);\n              "),w+1<p&&(g+="\n                  xC".concat(w+1," = vec4(xTexelC").concat(w,".zw, xTexelC").concat(w+1,".zw);\n                "))));w<p&&(g+="\n            wTexel = getW(r, ".concat(w,", d1, q);\n            dotProd += xC").concat(w," * vec4(wTexel.xz, wTexel.xz);\n          "),w+1<p&&(g+="\n              wTexel = getW(r, ".concat(w+1,", d1, q);\n              dotProd += xC").concat(w+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}g+="\n    }\n  ",g+="\n      }\n    ";var k="",I="";r&&(k=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):u?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),I="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(k,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(c,";\n        int q = d2 - d1 * ").concat(c,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(g,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(S,"\n        ").concat(I,"\n        setOutput(result);\n      }\n    ")}))},70122:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a,o,s){(0,i.Z)(this,t),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var u=(0,r.Z)(e,4),c=u[0],l=u[1],h=u[2],f=u[3],d=(0,r.Z)(n,1)[0],p=(0,r.Z)(a,2),v=p[0],g=p[1];this.outputShape=[d,v,g,f];var m="bilinear"===o?1:0,y="".concat(l-1,".0"),b="".concat(h-1,".0"),w=v>1?["".concat((l-1)/(v-1)),"(y2-y1) * height_ratio","y1*".concat(y," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(y)],x=(0,r.Z)(w,3),k=x[0],I=x[1],S=x[2],_=g>1?["".concat((h-1)/(g-1)),"(x2-x1) * width_ratio","x1*".concat(b," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(b)],C=(0,r.Z)(_,3),E=C[0],A=C[1],T=C[2];this.userCode="\n      const float height_ratio = float(".concat(k,");\n      const float width_ratio = float(").concat(E,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(c,") {\n          return;\n        }\n\n        float height_scale = ").concat(I,";\n        float width_scale = ").concat(A,";\n\n        float in_y = ").concat(S,";\n        if( in_y < 0.0 || in_y > ").concat(y," ) {\n          setOutput(float(").concat(s,"));\n          return;\n        }\n        float in_x = ").concat(T,";\n        if( in_x < 0.0 || in_x > ").concat(b," ) {\n          setOutput(float(").concat(s,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}))},96754:function(t,e,n){"use strict";n.d(e,{Q:function(){return r},Z:function(){return s}});var r,a=n(43144),i=n(15671),o=n(97437);!function(t){t.Prod="*",t.Sum="+"}(r||(r={}));var s=(0,a.Z)((function t(e,n,a,s){(0,i.Z)(this,t),this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var l=this.outputShape.length,h=this.op===r.Prod?"1.0":"0.0",f=a?h:"getX(".concat(u(l,"coords",this.op),")"),d=this.outputShape[this.outputShape.length-1],p="",v="";a?(p=s?"end != ".concat(d-1):"end != 0",v=s?"end + 1":"end - 1"):(p=s?"end + pow2 < ".concat(d):"end >= pow2",v=s?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat((0,o.kW)(l)," coords = getOutputCoords();\n        int end = ").concat(c(l,"coords",this.op),";\n        float val = ").concat(f,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(p,") {\n          int idx = ").concat(v,";\n          ").concat(c(l,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(u(l,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function u(t,e,n){if(1===t)return"".concat(e);if(2===t)return"".concat(e,".x, ").concat(e,".y");if(3===t)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z");if(4===t)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z, ").concat(e,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(t," is not yet supported"))}function c(t,e,n){if(1===t)return"".concat(e);if(2===t)return"".concat(e,".y");if(3===t)return"".concat(e,".z");if(4===t)return"".concat(e,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(t," is not yet supported"))}},98858:function(t,e,n){"use strict";n.d(e,{_:function(){return c}});var r=n(43144),a=n(15671),i=n(2820),o=n(1752),s=n(21072),u=n(70957),c=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=u.m1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=(0,i.A)();this.outputShape=e,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?s.Kn(["r","c","d"],e):s.RW(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")}))},82097:function(t,e,n){"use strict";n.d(e,{G:function(){return c}});var r=n(43144),a=n(15671),i=n(2820),o=n(1752),s=n(21072),u=n(70957),c=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=u.m1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=(0,i.A)();this.outputShape=e,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?s.Kn(["r","c","d"],e):s.RW(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")}))},45554:function(t,e,n){"use strict";n.d(e,{h:function(){return i}});var r=n(15671),a=n(43144),i=function(){function t(e,n,a){(0,r.Z)(this,t),this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=a,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,a.Z)(t,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),t}()},72617:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}))},52224:function(t,e,n){"use strict";n.d(e,{H:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.inHeight,r=e.inWidth,i=e.padInfo,o=e.strideHeight,s=e.strideWidth,u=e.filterHeight,c=e.filterWidth,l=e.dilationHeight,h=e.dilationWidth,f=i.top,d=i.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(u,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(c,"; w++) {\n              int wIn = wBeg + w * ").concat(h,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}))},78241:function(t,e,n){"use strict";n.d(e,{q:function(){return u}});var r=n(43144),a=n(15671),i=n(2820),o=n(21072),s=n(70957),u=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.outTexUsage=s.v2.DOWNLOAD;var n=(0,i.A)();this.outputShape=e,this.userCode="\n      ".concat(o.ye,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")}))},45792:function(t,e,n){"use strict";n.d(e,{d:function(){return u}});var r=n(43144),a=n(15671),i=n(2820),o=n(21072),s=n(70957),u=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=s.v2.DOWNLOAD;var n=(0,i.A)();this.outputShape=e,this.userCode="\n      ".concat(o.ye,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")}))},84381:function(t,e,n){"use strict";n.d(e,{F:function(){return c}});var r=n(43144),a=n(15671),i=n(2820),o=n(1752),s=n(21072),u={R:0,G:1,B:2,A:3},c=(0,r.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";(0,a.Z)(this,t),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var c=(0,i.A)();this.outputShape=e,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length);var l="result";n&&(l="floor(result * 255. + 0.5)");for(var h="",f=0;f<r.length;f++){var d=r[f];h+="\n          if(offset == ".concat(f,") {\n            result = values[").concat(u[d],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?s.nc():s.ku(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(c.texture2D,"(A, uv);\n          ").concat(h,"\n        }\n        ").concat(c.output," = vec4(").concat(l,", 0., 0., 0.);\n      }\n    ")}))},957:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(43144),a=n(15671),i=n(2820),o=n(1752),s=n(21072),u=(0,r.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=(0,i.A)();this.outputShape=e,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length);var u="",c="result";n&&(c="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var h=0;h<=1;h++){var f=2*l+h;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(h," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(h,";\n          if (localCoords[1] + ").concat(l," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(l,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(f,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(f,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(f,"] = values[2];\n            } else {\n              result[").concat(f,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?s.nc():s.ku(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(u,"\n\n          ").concat(r.output," = ").concat(c,";\n        }\n    ")}))},42229:function(t,e,n){"use strict";n.d(e,{O:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["real","imag"];var i=n[1];this.outputShape=n;var o,s=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),u=r?"".concat(i,".0"):"1.0";if("real"===e)o="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(s,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(i,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(u,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}))},93072:function(t,e,n){"use strict";n.d(e,{o:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}))},86119:function(t,e,n){"use strict";var r=n(87884),a=n(97333),i=(0,r.OBj)();i.registerFlag("HAS_WEBGL",(function(){return i.getNumber("WEBGL_VERSION")>0})),i.registerFlag("WEBGL_VERSION",(function(){return(0,a.uH)(2)?2:(0,a.uH)(1)?1:0})),i.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),i.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===i.get("WEBGL_VERSION")})),i.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),i.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),i.registerFlag("WEBGL_PACK",(function(){return i.getBool("HAS_WEBGL")})),i.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_CLIP",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_PACK_REDUCE",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_CONV_IM2COL",(function(){return i.getBool("WEBGL_PACK")})),i.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return(0,a.lo)(i.getNumber("WEBGL_VERSION"))})),i.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return(0,a.KP)(i.getNumber("WEBGL_VERSION"))})),i.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=i.getNumber("WEBGL_VERSION");return 0===t?0:(0,a.nr)(t)})),i.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return i.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!r.C2$.isMobile()})),i.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return(0,a.wb)(i.getNumber("WEBGL_VERSION"))})),i.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!i.getBool("WEBGL_FORCE_F16_TEXTURES")&&i.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),i.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return(0,a.BH)(i.getNumber("WEBGL_VERSION"))})),i.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return(0,a.Qd)(i.getNumber("WEBGL_VERSION"))})),i.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return i.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),i.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(t){if(t<0&&-1!==t)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(t,"."))})),i.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return r.C2$.isMobile()?1:-1}),(function(t){if(t<0&&-1!==t)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(t,"."))})),i.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),i.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),i.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),i.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),i.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),i.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return i.getBool("IS_TEST")})),i.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),i.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),i.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),i.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}))},56585:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["Image"],this.outputShape=[];var n=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}))},33650:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=(0,i.kW)(this.rank),o=function(t,e){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<t.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(o,"));\n      }\n    ")}))},68262:function(t,e,n){"use strict";n.d(e,{i:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n,r,o){(0,a.Z)(this,t),this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;for(var s=(0,i.kW)(r.length),u="\n    int index;",c=0;c<this.sliceDim;c++)u+="\n          index = round(getIndices(coords[0], ".concat(c,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[c],";\n          flattenIndex += index * ").concat(this.strides[c],";");this.userCode="\n         void main() {\n          ".concat(s," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(u,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}))},2820:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var r=n(87884);function a(){var t,e,n,a,i,o,s,u,c,l;return 2===(0,r.OBj)().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",a="in",i="texture",o="outputColor",s="out vec4 outputColor;",u=(0,r.OBj)().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",a="varying",i="texture2D",o="gl_FragColor",s="",u="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:a,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:u,defineSpecialInf:c,defineRound:l}}},79780:function(t,e,n){"use strict";n.d(e,{A:function(){return d}});var r=n(74165),a=n(15861),i=n(29439),o=n(15671),s=n(43144),u=n(87884),c=n(51157),l=n(35442),h=n(70957),f=n(97333),d=function(){function t(e){(0,o.Z)(this,t),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=(0,u.OBj)().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,(0,c.nd)(n,e)):this.gl=(0,c.jl)(n),e=this.gl,2===(0,u.OBj)().getNumber("WEBGL_VERSION")){var r=e;this.createVertexArray=function(){return f.O7(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(t){return f.O7(r,(function(){return r.bindVertexArray(t)}))},this.deleteVertexArray=function(t){return f.O7(r,(function(){return r.deleteVertexArray(t)}))},this.getVertexArray=function(){return f.O7(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=e){var a=e.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return f.O7(e,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(t){return f.O7(e,(function(){return a.bindVertexArrayOES(t)}))},this.deleteVertexArray=function(t){return f.O7(e,(function(){return a.deleteVertexArrayOES(t)}))},this.getVertexArray=function(){return f.O7(e,(function(){return e.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var i="WEBGL_color_buffer_float",s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,u.OBj)().getNumber("WEBGL_VERSION")){var d="OES_texture_half_float";if(this.textureFloatExtension=f.HH(this.gl,"OES_texture_float"),f.y_(this.gl,d))this.textureHalfFloatExtension=f.HH(this.gl,d);else if((0,u.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),f.y_(this.gl,s))this.colorBufferHalfFloatExtension=f.HH(this.gl,s);else if((0,u.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",f.y_(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!f.y_(this.gl,s))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(s)}this.vertexBuffer=l.Y3(this.gl),this.indexBuffer=l.Hb(this.gl),this.framebuffer=f.d8(this.gl),this.textureConfig=h.Sq(this.gl,this.textureHalfFloatExtension)}return(0,s.Z)(t,[{key:"debug",get:function(){return(0,u.OBj)().getBool("DEBUG")}},{key:"dispose",value:function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;f.O7(e,(function(){return e.finish()})),f.O7(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),f.O7(e,(function(){return e.deleteFramebuffer(t.framebuffer)})),f.O7(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,null)})),f.O7(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)})),f.O7(e,(function(){return e.deleteBuffer(t.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(t,e){return this.throwIfDisposed(),l.T2(this.gl,t,e,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(t,e){return this.throwIfDisposed(),l.iN(this.gl,t,e,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(t,e){return this.throwIfDisposed(),l.BQ(this.gl,t,e,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(t,e){this.throwIfDisposed(),l.Qr(this.gl,t,e)}},{key:"uploadDenseMatrixToTexture",value:function(t,e,n,r){this.throwIfDisposed(),l.Uk(this.gl,t,e,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(t,e){return this.throwIfDisposed(),l.Cs(this.gl,t,e,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(t,e){return this.throwIfDisposed(),l.cU(this.gl,t,e,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(f.ax(this.gl,this.framebuffer),this.outputTexture=null),f.O7(this.gl,(function(){return e.gl.deleteTexture(t)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return l.HC(r.gl,e,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(t,e,n,r,a,i){return l.AD(this.gl,t,e,n,r,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(t,e){return l.ez(this.gl,t,e)}},{key:"createBufferFromTexture",value:function(t,e,n){this.bindTextureToFrameBuffer(t);var r=l.A8(this.gl,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var t=this.createFence(this.gl);return this.pollFence(t)}},{key:"createFence",value:function(t){var e,n,r=this;if((0,u.OBj)().getBool("WEBGL_FENCE_API_ENABLED")){var a=t,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=a.clientWaitSync(i,0,0);return t===a.ALREADY_SIGNALED||t===a.CONDITION_SATISFIED},e=i}else(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return l.P1(r.gl,e,n)}))}},{key:"createProgram",value:function(t){var e=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=l.Jj(n));var r,a=f.HO(n);return f.O7(n,(function(){return n.attachShader(a,e.vertexShader)})),f.O7(n,(function(){return n.attachShader(a,t)})),f.aj(n,a),r=Object.assign(a,{vao:this.createVertexArray()}),this.bindVertexArray(r.vao),f.O7(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)})),console.assert(l.Hc(n,r,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&f.vu(n,r),this.setProgram(r),r}},{key:"deleteProgram",value:function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&(f.O7(this.gl,(function(){return e.gl.deleteProgram(t)})),this.deleteVertexArray(t.vao))}},{key:"setProgram",value:function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&f.vu(this.gl,this.program)),f.O7(this.gl,(function(){return e.gl.useProgram(t)}))}},{key:"getUniformLocation",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?f.XE(this.gl,t,e):f.Hg(this.gl,t,e)}},{key:"getAttributeLocation",value:function(t,e){var n=this;return this.throwIfDisposed(),f.O7(this.gl,(function(){return n.gl.getAttribLocation(t,e)}))}},{key:"getUniformLocationNoThrow",value:function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}},{key:"setInputMatrixTexture",value:function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),f.B(this.gl,t,e,n)}},{key:"setOutputMatrixTexture",value:function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}},{key:"setOutputPackedMatrixTexture",value:function(t,e,n){this.throwIfDisposed();var r=h.qe(e,n),a=(0,i.Z)(r,2),o=a[0],s=a[1];this.setOutputMatrixTextureDriver(t,o,s)}},{key:"setOutputMatrixWriteRegion",value:function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}},{key:"setOutputPackedMatrixWriteRegion",value:function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&f.vu(this.gl,this.program),f.cu(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;if(this.debug){var e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}f.O7(t,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var t=this;this.throwIfDisposed(),f.O7(this.gl,(function(){return t.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=f.HH(this.gl,2===(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.D5U.repeatedTry((function(){return n.disposed||n.isQueryAvailable(e,(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return t.abrupt("return",this.getQueryTime(e,(0,u.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getQueryTime",value:function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(t){var e=this;return new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var t=function(t){for(var e=0;e<t.length;++e){if(!t[e]())break}return e-1}(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e){(0,this.itemsToPoll[e].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}},{key:"addItemToPoll",value:function(t,e){var n=this;if(this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in(0,u.OBj)().platform&&(r=(0,u.OBj)().platform.setTimeoutCustom.bind((0,u.OBj)().platform)),u.D5U.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(t){this.throwIfDisposed(),f.JG(this.gl,t,this.framebuffer),this.debug&&f.cu(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(f.JG(this.gl,this.outputTexture,this.framebuffer),this.debug&&f.cu(this.gl)):f.ax(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(t,e,n){this.throwIfDisposed();var r=this.gl;f.JG(r,t,this.framebuffer),this.debug&&f.cu(r),this.outputTexture=t,f.O7(r,(function(){return r.viewport(0,0,e,n)})),f.O7(r,(function(){return r.scissor(0,0,e,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(t,e,n,r){var a=this;this.throwIfDisposed(),f.O7(this.gl,(function(){return a.gl.scissor(t,e,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),t}()},1752:function(t,e,n){"use strict";n.d(e,{C9:function(){return h},IJ:function(){return o},Yv:function(){return s},_s:function(){return c},mi:function(){return l}});var r=n(87884),a=n(97437),i=n(97333);function o(t,e,n,o){var u=n.map((function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}})),c=u.map((function(t){return t.shapeInfo})),l={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},h=a.Vm(u,l,e),f=(0,i.xc)(t.gl,h),d=t.createProgram(f);return(0,r.OBj)().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:f,source:h,webGLProgram:d,inShapeInfos:c,outShapeInfo:l,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:f,source:h,webGLProgram:d,inShapeInfos:c,outShapeInfo:l},s(t,e,d))}function s(t,e,n){var a,i,o,s,u={},c={},l={},h=[],f=null;s=t.getUniformLocation(n,"NAN",!1),1===(0,r.OBj)().getNumber("WEBGL_VERSION")&&(f=t.getUniformLocation(n,"INFINITY",!1));for(var d=!1,p=0;p<e.variableNames.length;p++){var v=e.variableNames[p];u[v]=t.getUniformLocation(n,v,d),u["offset".concat(v)]=t.getUniformLocation(n,"offset".concat(v),d),e.enableShapeUniforms&&(c["".concat(v,"Shape")]=t.getUniformLocation(n,"".concat(v,"Shape"),d),l["".concat(v,"TexShape")]=t.getUniformLocation(n,"".concat(v,"TexShape"),d))}return e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",d),o=t.getUniformLocation(n,"outShapeStrides",d),i=t.getUniformLocation(n,"outTexShape",d)),e.customUniforms&&e.customUniforms.forEach((function(e,r){h[r]=t.getUniformLocation(n,e.name,d)})),{uniformLocations:u,customUniformLocations:h,infLoc:f,nanLoc:s,inShapesLocations:c,inTexShapesLocations:l,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:i}}function u(t,e){if(t.length!==e.length)throw Error("Binary was compiled with ".concat(t.length," inputs, but ")+"was executed with ".concat(e.length," inputs"));t.forEach((function(t,n){var a=t.logicalShape,i=e[n],o=i.shape;if(!r.D5U.arraysEqual(a,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(o," must match"));if(!t.isUniform||!i.isUniform){var s=t.texShape,u=i.isUniform?null:i.texData.texShape;if(!r.D5U.arraysEqual(s,u))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(u," must match"))}}))}function c(t,e,n,i,o){e.program.enableShapeUniforms||(u(e.inShapeInfos,n),u([e.outShapeInfo],[i]));var s=i.texData.texture,c=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,c[0],c[1]):t.setOutputMatrixTexture(s.texture,c[0],c[1]),t.setProgram(e.webGLProgram),1===(0,r.OBj)().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((function(n,i){var o=e.program.variableNames[i],s=e.uniformLocations[o],u=e.uniformLocations["offset".concat(o)],c=e.inShapesLocations["".concat(o,"Shape")],l=e.inTexShapesLocations["".concat(o,"TexShape")];if(c){var h=a.Tt(e.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(h.length){case 1:t.gl.uniform1iv(c,new Int32Array(h));break;case 2:t.gl.uniform2iv(c,new Int32Array(h));break;case 3:t.gl.uniform3iv(c,new Int32Array(h));break;case 4:t.gl.uniform4iv(c,new Int32Array(h))}}if(l&&t.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=s)if(n.isUniform)if(r.D5U.sizeFromShape(n.shape)<2)t.gl.uniform1f(s,n.uniformValues[0]);else{var f=n.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),t.gl.uniform1fv(s,f)}else null!=n.texData.slice&&null!=u&&t.gl.uniform1i(u,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture.texture,s,i)}));var l=e.outShapeLocation;if(l)switch(i.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(i.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(i.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(i.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(i.shape))}if(e.outShapeStridesLocation){var h=r.D5U.computeStrides(i.shape);switch(i.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(h));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(h));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(h))}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),e.program.customUniforms&&o&&e.program.customUniforms.forEach((function(n,r){var a=e.customUniformLocations[r],i=o[r];if("float"===n.type)t.gl.uniform1fv(a,i);else if("vec2"===n.type)t.gl.uniform2fv(a,i);else if("vec3"===n.type)t.gl.uniform3fv(a,i);else if("vec4"===n.type)t.gl.uniform4fv(a,i);else if("int"===n.type)t.gl.uniform1iv(a,i);else if("ivec2"===n.type)t.gl.uniform2iv(a,i);else if("ivec3"===n.type)t.gl.uniform3iv(a,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));t.gl.uniform4iv(a,i)}})),t.executeProgram()}function l(t,e,n){var i="";e.concat(n).forEach((function(e){var o=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!e.isUniform){var s=e.texData.texShape,u=a.Tt(t.packedInputs,e.shape,s),c=u.useSqueezeShape,l=u.uniformShape,h=u.keptDims,f="",d="",p="";if(1===l.length&&t.packedInputs){var v=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];f="".concat(v[0]>1,"_").concat(v[1]>1)}else if(2!==l.length||t.packedInputs){if(l.length>2&&!t.packedInputs){var g=r.D5U.computeStrides(l);p="".concat(g[0]===s[1],"_").concat(g[g.length-1]===s[1])}}else d="".concat(l[0]>1,"_").concat(l[1]>1);var m=e.shape.length,y=2===l.length&&r.D5U.arraysEqual(e.shape,s),b=1===r.D5U.sizeFromShape(e.shape),w=r.Wap.getBroadcastDims(e.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&r.D5U.arraysEqual(s,n.texData.texShape),k=t.packedInputs||l.length>2?"":"".concat(s[0]>1,"_").concat(s[1]>1);i+="".concat(m,"_").concat(x,"_").concat(c?h:"","_").concat(l.length,"_").concat(b,"_").concat(w,"_").concat(y,"_").concat(f,"_").concat(d,"_").concat(p,"_").concat(k,"_").concat(o)}else{var I=e.isUniform?"uniform":e.texData.texShape;i+="".concat(e.shape,"_").concat(I,"_").concat(o)}}));var o=t.userCode,s=t.constructor.name;return s+="_"+i+"_"+o+"".concat((0,r.OBj)().getNumber("WEBGL_VERSION"))}function h(t){return(0,r.OBj)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}},35442:function(t,e,n){"use strict";n.d(e,{A8:function(){return _},AD:function(){return A},BQ:function(){return m},Cs:function(){return x},HC:function(){return E},Hb:function(){return l},Hc:function(){return k},Jj:function(){return u},NQ:function(){return g},P1:function(){return T},Qr:function(){return S},T2:function(){return d},Uk:function(){return I},Y3:function(){return c},cU:function(){return b},ez:function(){return C},gl:function(){return y},hf:function(){return w},iN:function(){return v},m8:function(){return p},q3:function(){return f}});var r=n(29439),a=n(87884),i=n(2820),o=n(70957),s=n(97333);function u(t){var e=(0,i.A)(),n="".concat(e.version,"\n    precision highp float;\n    ").concat(e.attribute," vec3 clipSpacePos;\n    ").concat(e.attribute," vec2 uv;\n    ").concat(e.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }");return s.Jj(t,n)}function c(t){var e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return s.ED(t,e)}function l(t){var e=new Uint16Array([0,1,2,2,1,3]);return s.mZ(t,e)}function h(t,e,n,r,i,o){s.b6(e,n);var u=s.cU(t),c=t.TEXTURE_2D;return s.O7(t,(function(){return t.bindTexture(c,u)})),s.O7(t,(function(){return t.texParameteri(c,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),s.O7(t,(function(){return t.texParameteri(c,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),s.O7(t,(function(){return t.texParameteri(c,t.TEXTURE_MIN_FILTER,t.NEAREST)})),s.O7(t,(function(){return t.texParameteri(c,t.TEXTURE_MAG_FILTER,t.NEAREST)})),1===(0,a.OBj)().getNumber("WEBGL_VERSION")?s.O7(t,(function(){return t.texImage2D(c,0,r,e,n,0,i,o,null)})):s.O7(t,(function(){return t.texStorage2D(c,1,r,e,n)})),s.O7(t,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),{texture:u,texShape:[n,e]}}function f(t){return t.internalFormatFloat}function d(t,e,n,a){var i=o.kk(e,n),s=(0,r.Z)(i,2);return h(t,s[0],s[1],f(a),a.textureFormatFloat,t.FLOAT)}function p(t){return t.internalFormatHalfFloat}function v(t,e,n,a){var i=o.kk(e,n),s=(0,r.Z)(i,2);return h(t,s[0],s[1],p(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function g(t){return t.downloadTextureFormat}function m(t,e,n,a){var i=o.kk(e,n),s=(0,r.Z)(i,2);return h(t,s[0],s[1],g(a),t.RGBA,t.UNSIGNED_BYTE)}function y(t){return t.internalFormatPackedFloat}function b(t,e,n,a){var i=o.qe(e,n),s=(0,r.Z)(i,2);return h(t,s[0],s[1],y(a),t.RGBA,t.FLOAT)}function w(t){return t.internalFormatPackedHalfFloat}function x(t,e,n,a){var i=o.qe(e,n),s=(0,r.Z)(i,2);return h(t,s[0],s[1],w(a),t.RGBA,a.textureTypeHalfFloat)}function k(t,e,n){return s.O7(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,n)})),s.sb(t,e,"clipSpacePos",n,3,20,0)&&s.sb(t,e,"uv",n,2,20,12)}function I(t,e,n,r,i,o){var u,c,l;s.O7(t,(function(){return t.bindTexture(t.TEXTURE_2D,e)})),i instanceof Uint8Array?(u=new Uint8Array(n*r*4),c=t.UNSIGNED_BYTE,l=t.RGBA):(u=new Float32Array(n*r*4),c=t.FLOAT,l=o.internalFormatPackedFloat),u.set(i),2===(0,a.OBj)().getNumber("WEBGL_VERSION")?s.O7(t,(function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,c,u)})):s.O7(t,(function(){return t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,c,u)})),s.O7(t,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function S(t,e,n){s.O7(t,(function(){return t.bindTexture(t.TEXTURE_2D,e)})),n.data instanceof Uint8Array?2===(0,a.OBj)().getNumber("WEBGL_VERSION")?s.O7(t,(function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)})):s.O7(t,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)})):2===(0,a.OBj)().getNumber("WEBGL_VERSION")?s.O7(t,(function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)})):s.O7(t,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)})),s.O7(t,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function _(t,e,n,r){var a=t.createBuffer();s.O7(t,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)}));var i=16*e*n;return s.O7(t,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)})),s.O7(t,(function(){return t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)})),s.O7(t,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),a}function C(t,e,n){var r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function E(t,e,n,a){var i=o.kk(e,n),u=(0,r.Z)(i,2),c=u[0],l=u[1],h=new Uint8Array(o.yb(e*n,4));return s.O7(t,(function(){return t.readPixels(0,0,c,l,a.downloadTextureFormat,t.UNSIGNED_BYTE,h)})),new Float32Array(h.buffer)}function A(t,e,n,r,a,i,s,u){var c=t,l=new Float32Array(o.Se(i,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}function T(t,e,n){var r=new Float32Array(e*n*4);return s.O7(t,(function(){return t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)})),r}},39839:function(t,e,n){"use strict";n.d(e,{l:function(){return s}});var r=n(43144),a=n(15671),i=n(2820),o=n(1752),s=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=(0,o.C9)(this.outputShape.length);for(var r=n.dataFormat,s=(0,i.A)(),u="channelsLast"===r,c=u?1:2,l=u?2:3,h=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {"),f="",d=0;d<=1;d++)for(var p=0;p<=1;p++)f+="\n          blockIndex = rc.z + ".concat(p,";\n          pos = rc.y + ").concat(d,";\n\n          ").concat(h,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(c,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(l,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(u,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*d+p,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*d+p,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(f,"\n\n        ").concat(s.output," = result;\n      }\n    ")}))},25698:function(t,e,n){"use strict";n.d(e,{ic:function(){return r.ic}});var r=n(76873);n(8755)},65235:function(t,e,n){"use strict";n.d(e,{J:function(){return l}});var r=n(29439),a=n(87884),i=n(42199),o=n(52339),s=n(36414);function u(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.shape[0],s=e.shape[1];null!=r&&(o=r.shape[0],s=r.shape[1]);var c=a.Wap.computeOptimalWindowSize(s),l={windowSize:c,inSize:s,batchSize:o,outSize:Math.ceil(s/c)},h=new i.d(l,n,null==r),f=[e];null!=r&&f.push(r);var d=t.runWebGLProgram(h,f,"int32");if(1===d.shape[1])return d;var p=u(t,e,n,d);return t.disposeIntermediateTensorInfo(d),p}function c(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null!=r?r.shape:e.shape,s=i[i.length-1],u=a.Wap.computeOptimalWindowSize(s),l=new o.t(i,u,n,null==r),h=null==r?[e]:[e,r],f=t.runWebGLProgram(l,h,"int32");if(f.shape.length===e.shape.length){var d=c(t,e,n,f);return t.disposeIntermediateTensorInfo(f),d}return f}function l(t,e,n,i){var o=[n];if(a.Wap.assertAxesAreInnerMostDims("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.shape.length),!(0,a.OBj)().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){var l=[],h=t.texData.get(e.dataId),f=e;null!==h&&h.isPacked&&(f=t.unpackTensor(e),l.push(f));var d=a.Wap.computeOutAndReduceShapes(f.shape,o),p=(0,r.Z)(d,2),v=p[0],g=p[1],m=a.D5U.sizeFromShape(g),y=(0,s.X)({inputs:{x:f},backend:t,attrs:{shape:[-1,m]}});l.push(y);var b=u(t,y,i);l.push(b);var w=(0,s.X)({inputs:{x:b},backend:t,attrs:{shape:v}});return l.forEach((function(e){return t.disposeIntermediateTensorInfo(e)})),w}return c(t,e,i)}},72106:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});var r=n(36595),a="return float(int(x));";function i(t,e){var n=new r.l(t.shape,a),i=e.runWebGLProgram(n,[t],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}},13050:function(t,e,n){"use strict";n.d(e,{AJ:function(){return d},E6:function(){return f},g8:function(){return v},js:function(){return p}});var r=n(29439),a=n(87884),i=n(3784),o=n(63561),s=n(55636),u=n(11296),c=n(28175),l=n(36595),h=n(29190),f="if (isnan(x)) return x;";function d(t){var e=t.opSnippet,n=t.packedOpSnippet,r=t.cpuKernelImpl,i=t.dtype;return function(t){var o,s=t.inputs,u=t.backend,c=s.x,f=u,d=i||c.dtype;if(f.shouldExecuteOnCPU([c])&&null!=r){var p=f.texData.get(c.dataId),v=r(p.values,d);return f.makeTensorInfo(c.shape,d,v)}return o=(0,a.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new h.cc(c.shape,n):new l.l(c.shape,e),f.runWebGLProgram(o,[c],d)}}function p(t){var e=t.opSnippet,n=t.packedOpSnippet,u=t.checkOutOfBounds,c=void 0!==u&&u,l=t.supportsComplex,h=void 0!==l&&l,f=t.cpuKernelImpl,d=t.dtype;return function(t){var u=t.inputs,l=t.backend,p=u.a,v=u.b,g=l;if(h&&"complex64"===p.dtype){var m=g.texData.get(p.dataId),y=g.texData.get(v.dataId),b=[[m.complexTensorInfos.real,y.complexTensorInfos.real],[m.complexTensorInfos.imag,y.complexTensorInfos.imag]].map((function(t){var n=(0,r.Z)(t,2),o=n[0],s=n[1],u={dataId:o.dataId,dtype:o.dtype,shape:p.shape},c={dataId:s.dataId,dtype:s.dtype,shape:v.shape},l=new i.t6(e,p.shape,v.shape);return g.runWebGLProgram(l,[u,c],(0,a.x8V)(o.dtype,s.dtype))})),w=(0,r.Z)(b,2),x=w[0],k=w[1],I=(0,s.P)({inputs:{real:x,imag:k},backend:g});return g.disposeIntermediateTensorInfo(x),g.disposeIntermediateTensorInfo(k),I}var S,_=d||(0,a.x8V)(p.dtype,v.dtype);if(("string"===p.dtype||"string"===v.dtype||g.shouldExecuteOnCPU([p,v]))&&null!=f){var C=g.texData.get(p.dataId).values,E=g.texData.get(v.dataId).values,A="string"===p.dtype?a.Wap.fromUint8ToStringArray(C):C,T="string"===p.dtype?a.Wap.fromUint8ToStringArray(E):E,N=f(p.shape,v.shape,A,T,_),D=(0,r.Z)(N,2),R=D[0],Z=D[1],M=g.makeTensorInfo(Z,_);return g.texData.get(M.dataId).values=R,M}return S=(0,a.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new o.E2(n,p.shape,v.shape,c):new i.t6(e,p.shape,v.shape),g.runWebGLProgram(S,[p,v],_)}}function v(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===t)return e?h.t$:l.t$;if("relu"===t)return e?h.RX:l.RX;if("elu"===t)return e?h.Cv:l.Cv;if("relu6"===t)return e?h.eW:l.eW;if("prelu"===t)return e?c.VO:c.pU;if("leakyrelu"===t)return e?u.s4:u.oA;if("sigmoid"===t)return e?h.Tq:l.Tq;throw new Error("Activation ".concat(t," has not been implemented for the WebGL backend."))}},81321:function(t,e,n){"use strict";n.d(e,{u:function(){return o}});var r=n(87884),a=n(36507),i=n(75069);function o(t,e,n,o){for(var s=function(t){for(var e=[];0===e.length||1!==e[e.length-1].outSize;){var n=e.length?e[e.length-1].outSize:t[1],a=r.Wap.computeOptimalWindowSize(n);e.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return e}(t.shape),u=t,c=0;c<s.length;c++){var l,h=s[c],f=h.inSize,d=h.windowSize,p=h.outSize,v=void 0;v="mean"===n?0===c?new a.h({windowSize:d,inSize:f,batchSize:t.shape[0],outSize:p},f):new a.h({windowSize:d,inSize:f,batchSize:t.shape[0],outSize:p}):new i.f({windowSize:d,inSize:f,batchSize:t.shape[0],outSize:p},n),l=u,u=o.runWebGLProgram(v,[u],e),l.dataId!==t.dataId&&o.disposeIntermediateTensorInfo(l)}return u}},16370:function(t,e,n){"use strict";n.d(e,{V:function(){return o}});var r=n(93433),a=n(64443),i=n(97333);function o(t,e,n){var o=[(0,i.Cp)(t.shape)].concat((0,r.Z)((0,i.W8)(t.shape))),s={dtype:t.dtype,shape:o,dataId:t.dataId},u=[(0,i.Cp)(e)].concat((0,r.Z)((0,i.W8)(e))),c=new a.v(u,o),l=[o],h=n.runWebGLProgram(c,[s],t.dtype,l,!0);return{dataId:h.dataId,shape:e,dtype:h.dtype}}},99391:function(t,e,n){"use strict";n.d(e,{$O:function(){return dt},$j:function(){return Mt},$u:function(){return Zt},A0:function(){return Ft},AR:function(){return Dt},B_:function(){return st},Bk:function(){return Rt},Bo:function(){return mt},CJ:function(){return Et},CV:function(){return zt},Fv:function(){return Ut},KX:function(){return Lt},LS:function(){return Nt},M8:function(){return xt},MZ:function(){return at},PQ:function(){return ht},Qs:function(){return wt},Rn:function(){return lt},Sd:function(){return ft},St:function(){return St},TD:function(){return it},Tg:function(){return bt},Th:function(){return gt},UN:function(){return Ct},X8:function(){return Tt},Y1:function(){return _t},_9:function(){return Ot},aX:function(){return nt},cK:function(){return Y},cZ:function(){return yt},cm:function(){return J},cx:function(){return Q},fy:function(){return kt},gv:function(){return et},hO:function(){return It},ji:function(){return ut},kI:function(){return Bt},kY:function(){return ct},m$:function(){return ot},n7:function(){return tt},nL:function(){return pt},nT:function(){return At},oC:function(){return Pt},pk:function(){return $},qO:function(){return K},r:function(){return vt},tx:function(){return rt}});var r=n(25589),a=n(73737),i=n(60570),o=n(94351),s=n(46563),u=n(68116),c=n(66880),l=n(21354),h=n(97224),f=n(34351),d=n(82666),p=n(69075),v=n(26985),g=n(39813),m=n(18734),y=n(21491),b=n(68298),w=n(4771),x=n(89518),k=n(38094),I=n(18244),S=n(54569),_=n(21566),C=n(89120),E=n(82376),A=n(45203),T=n(76846),N=n(66284),D=n(78105),R=n(28567),Z=n(294),M=n(96220),F=n(22126),O=n(78337),B=n(63634),L=n(35440),P=n(4165),U=n(47497),z=n(18294),W=n(60998),V=n(71489),G=n(51802),j=n(57129),H=n(79516),X=n(31103),q=n(24242),Y=r.EH,K=a.W,Q=a.i,J=i.sJ,$=o.__,tt=s.j,et=u.tW,nt=c.Ro,rt=l.OF,at=h.r6,it=f.m,ot=d.i,st=p.o,ut=v.HL,ct=g.rO,lt=m.lx,ht=y.b,ft=b.vX,dt=w.B,pt=x.wS,vt=k.vP,gt=I.$3,mt=S.uC,yt=_.Gj,bt=C.Qg,wt=E.c,xt=A.S,kt=T.p,It=N.b,St=D.zd,_t=R.N,Ct=Z.VY,Et=M.bk,At=F.rT,Tt=O.c,Nt=B.U,Dt=L.V,Rt=P.zT,Zt=U.t,Mt=z.A,Ft=W.Q,Ot=V.h,Bt=G.VY,Lt=j.R,Pt=H.W,Ut=X.H,zt=q.S},39511:function(t,e,n){"use strict";n.d(e,{f:function(){return u}});var r=n(87884),a=n(99391),i=n(36595),o=n(29190),s="return abs(x);";var u={kernelName:r.SYM,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,u=t.backend,c=n.x;if(u.shouldExecuteOnCPU([c])&&"complex64"!==c.dtype){var l=u.texData.get(c.dataId),h=(0,a.CJ)(l.values);return u.makeTensorInfo(c.shape,c.dtype,h)}return e=(0,r.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new o.cc(c.shape,s):new i.l(c.shape,s),u.runWebGLProgram(e,[c],c.dtype)}}},95667:function(t,e,n){"use strict";n.d(e,{r:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.VGw,backendName:"webgl",kernelFunc:o}},1187:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.SpW,backendName:"webgl",kernelFunc:o}},4666:function(t,e,n){"use strict";n.d(e,{j:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o="return a + b;",s=(0,a.js)({opSnippet:o,packedOpSnippet:o,supportsComplex:!0,cpuKernelImpl:i.cK}),u={kernelName:r.mm_,backendName:"webgl",kernelFunc:s}},31595:function(t,e,n){"use strict";n.d(e,{_:function(){return s}});var r=n(87884),a=n(62873),i=n(58086),o=n(37701);var s={kernelName:r.Xze,backendName:"webgl",kernelFunc:function t(e){var n=e.inputs,s=e.backend,u=n;if(1===u.length)return(0,o.y)({inputs:{x:u[0]},backend:s});if(u.length>(0,r.OBj)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var c=Math.floor(u.length/2),l=t({inputs:u.slice(0,c),backend:s}),h=t({inputs:u.slice(c),backend:s});return t({inputs:[l,h],backend:s})}var f=u.map((function(t){return t.dtype})).reduce((function(t,e){return(0,r.x8V)(t,e)})),d=u.map((function(t){return t.shape})),p=(0,r.OBj)().getBool("WEBGL_PACK")?new i.a(u[0].shape,d):new a.p(u[0].shape,d);return s.runWebGLProgram(p,u,f)}}},24955:function(t,e,n){"use strict";n.d(e,{O:function(){return u}});var r=n(29439),a=n(87884),i=n(81321),o=n(36414),s=n(26289);var u={kernelName:a.oT6,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.axis,h=u.keepDims,f=c.shape.length,d=a.D5U.parseAxisParam(l,c.shape),p=d,v=a.Wap.getAxesPermutation(p,f),g=c;null!=v&&(g=(0,s.p)({inputs:{x:c},backend:n,attrs:{perm:v}}),p=a.Wap.getInnerMostAxes(p.length,f)),a.Wap.assertAxesAreInnerMostDims("all",p,f);var m,y=a.Wap.computeOutAndReduceShapes(g.shape,p),b=(0,r.Z)(y,2),w=b[0],x=b[1],k=a.D5U.sizeFromShape(x),I=(0,o.X)({inputs:{x:g},backend:n,attrs:{shape:[-1,k]}}),S=(0,i.u)(I,I.dtype,"all",n);if(h){var _=a.Wap.expandShapeToKeepDim(w,d);m=(0,o.X)({inputs:{x:S},backend:n,attrs:{shape:_}})}else m=(0,o.X)({inputs:{x:S},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(S),null!=v&&n.disposeIntermediateTensorInfo(g),m}}},12335:function(t,e,n){"use strict";n.d(e,{H:function(){return u}});var r=n(29439),a=n(87884),i=n(81321),o=n(36414),s=n(26289);var u={kernelName:a.IKK,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.axis,h=u.keepDims,f=c.shape.length,d=a.D5U.parseAxisParam(l,c.shape),p=d,v=a.Wap.getAxesPermutation(p,f),g=c;null!=v&&(g=(0,s.p)({inputs:{x:c},backend:n,attrs:{perm:v}}),p=a.Wap.getInnerMostAxes(p.length,f)),a.Wap.assertAxesAreInnerMostDims("any",p,f);var m,y=a.Wap.computeOutAndReduceShapes(g.shape,p),b=(0,r.Z)(y,2),w=b[0],x=b[1],k=a.D5U.sizeFromShape(x),I=(0,o.X)({inputs:{x:g},backend:n,attrs:{shape:[-1,k]}}),S=(0,i.u)(I,I.dtype,"any",n);if(h){var _=a.Wap.expandShapeToKeepDim(w,d);m=(0,o.X)({inputs:{x:S},backend:n,attrs:{shape:_}})}else m=(0,o.X)({inputs:{x:S},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(S),null!=v&&n.disposeIntermediateTensorInfo(g),m}}},1909:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var r=n(87884),a=n(65235),i=n(26289);var o={kernelName:r.sJF,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.axis,c=r.D5U.parseAxisParam(u,s.shape),l=r.Wap.getAxesPermutation(c,s.shape.length),h=s,f=[];null!=l&&(h=(0,i.p)({inputs:{x:s},backend:n,attrs:{perm:l}}),f.push(h),c=r.Wap.getInnerMostAxes(c.length,h.shape.length)),r.Wap.assertAxesAreInnerMostDims("argMax",[c[0]],h.shape.length);var d=(0,a.J)(n,h,c[0],"max");return f.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),d}}},91162:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(87884),a=n(65235),i=n(26289);var o={kernelName:r.aJk,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.axis,c=r.D5U.parseAxisParam(u,s.shape),l=r.Wap.getAxesPermutation(c,s.shape.length),h=s,f=[];null!=l&&(h=(0,i.p)({inputs:{x:s},backend:n,attrs:{perm:l}}),f.push(h),c=r.Wap.getInnerMostAxes(c.length,h.shape.length)),r.Wap.assertAxesAreInnerMostDims("argMin",[c[0]],h.shape.length);var d=(0,a.J)(n,h,c[0],"min");return f.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),d}}},15618:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.M2y,backendName:"webgl",kernelFunc:o}},68904:function(t,e,n){"use strict";n.d(e,{W:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"return log(x + sqrt(x * x + 1.0));",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.qw7,backendName:"webgl",kernelFunc:o}},79341:function(t,e,n){"use strict";n.d(e,{E:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  return atan(x);\n",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.jMg,backendName:"webgl",kernelFunc:o}},65137:function(t,e,n){"use strict";n.d(e,{t:function(){return l}});var r=n(87884),a=n(3784),i=n(63561),o=n(13050),s=a.D1+"\n  return atan(a, b);\n",u="\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+i.my+"\n  return result;\n",c=(0,o.js)({opSnippet:s,packedOpSnippet:u}),l={kernelName:r.QCc,backendName:"webgl",kernelFunc:c}},11334:function(t,e,n){"use strict";n.d(e,{B:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.Oyi,backendName:"webgl",kernelFunc:o}},39494:function(t,e,n){"use strict";n.d(e,{U:function(){return s}});var r=n(87884),a=n(58264),i=n(97333),o=n(37701);var s={kernelName:r.JhU,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x;(0,i.HS)(u,"avgPool");var c=s.filterSize,l=s.strides,h=s.pad,f=s.dimRoundingMode;r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(l,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(l," and dilations '").concat(1,"'")}));var d=r.Wap.computePool2DInfo(u.shape,c,l,1,h,f);if(1===d.filterWidth&&1===d.filterHeight&&r.D5U.arraysEqual(d.inShape,d.outShape))return(0,o.y)({inputs:{x:u},backend:n});var p=new a.n(d,"avg",!1);return n.runWebGLProgram(p,[u],"float32")}}},27621:function(t,e,n){"use strict";n.d(e,{z:function(){return i}});var r=n(87884),a=n(58264);var i={kernelName:r._k9,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=i.filterSize,u=i.strides,c=i.pad,l=i.dimRoundingMode,h=i.dataFormat,f=r.Wap.computePool3DInfo(o.shape,s,u,[1,1,1],c,l,h),d=new a.I(f,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}}},32288:function(t,e,n){"use strict";n.d(e,{Y:function(){return i}});var r=n(87884),a=n(30533);var i={kernelName:r.IMb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.dy,s=e.input,u=i.filterSize,c=i.strides,l=i.pad,h=i.dimRoundingMode,f=r.Wap.computePool3DInfo(s.shape,u,c,[1,1,1],l,h),d=new a.z(f);return n.runWebGLProgram(d,[o],s.dtype)}}},26603:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var r=n(87884),a=n(30533),i=n(97333);var o={kernelName:r.ROF,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.input,c=u;(0,i.HS)([s,u],"avgPoolGrad");var l=o.filterSize,h=o.strides,f=o.pad,d=r.Wap.computePool2DInfo(c.shape,l,h,1,f),p=new a.o(d);return n.runWebGLProgram(p,[s],c.dtype)}}},13587:function(t,e,n){"use strict";n.d(e,{W:function(){return i}});var r=n(87884),a=n(15267);var i={kernelName:r.XLW,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.a,o=e.b,s=r.transposeA,u=r.transposeB;return(0,a.r)({a:i,b:o,transposeA:s,transposeB:u,backend:n})}}},15267:function(t,e,n){"use strict";n.d(e,{R:function(){return l},r:function(){return h}});var r=n(87884),a=n(13050),i=n(12248),o=n(11641),s=n(36414),u=n(25463),c=n(26289),l=1e3;function h(t){var e=t.a,n=t.b,h=t.transposeA,f=t.transposeB,d=t.backend,p=t.bias,v=void 0===p?null:p,g=t.preluActivationWeights,m=void 0===g?null:g,y=t.leakyreluAlpha,b=void 0===y?0:y,w=t.activation,x=void 0===w?null:w,k=e.shape.length,I=n.shape.length,S=h?e.shape[k-2]:e.shape[k-1],_=f?n.shape[I-1]:n.shape[I-2],C=h?e.shape[k-1]:e.shape[k-2],E=f?n.shape[I-2]:n.shape[I-1],A=e.shape.slice(0,-2),T=n.shape.slice(0,-2),N=r.D5U.sizeFromShape(A),D=r.D5U.sizeFromShape(T),R=r.Jyw.assertAndGetBroadcastShape(e.shape.slice(0,-2),n.shape.slice(0,-2)).concat([C,E]);r.D5U.assert(S===_,(function(){return"Error in matMul: inner shapes (".concat(S,") and (")+"".concat(_,") of Tensors with shapes ").concat(e.shape," and ")+"".concat(n.shape," and transposeA=").concat(h)+" and transposeB=".concat(f," must match.")}));var Z,M=h?[N,S,C]:[N,C,S],F=f?[D,E,_]:[D,_,E],O=(0,s.X)({inputs:{x:e},backend:d,attrs:{shape:M}}),B=(0,s.X)({inputs:{x:n},backend:d,attrs:{shape:F}}),L=[O,B],P=Math.max(N,D),U=h?O.shape[1]:O.shape[2],z=null!=v,W=null!=m,V="leakyrelu"===x,G=null!=x?(0,a.g8)(x,!0):null;if((1===C||1===E)&&U>l&&!1===(z||W||V||null!=G)){var j=O,H=B;h&&(j=(0,c.p)({inputs:{x:O},backend:d,attrs:{perm:[0,2,1]}}),L.push(j)),f&&(H=(0,c.p)({inputs:{x:B},backend:d,attrs:{perm:[0,2,1]}}),L.push(H));var X=1===E,q=j;1!==E&&(q=(0,s.X)({inputs:{x:j},backend:d,attrs:{shape:[P,U,1]}}),L.push(q));var Y=1===E?2:1,K=H;X&&(K=(0,s.X)({inputs:{x:H},backend:d,attrs:{shape:[P,1,U]}}),L.push(K));var Q=(0,o.J)({inputs:{a:q,b:K},backend:d});Z=(0,u.S)({inputs:{x:Q},backend:d,attrs:{axis:Y,keepDims:!0}}),L.push(Q)}else{var J=(0,r.x8V)(e.dtype,n.dtype),$=new i.N(M,F,[P,C,E],h,f,z,G,W,V),tt=[O,B];if(null!=v&&tt.push(v),W&&tt.push(m),V){var et=d.makeTensorInfo([],"float32",r.D5U.createScalarValue(b,"float32"));tt.push(et),L.push(et)}Z=d.runWebGLProgram($,tt,J)}var nt=(0,s.X)({inputs:{x:Z},backend:d,attrs:{shape:R}});L.push(Z);for(var rt=0,at=L;rt<at.length;rt++){var it=at[rt];d.disposeIntermediateTensorInfo(it)}return nt}},95622:function(t,e,n){"use strict";n.d(e,{C:function(){return o}});var r=n(87884),a=n(44815),i=n(29541),o={kernelName:r.sHE,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=e.mean,c=e.variance,l=e.offset,h=e.scale;r.D5U.assert(u.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),r.D5U.assert(null==l||u.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),r.D5U.assert(null==h||u.shape.length===h.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f=o.varianceEpsilon;null==f&&(f=.001);var d=[s,u,c],p=null;null!=l&&(p=l.shape,d.push(l));var v=null;null!=h&&(v=h.shape,d.push(h));var g=(0,r.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new i.x(s.shape,u.shape,c.shape,p,v,f):new a.w(s.shape,u.shape,c.shape,p,v,f);return n.runWebGLProgram(g,d,d[0].dtype)}}},85597:function(t,e,n){"use strict";n.d(e,{g:function(){return s}});var r=n(87884),a=n(36414),i=n(34745),o=n(26289),s={kernelName:r.zws,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.blockShape,l=s.crops;r.D5U.assert(u.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var h=c.reduce((function(t,e){return t*e})),f=r.Wap.getReshaped(u.shape,c,h),d=r.Wap.getPermuted(f.length,c.length),p=r.Wap.getReshapedPermuted(u.shape,c,h),v=r.Wap.getSliceBeginCoords(l,c.length),g=r.Wap.getSliceSize(p,l,c.length),m=[],y=(0,a.X)({inputs:{x:u},backend:n,attrs:{shape:f}}),b=(0,o.p)({inputs:{x:y},backend:n,attrs:{perm:d}}),w=(0,a.X)({inputs:{x:b},backend:n,attrs:{shape:p}}),x=(0,i.t)({inputs:{x:w},backend:n,attrs:{begin:v,size:g}});return m.push(y),m.push(b),m.push(w),m.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),x}}},3694:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});var r=n(87884),a=n(99391);var i={kernelName:r.zvY,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=e.weights,s=r.size,u=n.readSync(i.dataId),c=n.readSync(o.dataId),l=(0,a.qO)(u,c,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,l)}}},22590:function(t,e,n){"use strict";n.d(e,{u:function(){return a}});var r=n(87884);var a={kernelName:r.eEB,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.s0,i=e.s1,o=n.readSync(a.dataId),s=n.readSync(i.dataId),u=r.Wap.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return n.makeTensorInfo([u.length],"int32",Int32Array.from(u))}}},48248:function(t,e,n){"use strict";n.d(e,{M:function(){return h}});var r=n(29439),a=n(87884),i=n(99391),o=n(55636),s=n(37701),u=n(8738),c=n(48720),l=n(72106);var h={kernelName:a.RFZ,backendName:"webgl",kernelFunc:function t(e){var n=e.inputs,h=e.backend,f=e.attrs,d=n.x,p=f.dtype;if("complex64"===p){if("complex64"===d.dtype)return(0,s.y)({inputs:{x:d},backend:h});var v=a.lls(d.shape),g=t({inputs:{x:d},backend:h,attrs:{dtype:"float32"}}),m=(0,o.P)({inputs:{real:g,imag:v},backend:h});return v.dispose(),h.disposeIntermediateTensorInfo(g),m}if("complex64"===d.dtype){var y=(0,c.k)({inputs:{input:d},backend:h}),b=t({inputs:{x:y},backend:h,attrs:{dtype:p}});return h.disposeIntermediateTensorInfo(y),b}if(!a.D5U.hasEncodingLoss(d.dtype,p)){var w=(0,s.y)({inputs:{x:d},backend:h});return{dataId:w.dataId,shape:w.shape,dtype:p}}if(h.shouldExecuteOnCPU([d])){var x=h.texData.get(d.dataId).values,k=(0,i.cm)(x,d.shape,d.dtype,p),I=(0,r.Z)(k,3),S=I[0],_=I[1],C=I[2];return h.makeTensorInfo(S,_,C)}if("int32"===p)return(0,l.e)(d,h);if("bool"===p){var E=h.makeTensorInfo([],"bool",a.D5U.getTypedArrayFromDType("bool",1)),A={a:d,b:E},T=(0,u.Q)({inputs:A,backend:h});return h.disposeIntermediateTensorInfo(E),T}throw new Error("Error in Cast: failed to cast ".concat(d.dtype," to ").concat(p))}}},23865:function(t,e,n){"use strict";n.d(e,{y:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o="return ceil(x);",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:o,cpuKernelImpl:i.pk}),u={kernelName:r.gJX,backendName:"webgl",kernelFunc:s}},43030:function(t,e,n){"use strict";n.d(e,{w:function(){return o}});var r=n(87884),a=n(96583),i=n(2903);var o={kernelName:r.xnO,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,o=t.backend,s=t.attrs,u=n.x,c=s.clipValueMin,l=s.clipValueMax;e=(0,r.OBj)().getBool("WEBGL_PACK_CLIP")?new i.V(u.shape):new a.v(u.shape);var h=[[c],[l]];return o.runWebGLProgram(e,[u],u.dtype,h)}}},55636:function(t,e,n){"use strict";n.d(e,{P:function(){return i},z:function(){return o}});var r=n(87884),a=n(37701);function i(t){var e=t.inputs,n=t.backend,r=e.real,i=e.imag,o=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(o.dataId),u=(0,a.y)({inputs:{x:r},backend:n}),c=(0,a.y)({inputs:{x:i},backend:n});return s.complexTensorInfos={real:u,imag:c},o}var o={kernelName:r.Zz9,backendName:"webgl",kernelFunc:i}},56653:function(t,e,n){"use strict";n.d(e,{s:function(){return o}});var r=n(87884),a=n(44753);function i(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}var o={kernelName:r.yj2,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n.texData.get(r.dataId),s=new a.V(r.shape),u=[i(r,o.complexTensorInfos.real),i(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(s,u,u[0].dtype)}}},99448:function(t,e,n){"use strict";n.d(e,{X:function(){return s},z:function(){return o}});var r=n(87884),a=n(98215),i=n(37701);function o(t){var e=t.inputs,n=t.backend,o=t.attrs.axis,s=r.D5U.parseAxisParam(o,e[0].shape)[0],u=e.map((function(t){return t.shape}));r.Wap.assertParamsConsistent(u,s);var c=r.Wap.computeOutShape(e.map((function(t){return t.shape})),s);if(0===r.D5U.sizeFromShape(c))return n.makeTensorInfo(c,e[0].dtype,[]);var l=e.filter((function(t){return r.D5U.sizeFromShape(t.shape)>0}));return 1===l.length?(0,i.y)({inputs:{x:l[0]},backend:n}):(0,a.j)(l,s,n)}var s={kernelName:r.Eh3,backendName:"webgl",kernelFunc:o}},98215:function(t,e,n){"use strict";n.d(e,{j:function(){return d}});var r=n(87884),a=n(68911),i=n(59094),o=n(99391),s=n(36595),u=n(29190),c=n(55636),l=n(37930),h=n(48720),f=n(36414);function d(t,e,n){var p=t[0].dtype;if("complex64"===p){var v=t.map((function(t){return(0,h.k)({inputs:{input:t},backend:n})})),g=t.map((function(t){return(0,l.a)({inputs:{input:t},backend:n})})),m=d(v,e,n),y=d(g,e,n),b=(0,c.P)({inputs:{real:m,imag:y},backend:n});return v.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),g.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}var w=n.shouldExecuteOnCPU(t);if("string"===p&&(w=!0),w){var x=t.map((function(t){var a=[-1,r.D5U.sizeFromShape(t.shape.slice(e))];return(0,f.X)({inputs:{x:t},backend:n,attrs:{shape:a}})})),k=x.map((function(t){return{vals:n.readSync(t.dataId),shape:t.shape}})),I=r.Wap.computeOutShape(x.map((function(t){return t.shape})),1),S=1===x[0].shape[0],_=(0,o.n7)(k,I,p,S),C=r.Wap.computeOutShape(t.map((function(t){return t.shape})),e),E=n.makeTensorInfo(C,p,_);return x.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),E}var A=t.filter((function(t){return r.D5U.sizeFromShape(t.shape)>0})),T=(0,r.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&A[0].shape.length>1;if(1===A.length){var N=T?new s.l(t[0].shape,s.bl):new u.cc(t[0].shape,s.bl);return n.runWebGLProgram(N,t,p)}var D=(0,r.OBj)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(A.length>D){for(var R=[],Z=0;Z<A.length;Z+=D){var M=A.slice(Z,Z+D);R.push(d(M,e,n))}for(var F=d(R,e,n),O=0,B=R;O<B.length;O++){var L=B[O];n.disposeIntermediateTensorInfo(L)}return F}if(T){var P=new i.R(A.map((function(t){return t.shape})),e);return n.runWebGLProgram(P,A,p)}var U=function(t,e,n){var a=r.Wap.computeOutShape(t.map((function(t){return t.shape})),e),i=t.map((function(t){return(0,f.X)({inputs:{x:t},attrs:{shape:[-1,r.D5U.sizeFromShape(t.shape.slice(e))]},backend:n})}));return{tensors2D:i,outShape:a}}(A,e,n),z=U.tensors2D,W=U.outShape,V=new a.Z(z.map((function(t){return t.shape}))),G=n.runWebGLProgram(V,z,p);z.forEach((function(t){return n.disposeIntermediateTensorInfo(t)}));var j=(0,f.X)({inputs:{x:G},attrs:{shape:W},backend:n});return n.disposeIntermediateTensorInfo(G),j}},85839:function(t,e,n){"use strict";n.d(e,{o:function(){return u}});var r=n(87884),a=n(56754),i=n(37113),o=n(17517),s=n(36414);var u={kernelName:r.mhS,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,u=t.backend,c=t.attrs,l=n.x,h=n.filter,f=c.strides,d=c.pad,p=c.dataFormat,v=c.dilations,g=c.dimRoundingMode,m=r.Wap.convertConv2DDataFormat(p),y=r.Wap.computeConv2DInfo(l.shape,h.shape,f,v,d,g,!1,m);if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(y.strideWidth<=2&&"channelsLast"===m&&(0,r.OBj)().getBool("WEBGL_EXP_CONV")){var b=new i.i(y),w=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]];e=u.runWebGLProgram(b,[l,h],"float32",w)}else if((0,r.OBj)().getBool("WEBGL_CONV_IM2COL"))e=(0,o.Y)({x:l,filter:h,convInfo:y,backend:u});else{var x=new a.I(y);e=u.runWebGLProgram(x,[l,h],"float32")}else e=(0,o.n)({x:l,filter:h,convInfo:y,backend:u});var k=(0,s.X)({inputs:{x:e},backend:u,attrs:{shape:y.outShape}});return u.disposeIntermediateTensorInfo(e),k}}},12284:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(87884),a=n(66550);var i={kernelName:r.wUP,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.dy,u=i.strides,c=i.pad,l=i.dataFormat,h=i.dimRoundingMode,f=i.filterShape,d=r.Wap.convertConv2DDataFormat(l),p=r.Wap.computeConv2DInfo(o.shape,f,u,1,c,h,!1,d),v=new a.Ng(p);return n.runWebGLProgram(v,[o,s],"float32")}}},52349:function(t,e,n){"use strict";n.d(e,{g:function(){return i}});var r=n(87884),a=n(66550);var i={kernelName:r.wm,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.dy,s=e.filter,u=i.inputShape,c=i.strides,l=i.pad,h=i.dataFormat,f=i.dimRoundingMode,d=r.Wap.convertConv2DDataFormat(h),p=r.Wap.computeConv2DInfo(u,s.shape,c,1,l,f,!1,d),v=new a.P2(p);return n.runWebGLProgram(v,[o,s],"float32")}}},17517:function(t,e,n){"use strict";n.d(e,{Y:function(){return p},n:function(){return d}});var r=n(93433),a=n(87884),i=n(39839),o=n(13050),s=n(12248),u=n(97333),c=n(15267),l=n(37701),h=n(36414);function f(t,e){var n=t.length;return n>=3?[].concat((0,r.Z)(t.slice(0,-3)),e?[t[n-3]*t[n-2],t[n-1]]:[t[n-3],t[n-2]*t[n-1]]):!e&&1===n&&t[0]>1?[t[0],1]:null}function d(t){var e,n=t.x,r=t.filter,i=t.convInfo,o=t.backend,s=t.bias,d=void 0===s?null:s,p=t.preluActivationWeights,v=void 0===p?null:p,g=t.leakyreluAlpha,m=void 0===g?0:g,y=t.activation,b=void 0===y?null:y,w=n.shape,x=o.texData.get(n.dataId),k=i.inChannels,I=w[0]*w[1]*w[2],S=i.outChannels,_="channelsLast"===i.dataFormat,C=[];if(null!=v){var E=f(v.shape,_);null!=E&&(v=(0,h.X)({inputs:{x:v},backend:o,attrs:{shape:E}}),C.push(v))}if(null!=d){var A=f(d.shape,_);null!=A&&(d=(0,h.X)({inputs:{x:d},backend:o,attrs:{shape:A}}),C.push(d))}if(!((1===I||1===S)&&k>c.R)&&x.isPacked&&_&&null!=x.texture&&w[2]%2!==0&&a.D5U.arraysEqual(x.shape.slice(-3),w.slice(-3))){var T=w[0]*w[1]*(w[2]+1),N={dataId:n.dataId,shape:[1,T,i.inChannels],dtype:n.dtype},D=x.shape;x.shape=x.shape.slice(),x.shape[x.shape.length-2]++,a.D5U.assert(u.oT(x.shape,N.shape),(function(){return"packed reshape ".concat(x.shape," to ").concat(N.shape," isn't free")}));var R=(0,h.X)({inputs:{x:r},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});C.push(R);var Z=(0,c.r)({a:N,b:R,backend:o,transposeA:!1,transposeB:false,bias:d,activation:b,preluActivationWeights:v,leakyreluAlpha:m}),M=o.texData.get(Z.dataId);a.D5U.assert(M.isPacked,(function(){return"batchMatMul result is expected to be packed"})),x.shape=D,M.shape=i.outShape,(e=(0,l.y)({inputs:{x:Z},backend:o})).shape=i.outShape,C.push(Z)}else{var F=i.outHeight*i.outWidth,O=(0,h.X)({inputs:{x:n},backend:o,attrs:{shape:_?[i.batchSize,F,i.inChannels]:[i.batchSize,i.inChannels,F]}}),B=(0,h.X)({inputs:{x:r},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}}),L=(0,c.r)({a:_?O:B,b:_?B:O,transposeA:!_,transposeB:false,backend:o,bias:d,activation:b,preluActivationWeights:v,leakyreluAlpha:m});e=(0,h.X)({inputs:{x:L},backend:o,attrs:{shape:i.outShape}}),C.push(O),C.push(B),C.push(L)}for(var P=0,U=C;P<U.length;P++){var z=U[P];o.disposeIntermediateTensorInfo(z)}return e}function p(t){var e=t.x,n=t.filter,r=t.convInfo,u=t.backend,c=t.bias,l=void 0===c?null:c,d=t.preluActivationWeights,p=void 0===d?null:d,v=t.leakyreluAlpha,g=void 0===v?0:v,m=t.activation,y=void 0===m?null:m,b=r.filterWidth,w=r.filterHeight,x=r.inChannels,k=r.outWidth,I=r.outHeight,S="channelsLast"===r.dataFormat,_=b*w*x,C=I*k,E=[r.batchSize,_,C],A=[];if(null!=p){var T=f(p.shape,S);null!=T&&(p=(0,h.X)({inputs:{x:p},backend:u,attrs:{shape:T}}),A.push(p))}if(null!=l){var N=f(l.shape,S);null!=N&&(l=(0,h.X)({inputs:{x:l},backend:u,attrs:{shape:N}}),A.push(l))}var D=(0,h.X)({inputs:{x:n},backend:u,attrs:{shape:[1,_,a.D5U.sizeFromShape(n.shape)/_]}});A.push(D);var R=new i.l(E,r),Z=[e.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],M=u.runWebGLProgram(R,[e],"float32",Z),F=(0,h.X)({inputs:{x:M},backend:u,attrs:{shape:E}});A.push(M),A.push(F);var O=null!=l,B=null!=p,L="leakyrelu"===y,P=y?(0,o.g8)(y,!0):null,U=new s.N(S?F.shape:D.shape,S?D.shape:F.shape,S?[r.batchSize,C,r.outChannels]:[r.batchSize,r.outChannels,C],!0,!1,O,P,B,L),z=S?[F,D]:[D,F];if(l&&z.push(l),B&&z.push(p),L){var W=u.makeTensorInfo([],"float32",a.D5U.createScalarValue(g,"float32"));z.push(W),A.push(W)}var V=u.runWebGLProgram(U,z,"float32"),G=(0,h.X)({inputs:{x:V},backend:u,attrs:{shape:r.outShape}});A.push(V);for(var j=0,H=A;j<H.length;j++){var X=H[j];u.disposeIntermediateTensorInfo(X)}return G}},24455:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(87884),a=n(56754);var i={kernelName:r.x12,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.filter,u=i.strides,c=i.pad,l=i.dilations,h=r.Wap.computeConv3DInfo(o.shape,s.shape,u,l,c),f=new a.S(h);return n.runWebGLProgram(f,[o,s],"float32")}}},98879:function(t,e,n){"use strict";n.d(e,{$:function(){return i}});var r=n(87884),a=n(66550);var i={kernelName:r.o2y,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.dy,u=i.strides,c=i.pad,l=i.filterShape,h=r.Wap.computeConv3DInfo(o.shape,l,u,1,c),f=new a.FF(h);return n.runWebGLProgram(f,[o,s],"float32")}}},29645:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(87884),a=n(66550);var i={kernelName:r.ik2,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.dy,s=e.filter,u=i.pad,c=i.strides,l=i.inputShape,h=r.Wap.computeConv3DInfo(l,s.shape,c,1,u),f=new a.cc(h);return n.runWebGLProgram(f,[o,s],"float32")}}},62465:function(t,e,n){"use strict";n.d(e,{D:function(){return s}});var r=n(87884),a=n(13050),i=a.E6+"\n  return cos(x);\n",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.mc4,backendName:"webgl",kernelFunc:o}},43284:function(t,e,n){"use strict";n.d(e,{q:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),i={kernelName:r.TR1,backendName:"webgl",kernelFunc:a}},12390:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(87884),a=n(70122),i={kernelName:r.VcC,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.image,o=e.boxes,s=e.boxInd,u=r.cropSize,c=r.method,l=r.extrapolationValue,h=new a.A(i.shape,o.shape,u,c,l);return n.runWebGLProgram(h,[i,o,s],"float32")}}},71690:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var r=n(87884),a=n(96754),i=n(37701),o=n(26289);function s(t,e,n,s,u,c){var l=e.shape.length,h=r.Wap.getAxesPermutation([s],l),f=e;null!=h&&(f=(0,o.p)({inputs:{x:e},backend:n,attrs:{perm:h}}));var d=r.Wap.getInnerMostAxes(1,l)[0];if(d!==l-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(e.shape.length-1," ")+"but got axis=".concat(s));for(var p=f.shape[d],v=(0,i.y)({inputs:{x:f},backend:n}),g=0;g<=Math.ceil(Math.log2(p))-1;g++){var m=new a.Z(t,f.shape,!1,c),y=[[g]],b=v;v=n.runWebGLProgram(m,[v],v.dtype,y),n.disposeIntermediateTensorInfo(b)}if(u){var w=new a.Z(t,f.shape,u,c),x=v;v=n.runWebGLProgram(w,[v],v.dtype),n.disposeIntermediateTensorInfo(x)}if(null!=h){var k=r.Wap.getUndoAxesPermutation(h),I=(0,o.p)({inputs:{x:v},backend:n,attrs:{perm:k}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(f),I}return v}},47787:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(87884),a=n(96754),i=n(71690);var o={kernelName:r.Byc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.x,s=r.axis,u=r.exclusive,c=r.reverse;return(0,i.o)(a.Q.Prod,o,n,s,u,c)}}},97314:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(87884),a=n(96754),i=n(71690);var o={kernelName:r.iHb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.x,s=r.axis,u=r.exclusive,c=r.reverse;return(0,i.o)(a.Q.Sum,o,n,s,u,c)}}},39335:function(t,e,n){"use strict";n.d(e,{R:function(){return i}});var r=n(87884),a=n(99391);var i={kernelName:r.QRR,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=e.weights,s=r.size,u=r.binaryOutput;if(1===i.shape.length){var c=n.readSync(i.dataId),l=n.readSync(o.dataId),h=(0,a.qO)(c,l,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,h)}if(2===i.shape.length){var f=n.bufferSync(i),d=n.bufferSync(o),p=(0,a.cx)(f,d,s,u);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(i.shape.length,"."))}}},57351:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(87884),a=n(45554);var i={kernelName:r.T0n,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=r.blockSize,s=r.dataFormat,u=i.shape[0],c=("NHWC"===s?i.shape[1]:i.shape[2])*o,l=("NHWC"===s?i.shape[2]:i.shape[3])*o,h=("NHWC"===s?i.shape[3]:i.shape[1])/(o*o),f="NHWC"===s?[u,c,l,h]:[u,h,c,l],d=new a.h(f,o,s);return n.runWebGLProgram(d,[i],i.dtype)}}},17427:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(87884),a=n(15518),i=n(21275);var o={kernelName:r.cie,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=e.filter,c=o.strides,l=o.pad,h=o.dilations,f=o.dimRoundingMode,d=h;null==d&&(d=[1,1]),r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(c,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(d,"'")}));var p,v=r.Wap.computeConv2DInfo(s.shape,u.shape,c,d,l,f,!0);p=(0,r.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1?new i.f(v):new a.J(v);var g=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]];return n.runWebGLProgram(p,[s,u],"float32",g)}}},76938:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=n(85695);var i={kernelName:r.sL$,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=e.dy,u=i.strides,c=i.dilations,l=i.pad,h=i.dimRoundingMode,f=i.filterShape,d=r.Wap.computeConv2DInfo(o.shape,f,u,c,l,h,!0),p=new a.u(d);return n.runWebGLProgram(p,[o,s],"float32")}}},83406:function(t,e,n){"use strict";n.d(e,{G:function(){return i}});var r=n(87884),a=n(85695);var i={kernelName:r.y7R,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.dy,s=e.filter,u=i.strides,c=i.dilations,l=i.pad,h=i.dimRoundingMode,f=i.inputShape,d=r.Wap.computeConv2DInfo(f,s.shape,u,c,l,h,!0),p=new a.g(d);return n.runWebGLProgram(p,[o,s],"float32")}}},4972:function(t,e,n){"use strict";n.d(e,{y:function(){return s}});var r=n(93433),a=n(87884),i=n(72617),o=n(36414);var s={kernelName:a.$w,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=e.x,u=[].concat((0,r.Z)(s.shape),(0,r.Z)(s.shape)),c=a.D5U.sizeFromShape(s.shape),l=(0,o.X)({inputs:{x:s},backend:n,attrs:{shape:[c]}}),h=new i.L(c),f=n.runWebGLProgram(h,[l],l.dtype),d=(0,o.X)({inputs:{x:f},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),d}}},69634:function(t,e,n){"use strict";n.d(e,{T:function(){return o}});var r=n(87884),a=n(52224),i=n(36414);var o={kernelName:r.p4S,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,o=t.backend,s=t.attrs,u=n.x,c=n.filter,l=s.strides,h=s.pad,f=s.dilations,d=r.Wap.computeDilation2DInfo(u.shape,c.shape,l,h,"NHWC",f),p=new a.H(d);e=o.runWebGLProgram(p,[u,c],"float32");var v=(0,i.X)({inputs:{x:e},backend:o,attrs:{shape:d.outShape}});return o.disposeIntermediateTensorInfo(e),v}}},85026:function(t,e,n){"use strict";n.d(e,{G:function(){return c}});var r=n(37762),a=n(87884),i=n(11641),o=n(36414),s=n(25463),u=n(26289);var c={kernelName:a.$g6,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,c=t.attrs.equation,l=e,h=a.Wap.decodeEinsumEquation(c,l.length),f=h.allDims,d=h.summedDims,p=h.idDims;a.Wap.checkEinsumDimSizes(f.length,p,l);for(var v=a.Wap.getEinsumComputePath(d,p),g=v.path,m=v.steps,y=m.length,b=null,w=f.length,x=[],k=0;k<y;++k){var I,S=(0,r.Z)(m[k]);try{for(S.s();!(I=S.n()).done;){var _=I.value,C=a.Wap.getEinsumPermutation(w,p[_]),E=C.permutationIndices,A=C.expandDims,T=void 0;a.Wap.isIdentityPermutation(E)?T=l[_]:(T=(0,u.p)({inputs:{x:l[_]},backend:n,attrs:{perm:E}}),x.push(T));for(var N=T.shape.slice(),D=0;D<A.length;++D)N.splice(A[D],0,1);a.D5U.arraysEqual(T.shape,N)||(T=(0,o.X)({inputs:{x:T},backend:n,attrs:{shape:N}}),x.push(T)),null===b?b=T:(b=(0,i.J)({inputs:{a:T,b:b},backend:n}),x.push(b))}}catch(F){S.e(F)}finally{S.f()}k<y-1&&(g[k]>=0&&(b=(0,s.S)({inputs:{x:b},backend:n,attrs:{axis:g[k]-(f.length-w),keepDims:!1}}),x.push(b)),w--)}for(var R=0,Z=x;R<Z.length;R++){var M=Z[R];M!==b&&n.disposeIntermediateTensorInfo(M)}return b}}},64242:function(t,e,n){"use strict";n.d(e,{$:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),i={kernelName:r.SX0,backendName:"webgl",kernelFunc:a}},41143:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(87884),a=n(3784),i=n(63561),o={kernelName:r.HEU,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=e.dy,s=e.y,u=(0,r.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i.E2("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",o.shape,s.shape):new a.t6("return (b >= 1.0) ? a : a * (b + 1.0);",o.shape,s.shape);return n.runWebGLProgram(u,[o,s],o.dtype)}}},65171:function(t,e,n){"use strict";n.d(e,{K:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.js)({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:i.gv}),s={kernelName:r.hdR,backendName:"webgl",kernelFunc:o}},17557:function(t,e,n){"use strict";n.d(e,{F:function(){return s}});var r=n(87884),a=n(13050),i='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(r.Wap.ERF_P,";\n  float a1 = ").concat(r.Wap.ERF_A1,";\n  float a2 = ").concat(r.Wap.ERF_A2,";\n  float a3 = ").concat(r.Wap.ERF_A3,";\n  float a4 = ").concat(r.Wap.ERF_A4,";\n  float a5 = ").concat(r.Wap.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n"),o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.Omj,backendName:"webgl",kernelFunc:o}},46938:function(t,e,n){"use strict";n.d(e,{Qq:function(){return s},SX:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o=a.E6+"\n  return exp(x);\n",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:i.aX,dtype:"float32"}),u={kernelName:r.NEP,backendName:"webgl",kernelFunc:s}},9781:function(t,e,n){"use strict";n.d(e,{d:function(){return i},p:function(){return o}});var r=n(87884),a=n(36414);function i(t){var e=t.inputs,n=t.attrs,i=t.backend,o=n.dim,s=e.input,u=s.shape.length,c=s.shape.slice(),l=o;return o<0&&(r.D5U.assert(-(u+1)<=o,(function(){return"Axis must be in the interval [".concat(-(u+1),", ").concat(u,"]")})),l=u+o+1),c.splice(l,0,1),(0,a.X)({inputs:{x:s},backend:i,attrs:{shape:c}})}var o={kernelName:r.YFo,backendName:"webgl",kernelFunc:i}},4006:function(t,e,n){"use strict";n.d(e,{V:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o="return exp(x) - 1.0;",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:o,cpuKernelImpl:i.tx}),u={kernelName:r.Y0y,backendName:"webgl",kernelFunc:s}},95498:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(87884),a=n(89426);var i={kernelName:r.vwp,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.input;return(0,a.m)(r,!1,n)}}},89426:function(t,e,n){"use strict";n.d(e,{m:function(){return s}});var r=n(87884),a=n(42229),i=n(55636),o=n(36414);function s(t,e,n){var s=n.texData.get(t.dataId),u=r.D5U.sizeFromShape(t.shape),c=t.shape[t.shape.length-1],l=u/c,h=(0,o.X)({inputs:{x:t},backend:n,attrs:{shape:[l,c]}}),f=h.shape,d=new a.O("real",f,e),p=new a.O("imag",f,e),v=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:f},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:f}],g=n.runWebGLProgram(d,v,"float32"),m=n.runWebGLProgram(p,v,"float32"),y=(0,i.P)({inputs:{real:g,imag:m},backend:n});n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m);var b=(0,o.X)({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(y),b}},55529:function(t,e,n){"use strict";n.d(e,{h:function(){return i},v:function(){return o}});var r=n(87884),a=n(93072);function i(t){var e=t.backend,n=t.attrs,i=n.shape,o=n.value,s=n.dtype;if("string"===(s=s||r.D5U.inferDtype(o))){var u=r.D5U.getArrayFromDType(s,r.D5U.sizeFromShape(i));return u.fill(o),e.makeTensorInfo(i,s,u)}var c=new a.o(i,o),l=[[o]];return e.runWebGLProgram(c,[],s,l)}var o={kernelName:r.deh,backendName:"webgl",kernelFunc:i}},97079:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=n(56585),i={kernelName:r.Uyb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.image,i=n,o=new a.i(r.shape);return i.runWebGLProgram(o,[r],r.dtype)}}},62265:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o="return floor(x);",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:o,cpuKernelImpl:i.MZ}),u={kernelName:r.OR,backendName:"webgl",kernelFunc:s}},37844:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var r=n(87884),a=(0,n(13050).js)({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),i={kernelName:r.jeX,backendName:"webgl",kernelFunc:a}},92345:function(t,e,n){"use strict";n.d(e,{x:function(){return c}});var r,a=n(29439),i=n(87884),o=n(70957),s=n(79764),u=n(20089),c={kernelName:i.eBW,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,c=t.attrs,h=e.pixels,f=c.numChannels,d="undefined"!==typeof HTMLVideoElement&&h instanceof HTMLVideoElement,p="undefined"!==typeof HTMLImageElement&&h instanceof HTMLImageElement,v=d?[h.videoWidth,h.videoHeight]:[h.width,h.height],g=(0,a.Z)(v,2),m=g[0],y=g[1],b=[y,m],w=[y,m,f];if(p||d){var x=(0,i.OBj)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=r&&x===l||(l=x,r=document.createElement("canvas").getContext("2d",{willReadFrequently:l})),r.canvas.width=m,r.canvas.height=y,r.drawImage(h,0,0,m,y),h=r.canvas}var k=n.makeTensorInfo(b,"int32");n.texData.get(k.dataId).usage=o.v2.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(k.dataId),h);var I=(0,i.OBj)().getBool("WEBGL_PACK")?new u.v(w):new s.C(w),S=n.runWebGLProgram(I,[k],"int32");return n.disposeData(k.dataId),S}},l=(0,i.OBj)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU")},79764:function(t,e,n){"use strict";n.d(e,{C:function(){return s}});var r=n(29439),a=n(43144),i=n(15671),o=n(2820),s=(0,a.Z)((function t(e){(0,i.Z)(this,t),this.variableNames=["A"];var n=(0,o.A)(),a=(0,r.Z)(e,2),s=a[0],u=a[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(u,".0, ").concat(s,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}))},20089:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var r=n(29439),a=n(43144),i=n(15671),o=n(2820),s=(0,a.Z)((function t(e){(0,i.Z)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=(0,o.A)(),a=(0,r.Z)(e,2),s=a[0],u=a[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(u,".0, ").concat(s,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")}))},35981:function(t,e,n){"use strict";n.d(e,{L:function(){return c}});var r=n(87884),a=n(56754),i=n(37113),o=n(13050),s=n(17517),u=n(36414);var c={kernelName:r._V0,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,c=t.backend,l=t.attrs,h=n.x,f=n.filter,d=n.bias,p=n.preluActivationWeights,v=l.strides,g=l.pad,m=l.dataFormat,y=l.dilations,b=l.dimRoundingMode,w=l.activation,x=l.leakyreluAlpha,k=r.Wap.convertConv2DDataFormat(m),I=r.Wap.computeConv2DInfo(h.shape,f.shape,v,y,g,b,!1,k),S=[],_=null!=d,C=null!=p,E="leakyrelu"===w,A=function(){var t=[h,f],e=function(t,e){if("NCHW"===e&&1===t.shape.length&&1!==t.shape[0]){var n=(0,u.X)({inputs:{x:t},backend:c,attrs:{shape:[t.shape[0],1,1]}});return S.push(n),n}return t};if(_&&t.push(e(d,m)),C&&t.push(e(p,m)),E){var n=c.makeTensorInfo([],"float32",r.D5U.createScalarValue(x,"float32"));t.push(n),S.push(n)}return t};if(1!==I.filterHeight||1!==I.filterWidth||1!==I.dilationHeight||1!==I.dilationWidth||1!==I.strideHeight||1!==I.strideWidth||"SAME"!==I.padInfo.type&&"VALID"!==I.padInfo.type)if(I.strideWidth<=2&&"channelsLast"===k&&(0,r.OBj)().getBool("WEBGL_EXP_CONV")){var T=w?(0,o.g8)(w,!0):null,N=new i.i(I,_,T,C,E),D=[[I.padInfo.top,I.padInfo.left],[I.strideHeight,I.strideWidth],[I.dilationHeight,I.dilationWidth],[I.inHeight,I.inWidth]],R=A();e=c.runWebGLProgram(N,R,"float32",D)}else if((0,r.OBj)().getBool("WEBGL_CONV_IM2COL"))e=(0,s.Y)({x:h,filter:f,convInfo:I,backend:c,bias:d,activation:w,preluActivationWeights:p,leakyreluAlpha:x});else{var Z=w?(0,o.g8)(w,!1):null,M=new a.I(I,_,Z,C,E),F=A();e=c.runWebGLProgram(M,F,"float32")}else e=(0,s.n)({x:h,filter:f,convInfo:I,backend:c,bias:d,activation:w,preluActivationWeights:p,leakyreluAlpha:x});var O=(0,u.X)({inputs:{x:e},backend:c,attrs:{shape:I.outShape}});return S.push(e),S.forEach((function(t){return c.disposeIntermediateTensorInfo(t)})),O}}},90630:function(t,e,n){"use strict";n.d(e,{X:function(){return s}});var r=n(87884),a=n(15518),i=n(21275),o=n(13050);var s={kernelName:r.luS,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=e.filter,l=e.bias,h=e.preluActivationWeights,f=s.strides,d=s.pad,p=s.dilations,v=s.dimRoundingMode,g=s.activation,m=s.leakyreluAlpha,y=[],b=p;null==b&&(b=[1,1]),r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(f,b),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(f," and dilations '").concat(b,"'")}));var w,x=r.Wap.computeConv2DInfo(u.shape,c.shape,f,b,d,v,!0),k=(0,r.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,I=g?(0,o.g8)(g,k):null,S=[u,c],_=null!=l,C=null!=h,E="leakyrelu"===g;if(_&&S.push(l),C&&S.push(h),E){var A=n.makeTensorInfo([],"float32",r.D5U.createScalarValue(m,"float32"));S.push(A),y.push(A)}w=k?new i.f(x,_,I,C,E):new a.J(x,_,I,C,E);var T=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],N=n.runWebGLProgram(w,S,"float32",T);return y.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),N}}},67512:function(t,e,n){"use strict";n.d(e,{o:function(){return u}});var r=n(29439),a=n(87884),i=n(68262),o=n(99391),s=n(36414);var u={kernelName:a.q1x,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=e.params,c=e.indices,l=c.shape,h=l[l.length-1],f=a.D5U.sizeFromShape(u.shape),d=a.Wap.prepareAndValidate(u,c),p=(0,r.Z)(d,4),v=p[0],g=p[1],m=p[2],y=p[3],b=(0,s.X)({inputs:{x:c},backend:n,attrs:{shape:[g,h]}}),w=(0,s.X)({inputs:{x:u},backend:n,attrs:{shape:[a.D5U.sizeFromShape(u.shape)/m,m]}});if(n.shouldExecuteOnCPU([u,c])||"string"===u.dtype){var x=n.readSync(c.dataId),k=n.bufferSync(u),I=(0,o.TD)(x,k,u.dtype,g,h,m,y,u.shape,f);return n.makeTensorInfo(v,u.dtype,I.values)}var S=new i.i(h,y,[g,m],u.shape),_=n.runWebGLProgram(S,[w,b],w.dtype),C=(0,s.X)({inputs:{x:_},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(_),C}}},51817:function(t,e,n){"use strict";n.d(e,{Z:function(){return s},c:function(){return u}});var r=n(87884),a=n(33650),i=n(99391),o=n(36414);function s(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=e.indices,l=s.axis,h=s.batchDims,f=r.D5U.parseAxisParam(l,u.shape)[0];if((0,r.OBj)().get("DEBUG"))for(var d=n.readSync(c.dataId),p=u.shape[f],v=function(){var t=d[g];r.D5U.assert(t<=p-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(p-1,"]")}))},g=0;g<d.length;++g)v();var m=r.Wap.segment_util.collectGatherOpShapeInfo(u,c,f,h),y=r.D5U.sizeFromShape(c.shape),b=[],w=(0,o.X)({inputs:{x:u},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),x=(0,o.X)({inputs:{x:c},backend:n,attrs:{shape:[m.batchSize,y/m.batchSize]}});b.push(w),b.push(x);var k=[m.batchSize,m.outerSize,y/m.batchSize,m.sliceSize];if(n.shouldExecuteOnCPU([u,c])||"string"===u.dtype){var I=n.bufferSync(x),S=n.bufferSync(w),_=(0,i.m$)(S,I,k);return b.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(m.outputShape,_.dtype,_.values)}var C=new a.S(w.shape,k),E=n.runWebGLProgram(C,[w,x],w.dtype);b.push(E);var A=(0,o.X)({inputs:{x:E},backend:n,attrs:{shape:m.outputShape}});return b.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),A}var u={kernelName:r.qi_,backendName:"webgl",kernelFunc:s}},93381:function(t,e,n){"use strict";n.d(e,{C:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.js)({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:i.B_,dtype:"bool"}),s={kernelName:r.iZT,backendName:"webgl",kernelFunc:o}},22255:function(t,e,n){"use strict";n.d(e,{V:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.js)({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:i.ji}),s={kernelName:r.Acj,backendName:"webgl",kernelFunc:o}},78162:function(t,e,n){"use strict";n.d(e,{K:function(){return i}});var r=n(87884),a=n(89426);var i={kernelName:r.Qg5,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.input;return(0,a.m)(r,!0,n)}}},37701:function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}n.d(e,{I:function(){return a},y:function(){return r}});var a={kernelName:n(87884).iJz,backendName:"webgl",kernelFunc:r}},37930:function(t,e,n){"use strict";n.d(e,{K:function(){return o},a:function(){return i}});var r=n(87884),a=n(37701);function i(t){var e=t.inputs,n=t.backend,r=e.input,i=n.texData.get(r.dataId);return(0,a.y)({inputs:{x:i.complexTensorInfos.imag},backend:n})}var o={kernelName:r.J_u,backendName:"webgl",kernelFunc:i}},40300:function(t,e,n){"use strict";n.d(e,{m:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),i={kernelName:r.avt,backendName:"webgl",kernelFunc:a}},28924:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return float(isinf(x));",dtype:"bool"}),i={kernelName:r.iWB,backendName:"webgl",kernelFunc:a}},29851:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return float(isnan(x));",dtype:"bool"}),i={kernelName:r.r7n,backendName:"webgl",kernelFunc:a}},99337:function(t,e,n){"use strict";n.d(e,{r:function(){return o}});var r=n(87884),a=n(1461),i=n(82767),o={kernelName:r.eZ0,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.depthRadius,c=o.bias,l=o.alpha,h=o.beta,f=(0,r.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new i.H(s.shape,u,c,l,h):new a.g(s.shape,u,c,l,h);return n.runWebGLProgram(f,[s],s.dtype)}}},59102:function(t,e,n){"use strict";n.d(e,{f:function(){return i}});var r=n(87884),a=n(29368),i={kernelName:r.Hhh,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=e.y,s=e.dy,u=r.depthRadius,c=r.bias,l=r.alpha,h=r.beta,f=new a.s(i.shape,u,c,l,h);return n.runWebGLProgram(f,[i,o,s],i.dtype)}}},11296:function(t,e,n){"use strict";n.d(e,{Ou:function(){return u},oA:function(){return o},s4:function(){return s}});var r=n(87884),a=n(3784),i=n(63561),o="return (a < 0.) ? b * a : a;",s="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var u={kernelName:r.J$2,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.alpha,h=n.makeTensorInfo([],"float32",r.D5U.createScalarValue(l,"float32")),f=(0,r.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i.E2(s,c.shape,h.shape):new a.t6(o,c.shape,h.shape),d=n.runWebGLProgram(f,[c,h],"float32");return n.disposeIntermediateTensorInfo(h),d}}},50196:function(t,e,n){"use strict";n.d(e,{z:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.js)({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:i.kY,dtype:"bool"}),s={kernelName:r.vtC,backendName:"webgl",kernelFunc:o}},12597:function(t,e,n){"use strict";n.d(e,{m3:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.js)({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:i.Rn,dtype:"bool"}),s={kernelName:r.CAk,backendName:"webgl",kernelFunc:o}},98464:function(t,e,n){"use strict";n.d(e,{j:function(){return i}});var r=n(87884),a=n(99391);var i={kernelName:r.e7N,backendName:"webgl",kernelFunc:function(t){var e=t.backend,n=t.attrs,r=n.start,i=n.stop,o=n.num,s=(0,a.PQ)(r,i,o);return e.makeTensorInfo([s.length],"float32",s)}}},66205:function(t,e,n){"use strict";n.d(e,{x:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o=a.E6+"\n  return x < 0.0 ? 0./0. : log(x);\n",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:i.Sd}),u={kernelName:r.ZbH,backendName:"webgl",kernelFunc:s}},22418:function(t,e,n){"use strict";n.d(e,{n:function(){return s}});var r=n(87884),a=n(13050),i=a.E6+"\n  return log(1.0 + x);\n",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.kU,backendName:"webgl",kernelFunc:o}},29372:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var r=n(87884),a=(0,n(13050).js)({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),i={kernelName:r.PYm,backendName:"webgl",kernelFunc:a}},19454:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return float(!(x >= 1.0));"}),i={kernelName:r.VfG,backendName:"webgl",kernelFunc:a}},67115:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=(0,n(13050).js)({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),i={kernelName:r.MZg,backendName:"webgl",kernelFunc:a}},86910:function(t,e,n){"use strict";n.d(e,{F:function(){return c},s:function(){return u}});var r=n(29439),a=n(87884),i=n(99391),o=n(8174),s=n(51130);function u(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.reductionIndices,h=u.keepDims,f=c.shape.length,d=a.D5U.parseAxisParam(l,c.shape),p=d,v=a.Wap.getAxesPermutation(p,f),g=null!=v,m=n.shouldExecuteOnCPU([c]),y=c;if(g){if(m){for(var b=n.texData.get(y.dataId).values,w=new Array(f),x=0;x<w.length;x++)w[x]=c.shape[v[x]];var k=(0,i.Fv)(b,c.shape,c.dtype,v,w);y=n.makeTensorInfo(w,c.dtype),n.texData.get(y.dataId).values=k}else y=(0,s.H)(c,v,n);p=a.Wap.getInnerMostAxes(p.length,f)}a.Wap.assertAxesAreInnerMostDims("max",p,f);var I,S=a.Wap.computeOutAndReduceShapes(y.shape,p),_=(0,r.Z)(S,2),C=_[0],E=_[1],A=C;if(h&&(A=a.Wap.expandShapeToKeepDim(C,d)),m){var T=n.texData.get(y.dataId).values,N=(0,i.$O)(T,a.D5U.sizeFromShape(E),A,c.dtype);I=n.makeTensorInfo(A,c.dtype),n.texData.get(I.dataId).values=N}else I=(0,o.B)(y,E,A,n);return g&&n.disposeIntermediateTensorInfo(y),I}var c={kernelName:a.YoZ,backendName:"webgl",kernelFunc:u}},19504:function(t,e,n){"use strict";n.d(e,{u:function(){return s}});var r=n(87884),a=n(58264),i=n(97333),o=n(37701);var s={kernelName:r.mTV,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x;(0,i.HS)(u,"maxPool");var c=s.filterSize,l=s.strides,h=s.pad,f=s.dimRoundingMode;r.D5U.assert(r.Wap.eitherStridesOrDilationsAreOne(l,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(l," and dilations '").concat(1,"'")}));var d=r.Wap.computePool2DInfo(u.shape,c,l,1,h,f);if(1===d.filterWidth&&1===d.filterHeight&&r.D5U.arraysEqual(d.inShape,d.outShape))return(0,o.y)({inputs:{x:u},backend:n});var p=new a.n(d,"max",!1);return n.runWebGLProgram(p,[u],u.dtype)}}},43773:function(t,e,n){"use strict";n.d(e,{m:function(){return i}});var r=n(87884),a=n(58264);var i={kernelName:r.OAf,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=t.attrs,o=e.x,s=i.filterSize,u=i.strides,c=i.pad,l=i.dataFormat,h=i.dimRoundingMode,f=r.Wap.computePool3DInfo(o.shape,s,u,[1,1,1],c,h,l),d=new a.I(f,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}}},33598:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(87884),a=n(29269),i=n(58264);var o={kernelName:r.OU7,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.dy,u=e.input,c=o.filterSize,l=o.strides,h=o.pad,f=o.dimRoundingMode,d=r.Wap.computePool3DInfo(u.shape,c,l,[1,1,1],h,f),p=new i.I(d,"max",!0),v=n.runWebGLProgram(p,[u],u.dtype),g=new a.b(d),m=n.runWebGLProgram(g,[s,v],u.dtype);return n.disposeIntermediateTensorInfo(v),m}}},88437:function(t,e,n){"use strict";n.d(e,{f:function(){return s}});var r=n(87884),a=n(29269),i=n(58264),o=n(97333);var s={kernelName:r.OV7,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.dy,c=e.input,l=e.output,h=c;(0,o.HS)([c,l],"maxPoolGrad");var f=s.filterSize,d=s.strides,p=s.pad,v=s.dimRoundingMode,g=r.Wap.computePool2DInfo(h.shape,f,d,1,p,v),m=new i.n(g,"max",!0),y=n.runWebGLProgram(m,[h],h.dtype),b=new a.T(g),w=n.runWebGLProgram(b,[u,y],h.dtype);return n.disposeIntermediateTensorInfo(y),w}}},26078:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(29439),a=n(87884),i=n(29614),o={kernelName:a.vFR,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,o=t.backend,s=e.x,u=n.filterSize,c=n.strides,l=n.pad,h=n.includeBatchInIndex,f=o;a.D5U.assert(4===s.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(s.shape.length,".")}));var d=[1,1];a.D5U.assert(a.Wap.eitherStridesOrDilationsAreOne(c,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(c," and dilations '").concat(d,"'")}));var p=a.Wap.computePool2DInfo(s.shape,u,c,d,l),v=(0,i.V)(s,h,p,f),g=(0,r.Z)(v,2);return[g[0],g[1]]}}},29614:function(t,e,n){"use strict";n.d(e,{V:function(){return a}});var r=n(58264);function a(t,e,n,a){var i=new r.n(n,"max",!1),o=a.runWebGLProgram(i,[t],"float32");return i=new r.n(n,"max",!0,!0,e),[o,a.runWebGLProgram(i,[t],"float32")]}},8174:function(t,e,n){"use strict";n.d(e,{B:function(){return o}});var r=n(87884),a=n(81321),i=n(36414);function o(t,e,n,o){var s=r.D5U.sizeFromShape(e),u=r.D5U.sizeFromShape(t.shape)/s,c=(0,i.X)({inputs:{x:t},attrs:{shape:[u,s]},backend:o}),l=(0,a.u)(c,t.dtype,"max",o),h=(0,i.X)({inputs:{x:l},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(c),o.disposeIntermediateTensorInfo(l),h}},81049:function(t,e,n){"use strict";n.d(e,{e:function(){return h}});var r=n(87884),a=n(3784),i=n(63561),o=n(13050),s=n(99391),u=a.D1+"\n  return max(a, b);\n",c="\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+i.my+"\n  return result;\n",l=(0,o.js)({opSnippet:u,packedOpSnippet:c,cpuKernelImpl:s.nL}),h={kernelName:r.BMI,backendName:"webgl",kernelFunc:l}},61329:function(t,e,n){"use strict";n.d(e,{$:function(){return u}});var r=n(29439),a=n(87884),i=n(70562),o=n(99391),s=n(51130),u={kernelName:a.q2K,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,u=t.backend,c=e.x,l=n.keepDims,h=n.axis,f=u,d=c.shape.length,p=a.D5U.parseAxisParam(h,c.shape),v=p,g=a.Wap.getAxesPermutation(v,d),m=null!=g,y=f.shouldExecuteOnCPU([c]),b=[],w=c;if(m){if(y){for(var x=f.texData.get(w.dataId).values,k=new Array(d),I=0;I<k.length;I++)k[I]=c.shape[g[I]];var S=(0,o.Fv)(x,c.shape,c.dtype,g,k);w=f.makeTensorInfo(k,c.dtype),f.texData.get(w.dataId).values=S}else w=(0,s.H)(c,g,f);b.push(w),v=a.Wap.getInnerMostAxes(v.length,d)}a.Wap.assertAxesAreInnerMostDims("sum",v,d);var _=a.Wap.computeOutAndReduceShapes(w.shape,v),C=(0,r.Z)(_,2),E=C[0],A=C[1],T=E;l&&(T=a.Wap.expandShapeToKeepDim(E,p));for(var N=(0,i.J)(w,A,T,f),D=0,R=b;D<R.length;D++){var Z=R[D];f.disposeIntermediateTensorInfo(Z)}return N}}},70562:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(87884),a=n(81321),i=n(36414);function o(t,e,n,o){var s=r.D5U.sizeFromShape(e),u=r.D5U.sizeFromShape(t.shape)/s,c=(0,i.X)({inputs:{x:t},attrs:{shape:[u,s]},backend:o}),l=(0,a.u)(c,"float32","mean",o),h=(0,i.X)({inputs:{x:l},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(c),o.disposeIntermediateTensorInfo(l),h}},47997:function(t,e,n){"use strict";n.d(e,{L:function(){return u}});var r=n(29439),a=n(87884),i=n(81321),o=n(36414),s=n(26289);var u={kernelName:a.c17,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.axis,h=u.keepDims,f=c.shape.length,d=a.D5U.parseAxisParam(l,c.shape),p=d,v=a.Wap.getAxesPermutation(p,f),g=c;null!=v&&(g=(0,s.p)({inputs:{x:c},backend:n,attrs:{perm:v}}),p=a.Wap.getInnerMostAxes(p.length,c.shape.length)),a.Wap.assertAxesAreInnerMostDims("min",p,f);var m,y=a.Wap.computeOutAndReduceShapes(g.shape,p),b=(0,r.Z)(y,2),w=b[0],x=b[1],k=a.D5U.sizeFromShape(x),I=(0,o.X)({inputs:{x:g},backend:n,attrs:{shape:[-1,k]}}),S=(0,i.u)(I,I.dtype,"min",n);if(h){var _=a.Wap.expandShapeToKeepDim(w,d);m=(0,o.X)({inputs:{x:S},backend:n,attrs:{shape:_}})}else m=(0,o.X)({inputs:{x:S},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(S),null!=v&&n.disposeIntermediateTensorInfo(g),m}}},66939:function(t,e,n){"use strict";n.d(e,{u:function(){return h}});var r=n(87884),a=n(3784),i=n(63561),o=n(13050),s=n(99391),u=a.D1+"\n  return min(a, b);\n",c="\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+i.my+"\n  return result;\n",l=(0,o.js)({opSnippet:u,packedOpSnippet:c,cpuKernelImpl:s.r}),h={kernelName:r.q8u,backendName:"webgl",kernelFunc:l}},790:function(t,e,n){"use strict";n.d(e,{t:function(){return o}});var r=n(87884),a=n(4181),i=n(36628),o={kernelName:r.jQs,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.paddings,c=o.mode,l=(0,r.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i.X(s.shape,u,c):new a.E(s.shape,u,c);return n.runWebGLProgram(l,[s],s.dtype)}}},14564:function(t,e,n){"use strict";n.d(e,{M:function(){return u}});var r=n(87884),a=n(63561),i=n(13050),o="\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+a.my+"\n  return result;\n",s=(0,i.js)({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:o}),u={kernelName:r.Vbg,backendName:"webgl",kernelFunc:s}},52307:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(87884),a=n(17028),i=n(54482);var o={kernelName:r.NZg,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.logits,s=r.numSamples,u=r.seed,c=r.normalized,l=c?o:(0,i.X)({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),h=l.shape[0],f=l.shape[1],d=new a.A(h,f,s),p=[[u]],v=n.runWebGLProgram(d,[l],"int32",p);return c||n.disposeIntermediateTensorInfo(l),v}}},11641:function(t,e,n){"use strict";n.d(e,{J:function(){return h},f:function(){return f}});var r=n(29439),a=n(87884),i=n(55968),o=n(3784),s=n(63561),u=n(99391),c=n(55636),l="return a * b;";function h(t){var e,n=t.inputs,h=t.backend,f=n.a,d=n.b,p=a.Wap.upcastType(f.dtype,d.dtype);if("complex64"===f.dtype){var v=h.texData.get(f.dataId),g=h.texData.get(d.dataId),m=new i.S(i.x.REAL,f.shape,d.shape),y=new i.S(i.x.IMAG,f.shape,d.shape),b=[{dataId:v.complexTensorInfos.real.dataId,dtype:v.complexTensorInfos.real.dtype,shape:f.shape},{dataId:v.complexTensorInfos.imag.dataId,dtype:v.complexTensorInfos.imag.dtype,shape:f.shape},{dataId:g.complexTensorInfos.real.dataId,dtype:g.complexTensorInfos.real.dtype,shape:d.shape},{dataId:g.complexTensorInfos.imag.dataId,dtype:g.complexTensorInfos.imag.dtype,shape:d.shape}],w=h.runWebGLProgram(m,b,"float32"),x=h.runWebGLProgram(y,b,"float32"),k=(0,c.P)({inputs:{real:w,imag:x},backend:h});return h.disposeIntermediateTensorInfo(w),h.disposeIntermediateTensorInfo(x),k}if(h.shouldExecuteOnCPU([f,d])){var I=h.texData.get(f.dataId),S=h.texData.get(d.dataId),_=(0,u.Th)(f.shape,d.shape,I.values,S.values,p),C=(0,r.Z)(_,2),E=C[0],A=C[1],T=h.makeTensorInfo(A,p);return h.texData.get(T.dataId).values=E,T}return e=(0,a.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s.E2(l,f.shape,d.shape):new o.t6(l,f.shape,d.shape),h.runWebGLProgram(e,[f,d],p)}var f={kernelName:a.wYn,backendName:"webgl",kernelFunc:h}},74850:function(t,e,n){"use strict";n.d(e,{A:function(){return c}});var r=n(29439),a=n(87884),i=n(99391),o=n(36595),s=n(29190),u=o.D1+"\n  return -x;\n";var c={kernelName:a.kuV,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,c=t.backend,l=n.x;if(c.shouldExecuteOnCPU([l])){var h=c.texData.get(l.dataId),f=(0,i.Bo)(h.values,l.shape,l.dtype),d=(0,r.Z)(f,2),p=d[0],v=d[1];return c.makeTensorInfo(v,l.dtype,p)}return e=(0,a.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new s.cc(l.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new o.l(l.shape,u),c.runWebGLProgram(e,[l],l.dtype)}}},28110:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(87884),a=r.GDt.GP;var i={kernelName:r.uv1,backendName:"webgl",kernelFunc:function(t){r.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var e=t.inputs,n=t.backend,i=t.attrs,o=e.boxes,s=e.scores,u=i.maxOutputSize,c=i.iouThreshold,l=i.scoreThreshold,h=n.readSync(o.dataId),f=n.readSync(s.dataId),d=a(h,f,u,c,l).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}}},1683:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(87884),a=r.GDt.qP;var i={kernelName:r.cye,backendName:"webgl",kernelFunc:function(t){r.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var e=t.inputs,n=t.backend,i=t.attrs,o=e.boxes,s=e.scores,u=i.maxOutputSize,c=i.iouThreshold,l=i.scoreThreshold,h=i.padToMaxOutputSize,f=n.readSync(o.dataId),d=n.readSync(s.dataId),p=a(f,d,u,c,l,h),v=p.selectedIndices,g=p.validOutputs;return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}}},78378:function(t,e,n){"use strict";n.d(e,{h:function(){return i}});var r=n(87884),a=r.GDt.pA;var i={kernelName:r.W0H,backendName:"webgl",kernelFunc:function(t){r.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var e=t.inputs,n=t.backend,i=t.attrs,o=e.boxes,s=e.scores,u=i.maxOutputSize,c=i.iouThreshold,l=i.scoreThreshold,h=i.softNmsSigma,f=n.readSync(o.dataId),d=n.readSync(s.dataId),p=a(f,d,u,c,l,h),v=p.selectedIndices,g=p.selectedScores;return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}}},8738:function(t,e,n){"use strict";n.d(e,{Q:function(){return o},n:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.js)({opSnippet:"return float(a != b);",cpuKernelImpl:i.cZ,dtype:"bool"}),s={kernelName:r.yQU,backendName:"webgl",kernelFunc:o}},46849:function(t,e,n){"use strict";n.d(e,{w:function(){return s}});var r=n(93433),a=n(87884),i=n(37822),o=n(36414),s={kernelName:a.we_,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.indices,c=s.dtype,l=s.depth,h=s.onValue,f=s.offValue,d=a.D5U.sizeFromShape(u.shape),p=new i.s(d,l,h,f),v=(0,o.X)({inputs:{x:u},backend:n,attrs:{shape:[d]}}),g=n.runWebGLProgram(p,[v],c);n.disposeIntermediateTensorInfo(v);var m=[].concat((0,r.Z)(u.shape),[l]),y=(0,o.X)({inputs:{x:g},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(g),y}}},58738:function(t,e,n){"use strict";n.d(e,{H:function(){return c}});var r=n(87884),a=n(55636),i=n(55529),o=n(37930),s=n(48720),u=n(1352);var c={kernelName:r.qWM,backendName:"webgl",kernelFunc:function t(e){var n=e.inputs,r=e.backend,c=n.x;if("string"===c.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===c.dtype){var l=(0,s.k)({inputs:{input:c},backend:r}),h=t({inputs:{x:l},backend:r}),f=(0,o.a)({inputs:{input:c},backend:r}),d=(0,u.P)({inputs:{x:f},backend:r}),p=(0,a.P)({inputs:{real:h,imag:d},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(d),p}return(0,i.h)({attrs:{shape:c.shape,dtype:c.dtype,value:1},backend:r})}}},58485:function(t,e,n){"use strict";n.d(e,{W:function(){return o}});var r=n(87884),a=n(99448),i=n(9781);var o={kernelName:r.QiL,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs.axis;if(1===e.length)return(0,i.d)({inputs:{input:e[0]},backend:n,attrs:{dim:o}});var s=e[0].shape,u=e[0].dtype;e.forEach((function(t){r.D5U.assertShapesMatch(s,t.shape,"All tensors passed to stack must have matching shapes"),r.D5U.assert(u===t.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var c=[],l=e.map((function(t){var e=(0,i.d)({inputs:{input:t},backend:n,attrs:{dim:o}});return c.push(e),e})),h=(0,a.z)({inputs:l,backend:n,attrs:{axis:o}});return c.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),h}}},26134:function(t,e,n){"use strict";n.d(e,{S:function(){return u},Y:function(){return s}});var r=n(87884),a=n(87346),i=n(28068),o=n(55529),s=function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.paddings,l=s.constantValue;if(0===r.D5U.sizeFromShape(u.shape)){var h=c.map((function(t,e){return t[0]+u.shape[e]+t[1]}));return(0,o.h)({backend:n,attrs:{shape:h,value:l,dtype:u.dtype}})}var f=(0,r.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i.j(u.shape,c,l):new a.O(u.shape,c,l),d=[[l]];return n.runWebGLProgram(f,[u],u.dtype,d)},u={kernelName:r.lyA,backendName:"webgl",kernelFunc:s}},25382:function(t,e,n){"use strict";n.d(e,{z:function(){return u}});var r=n(87884),a=n(63561),i=n(13050),o="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+a.my+"\n  return result;\n",s=(0,i.js)({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:o}),u={kernelName:r.pe_,backendName:"webgl",kernelFunc:s}},28175:function(t,e,n){"use strict";n.d(e,{ML:function(){return u},VO:function(){return s},pU:function(){return o}});var r=n(87884),a=n(3784),i=n(63561),o="return (a < 0.) ? b * a : a;",s="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var u={kernelName:r.o0g,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=e.x,c=e.alpha,l=(0,r.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new i.E2(s,u.shape,c.shape):new a.t6(o,u.shape,c.shape);return n.runWebGLProgram(l,[u,c],"float32")}}},70703:function(t,e,n){"use strict";n.d(e,{I:function(){return c}});var r=n(29439),a=n(87884),i=n(81321),o=n(99391),s=n(36414),u=n(26289);var c={kernelName:a.DlI,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,c=t.backend,l=t.attrs,h=n.x,f=l.axis,d=l.keepDims,p=h.shape.length,v=[],g=a.D5U.parseAxisParam(f,h.shape),m=g,y=a.Wap.getAxesPermutation(m,p),b=h;if(null!=y&&(b=(0,u.p)({inputs:{x:h},backend:c,attrs:{perm:y}}),m=a.Wap.getInnerMostAxes(m.length,p),v.push(b)),a.Wap.assertAxesAreInnerMostDims("prod",m,p),c.shouldExecuteOnCPU([b])){var w=c.texData.get(b.dataId).values,x=(0,o.Tg)(b.shape,b.dtype,w,m),k=x.outVals,I=x.outShape,S=x.outDtype;e=c.makeTensorInfo(I,S,k)}else{var _=a.Wap.computeOutAndReduceShapes(b.shape,m),C=(0,r.Z)(_,2),E=C[0],A=C[1],T=a.D5U.sizeFromShape(A),N=(0,s.X)({inputs:{x:b},backend:c,attrs:{shape:[-1,T]}}),D=(0,a.z4k)(h.dtype),R=(0,i.u)(N,D,"prod",c);e=(0,s.X)({inputs:{x:R},backend:c,attrs:{shape:E}}),v.push(N),v.push(R)}if(d){v.push(e);var Z=a.Wap.expandShapeToKeepDim(e.shape,g);e=(0,s.X)({inputs:{x:e},backend:c,attrs:{shape:Z}})}return v.forEach((function(t){return c.disposeIntermediateTensorInfo(t)})),e}}},81923:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.dDz,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=e.paramsNestedSplits,s=e.paramsDenseValues,u=e.indices,c=a.outputRaggedRank,l=o.map((function(t){return n.readSync(t.dataId)})),h=o.map((function(t){return t.shape})),f=n.readSync(s.dataId),d=n.readSync(u.dataId),p=(0,i.Qs)(l,h,f,s.shape,s.dtype,d,u.shape,c),v=(0,r.Z)(p,3),g=v[0],m=v[1],y=v[2],b=g.map((function(t){return n.makeTensorInfo([t.length],"int32",t)})),w=n.makeTensorInfo(y,s.dtype,m);return b.concat([w])}}},20541:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.CQl,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.starts,o=e.limits,s=e.deltas,u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=n.readSync(s.dataId),h=(0,i.M8)(u,a.shape,a.dtype,c,o.shape,l,s.shape),f=(0,r.Z)(h,2),d=f[0],p=f[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([p.length],a.dtype,p)]}}},71735:function(t,e,n){"use strict";n.d(e,{P:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.BiW,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=e.shape,s=e.values,u=e.defaultValue,c=e.rowPartitionTensors,l=a.rowPartitionTypes,h=n.readSync(o.dataId),f=n.readSync(s.dataId),d=n.readSync(u.dataId),p=c.map((function(t){return n.readSync(t.dataId)})),v=c.map((function(t){return t.shape})),g=(0,i.fy)(h,o.shape,f,s.shape,s.dtype,d,u.shape,p,v,l),m=(0,r.Z)(g,2),y=m[0],b=m[1];return n.makeTensorInfo(y,s.dtype,b)}}},62050:function(t,e,n){"use strict";n.d(e,{K:function(){return o},w:function(){return i}});var r=n(87884),a=n(99391),i=function(t){var e=t.backend,n=t.attrs,r=n.start,i=n.stop,o=n.step,s=n.dtype,u=(0,a.hO)(r,i,o,s);return e.makeTensorInfo([u.length],s,u)},o={kernelName:r.e6w,backendName:"webgl",kernelFunc:i}},48720:function(t,e,n){"use strict";n.d(e,{O:function(){return o},k:function(){return i}});var r=n(87884),a=n(37701);function i(t){var e=t.inputs,n=t.backend,r=e.input,i=n.texData.get(r.dataId);return(0,a.y)({inputs:{x:i.complexTensorInfos.real},backend:n})}var o={kernelName:r.xJR,backendName:"webgl",kernelFunc:i}},40470:function(t,e,n){"use strict";n.d(e,{k:function(){return a},v:function(){return i}});var r=n(87884),a=(0,n(13050).js)({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),i={kernelName:r.oHH,backendName:"webgl",kernelFunc:a}},78556:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return 1.0 / x;"}),i={kernelName:r.$HU,backendName:"webgl",kernelFunc:a}},7229:function(t,e,n){"use strict";n.d(e,{F:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  return (x < 0.0) ? 0.0 : x;\n",o=(0,a.AJ)({opSnippet:i,packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),s={kernelName:r.qkr,backendName:"webgl",kernelFunc:o}},32688:function(t,e,n){"use strict";n.d(e,{N:function(){return s}});var r=n(87884),a=n(13050),i=n(36595).D1+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",o=(0,a.AJ)({opSnippet:i,packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),s={kernelName:r.SbG,backendName:"webgl",kernelFunc:o}},36414:function(t,e,n){"use strict";n.d(e,{X:function(){return o},b:function(){return s}});var r=n(87884),a=n(16370),i=n(97333);function o(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.shape,c=n,l=r.D5U.sizeFromShape(s.shape),h=r.D5U.inferFromImplicitShape(u,l),f=r.D5U.sizeFromShape(h);r.D5U.assert(l===f,(function(){return"The new shape (".concat(h,") has ").concat(f," elements and the old ")+"shape (".concat(s.shape,") has ").concat(l," elements. The new shape and old ")+"shape must have the same number of elements."}));var d=c.texData.get(s.dataId);return!d.isPacked||(0,i.oT)(s.shape,h)||null!==d.texture&&(0,i.oT)(d.shape,h)?(c.incRef(s.dataId),{dataId:s.dataId,shape:h,dtype:s.dtype}):(0,a.V)(s,h,c)}var s={kernelName:r.HZH,backendName:"webgl",kernelFunc:o}},91417:function(t,e,n){"use strict";n.d(e,{T:function(){return s}});var r=n(29439),a=n(87884),i=n(90754),o=n(67319);var s={kernelName:a._Yw,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.images,c=s.alignCorners,l=s.halfPixelCenters,h=s.size,f=(0,r.Z)(h,2),d=f[0],p=f[1],v=(0,a.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new o.s(u.shape,d,p,c,l):new i.w(u.shape,d,p,c,l);return n.runWebGLProgram(v,[u],"float32")}}},35830:function(t,e,n){"use strict";n.d(e,{G:function(){return i}});var r=n(87884),a=n(77273);var i={kernelName:r.zbQ,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.images,o=e.dy,s=r.alignCorners,u=new a.A(o.shape,i.shape,s);return n.runWebGLProgram(u,[o],o.dtype)}}},44378:function(t,e,n){"use strict";n.d(e,{G:function(){return s}});var r=n(29439),a=n(87884),i=n(38843),o=n(24125);var s={kernelName:a.dpD,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.images,c=s.alignCorners,l=s.halfPixelCenters,h=s.size,f=(0,r.Z)(h,2),d=f[0],p=f[1],v=(0,a.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new o.e(u.shape,d,p,c,l):new i.T(u.shape,d,p,c,l);return n.runWebGLProgram(v,[u],u.dtype)}}},80237:function(t,e,n){"use strict";n.d(e,{S:function(){return i}});var r=n(87884),a=n(56028);var i={kernelName:r.Hmb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.images,o=e.dy,s=r.alignCorners,u=new a.z(o.shape,i.shape,s);return n.runWebGLProgram(u,[o],o.dtype)}}},25128:function(t,e,n){"use strict";n.d(e,{q:function(){return s}});var r=n(87884),a=n(13445),i=n(76237),o=n(37701);var s={kernelName:r.mKl,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.x,c=s.dims,l=u.shape.length,h=r.D5U.parseAxisParam(c,u.shape);if(0===l)return(0,o.y)({inputs:{x:u},backend:n});var f=(0,r.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i.L(u.shape,h):new a.X(u.shape,h);return n.runWebGLProgram(f,[u],u.dtype)}}},55948:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(29439),a=n(87884),i=n(70209),o={kernelName:a.b9H,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,o=t.backend,s=e.image,u=n.radians,c=n.fillValue,l=n.center,h=o,f=new i.p(s.shape,c),d=a.Wap.getImageCenter(l,s.shape[1],s.shape[2]),p=(0,r.Z)(d,2),v=[[p[0],p[1],Math.sin(u),Math.cos(u)]];return h.runWebGLProgram(f,[s],s.dtype,v)}}},19820:function(t,e,n){"use strict";n.d(e,{q:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),i={kernelName:r.e07,backendName:"webgl",kernelFunc:a}},40353:function(t,e,n){"use strict";n.d(e,{F:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o=(0,a.AJ)({opSnippet:"return inversesqrt(x);",cpuKernelImpl:i.St}),s={kernelName:r.bV0,backendName:"webgl",kernelFunc:o}},33746:function(t,e,n){"use strict";n.d(e,{b:function(){return o}});var r=n(87884),a=n(48164),i=n(36414);var o={kernelName:r.xQA,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.indices,u=e.updates,c=o.shape,l=r.Wap.calculateShapes(u,s,c),h=l.sliceRank,f=l.numUpdates,d=l.sliceSize,p=l.strides,v=l.outputSize,g=[v/d,d];if(0===v)return n.makeTensorInfo(c,s.dtype);var m=(0,i.X)({inputs:{x:s},backend:n,attrs:{shape:[f,h]}}),y=(0,i.X)({inputs:{x:u},backend:n,attrs:{shape:[f,d]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0])),w=new a.B(f,h,m.shape.length,y.shape.length,p,g),x=n.runWebGLProgram(w,[y,m,b],y.dtype),k=(0,i.X)({inputs:{x:x},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),k}}},41062:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=n(87884),a=n(16199);var i={kernelName:r.nr8,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.sortedSequence,o=e.values,s=r.side,u=new a.D(i.shape[0],i.shape[1],o.shape[1],s),c=[[i.shape[1]]];return n.runWebGLProgram(u,[i,o],"int32",c)}}},40318:function(t,e,n){"use strict";n.d(e,{$:function(){return i}});var r=n(87884),a=n(53856);var i={kernelName:r.PhF,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,i=e.condition,o=e.t,s=e.e,u=new a.j(i.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(u,[i,o,s],(0,r.x8V)(o.dtype,s.dtype))}}},2958:function(t,e,n){"use strict";n.d(e,{D:function(){return s}});var r=n(87884),a=n(13050),i="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(r.Wap.SELU_SCALEALPHA,";\n  float scale = ").concat(r.Wap.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"),o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.oFR,backendName:"webgl",kernelFunc:o}},87965:function(t,e,n){"use strict";n.d(e,{B:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o=a.E6+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:i.UN}),u={kernelName:r.a5O,backendName:"webgl",kernelFunc:s}},53482:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),i={kernelName:r.i5y,backendName:"webgl",kernelFunc:a}},4157:function(t,e,n){"use strict";n.d(e,{d:function(){return s}});var r=n(87884),a=n(13050),i=a.E6+"\n  return sin(x);\n",o=(0,a.AJ)({opSnippet:i}),s={kernelName:r.RQH,backendName:"webgl",kernelFunc:o}},82003:function(t,e,n){"use strict";n.d(e,{J:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),i={kernelName:r.wYB,backendName:"webgl",kernelFunc:a}},34745:function(t,e,n){"use strict";n.d(e,{C:function(){return c},t:function(){return u}});var r=n(29439),a=n(87884),i=n(99391),o=n(88328),s=n(43141);function u(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.begin,h=u.size,f=a.kuN.parseSliceParams(c,l,h),d=(0,r.Z)(f,2),p=d[0],v=d[1];if(a.kuN.assertParamsValid(c,p,v),0===a.D5U.sizeFromShape(v))return n.makeTensorInfo(v,c.dtype,[]);if(n.shouldExecuteOnCPU([c])||"string"===c.dtype){var g=n.texData.get(c.dataId),m=(0,i.nT)(g.values,p,v,c.shape,c.dtype);return n.makeTensorInfo(v,c.dtype,m)}var y=n.texData.get(c.dataId).isPacked,b=a.kuN.isSliceContinous(c.shape,p,v);if(y||!b){var w=(0,a.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s.T(v):new o.a(v),x=[p];return n.runWebGLProgram(w,[c],c.dtype,x)}return n.uploadToGPU(c.dataId),function(t,e,n,r){var i=r.texData.get(t.dataId),o=r.makeTensorInfo(n,t.dtype),s=r.texData.get(o.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=t.dtype;var u=a.kuN.computeFlatOffset(e,a.D5U.computeStrides(t.shape));i.slice&&(u+=i.slice.flatOffset),s.slice={flatOffset:u,origDataId:i.slice&&i.slice.origDataId||t.dataId};var c=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,c+1),o}(c,p,v,n)}var c={kernelName:a.p2w,backendName:"webgl",kernelFunc:u}},54482:function(t,e,n){"use strict";n.d(e,{D:function(){return h},X:function(){return l}});var r=n(87884),a=n(46938),i=n(86910),o=n(40470),s=n(36414),u=n(39666),c=n(25463);function l(t){var e=t.inputs,n=t.backend,l=t.attrs,h=e.logits,f=l.dim,d=r.D5U.parseAxisParam([f],h.shape),p=(0,i.s)({inputs:{x:h},backend:n,attrs:{reductionIndices:d,keepDims:!1}}),v=r.Wap.expandShapeToKeepDim(p.shape,d),g=(0,s.X)({inputs:{x:p},backend:n,attrs:{shape:v}}),m=(0,u.l)({inputs:{a:h,b:g},backend:n}),y=(0,a.Qq)({inputs:{x:m},backend:n}),b=(0,c.S)({inputs:{x:y},backend:n,attrs:{axis:d,keepDims:!1}}),w=(0,s.X)({inputs:{x:b},backend:n,attrs:{shape:v}}),x=(0,o.k)({inputs:{a:y,b:w},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),x}var h={kernelName:r.Gcp,backendName:"webgl",kernelFunc:l}},13853:function(t,e,n){"use strict";n.d(e,{W:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),i={kernelName:r.MRv,backendName:"webgl",kernelFunc:a}},88109:function(t,e,n){"use strict";n.d(e,{J:function(){return u}});var r=n(93433),a=n(87884),i=n(26134),o=n(36414),s=n(26289),u={kernelName:a.TQc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,u=t.attrs,c=e.x,l=u.blockShape,h=u.paddings;a.D5U.assert(c.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var f=l.reduce((function(t,e){return t*e})),d=[[0,0]];d.push.apply(d,(0,r.Z)(h));for(var p=1+l.length;p<c.shape.length;++p)d.push([0,0]);var v=[],g=(0,i.Y)({inputs:{x:c},backend:n,attrs:{paddings:d,constantValue:0}}),m=a.Wap.getReshaped(g.shape,l,f,!1),y=a.Wap.getPermuted(m.length,l.length,!1),b=a.Wap.getReshapedPermuted(g.shape,l,f,!1),w=(0,o.X)({inputs:{x:g},backend:n,attrs:{shape:m}}),x=(0,s.p)({inputs:{x:w},backend:n,attrs:{perm:y}}),k=(0,o.X)({inputs:{x:x},backend:n,attrs:{shape:b}});return v.push(g),v.push(w),v.push(x),v.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),k}}},62451:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.O3z,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.indices,o=e.values,s=e.denseShape,u=e.defaultValue;if(1!==s.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(s.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(o.shape));if(0!==u.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(u.shape));var c=n.readSync(a.dataId),l=n.readSync(o.dataId),h=n.readSync(s.dataId),f=n.readSync(u.dataId)[0],d=(0,i.X8)(c,a.shape,a.dtype,l,o.dtype,h,f),p=(0,r.Z)(d,5),v=p[0],g=p[1],m=p[2],y=p[3],b=p[4];return[n.makeTensorInfo(g,a.dtype,v),n.makeTensorInfo([g[0]],o.dtype,m),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map((function(t){return Number(t)})))),n.makeTensorInfo([b.length],a.dtype,new Int32Array(b))]}}},8023:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.nhH,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.inputIndices,o=e.inputShape,s=e.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(o.shape));if(1!==s.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(s.shape));var u=Array.from(n.readSync(o.dataId)),c=n.readSync(a.dataId),l=Array.from(n.readSync(s.dataId)),h=(0,i.LS)(c,a.shape,a.dtype,u,l),f=(0,r.Z)(h,3),d=f[0],p=f[1],v=f[2];return[n.makeTensorInfo(p,a.dtype,d),n.makeTensorInfo([v.length],s.dtype,new Int32Array(v))]}}},4649:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.w3H,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.data,o=e.indices,s=e.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(o.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(s.shape));var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=n.readSync(s.dataId),h=(0,i.AR)(u,a.shape,a.dtype,c,l,!0),f=(0,r.Z)(h,2),d=f[0],p=f[1];return n.makeTensorInfo(p,a.dtype,d)}}},81961:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.ZjV,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.data,o=e.indices,s=e.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(o.shape));if(1!==s.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(s.shape));var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=n.readSync(s.dataId),h=(0,i.AR)(u,a.shape,a.dtype,c,l),f=(0,r.Z)(h,2),d=f[0],p=f[1];return n.makeTensorInfo(p,a.dtype,d)}}},66897:function(t,e,n){"use strict";n.d(e,{e:function(){return s}});var r=n(87884),a=n(99391),i=n(48164),o=n(36414);var s={kernelName:r.D2d,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,s=t.attrs,u=e.sparseIndices,c=e.sparseValues,l=e.defaultValue,h=s.outputShape,f=r.Wap.calculateShapes(c,u,h),d=f.sliceRank,p=f.numUpdates,v=f.sliceSize,g=f.strides,m=f.outputSize;if("string"===c.dtype){var y=n.bufferSync(u),b=n.bufferSync(c),w=r.D5U.decodeString(n.readSync(l.dataId)[0]),x=(0,a.Y1)(y,b,h,m,v,p,d,g,w,false);return n.makeTensorInfo(h,x.dtype,x.values)}var k=new i.B(p,d,u.shape.length,c.shape.length,g,[m,1],false),I=n.runWebGLProgram(k,[c,u,l],c.dtype),S=(0,o.X)({inputs:{x:I},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(I),S}}},87562:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(93433),a=n(87884),i=n(34745);var o={kernelName:a.L8s,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.numOrSizeSplits,c=o.axis,l=a.D5U.parseAxisParam(c,s.shape)[0],h=a.Wap.prepareSplitSize(s,u,l),f=s.shape.length,d=new Array(f).fill(0),p=s.shape.slice();return h.map((function(t){var e=(0,r.Z)(p);e[l]=t;var a=(0,i.t)({inputs:{x:s},backend:n,attrs:{begin:d,size:e}});return d[l]+=t,a}))}}},57406:function(t,e,n){"use strict";n.d(e,{c:function(){return u}});var r=n(87884),a=n(13050),i=n(99391),o="return sqrt(x);",s=(0,a.AJ)({opSnippet:o,packedOpSnippet:o,cpuKernelImpl:i.Bk}),u={kernelName:r.FKq,backendName:"webgl",kernelFunc:s}},76712:function(t,e,n){"use strict";n.d(e,{g:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return x * x;"}),i={kernelName:r.bK0,backendName:"webgl",kernelFunc:a}},8314:function(t,e,n){"use strict";n.d(e,{M:function(){return o}});var r=n(87884),a="return (a - b) * (a - b);",i=(0,n(13050).js)({opSnippet:a,packedOpSnippet:a}),o={kernelName:r._tC,backendName:"webgl",kernelFunc:i}},22862:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=n(36595);var i={kernelName:r.h8e,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,i=e.x,o=a.D1+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),s=new a.l(i.shape,o);return r.runWebGLProgram(s,[i],i.dtype)}}},91411:function(t,e,n){"use strict";n.d(e,{f:function(){return u}});var r=n(87884),a=n(99391),i=n(3210),o=n(36414),s=n(34745);var u={kernelName:r.jQk,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,u=t.backend,c=t.attrs,l=n.x,h=c.begin,f=c.end,d=c.strides,p=c.beginMask,v=c.endMask,g=c.ellipsisMask,m=c.newAxisMask,y=c.shrinkAxisMask,b=r.kuN.sliceInfo(l.shape,h,f,d,p,v,g,m,y),w=b.finalShapeSparse,x=b.finalShape,k=b.isIdentity,I=b.sliceDim0,S=b.isSimpleSlice,_=b.begin,C=b.end,E=b.strides;if(k)e=(0,o.X)({inputs:{x:l},backend:u,attrs:{shape:x}});else if(I||S){r.D5U.assert(l.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(l.shape.length)}));var A=r.kuN.computeOutShape(_,C,E),T=(0,s.t)({inputs:{x:l},backend:u,attrs:{begin:_,size:A}});e=(0,o.X)({inputs:{x:T},backend:u,attrs:{shape:x}}),u.disposeIntermediateTensorInfo(T)}else{if(u.shouldExecuteOnCPU([l])){var N=u.readSync(l.dataId),D=(0,r.f3b)(l.shape,l.dtype,N),R=(0,a.$u)(w,D,E,_);e=u.makeTensorInfo(x,l.dtype,R.values)}else{var Z=new i.U(_,E,w);e=u.runWebGLProgram(Z,[l],l.dtype)}}var M=(0,o.X)({inputs:{x:e},backend:u,attrs:{shape:x}});return u.disposeIntermediateTensorInfo(e),M}}},86213:function(t,e,n){"use strict";n.d(e,{a:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a._JP,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=a.separator,s=a.nGramWidths,u=a.leftPad,c=a.rightPad,l=a.padWidth,h=a.preserveShortSequences,f=e.data,d=e.dataSplits,p=n.readSync(f.dataId),v=n.readSync(d.dataId),g=(0,i.$j)(p,v,o,s,u,c,l,h),m=(0,r.Z)(g,2),y=m[0],b=m[1];return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",b)]}}},64797:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(29439),a=n(87884),i=n(99391);var o={kernelName:a.s1s,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs.skipEmpty,o=e.input,s=e.delimiter;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));var u=n.readSync(o.dataId),c=n.readSync(s.dataId)[0],l=(0,i.A0)(u,c,a),h=(0,r.Z)(l,3),f=h[0],d=h[1],p=h[2],v=d.length;return[n.makeTensorInfo([v,2],"int32",f),n.makeTensorInfo([v],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(p))]}}},91325:function(t,e,n){"use strict";n.d(e,{C:function(){return i}});var r=n(87884),a=n(99391);var i={kernelName:r.XkS,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs.numBuckets,i=e.input;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(i.dataId),s=(0,a._9)(o,r);return n.makeTensorInfo(i.shape,"int32",s)}}},39666:function(t,e,n){"use strict";n.d(e,{G:function(){return u},l:function(){return s}});var r=n(87884),a=n(13050),i=n(99391),o="return a - b;",s=(0,a.js)({opSnippet:o,packedOpSnippet:o,supportsComplex:!0,cpuKernelImpl:i.kI}),u={kernelName:r.Tr8,backendName:"webgl",kernelFunc:s}},25463:function(t,e,n){"use strict";n.d(e,{S:function(){return i},y:function(){return o}});var r=n(87884),a=n(64896);function i(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.x,o=r.axis,s=r.keepDims;return(0,a.U)(i,o,s,n)}var o={kernelName:r.GBy,backendName:"webgl",kernelFunc:i}},64896:function(t,e,n){"use strict";n.d(e,{U:function(){return u}});var r=n(29439),a=n(87884),i=n(81321),o=n(36414),s=n(51130);function u(t,e,n,u){var c=e,l=t.shape.length,h=a.D5U.parseAxisParam(c,t.shape),f=h,d=a.Wap.getAxesPermutation(f,l),p=null!=d,v=t;p&&(v=(0,s.H)(t,d,u),f=a.Wap.getInnerMostAxes(f.length,l)),a.Wap.assertAxesAreInnerMostDims("sum",f,l);var g=a.Wap.computeOutAndReduceShapes(v.shape,f),m=(0,r.Z)(g,2),y=m[0],b=m[1],w=y;n&&(w=a.Wap.expandShapeToKeepDim(y,h));var x=a.D5U.sizeFromShape(b),k=a.D5U.sizeFromShape(t.shape)/x,I=(0,o.X)({inputs:{x:v},attrs:{shape:[k,x]},backend:u}),S=(0,a.z4k)(t.dtype),_=(0,i.u)(I,S,"sum",u),C=(0,o.X)({inputs:{x:_},attrs:{shape:w},backend:u});return u.disposeIntermediateTensorInfo(I),u.disposeIntermediateTensorInfo(_),p&&u.disposeIntermediateTensorInfo(v),C}},41242:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"return tan(x);"}),i={kernelName:r.sEM,backendName:"webgl",kernelFunc:a}},99531:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(87884),a=(0,n(13050).AJ)({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),i={kernelName:r.MIZ,backendName:"webgl",kernelFunc:a}},2553:function(t,e,n){"use strict";n.d(e,{G:function(){return o},o:function(){return s}});var r=n(87884),a=n(99391),i=n(4827);function o(t){var e=t.inputs,n=t.backend,o=t.attrs,s=e.x,u=o.reps;if("string"===s.dtype||s.shape.length>5){var c=n.readSync(s.dataId),l="string"===s.dtype?c.map((function(t){return r.D5U.decodeString(t)})):c,h=(0,r.f3b)(s.shape,s.dtype,l),f=(0,a.KX)(h,u);return n.makeTensorInfo(f.shape,f.dtype,f.values)}var d=new i.S(s.shape,u);return n.runWebGLProgram(d,[s],s.dtype)}var s={kernelName:r.n9L,backendName:"webgl",kernelFunc:o}},98419:function(t,e,n){"use strict";n.d(e,{o:function(){return d}});var r=n(29439),a=n(87884),i=n(99391),o=n(15940),s=n(55529),u=n(51817),c=n(36414),l=n(34745);function h(t,e){null!==e&&t.disposeIntermediateTensorInfo(e)}function f(t){for(var e=1;e<t;)e*=2;return e}var d={kernelName:a.cWu,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,d=t.attrs,p=e.x,v=d.k,g=d.sorted,m=(0,a.OBj)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),y=(0,a.OBj)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),b=p.shape,w=b[b.length-1];if(n.shouldExecuteOnCPU([p])||w<m||v>y){var x=n.readSync(p.dataId),k=(0,i.oC)(x,b,p.dtype,v,g),I=(0,r.Z)(k,2),S=I[0],_=I[1];return[n.makeTensorInfo(S.shape,S.dtype,S.values),n.makeTensorInfo(_.shape,_.dtype,_.values)]}if(0===v)return b[b.length-1]=0,[n.makeTensorInfo(b,p.dtype,[]),n.makeTensorInfo(b,"int32",[])];if(1===w)return[p,(0,s.h)({attrs:{shape:b,dtype:"int32",value:0},backend:n})];var C=n.texData.get(p.dataId),E=null!==C&&C.isPacked,A=E?n.unpackTensor(p):p,T=a.D5U.sizeFromShape(b)/w,N=(0,c.X)({inputs:{x:A},attrs:{shape:[T,w]},backend:n});E&&h(n,A);for(var D=f(v),R=f(w),Z=null,M=function(){return null===Z?[N,N]:[N,Z]},F=function(t,e,r){var a=M(),i=new o.I(r),s=[[w],[null===Z?1:0],[Number.NEGATIVE_INFINITY],[t],[e]],u=Z;Z=n.runWebGLProgram(i,a,"int32",s),h(n,u)},O=1;O<D;O*=2)for(var B=2*O,L=O;L>=1;L/=2)F(B,L,[T,R]);for(var P=R;P>D;P/=2){var U=M(),z=new o.R([T,P/2]),W=[[w],[null===Z?1:0],[D]],V=Z;Z=n.runWebGLProgram(z,U,"int32",W),h(n,V);for(var G=D/2,j=2*G,H=G;H>=1;H/=2)F(j,H,Z.shape)}var X=Z;Z=(0,l.t)({inputs:{x:Z},backend:n,attrs:{begin:0,size:[T,v]}}),h(n,X);var q=(0,u.Z)({inputs:{x:N,indices:Z},backend:n,attrs:{axis:1,batchDims:1}});h(n,N);var Y=b.slice(0,-1);Y.push(v),X=Z,Z=(0,c.X)({inputs:{x:Z},attrs:{shape:Y},backend:n}),h(n,X);var K=q;return q=(0,c.X)({inputs:{x:q},attrs:{shape:Y},backend:n}),h(n,K),[q,Z]}}},67785:function(t,e,n){"use strict";n.d(e,{M:function(){return o}});var r=n(29439),a=n(87884),i=n(45726);var o={kernelName:a.wx7,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,o=e.image,s=e.transforms,u=a.interpolation,c=a.fillMode,l=a.fillValue,h=a.outputShape,f=(0,r.Z)(o.shape,4),d=f[0],p=f[1],v=f[2],g=f[3],m=null!=h?h:[p,v],y=(0,r.Z)(m,2),b=[d,y[0],y[1],g],w=new i.l(p,v,u,c,l,b);return n.runWebGLProgram(w,[o,s],"float32")}}},26289:function(t,e,n){"use strict";n.d(e,{b:function(){return s},p:function(){return o}});var r=n(87884),a=n(51130),i=n(99391);function o(t){for(var e,n=t.inputs,r=t.backend,o=t.attrs,s=n.x,u=o.perm,c=r,l=s.shape.length,h=new Array(l),f=0;f<h.length;f++)h[f]=s.shape[u[f]];if(c.shouldExecuteOnCPU([s])){var d=c.texData.get(s.dataId).values,p=(0,i.Fv)(d,s.shape,s.dtype,u,h);e=c.makeTensorInfo(h,s.dtype),c.texData.get(e.dataId).values=p}else e=(0,a.H)(s,u,c);return e}var s={kernelName:r.G3Y,backendName:"webgl",kernelFunc:o}},51130:function(t,e,n){"use strict";n.d(e,{H:function(){return o}});var r=n(87884),a=n(26382),i=n(79648);function o(t,e,n){var o=(0,r.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i.H(t.shape,e):new a.H(t.shape,e);return n.runWebGLProgram(o,[t],t.dtype)}},16043:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(87884),a=n(99391),i=n(97333);var o={kernelName:r.kpP,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=n.axis,s=e.x;(0,i.HS)(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var u=r.readSync(s.dataId),c=(0,a.CV)(u,o,s.shape,s.dtype),l=c.outputValues,h=c.outputShape,f=c.indices;return[r.makeTensorInfo(h,s.dtype,l),r.makeTensorInfo([f.length],"int32",f)]}}},85642:function(t,e,n){"use strict";n.d(e,{y:function(){return o}});var r=n(87884),a=n(36414),i=n(34745);var o={kernelName:r.ToN,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.value,s=r.axis;s<0&&(s+=o.shape.length);for(var u=o,c=u.shape.length,l=o.shape[s],h=new Array(c-1),f=0,d=0;d<c;d++)d!==s&&(h[f++]=u.shape[d]);var p=[],v=new Array(c).fill(0),g=u.shape.slice();g[s]=1;for(var m=new Array(l),y=0;y<m.length;y++){v[s]=y;var b=(0,i.t)({inputs:{x:u},backend:n,attrs:{begin:v,size:g}}),w=(0,a.X)({inputs:{x:b},backend:n,attrs:{shape:h}});m[y]=w,p.push(b)}return p.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),m}}},80209:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(87884),a=n(44266),i=n(62050),o=n(36414),s=n(2553),u=n(26289);var c={kernelName:r.Qvg,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,c=t.attrs,l=e.x,h=e.segmentIds,f=c.numSegments,d=l.shape.length,p=[],v=0,g=r.Wap.getAxesPermutation([v],d),m=l;null!=g&&(m=(0,u.p)({inputs:{x:l},backend:n,attrs:{perm:g}}),p.push(m),v=r.Wap.getInnerMostAxes(1,d)[0]);var y=r.Wap.segment_util.computeOutShape(m.shape,v,f),b=r.D5U.sizeFromShape([m.shape[v]]),w=(0,o.X)({inputs:{x:m},backend:n,attrs:{shape:[-1,b]}});p.push(w);var x=function t(e,o,u,c,l){var h=e.shape[0],f=e.shape[1],d=r.Wap.segment_util.segOpComputeOptimalWindowSize(f,l),v={windowSize:d,inSize:f,batchSize:h,numSegments:l},g=new a.D(v,o),m=n.compileAndRun(g,[e,u],c);if(p.push(m),m.shape[1]===l)return m;var y=(0,i.w)({backend:n,attrs:{start:0,stop:l,step:1,dtype:"float32"}}),b=(0,s.G)({inputs:{x:y},backend:n,attrs:{reps:[f/d]}});return p.push(y),p.push(b),t(m,o,b,c,l)}(w,"unsortedSegmentSum",h,(0,r.z4k)(l.dtype),f),k=(0,o.X)({inputs:{x:x},backend:n,attrs:{shape:y}}),I=k;if(null!=g){p.push(k);var S=r.Wap.getUndoAxesPermutation(g);I=(0,u.p)({inputs:{x:I},backend:n,attrs:{perm:S}})}return p.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),I}}},1352:function(t,e,n){"use strict";n.d(e,{A:function(){return c},P:function(){return u}});var r=n(87884),a=n(55636),i=n(55529),o=n(37930),s=n(48720);function u(t){var e=t.inputs,n=t.backend,r=e.x;if("complex64"===r.dtype){var c=(0,s.k)({inputs:{input:r},backend:n}),l=u({inputs:{x:c},backend:n}),h=(0,o.a)({inputs:{input:r},backend:n}),f=u({inputs:{x:h},backend:n}),d=(0,a.P)({inputs:{real:l,imag:f},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),d}return(0,i.h)({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var c={kernelName:r.RuY,backendName:"webgl",kernelFunc:u}},14860:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(87884),a=n(15267);var i={kernelName:r.usg,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.a,o=e.b,s=e.bias,u=e.preluActivationWeights,c=r.transposeA,l=r.transposeB,h=r.activation,f=r.leakyreluAlpha;return(0,a.r)({a:i,b:o,transposeA:c,transposeB:l,backend:n,bias:s,preluActivationWeights:u,leakyreluAlpha:f,activation:h})}}},1461:function(t,e,n){"use strict";n.d(e,{g:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r,i,o){(0,a.Z)(this,t),this.variableNames=["x"],this.outputShape=[];var s,u=n,c=e[3]-1;this.outputShape=e;var l="float(".concat(r,") + float(").concat(i,") * sum");s=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(u,"; j <= ").concat(u,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(c,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}))},29368:function(t,e,n){"use strict";n.d(e,{s:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r,i,o){(0,a.Z)(this,t),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(i,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(i,")\n                * float(").concat(o,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}))},82767:function(t,e,n){"use strict";n.d(e,{H:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r,i,o){(0,a.Z)(this,t),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var s,u=n,c=e[3]-1;this.outputShape=e;var l="float(".concat(r,") + float(").concat(i,") * sum");s=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(u,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(u,"; j <= ").concat(u,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(c,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}))},29269:function(t,e,n){"use strict";n.d(e,{T:function(){return i},b:function(){return o}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,o=e.effectiveFilterHeight,s=e.effectiveFilterWidth,u=o-1-e.padInfo.top,c=s-1-e.padInfo.left,l=o*s-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(s," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=c-1-e.padInfo.front,d=l-1-e.padInfo.top,p=h-1-e.padInfo.left,v=c*l*h-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(d,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(c,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(s,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(v," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(h," +\n                  wR * ").concat(h," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}))},36507:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(43144),a=n(15671),i=n(87884),o=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["x"];var r=e.windowSize,o=e.batchSize,s=e.inSize,u=e.outSize;this.outputShape=[o,u];var c=4*Math.floor(r/4),l=r%4,h="sumValue += dot(values, ones);";if(null!=n){var f=1/n;h="sumValue += dot(values * ".concat(i.D5U.isInt(f)?f.toPrecision(2):f,", ones);")}var d="";s%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(s,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(h,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(h,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(h,"\n        }\n        setOutput(sumValue);\n      }\n    ")}))},4181:function(t,e,n){"use strict";n.d(e,{E:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["x"],this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));var o=e.length,s=(0,i.kW)(o),u=n.map((function(t){return t[0]})).join(","),c=n.map((function(t,n){return t[0]+e[n]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),h="reflect"===r?0:1;this.userCode=1!==o?"\n      ".concat(s," start = ").concat(s,"(").concat(u,");\n      ").concat(s," end = ").concat(s,"(").concat(c,");\n\n      void main() {\n        ").concat(s," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(o,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(h,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(h,";\n          }\n        }\n        ").concat(s," coords = outC - start;\n        setOutput(getX(").concat(l,"));\n      }\n    "):"\n        int start = ".concat(u,";\n        int end = ").concat(c,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(h,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(h,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}))},36628:function(t,e,n){"use strict";n.d(e,{X:function(){return s}});var r=n(43144),a=n(15671),i=n(20889),o=n(97437),s=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));var s=e.length,u=(0,o.kW)(s),c=n.map((function(t){return t[0]})).join(","),l=n.map((function(t,n){return t[0]+e[n]})).join(","),h=(0,i.Ky)("rc",s),f=(0,i.Ky)("source",s),d="".concat(h[s-1]," < ").concat(this.outputShape[s-1]),p=1===s?"source":"vec2(".concat(f.slice(-2).join(),")"),v="reflect"===r?0:1,g="";if(1===s){var m="\n        ".concat(u," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(v,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(v,";\n        }\n        source -= start;\n      ");g="\n        ".concat(u," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n        ").concat(h[s-1]," += 1;\n        if(").concat(d,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n        }\n      ")}else{var y="\n        ".concat(u," source = rc;\n        ").concat(u," lt = ").concat(u,"(lessThan(source, start));\n        ").concat(u," gte = ").concat(u,"(greaterThanEqual(source, end));\n        ").concat(u," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(v,") +\n                gte * ((end - 1) * 2 - source + ").concat(v,");\n        source -= start;\n      ");g="\n        ".concat(u," rc = outputLoc;\n        ").concat(y,"\n        result[0] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n        ").concat(h[s-1]," += 1;\n        if(").concat(d,") {\n          ").concat(y,"\n          result[1] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n        }\n        rc = outputLoc;\n        ").concat(h[s-2]," += 1;\n        if(").concat(h[s-2]," < ").concat(this.outputShape[s-2],") {\n          ").concat(y,"\n          result[2] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n          ").concat(h[s-1]," += 1;\n          if(").concat(d,") {\n            ").concat(y,"\n            result[3] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(u," start = ").concat(u,"(").concat(c,");\n      const ").concat(u," end = ").concat(u,"(").concat(l,");\n\n      void main() {\n        ").concat(u," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(g,"\n        setOutput(result);\n      }\n    ")}))},12248:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(43144),a=n(15671),i=n(1752),o=(0,r.Z)((function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,a.Z)(this,t),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length);var f=o?e[1]:e[2],d=Math.ceil(f/2),p=o?"i * 2, rc.y":"rc.y, i * 2",v=s?"rc.z, i * 2":"i * 2, rc.z",g=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],y="",b="";c&&(y=l?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(c,"\n        }"):h?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(c,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(c,"\n        }"),b="result = activation(result);");var w=u?"result += getBiasAtOutCoords();":"";u&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),h&&this.variableNames.push("leakyreluAlpha");var x="rc.x",k="rc.x";e[0]<n[0]?x="imod(rc.x, ".concat(e[0],")"):n[0]<e[0]&&(k="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(y,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(x,";\n        int batchB = ").concat(k,";\n        for (int i = 0; i < ").concat(d,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(p,");\n          vec4 b = getMatrixB(batchB, ").concat(v,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(g[0]," * ").concat(m[0],");\n          result += (").concat(g[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(w,"\n\n        ").concat(b,"\n\n        setOutput(result);\n      }\n    ")}))},17028:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}))},37822:function(t,e,n){"use strict";n.d(e,{s:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r,i){(0,a.Z)(this,t),this.variableNames=["indices"],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(i,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")}))},44169:function(t,e,n){"use strict";n.d(e,{U:function(){return u}});var r=n(15671),a=n(43144),i=n(1752),o=n(20889),s=n(97437),u=function(){function t(e){if((0,r.Z)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=(0,o.Ky)("rc",this.rank),a=(0,s.kW)(this.rank),u=this.getOutOfBoundsCondition(n),c=this.getSetup(n),l=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(u,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(c,"\n\n            setOutput(vec4(").concat(l,"));\n          }\n        }\n      ")}}return(0,a.Z)(t,[{key:"getSourceCoordsArr",value:function(t){for(var e=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(t[t.length-1-i],",")+a;e.push(a)}return e}},{key:"getOutOfBoundsCondition",value:function(t){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var e="",n=this.rank-2;n<this.rank;n++)e+="".concat(t[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(e+="||");return e}},{key:"getSetup",value:function(t){if(1===this.rank)return"";var e=t.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(e[0],";\n      int c = ").concat(e[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(t){var e=this.getSourceCoordsArr(t);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(e[0],"),\n            cEdge ? 0. : getA(").concat(e[1],"),\n            rEdge ? 0. : getA(").concat(e[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(e[3],")")}}]),t}()},20889:function(t,e,n){"use strict";function r(t,e){return["x","y","z","w","u","v"].slice(0,e).map((function(e){return"".concat(t,".").concat(e)}))}function a(t,e){return 1===e?[t]:r(t,e)}function i(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}n.d(e,{Ky:function(){return a},Qc:function(){return i},k6:function(){return r}})},87346:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));var o=e.length,s=(0,i.kW)(o),u=n.map((function(t){return t[0]})).join(","),c=n.map((function(t,n){return t[0]+e[n]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);this.userCode=1!==o?"\n      ".concat(s," start = ").concat(s,"(").concat(u,");\n      ").concat(s," end = ").concat(s,"(").concat(c,");\n\n      void main() {\n        ").concat(s," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(s," coords = outC - start;\n          setOutput(getX(").concat(l,"));\n        }\n      }\n    "):"\n        int start = ".concat(u,";\n        int end = ").concat(c,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}))},28068:function(t,e,n){"use strict";n.d(e,{j:function(){return s}});var r=n(43144),a=n(15671),i=n(20889),o=n(97437),s=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));for(var s=e.length,u=(0,o.kW)(s),c=n.map((function(t){return t[0]})).join(","),l=n.map((function(t,n){return t[0]+e[n]})).join(","),h=(0,i.Ky)("rc",s),f=(0,i.Ky)("source",s),d="".concat(h[s-1]," < ").concat(this.outputShape[s-1]),p=1===s?"source":"vec2(".concat(f.slice(-2).join(),")"),v=["".concat(u," rc = outputLoc;"),"".concat(h[s-1]," += 1;\n       if(").concat(d,") {\n      "),1===s?"":"}\n       rc = outputLoc;\n       ".concat(h[s-2]," += 1;\n       if(").concat(h[s-2]," < ").concat(this.outputShape[s-2],") {"),1===s?"":"  ".concat(h[s-1]," += 1;\n         if(").concat(d,") {")],g=1===s?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",y=0,b=1===s?2:4;y<b;y++)m+="\n        ".concat(v[y],"\n        if (").concat(g,") {\n          result[").concat(y,"] = float(value);\n        } else {\n          ").concat(u," source = rc - start;\n          result[").concat(y,"] = getChannel(getX(").concat(f.join(),"), ").concat(p,");\n        }\n      ");m+=1===s?"} ":"}}",this.userCode="\n      const ".concat(u," start = ").concat(u,"(").concat(c,");\n      const ").concat(u," end = ").concat(u,"(").concat(l,");\n\n      void main() {\n        ").concat(u," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")}))},58264:function(t,e,n){"use strict";n.d(e,{I:function(){return o},n:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,a.Z)(this,t),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var s=e.filterWidth,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var g="avg"===n,m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),y="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),b="0.0";if(g||(b="-1.0 / 1e-20"),r){this.userCode="\n        const ivec2 strides = ivec2(".concat(u,", ").concat(c,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(v,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(h,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(i?o?m:y:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / max(count, 1.0)");var x=4*Math.floor(s/4),k=s%4,I="\n      if (".concat(g,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(v,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(h,", d),\n              getValue(batch, xR, xC + 2 * ").concat(h,", d),\n              getValue(batch, xR, xC + 3 * ").concat(h,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(h,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(h,", d),\n              getValue(batch, xR, xC + 2 * ").concat(h,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}})),o=(0,r.Z)((function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,a.Z)(this,t),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var s=e.filterWidth,u=e.strideDepth,c=e.strideHeight,l=e.strideWidth,h=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,v=e.effectiveFilterHeight,g=e.effectiveFilterWidth,m=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;var w="avg"===n,x="0.0";if(w||(x="-1.0 / 1e-20"),r){this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(y,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(h,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(v,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(g,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(i?o?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(v," * ").concat(g," +\n                      wR * ").concat(g," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / max(count, 1.0)");var I=4*Math.floor(s/4),S=s%4,_="\n      if (".concat(w,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(y,", ").concat(b,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(h,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(v,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(_,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(_,"\n            }\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}}))},75069:function(t,e,n){"use strict";n.d(e,{f:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["x"];var r=e.windowSize,i=e.batchSize,o=e.inSize,s=e.outSize;this.outputShape=[i,s];var u="0.0",c="";"prod"===n?u="1.0":"min"===n?(u="1.0 / 1e-20",c="min"):"max"===n&&(u="-1.0 / 1e-20",c="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var h=4*Math.floor(r/4),f=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(c,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(c,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(u="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(u="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var v="";o%r>0&&(v="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(u,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(v,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(u,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(h,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(h,";\n        if (").concat(1===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}))},8755:function(t,e,n){"use strict";for(var r=n(87884),a=n(14860),i=n(39511),o=n(95667),s=n(1187),u=n(4666),c=n(31595),l=n(24955),h=n(12335),f=n(1909),d=n(91162),p=n(15618),v=n(68904),g=n(79341),m=n(65137),y=n(11334),b=n(39494),w=n(27621),x=n(32288),k=n(26603),I=n(13587),S=n(95622),_=n(85597),C=n(3694),E=n(22590),A=n(48248),T=n(23865),N=n(43030),D=n(55636),R=n(56653),Z=n(99448),M=n(85839),F=n(12284),O=n(52349),B=n(24455),L=n(98879),P=n(29645),U=n(62465),z=n(43284),W=n(12390),V=n(47787),G=n(97314),j=n(39335),H=n(57351),X=n(17427),q=n(76938),Y=n(83406),K=n(4972),Q=n(69634),J=n(85026),$=n(64242),tt=n(41143),et=n(65171),nt=n(17557),rt=n(46938),at=n(9781),it=n(4006),ot=n(95498),st=n(55529),ut=n(97079),ct=n(62265),lt=n(37844),ht=n(92345),ft=n(35981),dt=n(90630),pt=n(67512),vt=n(51817),gt=n(93381),mt=n(22255),yt=n(37701),bt=n(78162),wt=n(37930),xt=n(40300),kt=n(28924),It=n(29851),St=n(11296),_t=n(50196),Ct=n(12597),Et=n(98464),At=n(66205),Tt=n(22418),Nt=n(29372),Dt=n(19454),Rt=n(67115),Zt=n(99337),Mt=n(59102),Ft=n(86910),Ot=n(81049),Bt=n(19504),Lt=n(43773),Pt=n(33598),Ut=n(88437),zt=n(26078),Wt=n(61329),Vt=n(47997),Gt=n(66939),jt=n(790),Ht=n(14564),Xt=n(52307),qt=n(11641),Yt=n(74850),Kt=n(28110),Qt=n(1683),Jt=n(78378),$t=n(8738),te=n(46849),ee=n(58738),ne=n(58485),re=n(26134),ae=n(25382),ie=n(28175),oe=n(70703),se=n(81923),ue=n(20541),ce=n(71735),le=n(62050),he=n(48720),fe=n(40470),de=n(78556),pe=n(7229),ve=n(32688),ge=n(36414),me=n(91417),ye=n(35830),be=n(44378),we=n(80237),xe=n(25128),ke=n(55948),Ie=n(19820),Se=n(40353),_e=n(33746),Ce=n(41062),Ee=n(40318),Ae=n(2958),Te=n(87965),Ne=n(53482),De=n(4157),Re=n(82003),Ze=n(34745),Me=n(54482),Fe=n(13853),Oe=n(88109),Be=n(62451),Le=n(8023),Pe=n(4649),Ue=n(81961),ze=n(66897),We=n(87562),Ve=n(57406),Ge=n(76712),je=n(8314),He=n(22862),Xe=n(91411),qe=n(86213),Ye=n(64797),Ke=n(91325),Qe=n(39666),Je=n(25463),$e=n(41242),tn=n(99531),en=n(2553),nn=n(98419),rn=n(67785),an=n(26289),on=n(16043),sn=n(85642),un=n(80209),cn=n(1352),ln=0,hn=[a.d,i.f,o.r,s.v,u.j,c._,l.O,h.H,f.d,d.O,p.h,v.W,g.E,m.t,y.B,b.U,w.z,x.Y,k.v,I.W,S.C,_.g,C.e,E.u,A.M,T.y,N.w,D.z,R.s,Z.X,M.o,F.d,O.g,B.L,L.$,P.i,U.D,z.q,W.L,V.c,G.z,j.R,H.d,X.X,q.v,Y.G,K.y,Q.T,J.G,$.$,tt.q,et.K,nt.F,rt.SX,at.p,it.V,ot.r,st.v,ut.v,ct.A,lt.E,ht.x,ft.L,dt.X,pt.o,vt.c,gt.C,mt.V,yt.I,bt.K,wt.K,xt.m,kt.v,It.a,St.Ou,_t.z,Ct.m3,Et.j,At.x,Tt.n,Nt.E,Dt.E,Rt.v,Zt.r,Mt.f,Ft.F,Ot.e,Bt.u,Lt.m,Pt.J,Ut.f,zt.q,Wt.$,Vt.L,Gt.u,jt.t,Ht.M,Xt.A,qt.f,Yt.A,Kt.r,Qt.L,Jt.h,$t.n,te.w,ee.H,ne.W,re.S,ae.z,ie.ML,oe.I,se.G,ue.N,ce.P,le.K,he.O,fe.v,de.a,pe.F,ve.N,ge.b,me.T,ye.G,be.G,we.S,xe.q,ke.c,Ie.q,Se.F,_e.b,Ce.L,Ee.$,Ae.D,Te.B,Ne.l,De.d,Re.J,Ze.C,Me.D,Fe.W,Oe.J,Be.l,Le.d,Pe.A,Ue.O,ze.e,We.q,Ve.c,Ge.g,je.M,He.a,Xe.f,qe.a,Ye.U,Ke.C,Qe.G,Je.y,$e.a,tn.r,en.o,nn.o,rn.M,an.b,on.q,sn.y,un.Z,cn.A];ln<hn.length;ln++){var fn=hn[ln];(0,r.wCN)(fn)}},64443:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var r=n(43144),a=n(15671),i=n(1752),o=n(21072),s=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length);for(var r="",s=0;s<4;s++){var u="thisRC = rc;";s%2===1&&(u+="thisRC.z += 1;"),s>1&&(u+="thisRC.y += 1;"),r+="\n        ".concat(u,"\n        ").concat(s>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(s,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(s>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(t,e){var n=e?o.al(["r","c","d"],"inputShape"):o.RW(["r","c","d"],t);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?o.nc():o.ku(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}))},77273:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a){(0,i.Z)(this,t),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var o=(0,r.Z)(n,3),s=o[1],u=o[2],c=(0,r.Z)(e,3),l=c[1],h=c[2],f=[a&&l>1?s-1:s,a&&h>1?u-1:u],d=[a&&l>1?l-1:l,a&&h>1?h-1:h],p=f[0]/d[0],v=f[1]/d[1],g=1/p,m=1/v,y=2*Math.ceil(g)+2,b=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(v,");\n\n        const float invHeightScale = float(").concat(g,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(y,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(h,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(s-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(u-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}))},90754:function(t,e,n){"use strict";n.d(e,{w:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a,o,s){(0,i.Z)(this,t),this.variableNames=["A"],this.outputShape=[];var u=(0,r.Z)(e,4),c=u[0],l=u[1],h=u[2],f=u[3];this.outputShape=[c,n,a,f];var d,p=[o&&n>1?l-1:l,o&&a>1?h-1:h],v=[o&&n>1?n-1:n,o&&a>1?a-1:a];d=s?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/v[0],",\n          ").concat(p[1]/v[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(h,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}))},67319:function(t,e,n){"use strict";n.d(e,{s:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a,o,s){(0,i.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var u=(0,r.Z)(e,4),c=u[0],l=u[1],h=u[2],f=u[3];this.outputShape=[c,n,a,f];var d,p=[o&&n>1?l-1:l,o&&a>1?h-1:h],v=[o&&n>1?n-1:n,o&&a>1?a-1:a];d=s?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/v[0],",\n          ").concat(p[1]/v[1],",\n          ").concat(p[1]/v[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(h,".0,\n                                     ").concat(h,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(f-1,";\n        bool hasNextRow = coords.z < ").concat(a-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}))},56028:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a){(0,i.Z)(this,t),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var o=(0,r.Z)(n,3),s=o[1],u=o[2],c=(0,r.Z)(e,3),l=c[1],h=c[2],f=[a&&l>1?s-1:s,a&&h>1?u-1:u],d=[a&&l>1?l-1:l,a&&h>1?h-1:h],p=f[0]/d[0],v=f[1]/d[1],g=1/p,m=1/v,y=2*Math.ceil(g)+2,b=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(v,");\n\n        const float invHeightScale = float(").concat(g,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(y,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(h,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(f[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(f[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(s,") - 1),\n                ").concat(a," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(u,") - 1),\n                ").concat(a," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}))},38843:function(t,e,n){"use strict";n.d(e,{T:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a,o,s){(0,i.Z)(this,t),this.variableNames=["A"],this.outputShape=[];var u=(0,r.Z)(e,4),c=u[0],l=u[1],h=u[2],f=u[3];this.outputShape=[c,n,a,f];var d,p=[o&&n>1?l-1:l,o&&a>1?h-1:h],v=[o&&n>1?n-1:n,o&&a>1?a-1:a],g=o?"0.5":"0.0";d=s?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/v[0],",\n          ").concat(p[1]/v[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(h,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(g,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}))},24125:function(t,e,n){"use strict";n.d(e,{e:function(){return o}});var r=n(29439),a=n(43144),i=n(15671),o=(0,a.Z)((function t(e,n,a,o,s){(0,i.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var u=(0,r.Z)(e,4),c=u[0],l=u[1],h=u[2],f=u[3];this.outputShape=[c,n,a,f];var d,p=[o&&n>1?l-1:l,o&&a>1?h-1:h],v=[o&&n>1?n-1:n,o&&a>1?a-1:a],g=o?"0.5":"0.0";d=s?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/v[0],",\n          ").concat(p[1]/v[1],",\n          ").concat(p[1]/v[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(h,".0,\n                                     ").concat(h,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(g,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(f-1,";\n        bool hasNextRow = coords.z < ").concat(a-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}))},13445:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=e,1!==r){var o=e.map((function(t,r){return function(t){return-1!==n.indexOf(t)&&1!==e[t]?"".concat(e[t]," - coords[").concat(t,"] - 1"):"coords[".concat(t,"]")}(r)})).join(","),s=(0,i.kW)(r);this.userCode="\n      void main() {\n        ".concat(s," coords = getOutputCoords();\n        setOutput(getX(").concat(o,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      ")}))},76237:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var r=n(43144),a=n(15671),i=n(20889),o=n(97437),s=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=e;var s=(0,i.Ky)("rc",r),u="".concat(s[r-1]," + 1 < ").concat(this.outputShape[r-1]),c="".concat(s[r-2]," + 1 < ").concat(this.outputShape[r-2]),l=(0,o.kW)(r);function h(t){var r=e.map((function(r,a){return function(t,r){return-1!==n.indexOf(t)&&1!==e[t]?"".concat(e[t]," - ").concat(r[t]," - 1"):"".concat(r[t])}(a,t)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(u,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(l," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(t){return h(t)}(s.slice()),";\n          if(").concat(u,"){\n            result.g = ").concat(function(t){return t[r-1]="("+t[r-1]+" + 1)",h(t)}(s.slice()),";\n          }\n          if(").concat(c,") {\n            result.b = ").concat(function(t){return t[r-2]="("+t[r-2]+" + 1)",h(t)}(s.slice()),";\n            if(").concat(u,") {\n              result.a = ").concat(function(t){return t[r-1]="("+t[r-1]+" + 1)",t[r-2]="("+t[r-2]+" + 1)",h(t)}(s.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}))},70209:function(t,e,n){"use strict";n.d(e,{p:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=e[1],i=e[2];this.outputShape=e;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(i," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}))},48164:function(t,e,n){"use strict";n.d(e,{B:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n,r,o,s,u){(0,a.Z)(this,t),this.variableNames=["updates","indices","defaultValue"],this.outputShape=u;var c=(0,i.kW)(s.length),l=(0,i.kW)(u.length),h="";1===r?h="i":2===r&&(h="i, j");var f="getIndices(".concat(h,")"),d="";1===o?d="i":2===o&&(d="i, coords[1]");var p="getUpdates(".concat(d,")"),v=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(c," strides = ").concat(c,"(").concat(s,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(f,");\n              flattenedIndex += index * ").concat(v,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}))},16199:function(t,e,n){"use strict";n.d(e,{D:function(){return o}});var r=n(43144),a=n(15671),i=n(87884),o=(0,r.Z)((function t(e,n,r,o){(0,a.Z)(this,t),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];var s="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),u=2===(0,i.OBj)().getNumber("WEBGL_VERSION")?"while (left < right) {":s,c="left"===o?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(u,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(c," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}))},44266:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["x","segmentIds"];var r=e.windowSize,i=e.batchSize,o=e.inSize,s=e.numSegments,u=s*Math.ceil(o/r);this.outputShape=[i,u];var c=4*Math.floor(r/4),l=r%4,h="\n        sumValue += dot(values, segFilter);\n    ",f="";o%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(s,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(s,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}))},53856:function(t,e,n){"use strict";n.d(e,{j:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n,r){var o,s;if((0,a.Z)(this,t),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)s="resRC",o="resRC";else{for(var u=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],l=[],h=0;h<n.length;h++)l.push("".concat(u[h])),h<e&&c.push("".concat(u[h]));o=c.join(),s=l.join()}var f=(0,i.kW)(r);this.userCode="\n      void main() {\n        ".concat(f," resRC = getOutputCoords();\n        float cVal = getC(").concat(o,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(s,"));\n        } else {\n          setOutput(getB(").concat(s,"));\n        }\n      }\n    ")}))},97437:function(t,e,n){"use strict";n.d(e,{Tt:function(){return y},Vm:function(){return u},kW:function(){return m}});var r=n(29439),a=n(87884),i=n(2820),o=n(21072),s=a.Wap.getBroadcastDims;function u(t,e,n){var r=[];if(t.forEach((function(t){var e=a.D5U.sizeFromShape(t.shapeInfo.logicalShape);if(t.shapeInfo.isUniform?r.push("uniform float ".concat(t.name).concat(e>1?"[".concat(e,"]"):"",";")):(r.push("uniform sampler2D ".concat(t.name,";")),r.push("uniform int offset".concat(t.name,";"))),n.enableShapeUniforms){switch(y(n.packedInputs,t.shapeInfo.logicalShape,t.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(t.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(t.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(t.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(t.name,"Shape;"))}r.push("uniform ivec2 ".concat(t.name,"TexShape;"))}})),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(t){r.push("uniform ".concat(t.type," ").concat(t.name).concat(t.arrayIndex?"[".concat(t.arrayIndex,"]"):"",";"))}));var u,v,g=r.join("\n"),b=t.map((function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i="";i+=n?l(t,r):c(t,r);var o=t.shapeInfo.logicalShape,u=e.logicalShape;o.length<=u.length&&(i+=n?function(t,e){var n,r=t.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",u=t.shapeInfo.logicalShape.length,c=e.logicalShape.length,l=s(t.shapeInfo.logicalShape,e.logicalShape),h=m(c),f=c-u,d=["x","y","z","w","u","v"];n=0===u?"":c<2&&l.length>=1?"coords = 0;":l.map((function(t){return"coords.".concat(d[t+f]," = 0;")})).join("\n");var p="";p=c<2&&u>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords.".concat(d[e+f])})).join(", ");var v="return outputValue;",g=1===a.D5U.sizeFromShape(t.shapeInfo.logicalShape),y=a.D5U.sizeFromShape(e.logicalShape),b=1===y;if(1!==u||g||b){if(g&&!b)v=1===c?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var w=u-2,x=u-1;l.indexOf(w)>-1&&l.indexOf(x)>-1?v="return vec4(outputValue.x);":l.indexOf(w)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(x)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(h," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(i,"(").concat(p,");\n      ").concat(v,"\n    }\n  ")}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.texShape,u=t.shapeInfo.texShape,c=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&c===l&&null==t.shapeInfo.flatOffset&&a.D5U.arraysEqual(u,o))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var h,f=m(l),d=s(t.shapeInfo.logicalShape,e.logicalShape),p=l-c,v=["x","y","z","w","u","v"];h=0===c?"":l<2&&d.length>=1?"coords = 0;":d.map((function(t){return"coords.".concat(v[t+p]," = 0;")})).join("\n");var g="";g=l<2&&c>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords.".concat(v[e+p])})).join(", ");return"\n    float ".concat(i,"() {\n      ").concat(f," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(g,");\n    }\n  ")}(t,e));return i}(t,e,n.packedInputs,n.enableShapeUniforms)})).join("\n"),w=e.texShape,x=(0,i.A)(),k=function(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(t.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(x),I=function(t){var e="".concat(t.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(t.varyingFs," vec2 resultUV;\n    ").concat(t.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(t.defineSpecialNaN,"\n    ").concat(t.defineSpecialInf,"\n    ").concat(t.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(h,"\n    ").concat(f,"\n    ").concat(d,"\n  ");return e}(x);return e.isPacked?(u=function(t,e,n){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e,n){var r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,e,n);case 2:return function(t,e,n){var r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(a.D5U.arraysEqual(t,e))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var i=Math.ceil(t[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(t,e,n);case 3:return function(t,e,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(t,e,n);default:return function(t,e,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2),o=i,s="",u="b, r, c",c=2;c<t.length-1;c++)o*=t[t.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(t.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(t.length,"(").concat(u,");\n    }\n  ")}(t,e,n)}}(e.logicalShape,w,n.enableShapeUniforms),v=function(t){return"\n    void setOutput(vec4 val) {\n      ".concat(t.output," = val;\n    }\n  ")}(x)):(u=function(t,e,n){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e,n){if(1===e[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(e[1],".0);\n      }\n    ");if(1===e[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(e[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      return resTexRC.x * ").concat(e[1]," + resTexRC.y;\n    }\n  ")}(0,e,n);case 2:return function(t,e,n){if(a.D5U.arraysEqual(t,e))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(e[0],", ").concat(e[1],"));\n      }\n    ");if(1===t[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===t[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      int r = index / ").concat(t[1],";\n      int c = index - r * ").concat(t[1],";\n      return ivec2(r, c);\n    }\n  ")}(t,e,n);case 3:return function(t,e,n){if(n){var r=o.Kn(["r","c","d"],t);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=o.RW(["r","c","d"],t);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,e,n);case 4:return function(t,e,n){if(n){var r=o.Kn(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=o.RW(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(t,e,n);case 5:return function(t,e){var n=o.RW(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(e[0],",\n                             ").concat(e[1],"));\n\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(t,e);case 6:return function(t,e){var n=o.RW(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(t,e);default:throw new Error("".concat(t.length,"-D output sampling is not yet supported"))}}(e.logicalShape,w,n.enableShapeUniforms),v=function(t){return"\n    void setOutput(float val) {\n      ".concat(t.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(x)),n.packedInputs&&(I+=p),[I,k,v,g,u,b,n.userCode].join("\n")}function c(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(t,e){var n=t.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");var i=(0,r.Z)(t.shapeInfo.texShape,2),o=i[0],s=i[1];if(1===o&&1===s)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=v(n);if(e)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=(0,r.Z)(t.shapeInfo.texShape,2),l=c[0],h=c[1];return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(h,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t,e);case 1:return function(t,e){var n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(g(t),"\n      }\n    ");var a=t.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=v(n);if(1===o)return e?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return e?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(e)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t,e);case 2:return function(t,e){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape;if(null!=o&&a.D5U.arraysEqual(n,o)){if(e)return"\n      float ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var s=o[0],u=o[1];return"\n    float ".concat(i,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(u,".0, ").concat(s,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var l=a.D5U.squeezeShape(n),h=l.newShape,f=l.keptDims,d=h;if(d.length<n.length){var p=b(t,d),m=["row","col"];return"\n      ".concat(c(p,e),"\n      float ").concat(i,"(int row, int col) {\n        return ").concat(i,"(").concat(w(m,f),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(g(t),"\n      }\n    ");var y=o[0],x=o[1],k=v(r);if(1===x)return e?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(k,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(k,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(y,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===y)return e?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(k,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(k,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(x,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(e)return"\n      float ".concat(i,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(k,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(i,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(k,";\n    vec2 uv = uvFromFlat(").concat(y,", ").concat(x,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(t,e);case 3:return function(t,e){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],s=n[2],u=a.D5U.squeezeShape(n),l=u.newShape,h=u.keptDims,f=l;if(f.length<n.length){var d=b(t,f),p=["row","col","depth"];return"\n        ".concat(c(d,e),"\n        float ").concat(i,"(int row, int col, int depth) {\n          return ").concat(i,"(").concat(w(p,h),");\n        }\n      ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(s,", 1)));\n        ").concat(g(t),"\n      }\n    ");var m=t.shapeInfo.texShape,y=m[0],x=m[1],k=t.shapeInfo.flatOffset;if(x===o&&null==k)return e?"\n      float ".concat(i,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(i,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(x,".0, ").concat(y,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(x===s&&null==k)return e?"\n      float ".concat(i,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(x,".0, ").concat(y,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var I=v(r);if(e)return"\n    float ".concat(i,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(I,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(i,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(s," + depth + ").concat(I,";\n        vec2 uv = uvFromFlat(").concat(y,", ").concat(x,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(t,e);case 4:return function(t,e){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],s=n[2]*o,u=n[1]*s,l=a.D5U.squeezeShape(n),h=l.newShape,f=l.keptDims;if(h.length<n.length){var d=b(t,h),p=["row","col","depth","depth2"];return"\n      ".concat(c(d,e),"\n      float ").concat(i,"(int row, int col, int depth, int depth2) {\n        return ").concat(i,"(").concat(w(p,f),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(u,", ").concat(s,", ").concat(o,", 1)));\n        ").concat(g(t),"\n      }\n    ");var m=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,x=y[0],k=y[1],I="int stride2 = ".concat(r,"Shape[3];"),S="int stride1 = ".concat(r,"Shape[2] * stride2;"),_="int stride0 = ".concat(r,"Shape[1] * stride1;");if(k===u&&null==m)return e?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        ").concat(I,"\n        ").concat(S,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(k,".0, ").concat(x,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(k===o&&null==m)return e?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(k,".0, ").concat(x,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var C=v(r);if(e)return"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(I,"\n      ").concat(S,"\n      ").concat(_,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(C,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(s," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(x,", ").concat(k,", index + ").concat(C,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(t,e);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],o=e[3]*i,s=e[2]*o,u=e[1]*s,l=a.D5U.squeezeShape(e),h=l.newShape,f=l.keptDims;if(h.length<e.length){var d=b(t,h),p=["row","col","depth","depth2","depth3"];return"\n      ".concat(c(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(w(p,f),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(s,", ").concat(o,", ").concat(i,")) +\n          depth3;\n        ").concat(g(t),"\n      }\n    ");var m=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,x=y[0],k=y[1];if(k===u&&null==m)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(k,".0, ").concat(x,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(k===i&&null==m)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3],",\n               ").concat(e[2]*e[3],", ").concat(e[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(k,".0, ").concat(x,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var I=v(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(s," + depth * ").concat(o," +\n          depth2 * ").concat(i," + depth3 + ").concat(I,";\n      vec2 uv = uvFromFlat(").concat(x,", ").concat(k,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=a.D5U.squeezeShape(e),o=i.newShape,s=i.keptDims;if(o.length<e.length){var u=b(t,o),l=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(c(u),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(w(l,s),");\n      }\n    ")}var h=e[5],f=e[4]*h,d=e[3]*f,p=e[2]*d,m=e[1]*p;if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(m,", ").concat(p,", ").concat(d,", ").concat(f,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(h,", 1)));\n        ").concat(g(t),"\n      }\n    ");var y=t.shapeInfo.flatOffset,x=t.shapeInfo.texShape,k=x[0],I=x[1];if(I===m&&null==y)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(p,", ").concat(d,", ").concat(f,", ").concat(h,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(I,".0, ").concat(k,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(I===h&&null==y)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3]*e[4],",\n               ").concat(e[2]*e[3]*e[4],",\n               ").concat(e[3]*e[4],",\n               ").concat(e[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(I,".0, ").concat(k,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var S=v(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(m," + col * ").concat(p," + depth * ").concat(d," +\n          depth2 * ").concat(f," + depth3 * ").concat(h," + depth4 + ").concat(S,";\n      vec2 uv = uvFromFlat(").concat(k,", ").concat(I,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function l(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=(0,i.A)();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(e,", halfCR);\n    }\n  ")}(t);case 1:return function(t,e){var n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,o=(0,i.A)();if(e)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t,e);case 2:return function(t,e){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,u=s[0],c=s[1],l=(0,i.A)();if(null!=s&&a.D5U.arraysEqual(n,s))return e?"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(c,".0, ").concat(u,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(e)return"\n    vec4 ".concat(o,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var h=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(f,", ").concat(h[0],", ").concat(h[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(t,e);case 3:return function(t,e){var n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var u=[1,2],c=b(t,n.slice(1)),h=["b","row","col"];return"\n        ".concat(l(c,e),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(w(h,u),");\n        }\n      ")}var f=(0,i.A)();if(e)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(f.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=s[0],p=s[1],v=Math.ceil(n[2]/2),g=v*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(p,", ").concat(g,", ").concat(v,", b, row, col);\n      return ").concat(f.texture2D,"(").concat(r,", uv);\n    }\n  ")}(t,e);default:return function(t,e){var n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=(0,i.A)();if(e)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=t.shapeInfo.logicalShape,s=o.length,u=t.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],l=c[0],h=c[1],f=Math.ceil(o[s-1]/2),d=f*Math.ceil(o[s-2]/2),p="int b, int row, int col",v="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),g=2;g<s-1;g++)p="int b".concat(g,", ")+p,d*=o[s-g-1],v="b".concat(g," * ").concat(d," + ")+v;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(v,";\n      int texR = index / ").concat(h,";\n      int texC = index - texR * ").concat(h,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t,e)}}var h="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",f="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",d="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",p="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function v(t){return"offset".concat(t)}function g(t){var e=t.name,n=a.D5U.sizeFromShape(t.shapeInfo.logicalShape);return n<2?"return ".concat(e,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(e,"[i];\n      }\n    }\n  ")}function m(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))}function y(t,e,n){var r=a.D5U.squeezeShape(e),i=r.newShape,o=r.keptDims,s=e.length,u=t&&3===s&&1===e[0],c=u?e.slice(1):i,l=!t&&s>1&&!a.D5U.arraysEqual(e,n)&&i.length<s||u;return{useSqueezeShape:l,uniformShape:l?c:e,keptDims:o}}function b(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function w(t,e){return e.map((function(e){return t[e]})).join(", ")}},21072:function(t,e,n){"use strict";n.d(e,{Kn:function(){return i},RW:function(){return a},al:function(){return o},ku:function(){return s},nc:function(){return u},ye:function(){return c}});var r=n(87884);function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=r.D5U.computeStrides(e);return a.map((function(e,r){var i="int ".concat(t[r]," = ").concat(n," / ").concat(e),o=r===a.length-1?"int ".concat(t[r+1]," = ").concat(n," - ").concat(t[r]," * ").concat(e):"index -= ".concat(t[r]," * ").concat(e);return"".concat(i,"; ").concat(o,";")})).join("")}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=r.D5U.computeStrides(e);return a.map((function(e,r){var i="int ".concat(t[r]," = ").concat(n," / outShapeStrides[").concat(r,"]"),o=r===a.length-1?"int ".concat(t[r+1]," = ").concat(n," - ").concat(t[r]," * outShapeStrides[").concat(r,"]"):"index -= ".concat(t[r]," * outShapeStrides[").concat(r,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=function(t,e){var n=t.length,r=t.map((function(t){return"".concat(e,"[").concat(t,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(t.map((function(t,e){return e})),e);return r.map((function(e,a){var i="int ".concat(t[a]," = ").concat(n," / ").concat(r[a]),o=a===r.length-1?"int ".concat(t[a+1]," = ").concat(n," - ").concat(t[a]," * ").concat(r[a]):"index -= ".concat(t[a]," * ").concat(r[a]);return"".concat(i,"; ").concat(o,";")})).join("")}function s(t){var e=r.D5U.computeStrides(t).map((function(t){return t.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(e[0]," + coords.y * ").concat(e[1]," + coords.z;\n  }\n")}function u(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}var c="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n"},88328:function(t,e,n){"use strict";n.d(e,{a:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n=(0,i.kW)(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,o=function(t){if(1===t)return"sourceLoc";if(t<=6)return s.slice(0,t).map((function(t){return"sourceLoc."+t})).join(",");throw Error("Slicing for rank ".concat(t," is not yet supported"))}(this.rank),u=e.map((function(t,e){return"sourceLoc.".concat(s[e]," = start[").concat(e,"] + coords.").concat(s[e],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(u.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(o,"));\n      }\n    ")})),s=["x","y","z","w","u","v"]},43141:function(t,e,n){"use strict";n.d(e,{T:function(){return s}});var r=n(43144),a=n(15671),i=n(20889),o=n(97437),s=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=(0,o.kW)(this.rank),r=(0,i.Ky)("coords",this.rank),s=(0,i.Ky)("sourceLoc",this.rank),u=1===this.rank?"sourceLoc":"vec2(".concat(s.slice(-2).join(),")"),c="getChannel(getSource(".concat(s.join(),"), ").concat(u,")"),l="\n      result.x = ".concat(c,";\n      if (++").concat(r[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(s[this.rank-1],";\n        result.y = ").concat(c,";\n        --").concat(s[this.rank-1],";\n      }\n    "),h=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(s[this.rank-2],";\n        result.z = ").concat(c,";\n        if (++").concat(r[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(s[this.rank-1],";\n          result.w = ").concat(c,";\n        }\n      }\n    "),f=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(e.map((function(t,e){return"start[".concat(e,"]")})).join(),");"):e.map((function(t,e){return"".concat(s[e]," = ").concat(r[e]," + start[").concat(e,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(f,"\n        vec4 result = vec4(0.);\n        ").concat(l,"\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}))},3210:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n,r){(0,a.Z)(this,t),this.variableNames=["x"],this.outputShape=r;var o=r.length,s=(0,i.kW)(r.length),u=(0,i.kW)(r.length),c="";if(1===o)c="coords * strides + begin";else{var l=0;c=r.map((function(t,e){return l++,1===r.length?"coords * strides[".concat(e,"] + begin[").concat(e,"]"):"coords[".concat(l-1,"] * strides[").concat(e,"] + begin[").concat(e,"]")})).join(",")}this.userCode="\n      ".concat(s," begin = ").concat(s,"(").concat(e,");\n      ").concat(s," strides = ").concat(s,"(").concat(n,");\n\n      void main() {\n        ").concat(u," coords = getOutputCoords();\n        setOutput(getX(").concat(c,"));\n      }\n    ")}))},70957:function(t,e,n){"use strict";n.d(e,{Se:function(){return f},Sq:function(){return d},V9:function(){return i},Yz:function(){return l},kk:function(){return u},m1:function(){return r},qe:function(){return h},v2:function(){return a},yb:function(){return c}});var r,a,i,o=n(29439),s=n(87884);function u(t,e){return[e,t]}function c(t,e){return t*e}function l(t){var e=s.D5U.sizeFromShape(t),n=Math.ceil(e/4);return s.D5U.sizeToSquarishShape(n)}function h(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function f(t,e){var n=h(t,e),r=(0,o.Z)(n,2);return r[0]*r[1]*4}function d(t,e){var n,r,a,i,o,u,c,l,h,f,d=t;return 2===(0,s.OBj)().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,i=d.RGBA32F,o=d.RED,c=4,l=1,h=d.HALF_FLOAT,f=d.FLOAT,u=d.RGBA8):(n=t.RGBA,r=t.RGBA,a=t.RGBA,i=d.RGBA,o=t.RGBA,c=4,l=4,h=null!=e?e.HALF_FLOAT_OES:null,f=t.FLOAT,u=t.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:l,textureTypeHalfFloat:h,textureTypeFloat:f}}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(r||(r={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(a||(a={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(i||(i={}))},65904:function(t,e,n){"use strict";n.d(e,{I:function(){return c}});var r=n(29439),a=n(15671),i=n(43144),o=n(87884),s=n(35442),u=n(70957),c=function(){function t(e){(0,a.Z)(this,t),this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,i.Z)(t,[{key:"acquireTexture",value:function(t,e,n){var r=h(e,n),a=f(t,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=l(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===u.V9.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===u.V9.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===u.V9.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===u.V9.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===u.V9.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(t,e,n,r){if(null!=this.freeTextures){var a=h(n,r),i=f(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var s=l(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),u=(0,o.OBj)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==u&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=s):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;var c=this.usedTextures[i],d=c.indexOf(t);if(d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(d,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(t,")"));var e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*e),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach((function(e){t.gpgpu.deleteMatrixTexture(e.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(e){t.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),t}();function l(t,e,n,a,i){var o,c=function(t,e){switch(t){case u.V9.PACKED_2X2_FLOAT32:return(0,s.gl)(e);case u.V9.PACKED_2X2_FLOAT16:return(0,s.hf)(e);case u.V9.UNPACKED_FLOAT32:return(0,s.q3)(e);case u.V9.UNPACKED_FLOAT16:return(0,s.m8)(e);case u.V9.PACKED_4X1_UNSIGNED_BYTE:return(0,s.NQ)(e);default:throw new Error("Unknown physical texture type ".concat(t))}}(e,a);if(i){var l=(0,u.qe)(t[0],t[1]),h=(0,r.Z)(l,2);o=h[0]*h[1]}else{var f=(0,u.kk)(t[0],t[1]),d=(0,r.Z)(f,2);o=d[0]*d[1]}var p=function(t,e){var n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(e))}(n,c);return o*p}function h(t,e){if(t===u.v2.UPLOAD)return u.V9.PACKED_2X2_FLOAT32;if(t===u.v2.RENDER||null==t)return function(t){return(0,o.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?u.V9.PACKED_2X2_FLOAT32:u.V9.UNPACKED_FLOAT32:t?u.V9.PACKED_2X2_FLOAT16:u.V9.UNPACKED_FLOAT16}(e);if(t===u.v2.DOWNLOAD||t===u.v2.PIXELS)return u.V9.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(t))}function f(t,e,n){return"".concat(t[0],"_").concat(t[1],"_").concat(e,"_").concat(n)}},4827:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"];for(var r=new Array(e.length),o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;var s=(0,i.kW)(this.rank),u=function(t){var e=t.length;if(e>5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"imod(resRC, ".concat(t[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<t.length;a++)r.push("imod(".concat(n[a],", ").concat(t[a],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(s," resRC = getOutputCoords();\n        setOutput(getA(").concat(u,"));\n      }\n    ")}))},15940:function(t,e,n){"use strict";n.d(e,{I:function(){return i},R:function(){return o}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),o=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}))},45726:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(43144),a=n(15671),i=(0,r.Z)((function t(e,n,r,i,o,s){(0,a.Z)(this,t),this.variableNames=["Image","Transforms"],this.outputShape=s;var u,c="nearest"===r?1:2;switch(i){case"constant":default:u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(u," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(u," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(u," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(c," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}))},26382:function(t,e,n){"use strict";n.d(e,{H:function(){return o}});var r=n(43144),a=n(15671),i=n(97437),o=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"];for(var r=new Array(e.length),o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;var s=(0,i.kW)(this.rank),u=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank ".concat(e," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(s," resRC = getOutputCoords();\n      setOutput(getA(").concat(u,"));\n    }\n    ")}))},79648:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=n(43144),a=n(15671),i=n(20889),o=n(97437),s=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),s=0;s<r.length;s++)r[s]=e[n[s]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var u=(0,o.kW)(this.rank),c=(0,i.k6)("rc",this.rank),l=new Array(this.rank),h=0;h<n.length;h++)l[n[h]]=c[h];var f="vec2(".concat(l.slice(-2).join(),")"),d="++".concat(c[this.rank-1]," < ").concat(r[this.rank-1]),p="getChannel(getA(".concat(l.join(),"), ").concat(f,")");this.userCode="\n    void main() {\n      ".concat(u," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(p,";\n      if(").concat(d,") {\n        result[1] = ").concat(p,";\n      }\n      --").concat(c[this.rank-1],";\n      if(++").concat(c[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(p,";\n        if(").concat(d,") {\n          result[3] = ").concat(p,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}))},36595:function(t,e,n){"use strict";n.d(e,{Cv:function(){return l},D1:function(){return s},Et:function(){return c},RX:function(){return h},Tq:function(){return p},bl:function(){return d},eW:function(){return f},l:function(){return o},t$:function(){return u}});var r=n(43144),a=n(15671),i=n(1752),o=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),s="if (isnan(x)) return x;",u="return x;",c="return abs(x);";var l="return (x >= 0.0) ? x : (exp(x) - 1.0);",h=s+"\n  return (x < 0.0) ? 0.0 : x;\n",f=s+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",d="return x;",p="return 1.0 / (1.0 + exp(-1.0 * x));"},29190:function(t,e,n){"use strict";n.d(e,{Cv:function(){return s},RX:function(){return u},Tq:function(){return l},cc:function(){return h},eW:function(){return c},t$:function(){return o}});var r=n(43144),a=n(15671),i=n(1752),o="return x;",s="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",u="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",c="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",l="return 1.0 / (1.0 + exp(-1.0 * x));",h=(0,r.Z)((function t(e,n){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}))},19684:function(t,e,n){"use strict";n.d(e,{W:function(){return u}});var r=n(43144),a=n(15671),i=n(1752),o=n(20889),s=n(97437),u=(0,r.Z)((function t(e){(0,a.Z)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=(0,i.C9)(this.outputShape.length);var n=e.length,r=(0,o.Ky)("rc",n),u=(0,s.kW)(n),c=(0,o.Qc)(n,r),l=r.slice(-2),h=n<=1?"rc":"vec2(".concat(l.join(","),")");this.userCode="\n      void main() {\n        ".concat(u," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(c,");\n\n        setOutput(getChannel(packedInput, ").concat(h,"));\n      }\n    ")}))},68787:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},61701:function(t,e,n){"use strict";n.d(e,{kS:function(){return a}});var r=n(87884);function a(){(0,r.OBj)().set("WEBGL_FORCE_F16_TEXTURES",!0)}},97333:function(t,e,n){"use strict";n.d(e,{B:function(){return N},BH:function(){return q},Cp:function(){return O},ED:function(){return k},HH:function(){return f},HO:function(){return b},HS:function(){return Q},Hg:function(){return T},JG:function(){return D},Jj:function(){return d},KP:function(){return V},O7:function(){return u},Qd:function(){return K},W8:function(){return B},XE:function(){return A},Yf:function(){return P},aj:function(){return w},ax:function(){return R},b6:function(){return _},cU:function(){return S},cu:function(){return Z},d8:function(){return C},ih:function(){return L},lo:function(){return W},mZ:function(){return I},nr:function(){return G},oT:function(){return z},qF:function(){return h},sb:function(){return E},uH:function(){return H},vu:function(){return x},w4:function(){return y},wb:function(){return X},xc:function(){return p},y_:function(){return j}});var r=n(29439),a=n(93433),i=n(87884),o=n(51157),s=n(70957);function u(t,e){var n=e();return(0,i.OBj)().getBool("DEBUG")&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+function(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(e)}}(t,e))}(t),n}var c=5.96e-8,l=65504;function h(t){return!!((0,i.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||c<Math.abs(t)&&Math.abs(t)<l)}function f(t,e){return M(t,(function(){return t.getExtension(e)}),'Extension "'+e+'" not supported on this browser.')}function d(t,e){var n=M(t,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(u(t,(function(){return t.shaderSource(n,e)})),u(t,(function(){return t.compileShader(n)})),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function p(t,e){var n=M(t,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(u(t,(function(){return t.shaderSource(n,e)})),u(t,(function(){return t.compileShader(n)})),(0,i.OBj)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw y(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var v,g,m=/ERROR: [0-9]+:([0-9]+):/g;function y(t,e){var n=m.exec(e);if(null==n)return console.log("Couldn't parse line number in error: ".concat(e)),void console.log(t);for(var r=+n[1],a=t.split("\n"),o=a.length.toString().length+2,s=a.map((function(t,e){return i.D5U.rightPad((e+1).toString(),o)+t})),u=0,c=0;c<s.length;c++)u=Math.max(s[c].length,u);var l=s.slice(0,r-1),h=s.slice(r-1,r),f=s.slice(r);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c ".concat(i.D5U.rightPad(h[0],u)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function b(t){return M(t,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}function w(t,e){if(u(t,(function(){return t.linkProgram(e)})),!(0,i.OBj)().get("ENGINE_COMPILE_ONLY")&&!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function x(t,e){if(u(t,(function(){return t.validateProgram(e)})),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function k(t,e){var n=M(t,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return u(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,n)})),u(t,(function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)})),n}function I(t,e){var n=M(t,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return u(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)})),u(t,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)})),n}function S(t){return M(t,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}function _(t,e){var n=(0,i.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="[".concat(t,"x").concat(e,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){var a="[".concat(t,"x").concat(e,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}function C(t){return M(t,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function E(t,e,n,r,a,i,o){var s=t.getAttribLocation(e,n);return-1!==s&&(u(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),u(t,(function(){return t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)})),u(t,(function(){return t.enableVertexAttribArray(s)})),!0)}function A(t,e,n){return M(t,(function(){return t.getUniformLocation(e,n)}),'uniform "'+n+'" not present in program.')}function T(t,e,n){return t.getUniformLocation(e,n)}function N(t,e,n,r){u(t,(function(){return function(t,e,n){F(t,n),u(t,(function(){return t.activeTexture(t.TEXTURE0+n)})),u(t,(function(){return t.bindTexture(t.TEXTURE_2D,e)}))}(t,e,r)})),u(t,(function(){return t.uniform1i(n,r)}))}function D(t,e,n){u(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)})),u(t,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}))}function R(t,e){u(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)})),u(t,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function Z(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(e)}}(t,e))}function M(t,e,n){var r=u(t,(function(){return e()}));if(null==r)throw new Error(n);return r}function F(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return i.D5U.sizeFromShape(t.slice(0,t.length-e))}function B(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function L(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[O(t)].concat((0,a.Z)(B(t)))),e}function P(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,i.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=(0,i.OBj)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(o===1/0&&(0,i.OBj)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),e&&(n*=2,o*=2,1===(t=t.map((function(e,n){return n>=t.length-2?i.D5U.nearestLargerEven(t[n]):t[n]}))).length&&(t=[2,t[0]])),2!==t.length){var s=i.D5U.squeezeShape(t);t=s.newShape}var u=i.D5U.sizeFromShape(t),c=null;t.length<=1&&u<=n?c=[1,u]:2===t.length&&t[0]<=n&&t[1]<=n?c=t:3===t.length&&t[0]*t[1]<=n&&t[2]<=n?c=[t[0]*t[1],t[2]]:3===t.length&&t[0]<=n&&t[1]*t[2]<=n?c=[t[0],t[1]*t[2]]:4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n?c=[t[0]*t[1]*t[2],t[3]]:4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(c=[t[0],t[1]*t[2]*t[3]]);var l=null!=c&&Math.max.apply(Math,(0,a.Z)(c))>o&&Math.min.apply(Math,(0,a.Z)(c))<=(e?2:1)&&Math.min.apply(Math,(0,a.Z)(c))>0;if(null==c||l)if(e){var h=O(t),f=2,d=2;if(t.length){var p=B(t),v=(0,r.Z)(p,2);f=v[0],d=v[1]}u=h*(f/2)*(d/2),c=i.D5U.sizeToSquarishShape(u).map((function(t){return 2*t}))}else c=i.D5U.sizeToSquarishShape(u);return c}function U(t){return t%2===0}function z(t,e){if(t=t.slice(-2),e=e.slice(-2),i.D5U.arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(U(n)&&U(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&U(t[0])&&U(e[0])}function W(t){if(null==v){var e=(0,o.jl)(t);v=e.getParameter(e.MAX_TEXTURE_SIZE)}return v}function V(t){if(null==g){var e=(0,o.jl)(t);g=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,g)}function G(t){if(0===t)return 0;var e=(0,o.jl)(t);return j(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:j(e,"EXT_disjoint_timer_query")?1:0}function j(t,e){return null!=t.getExtension(e)}function H(t){try{if(null!=(0,o.jl)(t))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function X(t){if(0===t)return!1;var e=(0,o.jl)(t);if(1===t){if(!j(e,"OES_texture_float"))return!1}else if(!j(e,"EXT_color_buffer_float"))return!1;return Y(e)}function q(t){if(0===t)return!1;var e=(0,o.jl)(t);if(1!==t){if(j(e,"EXT_color_buffer_float"))return Y(e);var n="EXT_color_buffer_half_float";if(j(e,n)){var r=e.getExtension(n);return function(t,e){var n=(0,s.Sq)(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var a=1,i=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var u=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),u}(e,r)}return!1}return!!j(e,"OES_texture_float")&&(!!j(e,"WEBGL_color_buffer_float")&&Y(e))}function Y(t){var e=(0,s.Sq)(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),a}function K(t){return 2===t&&null!=(0,o.jl)(t).fenceSync}function Q(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){null!=t&&i.D5U.assert("complex64"!==t.dtype,(function(){return"".concat(e," does not support complex64 tensors ")+"in the WebGL backend."}))}))}},55078:function(t,e,n){"use strict";var r,a;!function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"}(r||(r={})),function(t){!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(a||(a={}))},31611:function(t,e,n){"use strict";n(87884),n(45984),n(44028),n(56539)},13932:function(t,e,n){"use strict";n(87884),n(10093),n(31611)},35804:function(t,e,n){"use strict";n(87884)},56539:function(t,e,n){"use strict";n(45984)},30214:function(t,e,n){"use strict";n(87884),n(34651)},93596:function(t,e,n){"use strict";n(87884),n(34651)},34651:function(t,e,n){"use strict";n(87884)},15502:function(t,e,n){"use strict";(0,n(87884).OBj)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(t){t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}))},55449:function(t,e,n){"use strict";n.d(e,{gJ:function(){return r.i}});n(15502),n(13932),n(19038);var r=n(66679)},40045:function(t,e,n){"use strict";n(45984),n(10093)},19038:function(t,e,n){"use strict"},18626:function(t,e,n){"use strict";n(45984)},44230:function(t,e,n){"use strict";n(45984)},91362:function(t,e,n){"use strict";n(87884),n(30214),n(93596),n(45984)},30273:function(t,e,n){"use strict";n(45984)},89353:function(t,e,n){"use strict";n(45984)},49754:function(t,e,n){"use strict";n(45984)},2363:function(t,e,n){"use strict";n(45984)},6683:function(t,e,n){"use strict";n(45984)},37261:function(t,e,n){"use strict";n(35804),n(45984)},16922:function(t,e,n){"use strict";n(45984)},53770:function(t,e,n){"use strict";n(45984)},54389:function(t,e,n){"use strict";n(45984)},81384:function(t,e,n){"use strict";n(45984)},54639:function(t,e,n){"use strict";n(45984)},46195:function(t,e,n){"use strict";n(45984)},35339:function(t,e,n){"use strict";n(87884),n(45984)},5187:function(t,e,n){"use strict";n(45984)},96708:function(t,e,n){"use strict";n(45984)},49660:function(t,e,n){"use strict";n(45984)},72607:function(t,e,n){"use strict";n(45984)},45984:function(t,e,n){"use strict";n(87884)},1413:function(t,e,n){"use strict"},77295:function(t,e,n){"use strict"},13934:function(t,e,n){"use strict"},80619:function(t,e,n){"use strict"},97552:function(t,e,n){"use strict"},69771:function(t,e,n){"use strict"},14312:function(t,e,n){"use strict"},25686:function(t,e,n){"use strict"},47632:function(t,e,n){"use strict"},29787:function(t,e,n){"use strict"},90289:function(t,e,n){"use strict"},49714:function(t,e,n){"use strict"},97741:function(t,e,n){"use strict"},67043:function(t,e,n){"use strict"},88195:function(t,e,n){"use strict"},30665:function(t,e,n){"use strict"},2169:function(t,e,n){"use strict"},91285:function(t,e,n){"use strict"},30187:function(t,e,n){"use strict"},44028:function(t,e,n){"use strict";n(87884),n(40045),n(19038),n(18626),n(44230),n(91362),n(30273),n(89353),n(49754),n(2363),n(6683),n(37261),n(16922),n(53770),n(54389),n(81384),n(54639),n(46195),n(35339),n(5187),n(96708),n(49660),n(72607)},10093:function(t,e,n){"use strict";n(87884),n(55078),n(19038),n(45984),n(1413),n(77295),n(13934),n(80619),n(97552),n(69771),n(14312),n(25686),n(47632),n(29787),n(90289),n(49714),n(97741),n(67043),n(88195),n(30665),n(2169),n(91285),n(30187)},66679:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},54679:function(t,e,n){"use strict";n.d(e,{JL:function(){return i},Zu:function(){return o}});var r=n(15671),a=n(43144),i=function(){function t(e,n){(0,r.Z)(this,t),this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,a.Z)(t,[{key:"get",value:function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}},{key:"set",value:function(t,e){this.dataIdsCount++,this.data.set(t,e)}},{key:"has",value:function(t){return this.data.has(t)}},{key:"delete",value:function(t){return this.dataIdsCount--,this.data.delete(t)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),t}(),o=function(){function t(){(0,r.Z)(this,t)}return(0,a.Z)(t,[{key:"refCount",value:function(t){return s("refCount")}},{key:"incRef",value:function(t){return s("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(t){return s("time")}},{key:"read",value:function(t){return s("read")}},{key:"readSync",value:function(t){return s("readSync")}},{key:"readToGPU",value:function(t,e){return s("readToGPU")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(t,e){return s("disposeData")}},{key:"write",value:function(t,e,n){return s("write")}},{key:"move",value:function(t,e,n,r,a){return s("move")}},{key:"createTensorFromGPUData",value:function(t,e,n){return s("createTensorFromGPUData")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return s("dispose")}}]),t}();function s(t){throw new Error("'".concat(t,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},33801:function(t,e,n){"use strict";n.r(e),n.d(e,{ERF_A1:function(){return y.Aj},ERF_A2:function(){return y.py},ERF_A3:function(){return y.Kh},ERF_A4:function(){return y.Qy},ERF_A5:function(){return y.eh},ERF_P:function(){return y.IA},PARALLELIZE_THRESHOLD:function(){return l.g},RowPartitionType:function(){return c.b2},SELU_SCALE:function(){return m.$},SELU_SCALEALPHA:function(){return m.y},applyActivation:function(){return u.QH},assertAndGetBroadcastShape:function(){return i.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return a.lB},assertParamsConsistent:function(){return o.o},assignToTypedArray:function(){return w.KV},axesAreInnerMostDims:function(){return a.YB},calculateShapes:function(){return g.SU},checkEinsumDimSizes:function(){return x.NX},checkPadOnDimRoundingMode:function(){return s.m},combineLocations:function(){return a.Vh},combineRaggedTensorToTensorShapes:function(){return c.Qd},complexWithEvenIndex:function(){return w.GH},complexWithOddIndex:function(){return w.H3},computeConv2DInfo:function(){return s.Ix},computeConv3DInfo:function(){return s.jw},computeDefaultPad:function(){return s.aO},computeDilation2DInfo:function(){return s.Rf},computeOptimalWindowSize:function(){return l.A},computeOutAndReduceShapes:function(){return a.kz},computeOutShape:function(){return o.N},computePool2DInfo:function(){return s.Xw},computePool3DInfo:function(){return s.pl},convertConv2DDataFormat:function(){return s.sl},decodeEinsumEquation:function(){return x.I2},eitherStridesOrDilationsAreOne:function(){return s.jT},expandShapeToKeepDim:function(){return a.rv},exponent:function(){return w.ts},exponents:function(){return w.mG},fromStringArrayToUint8:function(){return A},fromUint8ToStringArray:function(){return E},getAxesPermutation:function(){return a.Q3},getBroadcastDims:function(){return i.getBroadcastDims},getComplexWithIndex:function(){return w.cC},getEinsumComputePath:function(){return x.O5},getEinsumPermutation:function(){return x.lu},getFusedBiasGradient:function(){return u.pf},getFusedDyActivation:function(){return u.Fr},getImageCenter:function(){return d.Q},getInnerMostAxes:function(){return a.sY},getPermuted:function(){return p.xw},getRaggedRank:function(){return c.Qh},getReductionAxes:function(){return i.getReductionAxes},getReshaped:function(){return p.R7},getReshapedPermuted:function(){return p.TK},getRowPartitionTypesHelper:function(){return c.zb},getSliceBeginCoords:function(){return p.oP},getSliceSize:function(){return p.qX},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return I.h},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return I.E3},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return I.I_},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return S.rP},getSparseReshapeInputOutputMismatchErrorMessage:function(){return S.aY},getSparseReshapeInputOutputMultipleErrorMessage:function(){return S.yv},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return S.y5},getSparseReshapeNegativeOutputDimErrorMessage:function(){return S.Y6},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return _.u6},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return _.N5},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return _.XL},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return _.GW},getUndoAxesPermutation:function(){return a.LJ},isIdentityPermutation:function(){return x.qF},log:function(){return b.c},mergeRealAndImagArrays:function(){return w.Cs},prepareAndValidate:function(){return v.V},prepareSplitSize:function(){return k.O},segment_util:function(){return C},shouldFuse:function(){return u.uy},slice_util:function(){return h},splitRealAndImagArrays:function(){return w.cf},stridesOrDilationsArePositive:function(){return s.U3},tupleValuesAreOne:function(){return s.I0},upcastType:function(){return f.x8},validateDefaultValueShape:function(){return c.Ys},validateInput:function(){return g.b0},validateUpdateShape:function(){return g.l5},warn:function(){return b.Z}});var r=n(58860),a=n(88473),i=n(45774),o=n(95160),s=n(39151),u=n(5171),c=n(29499),l=n(60127),h=n(52875),f=n(3525),d=n(13922),p=n(5556),v=n(11929),g=n(48604),m=n(20349),y=n(26424),b=n(17269),w=n(69998),x=n(79010),k=n(13165),I=n(81286),S=n(5559),_=n(14956),C=n(10521);function E(t){try{return t.map((function(t){return(0,r.decodeString)(t)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function A(t){return t.map((function(t){return(0,r.encodeString)(t)}))}},69998:function(t,e,n){"use strict";function r(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(t.length,", imag: ").concat(e.length,"."));for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function a(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function i(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function o(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function s(t,e){return{real:t[2*e],imag:t[2*e+1]}}function u(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function c(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),a=0;a<Math.ceil(t/2);a++){var i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function l(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}n.d(e,{Cs:function(){return r},GH:function(){return i},H3:function(){return o},KV:function(){return u},cC:function(){return s},cf:function(){return a},mG:function(){return c},ts:function(){return l}})},79010:function(t,e,n){"use strict";n.d(e,{I2:function(){return l},NX:function(){return f},O5:function(){return d},lu:function(){return h},qF:function(){return p}});var r=n(37762),a=n(29439),i=n(36147),o="->",s=/->/g,u=",",c="...";function l(t,e){var n=((t=t.replace(/\s/g,"")).length-t.replace(s,"").length)/o.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(o,'").'));var r=t.split(o),l=(0,a.Z)(r,2),h=l[0],f=l[1];(0,i.hu)(-1===h.indexOf(c),(function(){return'The ellipsis notation ("'.concat(c,'") is not supported yet.')}));var d=h.split(u),p=d.length;if(e!==p)throw new Error("Expected ".concat(p," input tensors, received ").concat(e));if(p>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var v=[],g=function(){var t=f[m];if(!d.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===v.indexOf(t)&&v.push(t)},m=0;m<f.length;++m)g();for(var y=0;y<h.length;++y){var b=h[y];-1===v.indexOf(b)&&b!==u&&v.push(b)}for(var w=new Array(d.length),x=0;x<p;++x){if(new Set(d[x].split("")).size!==d[x].length)throw new Error("Found duplicate axes in input component ".concat(d[x],". ")+"Support for duplicate axes in input is not implemented yet.");w[x]=[];for(var k=0;k<d[x].length;++k)w[x].push(v.indexOf(d[x][k]))}for(var I=v.length,S=[],_=f.length;_<I;++_)S.push(_);return{allDims:v,summedDims:S,idDims:w}}function h(t,e){var n=new Array(t);n.fill(-1);for(var r=0;r<e.length;++r)n[e[r]]=r;for(var a=[],i=0;i<t;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(t){return-1!==t})),expandDims:a}}function f(t,e,n){for(var r=new Array(t),a=function(t){for(var a=n[t].shape,o=function(n){void 0===r[e[t][n]]?r[e[t][n]]=a[n]:(0,i.hu)(r[e[t][n]]===a[n],(function(){return"Expected dimension ".concat(r[e[t][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},s=0;s<e[t].length;++s)o(s)},o=0;o<n.length;++o)a(o)}function d(t,e){var n,a=t,i=[];0===t.length&&a.push(-1),n=t.length+1;for(var o=0;o<n;++o)i.push([]);for(var s=[],u=0;u<a.length;++u){var c,l=v(e,a[u]),h=(0,r.Z)(l);try{for(h.s();!(c=h.n()).done;){var f=c.value;-1===s.indexOf(f)&&(i[u].push(f),s.push(f))}}catch(d){h.e(d)}finally{h.f()}}return{path:a,steps:i}}function p(t){return t.every((function(t,e){return t===e}))}function v(t,e){for(var n=[],r=0;r<t.length;++r)0!==t[r].length&&-1===t[r].indexOf(e)&&-1!==e||n.push(r);return n}},39053:function(t,e,n){"use strict";n.d(e,{GP:function(){return r.GP},ZA:function(){return a.Z},pA:function(){return r.pA},qP:function(){return r.qP}});var r=n(98028),a=n(24189)},98028:function(t,e,n){"use strict";n.d(e,{GP:function(){return i},pA:function(){return s},qP:function(){return o}});var r=n(93433),a=n(19533);function i(t,e,n,r,a){return u(t,e,n,r,a,0)}function o(t,e,n,r,a,i){return u(t,e,n,r,a,0,!1,i,!0)}function s(t,e,n,r,a,i){return u(t,e,n,r,a,i,!0)}function u(t,e,n,i,o,s){for(var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=[],v=0;v<e.length;v++)e[v]>o&&p.push({score:e[v],boxIndex:v,suppressBeginIndex:0});p.sort(h);for(var g=s>0?-.5/s:0,m=[],y=[];m.length<n&&p.length>0;){var b=p.pop(),w=b.score,x=b.boxIndex,k=b.suppressBeginIndex;if(w<o)break;for(var I=!1,S=m.length-1;S>=k;--S){var _=c(t,x,m[S]);if(_>=i){I=!0;break}if(b.score=b.score*l(i,g,_),b.score<=o)break}b.suppressBeginIndex=m.length,I||(b.score===w?(m.push(x),y.push(b.score)):b.score>o&&(0,a.v)(p,b,h))}var C=m.length,E=n-C;f&&E>0&&(m.push.apply(m,(0,r.Z)(new Array(E).fill(0))),y.push.apply(y,(0,r.Z)(new Array(E).fill(0))));var A={selectedIndices:m};return u&&(A.selectedScores=y),d&&(A.validOutputs=C),A}function c(t,e,n){var r=t.subarray(4*e,4*e+4),a=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(h-c)*(f-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),g=Math.max(o,l),m=Math.min(s,h),y=Math.min(u,f),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(d+p-b)}function l(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function h(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}},19533:function(t,e,n){"use strict";function r(t,e,n){var r=function(t,e,n){return function(t,e,n){var r=0,a=t.length,i=0,o=!1;for(;r<a;){var s=n(e,t[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(t,e,n||a)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function a(t,e){return t>e?1:t<e?-1:0}n.d(e,{v:function(){return r}})},24189:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(77039);function a(t,e){for(var n=[],a=0;a<e.length;a++)e[a]&&n.push(a);for(var i=(0,r.f)(t,"int32"),o=(0,r.f)([n.length,t.length],"int32"),s=0;s<n.length;s++){var u=i.indexToLoc(n[s]),c=s*t.length;o.values.set(u,c)}return o.toTensor()}},33548:function(t,e,n){"use strict";var r=n(50391),a=(n(69126),n(76968),n(24561),n(77039)),i=n(99118),o=n(10672),s=n(64600),u=n(23939);(0,r.wv)();var c={buffer:a.f,cast:i.p,clone:o.d,print:s.S};(0,u.Vp)(c)},32117:function(t,e,n){"use strict";n.d(e,{g:function(){return a}});var r="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(t){return t()};function a(){return new Promise((function(t){return r((function(){return t()}))}))}},64546:function(t,e,n){"use strict";var r;function a(t){r=t}function i(t){if(void 0!==r)return r;if(t||"undefined"!==typeof navigator&&null!=navigator){if(t||(t=navigator),"ReactNative"===t.product)return!0;var e=t.userAgent||t.vendor||("undefined"!==typeof window?window.opera:"");if(!e){var n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function o(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(e),n.d(e,{isBrowser:function(){return o},isMobile:function(){return i},mockIsMobile:function(){return a}})},50391:function(t,e,n){"use strict";n.d(e,{BV:function(){return _},wv:function(){return S}});var r=n(37762),a=n(93433),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=n(54679),l=n(35050),h=n(96581),f=n(32145),d=n(78864),p=n(17269),v=n(81622),g=n(18227),m=n(23939),y=n(99064),b=n(36147),w=n(58860);function x(t){return null!=t.kernelName}var k=function(){function t(){(0,s.Z)(this,t),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(t){return t.name}))))}}}return(0,u.Z)(t,[{key:"dispose",value:function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()}}]),t}(),I=function(){function t(e){(0,s.Z)(this,t),this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new k}return(0,u.Z)(t,[{key:"ready",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var e,n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.pendingBackendInit){t.next=2;break}return t.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){t.next=4;break}return t.abrupt("return");case 4:e=this.getSortedBackends(),n=0;case 6:if(!(n<e.length)){t.next=18;break}return r=e[n],t.next=10,this.initializeBackend(r).success;case 10:if(!t.sent){t.next=15;break}return t.next=14,this.setBackend(r);case 14:return t.abrupt("return");case 15:n++,t.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]}},{key:"findBackendFactory",value:function(t){return t in this.registryFactory?this.registryFactory[t].factory:null}},{key:"registerBackend",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t in this.registryFactory?(p.Z("".concat(t," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}},{key:"setBackend",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.registryFactory[e]){t.next=2;break}throw new Error("Backend name '".concat(e,"' not found in registry"));case 2:if(this.backendName=e,null!=this.registry[e]){t.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,!n.asyncInit){t.next=12;break}return t.next=9,r;case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=r;case 13:if(t.t0){t.next=16;break}return t.abrupt("return",!1);case 16:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new v.Q1(this.backendInstance),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var t=this;(0,d.tr)(this.backendName).forEach((function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(t){var e=this;(0,d.tr)(t).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])}))}},{key:"initializeBackend",value:function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend ".concat(t,", no registration found."));try{var r=n.factory();if(!r||r instanceof c.Zu||"function"!==typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<e.pendingBackendInitId)&&(e.registry[t]=n,e.pendingBackendInit=null,!0)})).catch((function(n){return a<e.pendingBackendInitId||(e.pendingBackendInit=null,p.Z("Initialization of backend ".concat(t," failed")),p.Z(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return p.Z("Initialization of backend ".concat(t," failed")),p.Z(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(t){if(!(t in this.registryFactory))throw new Error("".concat(t," backend not found in registry"));this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,a=this.readSync(e),i=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(t,e){var n,r=this,a=null;if(null==e){if("function"!==typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!==typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(t,e,n){t();try{var r=n();return e(),r}catch(a){throw e(),a}}},{key:"nextTensorId",value:function(){return t.nextTensorId++}},{key:"nextVariableId",value:function(){return t.nextVariableId++}},{key:"clone",value:function(t){var e=_.runKernel(f.iJz,{x:t}),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],(function(t){return{x:function(){var e={x:t},n={dtype:"float32"};return _.runKernel(f.RFZ,e,n)}}}),[],{}),e}},{key:"runKernel",value:function(t,e,n){if(null==this.backendName&&this.backend,!(null!=(0,d.pI)(t,this.backendName)))throw new Error("Kernel '".concat(t,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(t,e,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(t){a+="complex64"===t.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-e-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(t,"'"))}},{key:"runKernelFunc",value:function(t){var e,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=x(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(x(t)){var l=t.kernelName,h=t.inputs,f=t.attrs;null==this.backendName&&this.backend;var p=(0,d.pI)(l,this.backendName);b.hu(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var t=a.backend.numDataIds();r=p.kernelFunc({inputs:h,attrs:f,backend:a.backend});var e=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,t,e);var n=e.map((function(t){return null!=t.rank?t:a.makeTensorFromTensorInfo(t)}));if(o){var s=a.getTensorsForGradient(l,h,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var v=t.forwardFunc,g=function(t){o&&(i=t.map((function(t){return a.keep(a.clone(t))})))};n=function(){var t=a.backend.numDataIds();r=a.tidy((function(){return v(a.backend,g)}));var e=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,t,e),e}}var m,y=t.inputs,w=t.attrs,k=x(t)?null:t.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),e=m.outputs):e=n()})),o&&this.addTapeNode(c,y,e,k,i,w),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(t){return null!=y[t]?y[t].shape:null})),outputShapes:e.map((function(t){return t.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?e:e[0]}},{key:"saveTensorsForBackwardMode",value:function(t){var e=this;return t.map((function(t){return e.keep(e.clone(t))}))}},{key:"getTensorsForGradient",value:function(t,e,n){var r=(0,d.uk)(t);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(b.hu(Array.isArray(e),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(e).map((function(t){return e[t]}))):a=i.map((function(t){return e[t]}));var s=n.filter((function(t,e){return o[e]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=t;"string"===n&&b.HD(t[0])&&(a=t.map((function(t){return w.encodeString(t)})));var i=r.write(a,e,n),o=new m.es(e,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=(0,b.Ub)(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(t,e,n,r){var a={dataId:t,shape:e,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(t,e){var n=t.dataId,r=t.shape,a=t.dtype,i=new m.es(r,a,n,this.nextTensorId());return this.trackTensor(i,e),i}},{key:"makeVariable",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));var a=new m._w(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*b.bT(t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof m._w||this.track(t)}},{key:"incRef",value:function(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}},{key:"removeDataId",value:function(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(t){if(this.state.tensorInfo.has(t.dataId)){var e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){var n=t.size*b.bT(t.dtype);this.state.numBytes-=n}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}}},{key:"disposeVariables",value:function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}}},{key:"disposeVariable",value:function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}},{key:"memory",value:function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}},{key:"profile",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var n,o,s,u,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,o=this.state.numTensors,this.state.activeProfile.kernels=[],t.next=6,e();case 6:this.state.activeProfile.result=t.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,a.Z)(this.state.activeProfile.kernels.map((function(t){return t.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o,s=(0,r.Z)(this.state.activeProfile.kernels),t.prev=12,s.s();case 14:if((u=s.n()).done){t.next=24;break}return c=u.value,t.next=18,c.kernelTimeMs;case 18:return c.kernelTimeMs=t.sent,t.next=21,c.extraInfo;case 21:c.extraInfo=t.sent;case 22:t.next=14;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(12),s.e(t.t0);case 29:return t.prev=29,s.f(),t.finish(29);case 32:return t.abrupt("return",this.state.activeProfile);case 33:case"end":return t.stop()}}),t,this,[[12,26,29,32]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(t,e,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:a},u=(0,d.uk)(t);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(t){return t=t.map((function(t,e){if(null==t){var r=n[e],a=b.wT(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return t})),r(t.length>1?t:t[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(t){return t.kept=!0,t}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}},{key:"endScope",value:function(t){for(var e=this,n=(0,y.getTensorsInContainer)(t),r=new Set(n.map((function(t){return t.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(t){t.kept||t.scopeId!==o.id||e.track(t)}))}},{key:"gradients",value:function(t,e,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(b.hu(e.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",t)}));b.hu(o instanceof m.es,(function(){return"The result y returned by f() must be a tensor."}));var s=(0,g.C)(this.state.activeTape,e,o);if(!i&&0===s.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var t={};t[o.id]=null==n?function(t){var e=(0,b.p8)((0,b.NA)(t),"float32");return _.makeTensor(e,t,"float32")}(o.shape):n,(0,g._)(t,s,(function(t){return a.tidy(t)}),C);var i=e.map((function(e){return t[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(t){var e,n=(0,r.Z)(t.saved);try{for(n.s();!(e=n.n()).done;){e.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(t){var e=this;return b.hu(b.mf(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;b.hu(r.every((function(t){return t instanceof m.es})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(t,e){o[e]=t}));return e.runKernelFunc({forwardFunc:function(e,n){return i=t.apply(void 0,[].concat(r,[n])),b.hu(i.value instanceof m.es,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),b.hu(b.mf(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},backwardsFunc:function(t,e){var n=i.gradFunc(t,e),a=Array.isArray(n)?n:[n];b.hu(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),b.hu(a.every((function(t){return t instanceof m.es})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(t,e){o[e]=function(){return t}})),o},inputs:o})}}},{key:"readSync",value:function(t){return this.state.tensorInfo.get(t).backend.readSync(t)}},{key:"read",value:function(t){return this.state.tensorInfo.get(t).backend.read(t)}},{key:"readToGPU",value:function(t,e){return this.state.tensorInfo.get(t).backend.readToGPU(t,e)}},{key:"time",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,w.now)(),t.next=3,this.backend.time(e);case 3:return(r=t.sent).wallMs=(0,w.now)()-n,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"track",value:function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new k,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),t}();function S(){var t=(0,h.D)();if(null==t._tfengine){var e=new l.qA(t);t._tfengine=new I(e)}return(0,l.iG)(t._tfengine.ENV),(0,m.Vi)((function(){return t._tfengine})),t._tfengine}I.nextTensorId=0,I.nextVariableId=0;var _=S();function C(t,e){var n={a:t,b:e};return _.runKernel(f.mm_,n)}},35050:function(t,e,n){"use strict";n.d(e,{OB:function(){return f},iG:function(){return p},qA:function(){return l}});var r=n(29439),a=n(74165),i=n(15861),o=n(15671),s=n(43144),u=n(36147),c="tfjsflags",l=function(){function t(e){(0,o.Z)(this,t),this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=h,this.populateURLFlags()}return(0,s.Z)(t,[{key:"setPlatform",value:function(t,e){null!=this.platform&&(f().getBool("IS_TEST")||f().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=t,this.platform=e}},{key:"registerFlag",value:function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];f().getBool("IS_TEST")||f().getBool("PROD")||console.warn("Setting feature override from URL ".concat(t,": ").concat(r,".")),this.set(t,r)}}},{key:"getAsync",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e in this.flags)){t.next=2;break}return t.abrupt("return",this.flags[e]);case 2:return t.next=4,this.evaluateFlag(e);case 4:return this.flags[e]=t.sent,t.abrupt("return",this.flags[e]);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(t){if(t in this.flags)return this.flags[t];var e=this.evaluateFlag(t);if((0,u.tI)(e))throw new Error("Flag ".concat(t," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[t]=e,this.flags[t]}},{key:"getNumber",value:function(t){return this.get(t)}},{key:"getBool",value:function(t){return this.get(t)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag ".concat(t," as it has not been registered."));this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}},{key:"evaluateFlag",value:function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '".concat(t,"': no evaluation function found."));return this.flagRegistry[t].evaluationFn()}},{key:"setFlags",value:function(t){this.flags=Object.assign({},t)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var t=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var e=this.getQueryParams(this.global.location.search);if(c in e)e[c].split(",").forEach((function(e){var n=e.split(":"),a=(0,r.Z)(n,2),i=a[0],o=a[1];t.urlFlags[i]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if("".concat(+e)===e)return+e;throw new Error("Could not parse value flag value ".concat(e," for flag ").concat(t,"."))}(i,o)}))}}}]),t}();function h(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,r[0],r[1]),r.join("=")})),e}function f(){return d}var d=null;function p(t){d=t}},69126:function(t,e,n){"use strict";n(50391);var r=n(64546),a=(0,n(35050).OB)();a.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(function(){return r.isBrowser()})),a.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),a.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),a.registerFlag("PROD",(function(){return!1})),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return a.getBool("DEBUG")})),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),a.registerFlag("IS_TEST",(function(){return!1})),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),a.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),a.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),a.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}))},96581:function(t,e,n){"use strict";var r;function a(){if(null==r){var t;if("undefined"!==typeof window)t=window;else if("undefined"!==typeof n.g)t=n.g;else if("undefined"!==typeof process)t=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");t=self}r=t}return r}function i(t,e){var n=function(){var t=a();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);var r=e();return n.set(t,r),n.get(t)}n.d(e,{D:function(){return a},R:function(){return i}})},35875:function(t,e,n){"use strict";n.d(e,{B9:function(){return l},Cn:function(){return h},SR:function(){return s},jq:function(){return f},lu:function(){return c},sq:function(){return u},y3:function(){return d}});var r=n(50391),a=n(35050),i=n(23939),o=n(99064);function s(){return r.BV}function u(){return r.BV.memory()}function c(t,e){return r.BV.tidy(t,e)}function l(t){(0,o.getTensorsInContainer)(t).forEach((function(t){return t.dispose()}))}function h(t){return r.BV.keep(t)}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.BV.registerBackend(t,e,n)}function d(){return r.BV.backend}(0,i.FZ)((function(t){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}))},66450:function(t,e,n){"use strict";n.d(e,{cb:function(){return s},pn:function(){return o}});var r=n(50391),a=n(23939),i=n(36147);function o(t,e){i.hu(i.mf(t),(function(){return"The f passed in variableGrads(f) must be a function"})),i.hu(null==e||Array.isArray(e)&&e.every((function(t){return t instanceof a._w})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=e;if(!n)for(var o in e=[],r.BV.registeredVariables)e.push(r.BV.registeredVariables[o]);var s=n?e.filter((function(t){return!t.trainable})):null,u=e.length;e=e.filter((function(t){return t.trainable})),i.hu(e.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(u," variables is ")+"trainable."}));var c=r.BV.gradients(t,e,null,!0),l=c.value,h=c.grads;i.hu(h.some((function(t){return null!=t})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),i.hu(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var f={};return e.forEach((function(t,e){null!=h[e]&&(f[t.name]=h[e])})),null!=s&&s.forEach((function(t){return f[t.name]=null})),{value:l,grads:f}}function s(t){return r.BV.customGrad(t)}},99122:function(t,e,n){"use strict";n.d(e,{Q:function(){return u}});var r=n(29439),a=n(32145),i=n(99118),o=n(30651),s=n(94031),u={kernelName:a.SYM,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.d)(t,(0,s.N)((0,i.p)(n,"float32"),-1))}}}}},87684:function(t,e,n){"use strict";n.d(e,{K:function(){return f}});var r=n(29439),a=n(32145),i=n(99118),o=n(15750),s=n(4362),u=n(27067),c=n(46902),l=n(7391),h=n(84774),f={kernelName:a.VGw,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){var e=(0,l.h)((0,i.p)(n,"float32")),r=(0,c._)((0,h.l)((0,u.i)(1),e));return(0,s.W)((0,o.h)(t,r))}}}}},66283:function(t,e,n){"use strict";n.d(e,{M:function(){return l}});var r=n(29439),a=n(32145),i=n(99118),o=n(15750),s=n(46902),u=n(7391),c=n(84774),l={kernelName:a.SpW,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){var e=(0,s._)((0,c.l)((0,u.h)((0,i.p)(n,"float32")),1));return(0,o.h)(t,e)}}}}},99905:function(t,e,n){"use strict";n.d(e,{C:function(){return r}});var r={kernelName:n(32145).Xze,saveAllInputs:!0,gradFunc:function(t,e){var n={};return e.forEach((function(e,r){n[r]=function(){return t.clone()}})),n}}},97748:function(t,e,n){"use strict";n.d(e,{m:function(){return u}});var r=n(29439),a=n(32145),i=n(45774),o=n(75561),s=n(40227),u={kernelName:a.mm_,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],u=n[1],c=i.assertAndGetBroadcastShape(a.shape,u.shape);return{a:function(){var e=t,n=i.getReductionAxes(a.shape,c);return n.length>0&&(e=(0,s.S)(e,n)),(0,o.X)(e,a.shape)},b:function(){var e=t,n=i.getReductionAxes(u.shape,c);return n.length>0&&(e=(0,s.S)(e,n)),(0,o.X)(e,u.shape)}}}}},69791:function(t,e,n){"use strict";n.d(e,{C:function(){return o}});var r=n(29439),a=n(32145),i=n(87293),o={kernelName:a.sJF,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.P)(n)}}}}},68201:function(t,e,n){"use strict";n.d(e,{Q:function(){return o}});var r=n(29439),a=n(32145),i=n(87293),o={kernelName:a.aJk,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.P)(n)}}}}},89576:function(t,e,n){"use strict";n.d(e,{V:function(){return h}});var r=n(29439),a=n(32145),i=n(99118),o=n(15750),s=n(27067),u=n(46902),c=n(7391),l=n(84774),h={kernelName:a.M2y,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.h)(t,(0,u._)((0,l.l)((0,s.i)(1),(0,c.h)((0,i.p)(n,"float32")))))}}}}},80307:function(t,e,n){"use strict";n.d(e,{f:function(){return h}});var r=n(29439),a=n(32145),i=n(43312),o=n(99118),s=n(15750),u=n(27067),c=n(46902),l=n(7391),h={kernelName:a.qw7,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){var e=(0,c._)((0,i.I)((0,u.i)(1),(0,l.h)((0,o.p)(n,"float32"))));return(0,s.h)(t,e)}}}}},35348:function(t,e,n){"use strict";n.d(e,{H:function(){return d}});var r=n(29439),a=n(32145),i=n(43312),o=n(45774),s=n(15750),u=n(30651),c=n(4362),l=n(75561),h=n(7391),f=n(40227),d={kernelName:a.QCc,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],d=n[1],p=(0,o.assertAndGetBroadcastShape)(a.shape,d.shape);return{a:function(){var e=(0,i.I)((0,h.h)(a),(0,h.h)(d)),n=(0,u.d)(t,(0,s.h)(d,e)),r=(0,o.getReductionAxes)(a.shape,p);return r.length>0&&(n=(0,f.S)(n,r)),(0,l.X)(n,a.shape)},b:function(){var e=(0,i.I)((0,h.h)(a),(0,h.h)(d)),n=(0,c.W)((0,u.d)(t,(0,s.h)(a,e))),r=(0,o.getReductionAxes)(d.shape,p);return r.length>0&&(n=(0,f.S)(n,r)),(0,l.X)(n,d.shape)}}}}},80330:function(t,e,n){"use strict";n.d(e,{A:function(){return c}});var r=n(29439),a=n(32145),i=n(43312),o=n(99118),s=n(15750),u=n(7391),c={kernelName:a.jMg,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,s.h)(t,(0,i.I)((0,u.h)((0,o.p)(n,"float32")),1))}}}}},88625:function(t,e,n){"use strict";n.d(e,{q:function(){return l}});var r=n(29439),a=n(32145),i=n(99118),o=n(15750),s=n(7391),u=n(84774),c=n(27067),l={kernelName:a.Oyi,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.h)(t,(0,u.l)((0,c.i)(1),(0,s.h)((0,i.p)(n,"float32"))))}}}}},62832:function(t,e,n){"use strict";n.d(e,{Y:function(){return o}});var r=n(29439),a=n(32145),i=n(98102),o={kernelName:a._k9,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return(0,i.f)(t,a,o,s,u,c)}}}}},93209:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var r=n(29439),a=n(32145),i=n(97926),o={kernelName:a.JhU,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return(0,i.W)(t,a,o,s,u)}}}}},38676:function(t,e,n){"use strict";n.d(e,{C:function(){return o}});var r=n(29439),a=n(32145),i=n(57221),o={kernelName:a.XLW,inputsToSave:["a","b"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),o=a[0],s=a[1],u=n.transposeA,c=n.transposeB;return u||c?!u&&c?{a:function(){return(0,i.O)(t,s,!1,!1)},b:function(){return(0,i.O)(t,o,!0,!1)}}:u&&!c?{a:function(){return(0,i.O)(s,t,!1,!0)},b:function(){return(0,i.O)(o,t,!1,!1)}}:{a:function(){return(0,i.O)(s,t,!0,!0)},b:function(){return(0,i.O)(t,o,!0,!0)}}:{a:function(){return(0,i.O)(t,s,!1,!0)},b:function(){return(0,i.O)(o,t,!0,!1)}}}}},86616:function(t,e,n){"use strict";n.d(e,{s:function(){return i}});var r=n(32145),a=n(65696),i={kernelName:r.zws,gradFunc:function(t,e,n){var r=n.blockShape,i=n.crops;return{x:function(){return(0,a.f)(t,r,i)}}}}},93638:function(t,e,n){"use strict";n.d(e,{O:function(){return i}});var r=n(32145),a=n(40227),i={kernelName:r.Ly9,gradFunc:function(t,e,n){for(var r=n,i=r.inputShape,o=r.shape,s=Array.from(o),u=i.length-1;u>=0;u--)if(i[u]===o[u])s[u]=1;else if(1!==i[u])throw new Error("broadcastTo(): [".concat(i,"] cannot be broadcast to [").concat(o,"]."));for(var c=[],l=0;l<s.length;l++)s[l]>1&&c.push(l);return{x:function(){return(0,a.S)(t,c,!0)}}}}},60553:function(t,e,n){"use strict";n.d(e,{D:function(){return r}});var r={kernelName:n(32145).RFZ,gradFunc:function(t){return{x:function(){return t.clone()}}}}},44343:function(t,e,n){"use strict";n.d(e,{t:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.gJX,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},58879:function(t,e,n){"use strict";n.d(e,{v:function(){return l}});var r=n(29439),a=n(32145),i=n(18327),o=n(12642),s=n(2177),u=n(10329),c=n(87293),l={kernelName:a.xnO,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],l=n.clipValueMin,h=n.clipValueMax;return{x:function(){return(0,u.a)((0,s.H)((0,i.b)(a,l),(0,o.z)(a,h)),t,(0,c.P)(t))}}}}},18467:function(t,e,n){"use strict";n.d(e,{Q:function(){return i}});var r=n(32145),a=n(99122),i={kernelName:r.yj2,inputsToSave:["x"],gradFunc:a.Q.gradFunc}},30299:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(32145),a=n(82588),i=n(36147),o={kernelName:r.Eh3,saveAllInputs:!0,gradFunc:function(t,e,n){var r=e.map((function(t){return t.shape})),o=n.axis,s=(0,i.EC)(o,e[0].shape)[0],u=r.map((function(t){return t[s]}));return(0,a.V)(t,u,s).map((function(t){return function(){return t}}))}}},17794:function(t,e,n){"use strict";n.d(e,{F:function(){return s}});var r=n(29439),a=n(32145),i=n(93457),o=n(8744),s={kernelName:a.wm,inputsToSave:["dy","filter"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),s=a[0],u=a[1],c=n.strides,l=n.pad,h=n.dataFormat,f=n.dimRoundingMode;return{dy:function(){return(0,i.T)(t,u,c,l,h,1,f)},filter:function(){return(0,o.p)(t,s,u.shape,c,l,h,f)}}}}},2101:function(t,e,n){"use strict";n.d(e,{S:function(){return c}});var r=n(29439),a=n(32145),i=n(8744),o=n(21045),s=n(39151),u=n(36147),c={kernelName:a.mhS,inputsToSave:["x","filter"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),c=a[0],l=a[1],h=n.dilations,f=n.strides,d=n.pad,p=n.dataFormat;return u.hu(s.I0(h),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(h,"'")})),{x:function(){return(0,o._)(c.shape,t,l,f,d,p)},filter:function(){return(0,i.p)(c,t,l.shape,f,d,p)}}}}},53687:function(t,e,n){"use strict";n.d(e,{w:function(){return c}});var r=n(29439),a=n(32145),i=n(69550),o=n(61873),s=n(39151),u=n(36147),c={kernelName:a.x12,inputsToSave:["x","filter"],gradFunc:function(t,e,n){var a=n.dilations,c=n.strides,l=n.pad;u.hu((0,s.I0)(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(a,"'")}));var h=(0,r.Z)(e,2),f=h[0],d=h[1];return{x:function(){return(0,o._)(f.shape,t,d,c,l)},filter:function(){return(0,i.s)(f,t,d.shape,c,l)}}}}},49059:function(t,e,n){"use strict";n.d(e,{L:function(){return c}});var r=n(29439),a=n(32145),i=n(99118),o=n(30651),s=n(4362),u=n(87254),c={kernelName:a.mc4,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.d)((0,s.W)((0,u.O)((0,i.p)(n,"float32"))),t)}}}}},44224:function(t,e,n){"use strict";n.d(e,{a:function(){return u}});var r=n(29439),a=n(32145),i=n(99118),o=n(30651),s=n(57657),u={kernelName:a.TR1,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.d)((0,s.R)((0,i.p)(n,"float32")),t)}}}}},76344:function(t,e,n){"use strict";n.d(e,{g:function(){return u}});var r=n(29439),a=n(32145),i=n(88473),o=n(58862),s=n(61240),u={kernelName:a.iHb,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],u=n.axis,c=n.exclusive,l=n.reverse;return{x:function(){var e=(0,i.Q3)([u],a.rank),n=(0,o.z)(t,u,c,!l);return null!=e&&(n=(0,s.p)(n,e)),n}}}}},30470:function(t,e,n){"use strict";n.d(e,{v:function(){return c}});var r=n(29439),a=n(32145),i=n(39151),o=n(60288),s=n(96939),u=n(36147),c={kernelName:a.cie,inputsToSave:["x","filter"],gradFunc:function(t,e,n){var a=n.dilations,c=n.strides,l=n.pad,h=n.dimRoundingMode,f=null==a?[1,1]:a;u.hu(i.I0(f),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(f,"'")}));var d=(0,r.Z)(e,2),p=d[0],v=d[1];return u.hu(4===p.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(p.rank,".")})),u.hu(4===v.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(v.rank,".")})),u.hu(p.shape[3]===v.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(p.shape[3],") must match the inChannels dimension ")+"in filter ".concat(v.shape[2],".")})),u.hu(i.jT(c,f),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(c," and dilations ")+"'".concat(f,"'.")})),i.m("depthwiseConv2d",l,h),{x:function(){return(0,s.v)(p.shape,t,v,c,l,f,h)},filter:function(){return(0,o.z)(p,t,v.shape,c,l,f,h)}}}}},58791:function(t,e,n){"use strict";n.d(e,{T:function(){return o}});var r=n(29439),a=n(50391),i=n(32145),o={kernelName:i.p4S,inputsToSave:["x","filter"],gradFunc:function(t,e,n){var o=(0,r.Z)(e,2),s=o[0],u=o[1],c={x:s,filter:u,dy:t},l={x:s,filter:u,dy:t};return{x:function(){return a.BV.runKernel(i.ekb,c,n)},filter:function(){return a.BV.runKernel(i.Vn9,l,n)}}}}},3940:function(t,e,n){"use strict";n.d(e,{q:function(){return o}});var r=n(29439),a=n(50391),i=n(32145),o={kernelName:i.SX0,outputsToSave:[!0],gradFunc:function(t,e){var n={dy:t,y:(0,r.Z)(e,1)[0]};return{x:function(){return a.BV.runKernel(i.HEU,n)}}}}},26175:function(t,e,n){"use strict";n.d(e,{j:function(){return c}});var r=n(29439),a=n(32145),i=n(411),o=n(30651),s=n(4362),u=n(7391),c={kernelName:a.Omj,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0],a=(0,o.d)((0,i.Q)((0,s.W)((0,u.h)(n))),2/Math.sqrt(Math.PI));return{x:function(){return(0,o.d)(t,a)}}}}},75574:function(t,e,n){"use strict";n.d(e,{K:function(){return o}});var r=n(29439),a=n(32145),i=n(30651),o={kernelName:a.NEP,outputsToSave:[!0],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.d)(t,n)}}}}},94426:function(t,e,n){"use strict";n.d(e,{B:function(){return o}});var r=n(29439),a=n(32145),i=n(75561),o={kernelName:a.YFo,inputsToSave:["input"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{input:function(){return(0,i.X)(t,n.shape)}}}}},94734:function(t,e,n){"use strict";n.d(e,{g:function(){return s}});var r=n(29439),a=n(32145),i=n(411),o=n(30651),s={kernelName:a.Y0y,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.d)(t,(0,i.Q)(n))}}}}},87231:function(t,e,n){"use strict";n.d(e,{T:function(){return d}});var r=n(29439),a=n(32145),i=n(45774),o=n(99118),s=n(15750),u=n(30651),c=n(4362),l=n(75561),h=n(7391),f=n(40227),d={kernelName:a.jeX,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],d=n[1],p=(0,i.assertAndGetBroadcastShape)(a.shape,d.shape);return{a:function(){var e=(0,s.h)(t,(0,o.p)(d,"float32")),n=(0,i.getReductionAxes)(a.shape,p);return n.length>0?(0,l.X)((0,f.S)(e,n),a.shape):e},b:function(){var e=(0,u.d)(t,(0,o.p)(a,"float32")),n=(0,i.getReductionAxes)(d.shape,p);n.length>0&&(e=(0,l.X)((0,f.S)(e,n),d.shape));var r=(0,h.h)(d);return(0,c.W)((0,s.h)(e,(0,o.p)(r,"float32")))}}}}},11908:function(t,e,n){"use strict";n.d(e,{G:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.OR,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},52003:function(t,e,n){"use strict";n.d(e,{c:function(){return p}});var r=n(29439),a=n(32145),i=n(43312),o=n(45774),s=n(30651),u=n(75561),c=n(65115),l=n(27067),h=n(84774),f=n(40227),d=n(42343),p={kernelName:a.sHE,inputsToSave:["x","mean","variance","scale"],gradFunc:function(t,e,n){var a=n.varianceEpsilon,p=(0,r.Z)(e,4),v=p[0],g=p[1],m=p[2],y=p[3],b=null==y?(0,l.i)(1):y,w=(0,o.getReductionAxes)(g.shape,v.shape),x=[];if(1===g.rank){for(var k=0;k<v.shape.length-1;++k)x.push(v.shape[k]);x.push(1)}var I=(0,h.l)(v,g),S=(0,s.d)(t,b),_=(0,c.b)((0,i.I)(m,(0,l.i)(a))),C=(0,s.d)((0,s.d)((0,s.d)(_,_),_),(0,l.i)(-.5));return{x:function(){return 1===g.rank?(0,u.X)((0,s.d)((0,s.d)(t,(0,d.G)((0,u.X)(_,[1,1,1,g.shape[0]]),x)),b),v.shape):(0,u.X)((0,s.d)((0,s.d)(t,_),b),v.shape)},mean:function(){var t=(0,s.d)((0,s.d)(_,(0,l.i)(-1)),S);return 1===g.rank&&(t=(0,f.S)(t,w)),(0,u.X)(t,g.shape)},variance:function(){var t=(0,s.d)((0,s.d)(C,I),S);return 1===g.rank&&(t=(0,f.S)(t,w)),(0,u.X)(t,g.shape)},scale:function(){var e=(0,s.d)(I,_),n=(0,s.d)(t,e);return 1===g.rank&&(n=(0,f.S)(n,w)),(0,u.X)(n,g.shape)},offset:function(){var e=t;return 1===g.rank&&(e=(0,f.S)(e,w)),(0,u.X)(e,g.shape)}}}}},9041:function(t,e,n){"use strict";n.d(e,{t:function(){return l}});var r=n(29439),a=n(32145),i=n(88473),o=n(75561),s=n(61240),u=n(46918),c=n(36147),l={kernelName:a.qi_,inputsToSave:["x","indices"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),l=a[0],d=a[1],p=n.axis,v=(0,c.EC)(p,l.shape)[0];return{x:function(){var e=l.shape,n=d.size,r=e.slice(0,v),a=r.length,c=e.slice(p,e.length).slice(1),g=c.length,m=h(0,a),y=h(a+1,a+1+g),b=f([r,[n],c]),w=(0,o.X)(t,b),x=(0,o.X)(d,[n]),k=f([[a],m,y]),I=(0,s.p)(w,k),S=(0,u.p)(I,x,l.shape[v]),_=(0,i.LJ)(k);return S=(0,s.p)(S,_)},indices:function(){return d}}}};function h(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function f(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}},54357:function(t,e,n){"use strict";n.d(e,{i:function(){return o}});var r=n(29439),a=n(32145),i=n(87293),o={kernelName:a.Acj,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],o=n[1];return{a:function(){return(0,i.P)(a)},b:function(){return(0,i.P)(o)}}}}},80316:function(t,e,n){"use strict";n.d(e,{w:function(){return i}});var r=n(32145),a=n(99118),i={kernelName:r.iJz,gradFunc:function(t){return{x:function(){return(0,a.p)(t,"float32")}}}}},40940:function(t,e,n){"use strict";n.d(e,{Y:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.avt,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},98916:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.iWB,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},87433:function(t,e,n){"use strict";n.d(e,{W:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.r7n,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},40563:function(t,e,n){"use strict";n.d(e,{e:function(){return o}});var r=n(29439),a=n(32145),i=n(57242),o={kernelName:a.eZ0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),o=a[0],s=a[1],u=n.depthRadius,c=n.bias,l=n.alpha,h=n.beta;return{x:function(){return(0,i.Y)(o,s,t,u,c,l,h)}}}}},76878:function(t,e,n){"use strict";n.d(e,{T:function(){return u}});var r=n(29439),a=n(32145),i=n(35014),o=n(30651),s=n(10329),u={kernelName:a.J$2,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],u=n.alpha,c=(0,i.p)(a,0);return{x:function(){return(0,s.a)(c,t,(0,o.d)(t,u))}}}}},90197:function(t,e,n){"use strict";n.d(e,{P:function(){return s}});var r=n(29439),a=n(32145),i=n(43312),o=n(15750),s={kernelName:a.kU,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.h)(t,(0,i.I)(n,1))}}}}},38398:function(t,e,n){"use strict";n.d(e,{K:function(){return c}});var r=n(29439),a=n(32145),i=n(411),o=n(30651),s=n(84774),u=n(40227),c={kernelName:a.qCd,inputsToSave:[],outputsToSave:[!0],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],c=n.axis;return{logits:function(){var e=(0,i.Q)(a);return(0,s.l)(t,(0,o.d)((0,u.S)(t,c,!0),e))}}}}},97526:function(t,e,n){"use strict";n.d(e,{X:function(){return s}});var r=n(29439),a=n(32145),i=n(99118),o=n(15750),s={kernelName:a.ZbH,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.h)(t,(0,i.p)(n,"float32"))}}}}},46279:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(29439),a=n(32145),i=n(24068),o={kernelName:a.OAf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),o=a[0],s=a[1],u=n.filterSize,c=n.strides,l=n.pad,h=n.dimRoundingMode;return{x:function(){return(0,i.x)(t,o,s,u,c,l,h)}}}}},40190:function(t,e,n){"use strict";n.d(e,{f:function(){return o}});var r=n(29439),a=n(32145),i=n(1266),o={kernelName:a.mTV,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(t,e,n){var a=(0,r.Z)(e,2),o=a[0],s=a[1],u=n.filterSize,c=n.strides,l=n.pad;return{x:function(){return(0,i.z)(t,o,s,u,c,l)}}}}},80763:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(32145),a=n(36147),i=n(74224),o={kernelName:r.YoZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(t,e,n){var r=n.reductionIndices,o=e[0],s=e[1],u=a.EC(r,o.shape),c=(0,i.c)(t,s,o,u);return{x:function(){return c.x()}}}}},17236:function(t,e,n){"use strict";n.d(e,{R:function(){return c}});var r=n(29439),a=n(32145),i=n(99118),o=n(18327),s=n(44920),u=n(30651),c={kernelName:a.BMI,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],c=n[1];return{a:function(){return(0,u.d)(t,(0,i.p)((0,o.b)(a,c),"float32"))},b:function(){return(0,u.d)(t,(0,i.p)((0,s.d)(a,c),"float32"))}}}}},5436:function(t,e,n){"use strict";n.d(e,{m:function(){return h}});var r=n(29439),a=n(32145),i=n(88473),o=n(15750),s=n(30651),u=n(86100),c=n(75561),l=n(36147),h={kernelName:a.q2K,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],h=n.axis,f=l.EC(h,a.shape),d=(0,i.kz)(a.shape,f)[1],p=l.NA(d);return{x:function(){var e=a.shape.slice();f.forEach((function(t){e[t]=1}));var n=(0,c.X)(t,e);return(0,o.h)((0,s.d)(n,(0,u.i)(a.shape,"float32")),p)}}}}},62581:function(t,e,n){"use strict";n.d(e,{j:function(){return s}});var r=n(29439),a=n(32145),i=n(36147),o=n(74224),s={kernelName:a.c17,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(t,e,n){var a=n.axis,s=(0,r.Z)(e,2),u=s[0],c=s[1],l=i.EC(a,u.shape),h=(0,o.c)(t,c,u,l);return{x:function(){return h.x()}}}}},9489:function(t,e,n){"use strict";n.d(e,{c:function(){return c}});var r=n(29439),a=n(32145),i=n(99118),o=n(35014),s=n(12642),u=n(30651),c={kernelName:a.q8u,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],c=n[1];return{a:function(){return(0,u.d)(t,(0,i.p)((0,s.z)(a,c),"float32"))},b:function(){return(0,u.d)(t,(0,i.p)((0,o.p)(a,c),"float32"))}}}}},57678:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(32145),a=n(59238),i={kernelName:r.jQs,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],i=n.paddings.map((function(t){return t[0]}));return{x:function(){return(0,a.t)(t,i,r.shape)}}}}},96836:function(t,e,n){"use strict";n.d(e,{E:function(){return f}});var r=n(29439),a=n(32145),i=n(45774),o=n(15750),s=n(22628),u=n(30651),c=n(4362),l=n(75561),h=n(40227),f={kernelName:a.Vbg,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],f=n[1],d=(0,i.assertAndGetBroadcastShape)(a.shape,f.shape);return{a:function(){var e=(0,i.getReductionAxes)(a.shape,d);return e.length>0?(0,l.X)((0,h.S)(t,e),a.shape):t},b:function(){var e=(0,u.d)(t,(0,c.W)((0,s.G)((0,o.h)(a,f)))),n=(0,i.getReductionAxes)(f.shape,d);return n.length>0?(0,l.X)((0,h.S)(e,n),f.shape):e}}}}},83141:function(t,e,n){"use strict";n.d(e,{q:function(){return l}});var r=n(29439),a=n(32145),i=n(45774),o=n(99118),s=n(30651),u=n(75561),c=n(40227),l={kernelName:a.wYn,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],l=n[1],h=(0,i.assertAndGetBroadcastShape)(a.shape,l.shape);return{a:function(){var e=(0,s.d)(t,(0,o.p)(l,"float32")),n=(0,i.getReductionAxes)(a.shape,h);return n.length>0?(0,u.X)((0,c.S)(e,n),a.shape):e},b:function(){var e=(0,s.d)(t,(0,o.p)(a,"float32")),n=(0,i.getReductionAxes)(l.shape,h);return n.length>0?(0,u.X)((0,c.S)(e,n),l.shape):e}}}}},61135:function(t,e,n){"use strict";n.d(e,{R:function(){return i}});var r=n(32145),a=n(4362),i={kernelName:r.kuV,gradFunc:function(t){return{x:function(){return(0,a.W)(t)}}}}},31159:function(t,e,n){"use strict";n.d(e,{p:function(){return i}});var r=n(32145),a=n(87742),i={kernelName:r.we_,inputsToSave:["indices"],gradFunc:function(t,e){var n=e[0];return{indices:function(){return(0,a.l)(n.shape,"float32")}}}}},53875:function(t,e,n){"use strict";n.d(e,{N:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.qWM,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},60718:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(32145),a=n(54566),i={kernelName:r.QiL,saveAllInputs:!0,gradFunc:function(t,e,n){var r=n.axis;return(0,a.H)(t,r).map((function(t){return function(){return t}}))}}},31373:function(t,e,n){"use strict";n.d(e,{G:function(){return i}});var r=n(32145),a=n(59238),i={kernelName:r.lyA,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],i=n.paddings.map((function(t){return t[0]}));return{x:function(){return(0,a.t)(t,i,r.shape)}}}}},9130:function(t,e,n){"use strict";n.d(e,{i:function(){return m}});var r=n(29439),a=n(32145),i=n(45774),o=n(99118),s=n(35014),u=n(40378),c=n(30651),l=n(44334),h=n(75561),f=n(27067),d=n(84774),p=n(40227),v=n(10329),g=n(87293),m={kernelName:a.pe_,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(t,e){var n=(0,r.Z)(e,3),a=n[0],m=n[1],y=n[2],b=a,w=m,x=i.assertAndGetBroadcastShape(b.shape,w.shape);return{a:function(){var e=(0,o.p)(w,"float32"),n=(0,c.d)(t,(0,c.d)(e,(0,l.s)(b,(0,d.l)(e,(0,f.i)(1))))),r=i.getReductionAxes(b.shape,x);return r.length>0&&(n=(0,p.S)(n,r)),(0,h.X)(n,b.shape)},b:function(){var e=(0,s.p)(b,0),n=(0,v.a)(e,(0,u.c)(b),(0,g.P)(b)),r=(0,c.d)(t,(0,c.d)(y,n)),a=i.getReductionAxes(w.shape,x);return a.length>0&&(r=(0,p.S)(r,a)),(0,h.X)(r,w.shape)}}}}},9349:function(t,e,n){"use strict";n.d(e,{d:function(){return f}});var r=n(29439),a=n(32145),i=n(45774),o=n(35014),s=n(30651),u=n(75561),c=n(40227),l=n(10329),h=n(87293),f={kernelName:a.o0g,inputsToSave:["x","alpha"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],f=n[1],d=(0,o.p)(a,0);return{x:function(){return(0,l.a)(d,t,(0,s.d)(t,f))},alpha:function(){var e=(0,l.a)(d,(0,h.P)(t),(0,s.d)(t,a)),n=(0,i.getReductionAxes)(f.shape,t.shape);return n.length>0&&(e=(0,c.S)(e,n)),(0,u.X)(e,f.shape)}}}}},35691:function(t,e,n){"use strict";n.d(e,{X:function(){return h}});var r=n(29439),a=n(88473),i=n(32145),o=n(69457),s=n(30651),u=n(75561),c=n(61240);function l(t,e,n){var r=t.shape.length,i=r-n.length,l=a.Q3(n,r),h=t;null!=l&&(h=(0,c.p)(t,l));var f=h.shape.slice(),d=f.splice(r-n.length,n.length).reduce((function(t,e){return t*e}),1);f.push(d);var p=function(t,e,n){var r=t.shape.slice();r[n]=1;var a=(0,u.X)(e,r),i=(0,o.$)(t,n,!0,!1),c=(0,o.$)(t,n,!0,!0),l=(0,s.d)(i,c);return(0,s.d)(a,l)}(h.reshape(f),e,i);if(p=p.reshape(h.shape),null!=l){var v=a.LJ(l);p=(0,c.p)(p,v)}return p}var h={kernelName:i.DlI,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],i=n.axis,o=[];return o=void 0===i||null===i?a.shape.map((function(t,e){return e})):"number"===typeof i?[i]:i,{x:function(){return l(a,t,o)}}}}},6107:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(29439),a=n(32145),i=n(45774),o=n(99118),s=n(15750),u=n(30651),c=n(4362),l=n(75561),h=n(7391),f=n(40227),d={kernelName:a.oHH,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],d=n[1],p=i.assertAndGetBroadcastShape(a.shape,d.shape);return{a:function(){var e=(0,s.h)(t,(0,o.p)(d,"float32")),n=i.getReductionAxes(a.shape,p);return n.length>0?(0,l.X)((0,f.S)(e,n),a.shape):e},b:function(){var e=(0,u.d)(t,(0,o.p)(a,"float32")),n=i.getReductionAxes(d.shape,p);n.length>0&&(e=(0,l.X)((0,f.S)(e,n),d.shape));var r=(0,h.h)(d);return(0,c.W)((0,s.h)(e,(0,o.p)(r,"float32")))}}}}},87559:function(t,e,n){"use strict";n.d(e,{a:function(){return u}});var r=n(29439),a=n(32145),i=n(15750),o=n(4362),s=n(7391),u={kernelName:a.$HU,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.h)(t,(0,o.W)((0,s.h)(n)))}}}}},33230:function(t,e,n){"use strict";n.d(e,{d:function(){return c}});var r=n(29439),a=n(32145),i=n(99118),o=n(12642),s=n(30651),u=n(94031),c={kernelName:a.SbG,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0],a=(0,s.d)((0,o.z)(n,6),(0,u.N)(n));return{x:function(){return(0,s.d)(t,(0,i.p)(a,"float32"))}}}}},3760:function(t,e,n){"use strict";n.d(e,{T:function(){return u}});var r=n(29439),a=n(32145),i=n(99118),o=n(30651),s=n(94031),u={kernelName:a.qkr,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.d)(t,(0,i.p)((0,s.N)(n),"float32"))}}}}},89908:function(t,e,n){"use strict";n.d(e,{H:function(){return o}});var r=n(29439),a=n(32145),i=n(75561),o={kernelName:a.HZH,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.X)(t,n.shape)}}}}},8027:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(29439),a=n(50391),i=n(32145),o={kernelName:i._Yw,inputsToSave:["images"],gradFunc:function(t,e,n){var o={dy:t,images:(0,r.Z)(e,1)[0]};return{images:function(){return a.BV.runKernel(i.zbQ,o,n)}}}}},16991:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(29439),a=n(50391),i=n(32145),o={kernelName:i.dpD,inputsToSave:["images"],gradFunc:function(t,e,n){var o={dy:t,images:(0,r.Z)(e,1)[0]};return{images:function(){return a.BV.runKernel(i.Hmb,o,n)}}}}},42903:function(t,e,n){"use strict";n.d(e,{T:function(){return o}});var r=n(32145),a=n(34933),i=n(36147),o={kernelName:r.mKl,gradFunc:function(t,e,n){var r=n.dims,o=(0,i.EC)(r,t.shape);return{x:function(){return(0,a.G)(t,o)}}}}},4154:function(t,e,n){"use strict";n.d(e,{O:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.e07,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},4059:function(t,e,n){"use strict";n.d(e,{C:function(){return c}});var r=n(29439),a=n(32145),i=n(15750),o=n(30651),s=n(4362),u=n(44334),c={kernelName:a.bV0,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,s.W)((0,i.h)(t,(0,o.d)((0,u.s)(n,1.5),2)))}}}}},31986:function(t,e,n){"use strict";n.d(e,{X:function(){return c}});var r=n(29439),a=n(32145),i=n(99118),o=n(30875),s=n(30651),u=n(87293),c={kernelName:a.PhF,inputsToSave:["condition"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{condition:function(){return(0,i.p)((0,u.P)(n),"float32")},t:function(){return(0,s.d)(t,(0,i.p)(n,t.dtype))},e:function(){return(0,s.d)(t,(0,i.p)((0,o.h)(n),t.dtype))}}}}},99189:function(t,e,n){"use strict";n.d(e,{W:function(){return f}});var r=n(29439),a=n(32145),i=n(99118),o=n(411),s=n(35014),u=n(30651),c=n(27067),l=n(20349),h=n(10329),f={kernelName:a.oFR,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){var e=(0,s.p)(n,(0,c.i)(0)),r=(0,c.i)(l.y),a=(0,c.i)(l.$),f=(0,u.d)(t,a),d=(0,u.d)((0,u.d)(t,r),(0,o.Q)((0,i.p)(n,"float32")));return(0,h.a)(e,f,d)}}}}},18393:function(t,e,n){"use strict";n.d(e,{E:function(){return u}});var r=n(29439),a=n(32145),i=n(30651),o=n(27067),s=n(84774),u={kernelName:a.a5O,outputsToSave:[!0],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.d)(t,(0,i.d)(n,(0,s.l)((0,o.i)(1),n)))}}}}},74572:function(t,e,n){"use strict";n.d(e,{Q:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.i5y,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},96766:function(t,e,n){"use strict";n.d(e,{_:function(){return u}});var r=n(29439),a=n(32145),i=n(99118),o=n(21227),s=n(30651),u={kernelName:a.RQH,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,s.d)((0,o.m)((0,i.p)(n,"float32")),t)}}}}},98325:function(t,e,n){"use strict";n.d(e,{m:function(){return u}});var r=n(29439),a=n(32145),i=n(99118),o=n(46679),s=n(30651),u={kernelName:a.wYB,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,s.d)((0,o.f)((0,i.p)(n,"float32")),t)}}}}},31653:function(t,e,n){"use strict";n.d(e,{M:function(){return s}});var r=n(29439),a=n(32145),i=n(71970),o=n(52875),s={kernelName:a.p2w,inputsToSave:["x"],gradFunc:function(t,e,n){for(var a=(0,r.Z)(e,1)[0],s=n.begin,u=n.size,c=a.shape,l=(0,o.parseSliceParams)(a,s,u),h=(0,r.Z)(l,2),f=h[0],d=h[1],p=[],v=0;v<t.rank;v++)p.push([f[v],c[v]-f[v]-d[v]]);return{x:function(){return(0,i.v)(t,p)}}}}},1641:function(t,e,n){"use strict";n.d(e,{J:function(){return u}});var r=n(29439),a=n(32145),i=n(30651),o=n(84774),s=n(40227),u={kernelName:a.Gcp,outputsToSave:[!0],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],u=n.dim,c=(0,i.d)(t,a);return{logits:function(){return(0,o.l)(c,(0,i.d)((0,s.S)(c,[u],true),a))}}}}},28284:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=n(29439),a=n(32145),i=n(30651),o=n(77643),s={kernelName:a.MRv,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.d)(t,(0,o.X)(n))}}}}},73140:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(32145),a=n(36994),i={kernelName:r.TQc,gradFunc:function(t,e,n){var r=n.blockShape,i=n.paddings;return{x:function(){return(0,a.E)(t,r,i)}}}}},86316:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(32145),a=n(34836),i={kernelName:r.L8s,gradFunc:function(t,e,n){var r=n.axis;return{x:function(){return(0,a.z)(t,r)}}}}},88793:function(t,e,n){"use strict";n.d(e,{C:function(){return c}});var r=n(29439),a=n(32145),i=n(99118),o=n(15750),s=n(30651),u=n(46902),c={kernelName:a.FKq,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.h)(t,(0,s.d)((0,u._)((0,i.p)(n,"float32")),2))}}}}},32961:function(t,e,n){"use strict";n.d(e,{t:function(){return s}});var r=n(29439),a=n(32145),i=n(99118),o=n(30651),s={kernelName:a.bK0,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.d)(t,(0,o.d)((0,i.p)(n,"float32"),2))}}}}},49129:function(t,e,n){"use strict";n.d(e,{k:function(){return u}});var r=n(29439),a=n(32145),i=n(30651),o=n(27067),s=n(84774),u={kernelName:a._tC,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],u=n[1],c=(0,o.i)(2);return{a:function(){return(0,i.d)(t,(0,i.d)(c,(0,s.l)(a,u)))},b:function(){return(0,i.d)(t,(0,i.d)(c,(0,s.l)(u,a)))}}}}},98741:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.h8e,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},57865:function(t,e,n){"use strict";n.d(e,{h:function(){return c}});var r=n(29439),a=n(32145),i=n(45774),o=n(4362),s=n(75561),u=n(40227),c={kernelName:a.Tr8,inputsToSave:["a","b"],gradFunc:function(t,e){var n=(0,r.Z)(e,2),a=n[0],c=n[1],l=i.assertAndGetBroadcastShape(a.shape,c.shape);return{a:function(){var e=t,n=i.getReductionAxes(a.shape,l);return n.length>0&&(e=(0,u.S)(e,n)),(0,s.X)(e,a.shape)},b:function(){var e=t,n=i.getReductionAxes(c.shape,l);return n.length>0&&(e=(0,u.S)(e,n)),(0,s.X)((0,o.W)(e),c.shape)}}}}},70583:function(t,e,n){"use strict";n.d(e,{y:function(){return c}});var r=n(29439),a=n(32145),i=n(30651),o=n(86100),s=n(75561),u=n(36147),c={kernelName:a.GBy,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],c=a.shape.slice(),l=n.axis;(0,u.EC)(l,a.shape).forEach((function(t){c[t]=1}));var h=(0,s.X)(t,c),f=(0,i.d)(h,(0,o.i)(a.shape,"float32"));return{x:function(){return f}}}}},91317:function(t,e,n){"use strict";n.d(e,{w:function(){return u}});var r=n(29439),a=n(32145),i=n(21227),o=n(15750),s=n(7391),u={kernelName:a.sEM,inputsToSave:["x"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,o.h)(t,(0,s.h)((0,i.m)(n)))}}}}},17056:function(t,e,n){"use strict";n.d(e,{W:function(){return c}});var r=n(29439),a=n(32145),i=n(30651),o=n(27067),s=n(7391),u=n(84774),c={kernelName:a.MIZ,outputsToSave:[!0],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return(0,i.d)((0,u.l)((0,o.i)(1),(0,s.h)(n)),t)}}}}},88163:function(t,e,n){"use strict";n.d(e,{x:function(){return u}});var r=n(29439),a=n(32145),i=n(43312),o=n(59238),s=n(87293),u={kernelName:a.n9L,inputsToSave:["x"],gradFunc:function(t,e,n){var a=(0,r.Z)(e,1)[0],u=n.reps;return{x:function(){var e=(0,s.P)(a);if(1===a.rank)for(var n=0;n<u[0];++n)e=(0,i.I)(e,(0,o.t)(t,[n*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(var r=0;r<u[0];++r)for(var c=0;c<u[1];++c)e=(0,i.I)(e,(0,o.t)(t,[r*a.shape[0],c*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(var l=0;l<u[0];++l)for(var h=0;h<u[1];++h)for(var f=0;f<u[2];++f)e=(0,i.I)(e,(0,o.t)(t,[l*a.shape[0],h*a.shape[1],f*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(a.rank," tensors yet."));for(var d=0;d<u[0];++d)for(var p=0;p<u[1];++p)for(var v=0;v<u[2];++v)for(var g=0;g<u[3];++g)e=(0,i.I)(e,(0,o.t)(t,[d*a.shape[0],p*a.shape[1],v*a.shape[2],g*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return e}}}}},57217:function(t,e,n){"use strict";n.d(e,{j:function(){return o}});var r=n(32145),a=n(88473),i=n(61240),o={kernelName:r.G3Y,gradFunc:function(t,e,n){var r=n.perm,o=a.LJ(r);return{x:function(){return(0,i.p)(t,o)}}}}},98957:function(t,e,n){"use strict";n.d(e,{T:function(){return i}});var r=n(32145),a=n(18306),i={kernelName:r.ToN,gradFunc:function(t,e,n){var r=n.axis;return{value:function(){return(0,a.k)(t,r)}}}}},89539:function(t,e,n){"use strict";n.d(e,{x:function(){return p}});var r=n(29439),a=n(32145),i=n(72975),o=n(49498),s=n(18327),u=n(2177),c=n(70705),l=n(86100),h=n(27067),f=n(10329),d=n(87293),p={kernelName:a.Qvg,inputsToSave:["segmentIds"],gradFunc:function(t,e){var n=(0,r.Z)(e,1)[0];return{x:function(){return function(t,e){for(var n=(0,c.g)(e,(0,d.P)(e)),r=(0,o.I)(t,n),a=(0,s.b)(e,(0,h.i)(0,"int32")),p=r.rank-a.rank,v=0;v<p;++v)a=(0,i.d)(a,v+1);a=(0,u.H)(a,(0,l.i)(r.shape,"bool"));var g=(0,d.P)(r);return(0,f.a)(a,r,g)}(t,n)}}}}},66971:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});var r=n(32145),a=n(87293),i={kernelName:r.RuY,gradFunc:function(t){return{x:function(){return(0,a.P)(t)}}}}},74224:function(t,e,n){"use strict";n.d(e,{c:function(){return u}});var r=n(88473),a=n(99118),i=n(63254),o=n(30651),s=n(75561);function u(t,e,n,u){return e.rank<n.rank&&(e=(0,s.X)(e,r.rv(e.shape,u))),t.rank<n.rank&&(t=(0,s.X)(t,r.rv(t.shape,u))),{x:function(){return(0,o.d)(t,(0,a.p)((0,i.D)(n,e),t.dtype))}}}},97113:function(t,e,n){"use strict";n.d(e,{E:function(){return i},O:function(){return g}});var r=n(18987),a=n.n(r)()||r;function i(t){return a.fromString(t,!0,16)}var o=i("c3a5c85c97cb3127"),s=i("b492b66fbe98f273"),u=i("9ae16a3b2f90404f");function c(t){return t.xor(t.shru(47))}function l(t,e,n){var r=t.slice(e,e+n);return a.fromBytes(Array.from(r),!0,!0)}function h(t,e){return l(t,e,8)}function f(t,e){return l(t,e,4)}function d(t,e){return 0===e?t:t.shru(e).or(t.shl(64-e))}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i("9ddfea08eb382d69"),r=t.xor(e).mul(n);r=r.xor(r.shru(47));var a=e.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function v(t,e,n,r){return function(t,e,n,r,a,i){a=a.add(t),i=d(i.add(a).add(r),21);var o=a;return a=(a=a.add(e)).add(n),i=i.add(d(a,44)),[a.add(r),i.add(o)]}(h(t,e),h(t,e+8),h(t,e+16),h(t,e+24),n,r)}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,n=a.fromNumber(81,!0);if(e<=32)return e<=16?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;if(e>=8){var n=u.add(2*e),r=h(t,0).add(u),a=h(t,e-8);return p(d(a,37).mul(n).add(r),d(r,25).add(a).mul(n),n)}if(e>=4){var i=u.add(2*e);return p(f(t,0).shl(3).add(e),f(t,e-4),i)}if(e>0){var s=t[0]+(t[e>>1]<<8),l=e+(t[e-1]<<2);return c(u.mul(s).xor(o.mul(l))).mul(u)}return u}(t,e):function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,n=u.add(2*e),r=h(t,0).mul(s),a=h(t,8),i=h(t,e-8).mul(n),o=h(t,e-16).mul(u);return p(d(r.add(a),43).add(d(i,30)).add(o),r.add(d(a.add(u),18)).add(i),n)}(t,e);if(e<=64)return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,n=u.add(2*e),r=h(t,0).mul(u),a=h(t,8),i=h(t,e-8).mul(n),o=h(t,e-16).mul(u),s=d(r.add(a),43).add(d(i,30)).add(o),c=p(s,r.add(d(a.add(u),18)).add(i),n),l=h(t,16).mul(n),f=h(t,24),v=s.add(h(t,e-32)).mul(n),g=c.add(h(t,e-24)).mul(n);return p(d(l.add(f),43).add(d(v,30)).add(g),l.add(d(f.add(r),18)).add(v),n)}(t,e);var r=n,i=n.mul(s).add(113),l=c(i.mul(u).add(113)).mul(u),g=[a.UZERO,a.UZERO],m=[a.UZERO,a.UZERO];r=r.mul(u).add(h(t,0));var y=0,b=64*(e-1>>6),w=b+(e-1&63)-63;do{r=d(r.add(i).add(g[0]).add(h(t,y+8)),37).mul(s),i=d(i.add(g[1]).add(h(t,y+48)),42).mul(s),r=r.xor(m[1]),i=i.add(g[0]).add(h(t,y+40)),l=d(l.add(m[0]),33).mul(s),g=v(t,y,g[1].mul(s),r.add(m[0])),m=v(t,y+32,l.add(m[1]),i.add(h(t,y+16)));var x=[r,l];l=x[0],r=x[1],y+=64}while(y!==b);var k=s.add(l.and(255).shl(1));y=w,m[0]=m[0].add(e-1&63),g[0]=g[0].add(m[0]),m[0]=m[0].add(g[0]),r=d(r.add(i).add(g[0]).add(h(t,y+8)),37).mul(k),i=d(i.add(g[1]).add(h(t,y+48)),42).mul(k),r=r.xor(m[1].mul(9)),i=i.add(g[0].mul(9).add(h(t,y+40))),l=d(l.add(m[0]),33).mul(k),g=v(t,y,g[1].mul(k),r.add(m[0])),m=v(t,y+32,l.add(m[1]),i.add(h(t,y+16)));var I=[r,l];return l=I[0],r=I[1],p(p(g[0],m[0],k).add(c(i).mul(o)).add(l),p(g[1],m[1],k).add(r),k)}},1326:function(t,e,n){"use strict";n.d(e,{IU:function(){return v}});var r=n(93433),a=n(37762),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=(n(69126),n(35050)),l=n(41434),h=n(75370);function f(t){return new Promise((function(t){return setTimeout(t)})).then(t)}var d=function(){function t(e){if((0,s.Z)(this,t),!(0,c.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}return(0,u.Z)(t,[{key:"save",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var n,r,a,o,s,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof document){t.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer)){t.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=(0,l.Yd)(e,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(s=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,s.href=o,t.next=15,f((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==e.weightData){t.next=21;break}return(u=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=n,t.next=21,f((function(){return u.dispatchEvent(new MouseEvent("click"))}));case 21:return t.abrupt("return",{modelArtifactsInfo:(0,l.Q)(e)});case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();d.URL_SCHEME="downloads://";var p=function(){function t(e){if((0,s.Z)(this,t),null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}return(0,u.Z)(t,[{key:"load",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var e=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==e.weightsFiles.length){var o=(0,l.jN)(a,(function(t){return e.loadWeights(t)}));t(o)}else t({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(e.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(e.jsonFile.name)))},r.onerror=function(t){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(e.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(e.jsonFile)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"loadWeights",value:function(t){var e,n=this,i=[],o=[],s=(0,a.Z)(t);try{for(s.s();!(e=s.n()).done;){var u=e.value;i.push.apply(i,(0,r.Z)(u.weights)),o.push.apply(o,(0,r.Z)(u.paths))}}catch(f){s.e(f)}finally{s.f()}var c=this.checkManifestAndWeightFiles(t),h=o.map((function(t){return n.loadWeightsFile(t,c[t])}));return Promise.all(h).then((function(t){return[i,(0,l.JY)(t)]}))}},{key:"loadWeightsFile",value:function(t,e){return new Promise((function(n,r){var a=new FileReader;a.onload=function(t){var e=t.target.result;n(e)},a.onerror=function(e){return r("Failed to weights data from file of path '".concat(t,"'."))},a.readAsArrayBuffer(e)}))}},{key:"checkManifestAndWeightFiles",value:function(t){var e,n=this,r=[],i=this.weightsFiles.map((function(t){return(0,l.EZ)(t.name)})),o={},s=(0,a.Z)(t);try{for(s.s();!(e=s.n()).done;){e.value.paths.forEach((function(t){var e=(0,l.EZ)(t);if(-1!==r.indexOf(e))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(e,"'"));if(r.push(e),-1===i.indexOf(e))throw new Error("Weight file with basename '".concat(e,"' is not provided."));o[t]=n.weightsFiles[i.indexOf(e)]}))}}catch(u){s.e(u)}finally{s.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),t}();function v(t){return new p(t)}h.U3.registerSaveRouter((function(t){return(0,c.OB)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(d.URL_SCHEME)?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new d(t)}(t.slice(d.URL_SCHEME.length)):null}))},35992:function(t,e,n){"use strict";n.d(e,{MP:function(){return w},dJ:function(){return b},g3:function(){return m}});var r=n(93433),a=n(37762),i=n(29439),o=n(74165),s=n(15861),u=n(15671),c=n(43144),l=n(35050),h=n(36147),f=n(41434),d=n(75370),p=n(11280),v=function(){function t(e,n){if((0,u.Z)(this,t),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?((0,h.hu)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=(0,l.OB)().platform.fetch,(0,h.hu)(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&(0,h.hu)(2===e.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")})),this.path=e,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,c.Z)(t,[{key:"save",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var n,r,a,i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.modelTopology instanceof ArrayBuffer)){t.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=(0,f.Yd)(e,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=e.weightData&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),t.next=10,this.fetch(this.path,n);case 10:if(!(i=t.sent).ok){t.next=15;break}return t.abrupt("return",{modelArtifactsInfo:(0,f.Q)(e),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,r,a,i,s=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(this.path,this.requestInit);case 2:if((e=t.sent).ok){t.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return t.prev=5,t.next=8,e.json();case 8:n=t.sent,t.next=16;break;case 11:throw t.prev=11,t.t0=t.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){t.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return t.abrupt("return",(0,f.jN)(n,(function(t){return s.loadWeights(t)})));case 21:case"end":return t.stop()}}),t,this,[[5,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var n,s,u,c,l,h,d,v,m,y,b,w,x,k,I,S;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,s=g(n),u=(0,i.Z)(s,2),c=u[0],l=u[1],h=this.weightPathPrefix||c,d=(0,f.hu)(e),v=[],m=[],y=(0,a.Z)(e);try{for(y.s();!(b=y.n()).done;){w=b.value,x=(0,a.Z)(w.paths);try{for(x.s();!(k=x.n()).done;)I=k.value,null!=this.weightUrlConverter?m.push(this.weightUrlConverter(I)):v.push(h+I+l)}catch(o){x.e(o)}finally{x.f()}}}catch(o){y.e(o)}finally{y.f()}if(!this.weightUrlConverter){t.next=17;break}return t.t0=v.push,t.t1=v,t.t2=r.Z,t.next=14,Promise.all(m);case 14:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4);case 17:return t.next=19,(0,p.aV)(v,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return S=t.sent,t.abrupt("return",[d,(0,f.JY)(S)]);case 21:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function g(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}function m(t){return null!=t.match(v.URL_SCHEME_REGEX)}v.URL_SCHEME_REGEX=/^https?:\/\//;var y=function(t,e){if("undefined"===typeof fetch&&(null==e||null==e.fetchFunc))return null;return(Array.isArray(t)?t.every((function(t){return m(t)})):m(t))?b(t,e):null};function b(t,e){return new v(t,e)}function w(t,e){return b(t,e)}d.U3.registerSaveRouter(y),d.U3.registerLoadRouter(y)},22179:function(t,e,n){"use strict";n.d(e,{ns:function(){return g},y$:function(){return y}});var r=n(37762),a=n(74165),i=n(15671),o=n(43144),s=n(15861),u=(n(69126),n(35050)),c=n(41434),l=n(75370),h="tensorflowjs",f="models_store",d="model_info_store";function p(){if(!(0,u.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t="undefined"===typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function v(t){var e=t.result;e.createObjectStore(f,{keyPath:"modelPath"}),e.createObjectStore(d,{keyPath:"modelPath"})}var g=function(){function t(e){if((0,i.Z)(this,t),this.indexedDB=p(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return(0,o.Z)(t,[{key:"save",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.modelTopology instanceof ArrayBuffer)){t.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return t.abrupt("return",this.databaseAction(this.modelPath,e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"databaseAction",value:function(t,e){var n=this;return new Promise((function(t,r){var a=n.indexedDB.open(h,1);a.onupgradeneeded=function(){return v(a)},a.onsuccess=function(){var i=a.result;if(null==e){var o=i.transaction(f,"readonly"),s=o.objectStore(f).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=(0,c.Q)(e),h=i.transaction(d,"readwrite"),p=h.objectStore(d),v=p.put({modelPath:n.modelPath,modelArtifactsInfo:l});v.onsuccess=function(){var a=(u=i.transaction(f,"readwrite")).objectStore(f).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:l});a.onsuccess=function(){return t({modelArtifactsInfo:l})},a.onerror=function(t){var e=(p=h.objectStore(d)).delete(n.modelPath);e.onsuccess=function(){return i.close(),r(a.error)},e.onerror=function(t){return i.close(),r(a.error)}}},v.onerror=function(t){return i.close(),r(v.error)},h.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(t){return r(a.error)}}))}}]),t}();g.URL_SCHEME="indexeddb://";var m=function(t){return(0,u.OB)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(g.URL_SCHEME)?(e=t.slice(g.URL_SCHEME.length),new g(e)):null;var e};l.U3.registerSaveRouter(m),l.U3.registerLoadRouter(m);var y=function(){function t(){(0,i.Z)(this,t),this.indexedDB=p()}return(0,o.Z)(t,[{key:"listModels",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var e=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var a=e.indexedDB.open(h,1);a.onupgradeneeded=function(){return v(a)},a.onsuccess=function(){var e=a.result,i=e.transaction(d,"readonly"),o=i.objectStore(d).getAll();o.onsuccess=function(){var e,n={},a=(0,r.Z)(o.result);try{for(a.s();!(e=a.n()).done;){var i=e.value;n[i.modelPath]=i.modelArtifactsInfo}}catch(s){a.e(s)}finally{a.f()}t(n)},o.onerror=function(t){return e.close(),n(o.error)},i.oncomplete=function(){return e.close()}},a.onerror=function(t){return n(a.error)}})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"removeModel",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(e){var n=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(r=e).startsWith(g.URL_SCHEME)?r.slice(g.URL_SCHEME.length):r,t.abrupt("return",new Promise((function(t,r){var a=n.indexedDB.open(h,1);a.onupgradeneeded=function(){return v(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(d,"readwrite"),s=o.objectStore(d),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));var a=s.delete(e),o=function(){var a=(n=i.transaction(f,"readwrite")).objectStore(f).delete(e);a.onsuccess=function(){return t(u.result.modelArtifactsInfo)},a.onerror=function(t){return r(u.error)}};a.onsuccess=o,a.onerror=function(t){return o(),i.close(),r(u.error)}},u.onerror=function(t){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(t){return r(a.error)}})));case 2:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}()},27153:function(t,e,n){"use strict";n.r(e),n.d(e,{browserFiles:function(){return r.IU},browserHTTPRequest:function(){return a.MP},concatenateArrayBuffers:function(){return i.JY},copyModel:function(){return c.ID},decodeWeights:function(){return i.dI},encodeWeights:function(){return i.yz},fromMemory:function(){return o.nR},fromMemorySync:function(){return o.f2},getLoadHandlers:function(){return s.rM},getModelArtifactsForJSON:function(){return i.jN},getModelArtifactsForJSONSync:function(){return i.ji},getModelArtifactsInfoForJSON:function(){return i.Q},getSaveHandlers:function(){return s.yB},getWeightSpecs:function(){return i.hu},http:function(){return a.dJ},isHTTPScheme:function(){return a.g3},listModels:function(){return c.h1},loadWeights:function(){return u.Pl},moveModel:function(){return c.Ny},registerLoadRouter:function(){return s.pS},registerSaveRouter:function(){return s.tf},removeModel:function(){return c.gw},weightsLoaderFactory:function(){return u.T4},withSaveHandler:function(){return o.uX},withSaveHandlerSync:function(){return o.zv}});n(22179),n(30541);var r=n(1326),a=n(35992),i=n(41434),o=n(62976),s=n(75370),u=n(11280),c=n(64973)},41434:function(t,e,n){"use strict";n.d(e,{EZ:function(){return k},JY:function(){return x},Q:function(){return E},Yd:function(){return I},_n:function(){return b},dI:function(){return v},hu:function(){return A},jN:function(){return _},ji:function(){return S},n7:function(){return w},yz:function(){return d}});var r=n(29439),a=n(74165),i=n(93433),o=n(37762),s=n(15861),u=n(59253),c=n(72442),l=n(36147),h=n(41988),f=4;function d(t,e){return p.apply(this,arguments)}function p(){return p=(0,s.Z)((0,a.Z)().mark((function t(e,n){var r,i,o,u,c,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],i=[],o=Array.isArray(e)?e.map((function(t){return t.name})):Object.keys(e),u=(0,a.Z)().mark((function t(){var u,l,h,d;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o[c],"float32"===(l=Array.isArray(e)?e[c].tensor:e[u]).dtype||"int32"===l.dtype||"bool"===l.dtype||"string"===l.dtype||"complex64"===l.dtype){t.next=4;break}throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l.dtype));case 4:h={name:u,shape:l.shape,dtype:l.dtype},"string"===l.dtype?(d=new Promise(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(e){var n,r,i,o,s,u,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.bytes();case 2:for(n=t.sent,r=n.reduce((function(t,e){return t+e.length}),0)+f*n.length,i=new Uint8Array(r),o=0,s=0;s<n.length;s++)u=n[s],c=new Uint8Array(new Uint32Array([u.length]).buffer),i.set(c,o),o+=f,i.set(u,o),o+=u.length;e(i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.push(d)):i.push(l.data()),null!=n&&(h.group=n),r.push(h);case 8:case"end":return t.stop()}}),t)})),c=0;case 5:if(!(c<o.length)){t.next=10;break}return t.delegateYield(u(),"t0",7);case 7:++c,t.next=5;break;case 10:return t.next=12,Promise.all(i);case 12:return l=t.sent,t.abrupt("return",{data:g(l),specs:r});case 14:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function v(t,e){var n,r,a={},i=0,s=(0,o.Z)(e);try{for(s.s();!(r=s.n()).done;){var d=r.value,p=d.name,v=d.dtype,g=d.shape,m=(0,l.NA)(g),y=void 0;if("quantization"in d){var b=d.quantization;if("uint8"===b.dtype||"uint16"===b.dtype){if(!("min"in b)||!("scale"in b))throw new Error("Weight ".concat(d.name," with quantization ").concat(b.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==b.dtype)throw new Error("Weight ".concat(d.name," has unknown ")+"quantization dtype ".concat(b.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==v)throw new Error("Weight ".concat(d.name," is quantized with ").concat(b.dtype," ")+"which only supports weights of type float32 not ".concat(v,"."))}var w=h.J[b.dtype],x=t.slice(i,i+m*w),k="uint8"===b.dtype?new Uint8Array(x):new Uint16Array(x);if("float32"===v)if("uint8"===b.dtype||"uint16"===b.dtype){y=new Float32Array(k.length);for(var I=0;I<k.length;I++){var S=k[I];y[I]=S*b.scale+b.min}}else{if("float16"!==b.dtype)throw new Error("Unsupported quantization type ".concat(b.dtype," ")+"for weight type float32.");void 0===n&&(n=T()),y=n(k)}else{if("int32"!==v)throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(v));if("uint8"!==b.dtype&&"uint16"!==b.dtype)throw new Error("Unsupported quantization type ".concat(b.dtype," ")+"for weight type int32.");y=new Int32Array(k.length);for(var _=0;_<k.length;_++){var C=k[_];y[_]=Math.round(C*b.scale+b.min)}}i+=m*w}else if("string"===v){var E=(0,l.NA)(d.shape);y=[];for(var A=0;A<E;A++){var N=new Uint32Array(t.slice(i,i+f))[0];i+=f;var D=new Uint8Array(t.slice(i,i+N));y.push(D),i+=N}}else{var R=h.J[v],Z=t.slice(i,i+m*R);if("float32"===v)y=new Float32Array(Z);else if("int32"===v)y=new Int32Array(Z);else if("bool"===v)y=new Uint8Array(Z);else{if("complex64"!==v)throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(v));y=new Float32Array(Z);for(var M=new Float32Array(y.length/2),F=new Float32Array(y.length/2),O=0;O<M.length;O++)M[O]=y[2*O],F[O]=y[2*O+1];var B=(0,c.X)(M,g,"float32"),L=(0,c.X)(F,g,"float32");a[p]=(0,u.P)(B,L),B.dispose(),L.dispose()}i+=m*R}"complex64"!==v&&(a[p]=(0,c.X)(y,g,v))}}catch(P){s.e(P)}finally{s.f()}return a}function g(t){if(null===t)throw new Error("Invalid input value: ".concat(JSON.stringify(t)));var e=0,n=[];t.forEach((function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(t.constructor.name))}));var r=new Uint8Array(e),a=0;return n.forEach((function(t){r.set(new Uint8Array(t.buffer),a),a+=t.byteLength})),r.buffer}var m="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function y(t){return m?Buffer.byteLength(t):new Blob([t]).size}function b(t){if(m)return Buffer.from(t).toString("base64");for(var e=new Uint8Array(t),n="",r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function w(t){if(m){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function x(t){if(1===t.length)return t[0];var e=0;t.forEach((function(t){e+=t.byteLength}));var n=new Uint8Array(e),r=0;return t.forEach((function(t){n.set(new Uint8Array(t),r),r+=t.byteLength})),n.buffer}function k(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function I(t,e){var n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(n.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}function S(t,e,n){var r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(r.initializerSignature=t.initializerSignature),r}function _(t,e){return C.apply(this,arguments)}function C(){return(C=(0,s.Z)((0,a.Z)().mark((function t(e,n){var i,o,s,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.weightsManifest){t.next=7;break}return t.next=3,n(e.weightsManifest);case 3:s=t.sent,u=(0,r.Z)(s,2),i=u[0],o=u[1];case 7:return t.abrupt("return",S(e,i,o));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:y(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:y(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function A(t){var e,n=[],r=(0,o.Z)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push.apply(n,(0,i.Z)(a.weights))}}catch(s){r.e(s)}finally{r.f()}return n}function T(){var t=function(){var t=function(t){for(var e=t<<13,n=0;0===(8388608&e);)n-=8388608,e<<=1;return(e&=-8388609)|n+947912704},e=new Uint32Array(2048);e[0]=0;for(var n=1;n<1024;n++)e[n]=t(n);for(var r=1024;r<2048;r++)e[r]=939524096+(r-1024<<13);return e}(),e=function(){var t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(var e=1;e<31;e++)t[e]=e<<23;for(var n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}(),n=function(){for(var t=new Uint32Array(64),e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=t[n[s>>10]+(1023&s)]+e[s>>10];i[o]=u}return new Float32Array(a)}}},30541:function(t,e,n){"use strict";n.d(e,{Ew:function(){return x},JL:function(){return I}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=(n(69126),n(35050)),u=n(36147),c=n(41434),l=n(75370),h="/",f="tensorflowjs_models",d="info",p="model_topology",v="weight_specs",g="weight_data",m="model_metadata";function y(t){return{info:[f,t,d].join(h),topology:[f,t,p].join(h),weightSpecs:[f,t,v].join(h),weightData:[f,t,g].join(h),modelMetadata:[f,t,m].join(h)}}function b(t){for(var e=0,n=Object.values(t);e<n.length;e++){var r=n[e];window.localStorage.removeItem(r)}}function w(t){var e=t.split(h);if(e.length<3)throw new Error("Invalid key format: ".concat(t));return e.slice(1,e.length-1).join(h)}var x=function(){function t(e){if((0,i.Z)(this,t),!(0,s.OB)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=y(this.modelPath)}return(0,o.Z)(t,[{key:"save",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,i,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.modelTopology instanceof ArrayBuffer)){t.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(e.modelTopology),a=JSON.stringify(e.weightSpecs),i=(0,c.Q)(e),t.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,a),this.LS.setItem(this.keys.weightData,(0,c._n)(e.weightData)),o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),t.abrupt("return",{modelArtifactsInfo:i});case 17:throw t.prev=17,t.t0=t.catch(7),b(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(i.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(i.weightSpecsBytes,", ")+"weightDataBytes=".concat(i.weightDataBytes,"."));case 21:case"end":return t.stop()}}),t,this,[[7,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e,n,a,i,o,s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(e=JSON.parse(this.LS.getItem(this.keys.info)))){t.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===e.modelTopologyType){t.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(a=JSON.parse(this.LS.getItem(this.keys.topology)))){t.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=a,null!=(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){t.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=i,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(o),n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,null!=s.signature&&(n.signature=s.signature),null!=s.userDefinedMetadata&&(n.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(n.modelInitializer=s.modelInitializer),null!=s.initializerSignature&&(n.initializerSignature=s.initializerSignature),null!=s.trainingConfig&&(n.trainingConfig=s.trainingConfig)),null!=(u=this.LS.getItem(this.keys.weightData))){t.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=(0,c.n7)(u),t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();x.URL_SCHEME="localstorage://";var k=function(t){return(0,s.OB)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(x.URL_SCHEME)?(e=t.slice(x.URL_SCHEME.length),new x(e)):null;var e};l.U3.registerSaveRouter(k),l.U3.registerLoadRouter(k);var I=function(){function t(){(0,i.Z)(this,t),(0,u.hu)((0,s.OB)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),(0,u.hu)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,o.Z)(t,[{key:"listModels",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e,n,a,i,o,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e={},n=f+h,a=h+d,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(n)&&o.endsWith(a)&&(s=w(o),e[s]=JSON.parse(this.LS.getItem(o)));return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"removeModel",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(r=e).startsWith(x.URL_SCHEME)?r.slice(x.URL_SCHEME.length):r,n=y(e),null!=this.LS.getItem(n.info)){t.next=4;break}throw new Error("Cannot find model at path '".concat(e,"'"));case 4:return a=JSON.parse(this.LS.getItem(n.info)),b(n),t.abrupt("return",a);case 7:case"end":return t.stop()}var r}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}()},64973:function(t,e,n){"use strict";n.d(e,{ID:function(){return b},Ny:function(){return x},gw:function(){return m},h1:function(){return v},xQ:function(){return h}});var r=n(37762),a=n(74165),i=n(15861),o=n(15671),s=n(43144),u=n(36147),c=n(75370),l="://",h=function(){function t(){(0,o.Z)(this,t),this.managers={}}return(0,s.Z)(t,null,[{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"registerManager",value:function(e,n){(0,u.hu)(null!=e,(function(){return"scheme must not be undefined or null."})),e.endsWith(l)&&(e=e.slice(0,e.indexOf(l))),(0,u.hu)(e.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();(0,u.hu)(null==r.managers[e],(function(){return"A model store manager is already registered for scheme '".concat(e,"'.")})),r.managers[e]=n}},{key:"getManager",value:function(e){var n=t.getInstance().managers[e];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(t.getInstance().managers)}}]),t}();function f(t){if(-1===t.indexOf(l))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(h.getSchemes().join(",")));return{scheme:t.split(l)[0],path:t.split(l)[1]}}function d(t,e){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((0,a.Z)().mark((function t(e,n){var r,i,o,s,l,d,p,v,g,m,y=arguments;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=y.length>2&&void 0!==y[2]&&y[2],(0,u.hu)(e!==n,(function(){return"Old path and new path are the same: '".concat(e,"'")})),i=c.U3.getLoadHandlers(e),(0,u.hu)(i.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(e,".")})),(0,u.hu)(i.length<2,(function(){return"Copying failed because more than one (".concat(i.length,") ")+"load handlers for source URL ".concat(e,".")})),o=i[0],s=c.U3.getSaveHandlers(n),(0,u.hu)(s.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),(0,u.hu)(s.length<2,(function(){return"Copying failed because more than one (".concat(i.length,") ")+"save handlers for destination URL ".concat(n,".")})),l=s[0],d=f(e).scheme,p=f(e).path,v=d===f(e).scheme,t.next=15,o.load();case 15:if(g=t.sent,!r||!v){t.next=19;break}return t.next=19,h.getManager(d).removeModel(p);case 19:return t.next=21,l.save(g);case 21:if(m=t.sent,!r||v){t.next=25;break}return t.next=25,h.getManager(d).removeModel(p);case 25:return t.abrupt("return",m.modelArtifactsInfo);case 26:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=(0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,o,s,u,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=h.getSchemes(),n={},i=(0,r.Z)(e),t.prev=3,i.s();case 5:if((o=i.n()).done){t.next=13;break}return s=o.value,t.next=9,h.getManager(s).listModels();case 9:for(c in u=t.sent)n[s+l+c]=u[c];case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",n);case 22:case"end":return t.stop()}}),t,null,[[3,15,18,21]])})))).apply(this,arguments)}function m(t){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)((0,a.Z)().mark((function t(e){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f(e),r=h.getManager(n.scheme),t.abrupt("return",r.removeModel(n.path));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,e){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)((0,a.Z)().mark((function t(e,n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!1,t.abrupt("return",d(e,n,false));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t,e){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((0,a.Z)().mark((function t(e,n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!0,t.abrupt("return",d(e,n,true));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},62976:function(t,e,n){"use strict";n.d(e,{f2:function(){return l},nR:function(){return c},uX:function(){return h},zv:function(){return f}});var r=n(93433),a=n(15671),i=n(43144),o=function(){function t(e){(0,a.Z)(this,t),this.modelArtifacts=e}return(0,i.Z)(t,[{key:"load",value:function(){return this.modelArtifacts}}]),t}(),s=function(){function t(e){(0,a.Z)(this,t),this.saveHandler=e}return(0,i.Z)(t,[{key:"save",value:function(t){return this.saveHandler(t)}}]),t}(),u=(0,i.Z)((function t(e){(0,a.Z)(this,t),e.load&&(this.load=function(){return Promise.resolve(e.load())}),e.save&&(this.save=function(t){return Promise.resolve(e.save(t))})}));function c(t,e,n,a){var i=arguments;return new u(l.apply(void 0,(0,r.Z)(i)))}function l(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new o(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new o({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new o({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function h(t){return new s(t)}function f(t){return new s(t)}},21796:function(t,e,n){"use strict";n.d(e,{b:function(){return a}});var r=n(36147);function a(t,e,n,a){!function(t){(0,r.hu)(null!=t&&Array.isArray(t)&&t.length>0,(function(){return"promises must be a none empty array"}))}(t),function(t,e){(0,r.hu)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(t)})),(0,r.hu)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(e)})),(0,r.hu)(e>=t,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(t," and endFraction ")+"".concat(e)}))}(n=null==n?0:n,a=null==a?1:a);var i=0;return Promise.all(t.map((function(r){return r.then((function(r){var o=n+ ++i/t.length*(a-n);return e(o),r})),r})))}},75370:function(t,e,n){"use strict";n.d(e,{U3:function(){return i},pS:function(){return s},rM:function(){return c},tf:function(){return o},yB:function(){return u}});var r=n(15671),a=n(43144),i=function(){function t(){(0,r.Z)(this,t),this.saveRouters=[],this.loadRouters=[]}return(0,a.Z)(t,null,[{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"registerSaveRouter",value:function(e){t.getInstance().saveRouters.push(e)}},{key:"registerLoadRouter",value:function(e){t.getInstance().loadRouters.push(e)}},{key:"getSaveHandlers",value:function(e){return t.getHandlers(e,"save")}},{key:"getLoadHandlers",value:function(e,n){return t.getHandlers(e,"load",n)}},{key:"getHandlers",value:function(e,n,r){var a=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(t){var n=t(e,r);null!==n&&a.push(n)})),a}}]),t}(),o=function(t){return i.registerSaveRouter(t)},s=function(t){return i.registerLoadRouter(t)},u=function(t){return i.getSaveHandlers(t)},c=function(t,e){return i.getLoadHandlers(t,e)}},41988:function(t,e,n){"use strict";n.d(e,{J:function(){return r}});var r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},11280:function(t,e,n){"use strict";n.d(e,{Pl:function(){return f},T4:function(){return p},aV:function(){return l}});var r=n(74165),a=n(15861),i=n(35050),o=n(36147),s=n(41434),u=n(21796),c=n(41988);function l(t,e){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,r.Z)().mark((function t(e,n){var a,o,s,c,l,h,f,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n&&(n={}),a=null==n.fetchFunc?(0,i.OB)().platform.fetch:n.fetchFunc,o=e.map((function(t){return a(t,n.requestInit,{isBinary:!0})})),s=0,c=.5,null!=n.onProgress){t.next=11;break}return t.next=8,Promise.all(o);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,(0,u.b)(o,n.onProgress,s,c);case 13:t.t0=t.sent;case 14:if(l=t.t0,h=l.map((function(t){return t.arrayBuffer()})),f=.5,d=1,null!=n.onProgress){t.next=24;break}return t.next=21,Promise.all(h);case 21:t.t1=t.sent,t.next=27;break;case 24:return t.next=26,(0,u.b)(h,n.onProgress,f,d);case 26:t.t1=t.sent;case 27:return p=t.t1,t.abrupt("return",p);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return d.apply(this,arguments)}function d(){return d=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,i,o,s=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"",a=s.length>2?s[2]:void 0,i=s.length>3?s[3]:void 0,o=p((function(t){return l(t,{requestInit:i})})),t.abrupt("return",o(e,n,a));case 6:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function p(t){return function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,i,u,l,h,f,d,p,v,g,m,y,b=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>1&&void 0!==b[1]?b[1]:"",i=b.length>2?b[2]:void 0,u=n.map((function(){return!1})),l={},h=null!=i?i.map((function(){return!1})):[],f=[],n.forEach((function(t,e){var n=0;t.weights.forEach((function(t){var r="quantization"in t?t.quantization.dtype:t.dtype,a=c.J[r]*o.NA(t.shape),s=function(){u[e]=!0,null==l[e]&&(l[e]=[]),l[e].push({manifestEntry:t,groupOffset:n,sizeBytes:a})};null!=i?i.forEach((function(e,n){e===t.name&&(s(),h[n]=!0)})):s(),f.push(t.name),n+=a}))})),h.every((function(t){return t}))){e.next=10;break}throw d=i.filter((function(t,e){return!h[e]})),new Error("Could not find weights in manifest with names: "+"".concat(d.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(f.join(", "),"."));case 10:return p=u.reduce((function(t,e,n){return e&&t.push(n),t}),[]),v=[],p.forEach((function(t){n[t].paths.forEach((function(t){var e=a+(a.endsWith("/")?"":"/")+t;v.push(e)}))})),e.next=15,t(v);case 15:return g=e.sent,m={},y=0,p.forEach((function(t){for(var e=n[t].paths.length,r=0,a=0;a<e;a++)r+=g[y+a].byteLength;for(var i=new ArrayBuffer(r),o=new Uint8Array(i),u=0,c=0;c<e;c++){var h=new Uint8Array(g[y+c]);o.set(h,u),u+=h.byteLength}l[t].forEach((function(t){var e=i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=(0,s.dI)(e,[t.manifestEntry]);for(var r in n)m[r]=n[r]})),y+=e})),e.abrupt("return",m);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},32145:function(t,e,n){"use strict";n.d(e,{$HU:function(){return fe},$g6:function(){return $},$w:function(){return q},Acj:function(){return gt},BMI:function(){return Ot},BiW:function(){return ce},Byc:function(){return U},CAk:function(){return _t},CQl:function(){return ue},D2d:function(){return We},DlI:function(){return oe},Eh3:function(){return D},FKq:function(){return Ze},G3Y:function(){return en},GBy:function(){return Me},Gcp:function(){return Be},HEU:function(){return et},HZH:function(){return pe},Hhh:function(){return Mt},Hmb:function(){return ge},IKK:function(){return c},IMb:function(){return w},J$2:function(){return It},J_u:function(){return bt},JhU:function(){return m},L8s:function(){return Oe},Ly9:function(){return S},M2y:function(){return f},MIZ:function(){return Qe},MRv:function(){return Re},MZg:function(){return Dt},NEP:function(){return at},NZg:function(){return Xt},O3z:function(){return Le},OAf:function(){return Pt},OR:function(){return lt},OU7:function(){return Ut},OV7:function(){return Lt},Omj:function(){return nt},Oyi:function(){return v},PYm:function(){return Tt},PhF:function(){return _e},QCc:function(){return g},QRR:function(){return V},Qg5:function(){return yt},QiL:function(){return ne},Qvg:function(){return an},RFZ:function(){return C},ROF:function(){return y},RQH:function(){return Ae},RuY:function(){return on},SX0:function(){return tt},SYM:function(){return r},SbG:function(){return be},SpW:function(){return i},T0n:function(){return G},TQc:function(){return Fe},TR1:function(){return P},ToN:function(){return rn},Tr8:function(){return Ye},Uyb:function(){return ct},VGw:function(){return a},Vbg:function(){return Ht},VcC:function(){return W},VfG:function(){return Nt},Vn9:function(){return Q},W0H:function(){return $t},XLW:function(){return x},XkS:function(){return qe},Xze:function(){return s},Y0y:function(){return ot},YFo:function(){return it},YoZ:function(){return Ft},ZbH:function(){return Et},ZjV:function(){return ze},Zz9:function(){return T},_JP:function(){return He},_V0:function(){return hn},_Yw:function(){return me},_k9:function(){return b},_tC:function(){return Ve},a5O:function(){return De},aJk:function(){return h},avt:function(){return wt},b9H:function(){return cn},bK0:function(){return Ge},bV0:function(){return ke},c17:function(){return Vt},cWu:function(){return $e},cie:function(){return j},cye:function(){return Jt},dDz:function(){return se},deh:function(){return ut},dpD:function(){return ve},e07:function(){return xe},e6w:function(){return le},e7N:function(){return Ct},eBW:function(){return un},eEB:function(){return _},eZ0:function(){return Zt},ekb:function(){return K},gJX:function(){return E},h8e:function(){return sn},hdR:function(){return rt},i5y:function(){return Ne},iHb:function(){return z},iJz:function(){return mt},iWB:function(){return xt},iZT:function(){return vt},ik2:function(){return B},jMg:function(){return p},jQk:function(){return je},jQs:function(){return jt},jeX:function(){return ht},kU:function(){return At},kpP:function(){return nn},kuV:function(){return Yt},luS:function(){return fn},lyA:function(){return re},mKl:function(){return we},mTV:function(){return Bt},mc4:function(){return L},mhS:function(){return R},mm_:function(){return o},n9L:function(){return Je},nhH:function(){return Pe},nr8:function(){return Se},o0g:function(){return ie},o2y:function(){return O},oFR:function(){return Ce},oHH:function(){return J},oT6:function(){return u},p2w:function(){return Ee},p4S:function(){return Y},pe_:function(){return ae},q1x:function(){return pt},q2K:function(){return Wt},q8u:function(){return Gt},qCd:function(){return Rt},qWM:function(){return te},qi_:function(){return dt},qkr:function(){return de},qw7:function(){return d},r7n:function(){return kt},s1s:function(){return Xe},sEM:function(){return Ke},sHE:function(){return ft},sJF:function(){return l},sL$:function(){return H},usg:function(){return ln},uv1:function(){return Qt},vFR:function(){return zt},vtC:function(){return St},vwp:function(){return st},w3H:function(){return Ue},wUP:function(){return Z},wYB:function(){return Te},wYn:function(){return qt},we_:function(){return ee},wm:function(){return M},wx7:function(){return tn},x12:function(){return F},xJR:function(){return he},xQA:function(){return Ie},xnO:function(){return A},y7R:function(){return X},yQU:function(){return Kt},yj2:function(){return N},zbQ:function(){return ye},zvY:function(){return I},zws:function(){return k}});var r="Abs",a="Acos",i="Acosh",o="Add",s="AddN",u="All",c="Any",l="ArgMax",h="ArgMin",f="Asin",d="Asinh",p="Atan",v="Atanh",g="Atan2",m="AvgPool",y="AvgPoolGrad",b="AvgPool3D",w="AvgPool3DGrad",x="BatchMatMul",k="BatchToSpaceND",I="Bincount",S="BroadcastTo",_="BroadcastArgs",C="Cast",E="Ceil",A="ClipByValue",T="Complex",N="ComplexAbs",D="Concat",R="Conv2D",Z="Conv2DBackpropFilter",M="Conv2DBackpropInput",F="Conv3D",O="Conv3DBackpropFilterV2",B="Conv3DBackpropInputV2",L="Cos",P="Cosh",U="Cumprod",z="Cumsum",W="CropAndResize",V="DenseBincount",G="DepthToSpace",j="DepthwiseConv2dNative",H="DepthwiseConv2dNativeBackpropFilter",X="DepthwiseConv2dNativeBackpropInput",q="Diag",Y="Dilation2D",K="Dilation2DBackpropInput",Q="Dilation2DBackpropFilter",J="RealDiv",$="Einsum",tt="Elu",et="EluGrad",nt="Erf",rt="Equal",at="Exp",it="ExpandDims",ot="Expm1",st="FFT",ut="Fill",ct="FlipLeftRight",lt="Floor",ht="FloorDiv",ft="FusedBatchNorm",dt="GatherV2",pt="GatherNd",vt="Greater",gt="GreaterEqual",mt="Identity",yt="IFFT",bt="Imag",wt="IsFinite",xt="IsInf",kt="IsNan",It="LeakyRelu",St="Less",_t="LessEqual",Ct="LinSpace",Et="Log",At="Log1p",Tt="LogicalAnd",Nt="LogicalNot",Dt="LogicalOr",Rt="LogSoftmax",Zt="LRN",Mt="LRNGrad",Ft="Max",Ot="Maximum",Bt="MaxPool",Lt="MaxPoolGrad",Pt="MaxPool3D",Ut="MaxPool3DGrad",zt="MaxPoolWithArgmax",Wt="Mean",Vt="Min",Gt="Minimum",jt="MirrorPad",Ht="Mod",Xt="Multinomial",qt="Multiply",Yt="Neg",Kt="NotEqual",Qt="NonMaxSuppressionV3",Jt="NonMaxSuppressionV4",$t="NonMaxSuppressionV5",te="OnesLike",ee="OneHot",ne="Pack",re="PadV2",ae="Pow",ie="Prelu",oe="Prod",se="RaggedGather",ue="RaggedRange",ce="RaggedTensorToTensor",le="Range",he="Real",fe="Reciprocal",de="Relu",pe="Reshape",ve="ResizeNearestNeighbor",ge="ResizeNearestNeighborGrad",me="ResizeBilinear",ye="ResizeBilinearGrad",be="Relu6",we="Reverse",xe="Round",ke="Rsqrt",Ie="ScatterNd",Se="SearchSorted",_e="Select",Ce="Selu",Ee="Slice",Ae="Sin",Te="Sinh",Ne="Sign",De="Sigmoid",Re="Softplus",Ze="Sqrt",Me="Sum",Fe="SpaceToBatchND",Oe="SplitV",Be="Softmax",Le="SparseFillEmptyRows",Pe="SparseReshape",Ue="SparseSegmentMean",ze="SparseSegmentSum",We="SparseToDense",Ve="SquaredDifference",Ge="Square",je="StridedSlice",He="StringNGrams",Xe="StringSplit",qe="StringToHashBucketFast",Ye="Sub",Ke="Tan",Qe="Tanh",Je="Tile",$e="TopK",tn="Transform",en="Transpose",nn="Unique",rn="Unpack",an="UnsortedSegmentSum",on="ZerosLike",sn="Step",un="FromPixels",cn="RotateWithOffset",ln="_FusedMatMul",hn="FusedConv2D",fn="FusedDepthwiseConv2D"},78864:function(t,e,n){"use strict";n.d(e,{Li:function(){return d},pI:function(){return c},tr:function(){return h},uk:function(){return l},wC:function(){return f}});var r=n(29439),a=n(35050),i=n(96581),o=n(17269),s=(0,i.R)("kernelRegistry",(function(){return new Map})),u=(0,i.R)("gradRegistry",(function(){return new Map}));function c(t,e){var n=p(t,e);return s.get(n)}function l(t){return u.get(t)}function h(t){for(var e=s.entries(),n=[];;){var a=e.next(),i=a.done,o=a.value;if(i)break;var u=(0,r.Z)(o,2),c=u[0],l=u[1],h=c.split("_");(0,r.Z)(h,1)[0]===t&&n.push(l)}return n}function f(t){var e=t.kernelName,n=t.backendName,r=p(e,n);s.has(r)&&o.Z("The kernel '".concat(e,"' for backend ")+"'".concat(n,"' is already registered")),s.set(r,t)}function d(t){var e=t.kernelName;u.has(e)&&(0,a.OB)().getBool("DEBUG")&&o.Z("Overriding the gradient for '".concat(e,"'")),u.set(e,t)}function p(t,e){return"".concat(e,"_").concat(t)}},17269:function(t,e,n){"use strict";n.d(e,{Z:function(){return a},c:function(){return i}});var r=n(35050);function a(){var t;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(t=console).warn.apply(t,arguments)}function i(){var t;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(t=console).log.apply(t,arguments)}},7613:function(t,e,n){"use strict";n.d(e,{W:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({abs_:function(t){var e=(0,i._1)(t,"x","abs");if("complex64"===e.dtype){var n={x:e};return r.BV.runKernel(a.yj2,n)}var o={x:e};return r.BV.runKernel(a.SYM,o)}})},1719:function(t,e,n){"use strict";n.d(e,{K:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({acos_:function(t){var e={x:(0,i._1)(t,"x","acos")};return r.BV.runKernel(a.VGw,e)}})},24502:function(t,e,n){"use strict";n.d(e,{_:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({acosh_:function(t){var e={x:(0,i._1)(t,"x","acosh")};return r.BV.runKernel(a.SpW,e)}})},43312:function(t,e,n){"use strict";n.d(e,{I:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({add_:function(t,e){var n=(0,s._1)(t,"a","add"),u=(0,s._1)(e,"b","add"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.mm_,h)}})},14108:function(t,e,n){"use strict";n.d(e,{$:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({all_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={x:(0,i._1)(t,"x","all","bool")},s={axis:e,keepDims:n};return r.BV.runKernel(a.oT6,o,s)}})},58543:function(t,e,n){"use strict";n.d(e,{Y:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({any_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={x:(0,i._1)(t,"x","any","bool")},s={axis:e,keepDims:n};return r.BV.runKernel(a.IKK,o,s)}})},29995:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({argMax_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:(0,i._1)(t,"x","argMax")},o={axis:e};return r.BV.runKernel(a.sJF,n,o)}})},95157:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({argMin_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:(0,i._1)(t,"x","argMin")},o={axis:e};return r.BV.runKernel(a.aJk,n,o)}})},5556:function(t,e,n){"use strict";function r(t,e,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(e.slice(0))).push(t[0]/n),r=r.concat(t.slice(1));else{r=r.concat(t[0]);for(var a=e.length,i=0;i<a;++i)r=r.concat([t[i+1]/e[i],e[i]]);r=r.concat(t.slice(a+1))}return r}function a(t,e){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(e);for(var r=e+1;r<t;++r)r<=2*e?(n.push(r),n.push(r-(e+1))):n.push(r)}else{for(var a=[],i=[],o=1;o<t;++o)o>=2*e+1||o%2===1?i.push(o):a.push(o);n.push.apply(n,a),n.push(0),n.push.apply(n,i)}return n}function i(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(var i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function o(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function s(t,e,n){for(var r=t.slice(0,1),a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}n.d(e,{R7:function(){return r},TK:function(){return i},oP:function(){return o},qX:function(){return s},xw:function(){return a}})},33053:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({asin_:function(t){var e={x:(0,i._1)(t,"x","asin")};return r.BV.runKernel(a.M2y,e)}})},30054:function(t,e,n){"use strict";n.d(e,{V:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({asinh_:function(t){var e={x:(0,i._1)(t,"x","asinh")};return r.BV.runKernel(a.qw7,e)}})},64778:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({atan_:function(t){var e={x:(0,i._1)(t,"x","atan")};return r.BV.runKernel(a.jMg,e)}})},32227:function(t,e,n){"use strict";n.d(e,{f:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({atan2_:function(t,e){var n=(0,s._1)(t,"a","atan2"),u=(0,s._1)(e,"b","atan2"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.QCc,h)}})},47897:function(t,e,n){"use strict";n.d(e,{C:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({atanh_:function(t){var e={x:(0,i._1)(t,"x","atanh")};return r.BV.runKernel(a.Oyi,e)}})},49204:function(t,e,n){"use strict";n.d(e,{w:function(){return h}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(99118),u=n(39151),c=n(38640),l=n(75561);var h=(0,c.op)({avgPool_:function(t,e,n,c,h){var f=(0,i._1)(t,"x","avgPool","float32");o.hu(u.jT(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var d=f,p=!1;3===f.rank&&(p=!0,d=(0,l.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.hu(4===d.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(d.rank,".")})),u.m("avgPool",c,h);var v={x:d},g={filterSize:e,strides:n,pad:c,dimRoundingMode:h},m=r.BV.runKernel(a.JhU,v,g);return m=(0,s.p)(m,f.dtype),p?(0,l.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},65840:function(t,e,n){"use strict";n.d(e,{u:function(){return h}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(99118),u=n(39151),c=n(38640),l=n(75561);var h=(0,c.op)({avgPool3d_:function(t,e,n,c,h){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",d=(0,i._1)(t,"x","avgPool3d","float32"),p=d,v=!1;4===d.rank&&(v=!0,p=(0,l.X)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.hu(5===p.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(p.rank,".")})),o.hu("NDHWC"===f,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(f)})),o.hu("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),(0,u.m)("avgPool3d",c,h);var g={x:p},m={filterSize:e,strides:n,pad:c,dimRoundingMode:h,dataFormat:f},y=r.BV.runKernel(a._k9,g,m);return y=(0,s.p)(y,p.dtype),v?(0,l.X)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},98102:function(t,e,n){"use strict";n.d(e,{f:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({avgPool3dGrad_:function(t,e,n,u,l,h){var f=(0,i._1)(t,"dy","avgPool3dGrad"),d=(0,i._1)(e,"input","avgPool3dGrad"),p=f,v=d,g=!1;4===d.rank&&(g=!0,p=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]]),v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.hu(5===p.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(p.rank,".")})),o.hu(5===v.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(v.rank,".")})),(0,s.m)("avgPool3dGrad",l,h);var m={dy:p,input:v},y={filterSize:n,strides:u,pad:l,dimRoundingMode:h},b=r.BV.runKernel(a.IMb,m,y);return g?(0,c.X)(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}})},97926:function(t,e,n){"use strict";n.d(e,{W:function(){return c}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(38640),u=n(75561);var c=(0,s.op)({avgPoolGrad_:function(t,e,n,s,c){var l=(0,i._1)(t,"dy","avgPoolGrad"),h=(0,i._1)(e,"input","avgPoolGrad");o.hu(h.rank===l.rank,(function(){return"Rank of input (".concat(h.rank,") does not match rank of dy (").concat(l.rank,")")}));var f=h,d=l,p=!1;3===h.rank&&(p=!0,f=(0,u.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),d=(0,u.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),o.hu(4===d.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(d.rank,".")})),o.hu(4===f.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(f.rank,".")}));var v={dy:d,input:f},g={filterSize:n,strides:s,pad:c},m=r.BV.runKernel(a.ROF,v,g);return p?(0,u.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},88473:function(t,e,n){"use strict";n.d(e,{LJ:function(){return l},Q3:function(){return c},Vh:function(){return i},YB:function(){return a},kz:function(){return o},lB:function(){return u},rv:function(){return s},sY:function(){return h}});var r=n(36147);function a(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function i(t,e,n){for(var r=t.length+e.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(t[i++]):a.push(e[o++]);return a}function o(t,e){for(var n=[],r=t.length,a=0;a<r;a++)-1===e.indexOf(a)&&n.push(t[a]);var i=e.map((function(e){return t[e]}));return[n,i]}function s(t,e){return i(t,e.map((function(t){return 1})),e)}function u(t,e,n){r.hu(a(e,n),(function(){return"".concat(t," supports only inner-most axes for now. ")+"Got axes ".concat(e," and rank-").concat(n," input.")}))}function c(t,e){if(a(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach((function(t){return n.push(t)})),n}function l(t){return t.map((function(t,e){return[e,t]})).sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[0]}))}function h(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}},36994:function(t,e,n){"use strict";n.d(e,{E:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({batchToSpaceND_:function(t,e,n){var s=(0,i._1)(t,"x","batchToSpaceND"),u=e.reduce((function(t,e){return t*e}));o.hu(s.rank>=1+e.length,(function(){return"input rank is ".concat(s.rank," but should be > than blockShape.length ").concat(e.length)})),o.hu(n.length===e.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(e.length)})),o.hu(s.shape[0]%u===0,(function(){return"input tensor batch is ".concat(s.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(e.join(" * ")," === ").concat(u)}));var c={x:s},l={blockShape:e,crops:n};return r.BV.runKernel(a.zws,c,l)}})},42818:function(t,e,n){"use strict";n.d(e,{t:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(33066),u=n(38640),c=n(75561);var l=(0,u.op)({batchNorm_:function(t,e,n,u,l,h){null==h&&(h=.001);var f,d,p=(0,i._1)(t,"x","batchNorm"),v=(0,i._1)(e,"mean","batchNorm"),g=(0,i._1)(n,"variance","batchNorm");null!=l&&(f=(0,i._1)(l,"scale","batchNorm")),null!=u&&(d=(0,i._1)(u,"offset","batchNorm")),o.hu(v.rank===g.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.hu(null==d||v.rank===d.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.hu(null==f||v.rank===f.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var m={x:(0,s.v)(p),scale:f,offset:d,mean:v,variance:g},y={varianceEpsilon:h},b=r.BV.runKernel(a.sHE,m,y);return(0,c.X)(b,p.shape)}})},58820:function(t,e,n){"use strict";n.d(e,{D:function(){return o}});var r=n(48354),a=n(36147),i=n(42818);var o=(0,n(38640).op)({batchNorm2d_:function(t,e,n,o,s,u){var c,l,h=(0,r._1)(t,"x","batchNorm"),f=(0,r._1)(e,"mean","batchNorm"),d=(0,r._1)(n,"variance","batchNorm");return null!=s&&(c=(0,r._1)(s,"scale","batchNorm")),null!=o&&(l=(0,r._1)(o,"offset","batchNorm")),a.hu(2===h.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(h.rank,".")})),a.hu(2===f.rank||1===f.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(f.rank,".")})),a.hu(2===d.rank||1===d.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=c&&a.hu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=l&&a.hu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),(0,i.t)(h,f,d,l,c,u)}})},16938:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(48354),a=n(36147),i=n(42818);var o=(0,n(38640).op)({batchNorm3d_:function(t,e,n,o,s,u){var c,l,h=(0,r._1)(t,"x","batchNorm"),f=(0,r._1)(e,"mean","batchNorm"),d=(0,r._1)(n,"variance","batchNorm");return null!=s&&(c=(0,r._1)(s,"scale","batchNorm")),null!=o&&(l=(0,r._1)(o,"offset","batchNorm")),a.hu(3===h.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(h.rank,".")})),a.hu(3===f.rank||1===f.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(f.rank,".")})),a.hu(3===d.rank||1===d.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=c&&a.hu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=l&&a.hu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),(0,i.t)(h,f,d,l,c,u)}})},41798:function(t,e,n){"use strict";n.d(e,{p:function(){return o}});var r=n(48354),a=n(36147),i=n(42818);var o=(0,n(38640).op)({batchNorm4d_:function(t,e,n,o,s,u){var c,l,h=(0,r._1)(t,"x","batchNorm"),f=(0,r._1)(e,"mean","batchNorm"),d=(0,r._1)(n,"variance","batchNorm");return null!=s&&(c=(0,r._1)(s,"scale","batchNorm")),null!=o&&(l=(0,r._1)(o,"offset","batchNorm")),a.hu(4===h.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(h.rank,".")})),a.hu(4===f.rank||1===f.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(f.rank,".")})),a.hu(4===d.rank||1===d.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=c&&a.hu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=l&&a.hu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),(0,i.t)(h,f,d,l,c,u)}})},33066:function(t,e,n){"use strict";n.d(e,{v:function(){return a}});var r=n(75561);function a(t){return 0===t.rank||1===t.rank?(0,r.X)(t,[1,1,1,t.size]):2===t.rank?(0,r.X)(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?(0,r.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t}},77531:function(t,e,n){"use strict";n.d(e,{y:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({bincount_:function(t,e,n){var s=(0,i._1)(t,"x","bincount"),u=(0,i._1)(e,"weights","bincount");o.hu("int32"===s.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),o.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.hu(u.size===s.size||0===u.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(s.shape,", weights shape: ")+"".concat(u.shape,".")}));var c={x:s,weights:u},l={size:n};return r.BV.runKernel(a.zvY,c,l)}})},49742:function(t,e,n){"use strict";n.d(e,{U:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(10672),u=n(38640),c=n(75561);var l=(0,u.op)({broadcastTo_:function(t,e){var n=(0,i._1)(t,"broadcastTo","x"),u=n.shape;if((0,o.Mu)(e),e.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(e.length," < input.rank=").concat(n.rank,"."));if(e.length>n.rank){for(var l=n.shape.slice();l.length<e.length;)l.unshift(1);n=(0,c.X)(n,l)}for(var h=n.shape,f=Array.from(e),d=e.length-1;d>=0;d--)if(h[d]===e[d])f[d]=1;else if(1!==n.shape[d])throw new Error("broadcastTo(): [".concat(u,"] cannot be broadcast to [").concat(e,"]."));if(0===f.map((function(t,e){return t>1?e:-1})).filter((function(t){return t>=0})).length)return(0,s.d)(n);var p={x:n},v={reps:f};return r.BV.runKernel(a.n9L,p,v)}})},45774:function(t,e,n){"use strict";function r(t,e){for(var n=t.length,r=[],a=0;a<n;a++){var i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(t,e){for(var n=[],r=0;r<e.length;r++){var a=t[t.length-r-1],i=e.length-r-1,o=e[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(t,e){for(var n=[],r=Math.max(t.length,e.length),a=0;a<r;a++){var i=t[t.length-a-1];null==i&&(i=1);var o=e[e.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(t," and ").concat(e,".");throw Error(s)}n.unshift(i)}}return n}n.r(e),n.d(e,{assertAndGetBroadcastShape:function(){return i},getBroadcastDims:function(){return r},getReductionAxes:function(){return a}})},77039:function(t,e,n){"use strict";n.d(e,{f:function(){return i}});var r=n(23939),a=n(36147);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return e=e||"float32",a.Mu(t),new r.YD(t,e,n)}},99118:function(t,e,n){"use strict";n.d(e,{p:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({cast_:function(t,e){var n=(0,i._1)(t,"x","cast");if(!o.LP(e))throw new Error("Failed to cast to unknown dtype ".concat(e));if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},u={dtype:e};return r.BV.runKernel(a.RFZ,s,u)}})},31396:function(t,e,n){"use strict";n.d(e,{m:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({ceil_:function(t){var e={x:(0,i._1)(t,"x","ceil","float32")};return r.BV.runKernel(a.gJX,e)}})},89836:function(t,e,n){"use strict";n.d(e,{i:function(){return u}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(8582);var u=(0,n(38640).op)({clipByValue_:function(t,e,n){var u=(0,i._1)(t,"x","clipByValue");if(o.hu(e<=n,(function(){return"Error in clip: min (".concat(e,") must be ")+"less than or equal to max (".concat(n,").")})),e===n)return(0,s.h)(u.shape,e,u.dtype);var c={x:u},l={clipValueMin:e,clipValueMax:n};return r.BV.runKernel(a.xnO,c,l)}})},10672:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({clone_:function(t){var e={x:(0,i._1)(t,"x","clone","string_or_numeric")};return r.BV.runKernel(a.iJz,e)}})},59253:function(t,e,n){"use strict";n.d(e,{P:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({complex_:function(t,e){var n=(0,i._1)(t,"real","complex"),s=(0,i._1)(e,"imag","complex");o.k5(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var u={real:n,imag:s};return r.BV.runKernel(a.Zz9,u)}})},34836:function(t,e,n){"use strict";n.d(e,{z:function(){return u}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(10672);var u=(0,n(38640).op)({concat_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.hu)(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=(0,i.sI)(t,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(t.dtype,". "))})),1===n.length)return(0,s.d)(n[0]);var u=n,c={axis:e};return r.BV.runKernel(a.Eh3,u,c)}})},7243:function(t,e,n){"use strict";n.d(e,{g:function(){return a}});var r=n(34836);var a=(0,n(38640).op)({concat1d_:function(t){return(0,r.z)(t,0)}})},46959:function(t,e,n){"use strict";n.d(e,{I:function(){return a}});var r=n(34836);var a=(0,n(38640).op)({concat2d_:function(t,e){return(0,r.z)(t,e)}})},42514:function(t,e,n){"use strict";n.d(e,{M:function(){return a}});var r=n(34836);var a=(0,n(38640).op)({concat3d_:function(t,e){return(0,r.z)(t,e)}})},87585:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(34836);var a=(0,n(38640).op)({concat4d_:function(t,e){return(0,r.z)(t,e)}})},95160:function(t,e,n){"use strict";n.d(e,{N:function(){return i},o:function(){return a}});var r=n(36147);function a(t,e){var n=t[0].length;t.forEach((function(t,e){r.hu(t.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(e,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),r.hu(e>=0&&e<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var a=t[0];t.forEach((function(t,i){for(var o=0;o<n;o++)r.hu(o===e||t[o]===a[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(i,"] (").concat(t,") ")+"does not match the shape of the rest (".concat(a,") ")+"along the non-concatenated axis ".concat(i,".")}))}))}function i(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}},44918:function(t,e,n){"use strict";n.d(e,{P:function(){return c}});var r=n(48354),a=n(36147),i=n(93457),o=n(39151),s=n(38640),u=n(75561);var c=(0,s.op)({conv1d_:function(t,e,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,h=arguments.length>6?arguments[6]:void 0,f=(0,r._1)(t,"x","conv1d"),d=(0,r._1)(e,"filter","conv1d"),p=f,v=!1;2===f.rank&&(v=!0,p=(0,u.X)(f,[1,f.shape[0],f.shape[1]])),a.hu(3===p.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(p.rank,".")})),a.hu(3===d.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),o.m("conv1d",s,h),a.hu(p.shape[2]===d.shape[1],(function(){return"Error in conv1d: depth of input (".concat(p.shape[2],") must match ")+"input depth for filter ".concat(d.shape[1],".")})),a.hu(o.jT(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.hu(o.U3(l),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),a.hu(o.U3(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),a.hu("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var g=(0,u.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),m=(0,u.X)(p,[p.shape[0],1,p.shape[1],p.shape[2]]),y=[1,n],b=[1,l],w=(0,i.T)(m,g,y,s,"NHWC",b,h);return v?(0,u.X)(w,[w.shape[2],w.shape[3]]):(0,u.X)(w,[w.shape[0],w.shape[2],w.shape[3]])}})},93457:function(t,e,n){"use strict";n.d(e,{T:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({conv2d_:function(t,e,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=(0,i._1)(t,"x","conv2d","float32"),p=(0,i._1)(e,"filter","conv2d","float32"),v=d,g=!1;3===d.rank&&(g=!0,v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===v.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(v.rank,".")})),o.hu(4===p.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),s.m("conv2d",u,f);var m="NHWC"===l?v.shape[3]:v.shape[1];o.hu(m===p.shape[2],(function(){return"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(p.shape[2],".")})),o.hu(s.jT(n,h),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(h,"'")})),o.hu(s.U3(h),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),o.hu(s.U3(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var y={x:v,filter:p},b={strides:n,pad:u,dataFormat:l,dilations:h,dimRoundingMode:f},w=r.BV.runKernel(a.mhS,y,b);return g?(0,c.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},8744:function(t,e,n){"use strict";n.d(e,{p:function(){return c}});var r=n(50391),a=n(32145),i=n(36147),o=n(39151),s=n(38640),u=n(75561);var c=(0,s.op)({conv2DBackpropFilter_:function(t,e,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",h=arguments.length>6?arguments[6]:void 0,f=t;3===t.rank&&(f=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d=e;3===d.rank&&(d=(0,u.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),i.hu(4===f.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(f.shape,".")})),i.hu(4===d.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(d.shape,".")})),i.hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var p="NHWC"===l?f.shape[3]:f.shape[1],v="NHWC"===l?d.shape[3]:d.shape[1];i.hu(p===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(p,") must ")+"match input depth in filter (".concat(n[2],".")})),i.hu(v===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(v,") must ")+"match output depth for filter (".concat(n[3],").")})),o.m("conv2dDerFilter",c,h);var g={x:f,dy:d},m={strides:s,pad:c,dataFormat:l,dimRoundingMode:h,filterShape:n};return r.BV.runKernel(a.wUP,g,m)}})},21045:function(t,e,n){"use strict";n.d(e,{_:function(){return c}});var r=n(50391),a=n(32145),i=n(36147),o=n(39151),s=n(38640),u=n(75561);var c=(0,s.op)({conv2DBackpropInput_:function(t,e,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",h=arguments.length>6?arguments[6]:void 0;i.hu(t.length===e.rank,(function(){return"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match")}));var f=t,d=e,p=!1;3===e.rank&&(p=!0,d=(0,u.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]),f=[1,t[0],t[1],t[2]]),i.hu(4===f.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(f.length,".")})),i.hu(4===d.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(d.rank)})),i.hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var v="NHWC"===l?f[3]:f[1],g="NHWC"===l?d.shape[3]:d.shape[1];i.hu(v===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(v,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.hu(g===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(g,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),o.m("conv2dDerInput",c,h);var m={dy:d,filter:n},y={strides:s,pad:c,dataFormat:l,dimRoundingMode:h,inputShape:f},b=r.BV.runKernel(a.wm,m,y);return p?(0,u.X)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},71732:function(t,e,n){"use strict";n.d(e,{b:function(){return i}});var r=n(48354),a=n(21045);var i=(0,n(38640).op)({conv2dTranspose_:function(t,e,n,i,o,s){var u=(0,r._1)(t,"x","conv2dTranspose"),c=(0,r._1)(e,"filter","conv2dTranspose");return(0,a._)(n,u,c,i,o,"NHWC",s)}})},48113:function(t,e,n){"use strict";n.d(e,{p:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({conv3d_:function(t,e,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],f=(0,i._1)(t,"x","conv3d"),d=(0,i._1)(e,"filter","conv3d"),p=f,v=!1;4===f.rank&&(v=!0,p=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.hu(5===p.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(p.rank,".")})),o.hu(5===d.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(d.rank,".")})),o.hu(p.shape[4]===d.shape[3],(function(){return"Error in conv3d: depth of input (".concat(p.shape[4],") must match ")+"input depth for filter ".concat(d.shape[3],".")})),o.hu((0,s.jT)(n,h),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(h,"'")})),o.hu("NDHWC"===l,(function(){return"Error in conv3d: got dataFormat of ".concat(l," but only NDHWC is currently supported.")})),o.hu((0,s.U3)(h),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),o.hu((0,s.U3)(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var g={x:p,filter:d},m={strides:n,pad:u,dataFormat:l,dilations:h},y=r.BV.runKernel(a.x12,g,m);return v?(0,c.X)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}})},69550:function(t,e,n){"use strict";n.d(e,{s:function(){return u}});var r=n(50391),a=n(32145),i=n(36147),o=n(38640),s=n(75561);var u=(0,o.op)({conv3DBackpropFilter_:function(t,e,n,o,u){var c=t;4===t.rank&&(c=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));var l=e;4===l.rank&&(l=(0,s.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),i.hu(5===c.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(c.shape,".")})),i.hu(5===l.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(l.shape,".")})),i.hu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),i.hu(c.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(c.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),i.hu(l.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(l.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var h={x:c,dy:l},f={strides:o,pad:u,filterShape:n};return r.BV.runKernel(a.o2y,h,f)}})},61873:function(t,e,n){"use strict";n.d(e,{_:function(){return u}});var r=n(50391),a=n(32145),i=n(36147),o=n(38640),s=n(75561);var u=(0,o.op)({conv3DBackpropInput_:function(t,e,n,o,u){i.hu(t.length===e.rank,(function(){return"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match")}));var c=t,l=e,h=!1;4===e.rank&&(h=!0,l=(0,s.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),c=[1,t[0],t[1],t[2],t[3]]);var f=c[4],d=l.shape[4];i.hu(5===c.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(c.length,".")})),i.hu(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),i.hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),i.hu(f===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(f,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),i.hu(d===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:l,filter:n},v={pad:u,strides:o,inputShape:c},g=r.BV.runKernel(a.ik2,p,v);return h?(0,s.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},19317:function(t,e,n){"use strict";n.d(e,{$:function(){return i}});var r=n(48354),a=n(61873);var i=(0,n(38640).op)({conv3dTranspose_:function(t,e,n,i,o){var s=(0,r._1)(t,"x","conv3dTranspose"),u=(0,r._1)(e,"filter","conv3dTranspose");return(0,a._)(n,s,u,i,o)}})},39151:function(t,e,n){"use strict";n.d(e,{I0:function(){return g},Ix:function(){return c},Rf:function(){return o},U3:function(){return y},Xw:function(){return s},aO:function(){return h},jT:function(){return m},jw:function(){return l},m:function(){return w},pl:function(){return u},sl:function(){return b}});var r=n(29439),a=n(93433),i=n(36147);function o(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,s=t[3];return c(t,[].concat((0,a.Z)(e),[s]),n,o,r,null,null,b(i))}function s(t,e,n,a,i,o){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=f(e),h=(0,r.Z)(l,2),d=h[0],p=h[1];if("channelsLast"===u)s=[d,p,t[3],t[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[d,p,t[1],t[1]]}return c(t,s,n,a,i,o,!1,u)}function u(t,e,n,a,i,o){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",h=d(e),f=(0,r.Z)(h,3),p=f[0],v=f[1],g=f[2];if("NDHWC"===c)u="channelsLast",s=[p,v,g,t[4],t[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));u="channelsFirst",s=[p,v,g,t[1],t[1]]}return l(t,s,n,a,i,!1,u,o)}function c(t,e,n,a,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,g=-1;if("channelsLast"===u){var m=(0,r.Z)(t,4);c=m[0],l=m[1],d=m[2],g=m[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var y=(0,r.Z)(t,4);c=y[0],g=y[1],l=y[2],d=y[3]}var b,w=(0,r.Z)(e,4),x=w[0],k=w[1],I=w[3],S=f(n),_=(0,r.Z)(S,2),C=_[0],E=_[1],A=f(a),T=(0,r.Z)(A,2),N=T[0],D=T[1],R=p(x,N),Z=p(k,D),M=function(t,e,n,r,a,i,o,s,u){var c,l,f;if("number"===typeof t){c={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var d=function(t,e,n,r,a){null==r&&(r=h(t,e,n));var i=t[0],o=t[1],s=v((i-e+2*r)/n+1,a),u=v((o-e+2*r)/n+1,a);return[s,u]}([e,n],i,r,t,s);l=d[0],f=d[1]}else if("same"===t){l=Math.ceil(e/r),f=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-e),g=Math.max(0,(f-1)*a+o-n),m=Math.floor(p/2),y=p-m,b=Math.floor(g/2);c={top:m,bottom:y,left:b,right:g-b,type:"SAME"}}else if("valid"===t)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof t)throw Error("Unknown padding parameter: ".concat(t));var w="channelsLast"===u?t[1][0]:t[2][0],x="channelsLast"===u?t[1][1]:t[2][1],k="channelsLast"===u?t[2][0]:t[3][0],I="channelsLast"===u?t[2][1]:t[3][1];c={top:w,bottom:x,left:k,right:I,type:0===w&&0===x&&0===k&&0===I?"VALID":"EXPLICIT"},l=v((e-i+w+x)/r+1,s),f=v((n-o+k+I)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}(i,l,d,C,E,R,Z,o,u),F=M.padInfo,O=M.outHeight,B=M.outWidth,L=s?I*g:I;return"channelsFirst"===u?b=[c,L,O,B]:"channelsLast"===u&&(b=[c,O,B,L]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:d,inChannels:g,outHeight:O,outWidth:B,outChannels:L,padInfo:F,strideHeight:C,strideWidth:E,filterHeight:x,filterWidth:k,effectiveFilterHeight:R,effectiveFilterWidth:Z,dilationHeight:N,dilationWidth:D,inShape:t,outShape:b,filterShape:e}}function l(t,e,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,f=-1,g=-1,m=-1;if("channelsLast"===s){var y=(0,r.Z)(t,5);c=y[0],l=y[1],f=y[2],g=y[3],m=y[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var b=(0,r.Z)(t,5);c=b[0],m=b[1],l=b[2],f=b[3],g=b[4]}var w,x=(0,r.Z)(e,5),k=x[0],I=x[1],S=x[2],_=x[4],C=d(n),E=(0,r.Z)(C,3),A=E[0],T=E[1],N=E[2],D=d(a),R=(0,r.Z)(D,3),Z=R[0],M=R[1],F=R[2],O=p(k,Z),B=p(I,M),L=p(S,F),P=function(t,e,n,r,a,i,o,s,u,c,l){var f,d,p,g;"valid"===t&&(t=0);if("number"===typeof t){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var m=function(t,e,n,r,a,i){null==a&&(a=h(t,e[0],r[0]));for(var o=[0,0,0,n],s=0;s<3;s++)t[s]+2*a>=e[s]&&(o[s]=v((t[s]-e[s]+2*a)/r[s]+1,i));return o}([e,n,r,1],[s,u,c],1,[a,i,o],t,l);d=m[0],p=m[1],g=m[2]}else{if("same"!==t)throw Error("Unknown padding parameter: ".concat(t));var y=((d=Math.ceil(e/a))-1)*a+s-e,b=((p=Math.ceil(n/i))-1)*i+u-n,w=((g=Math.ceil(r/o))-1)*o+c-r,x=Math.floor(y/2),k=y-x,I=Math.floor(b/2),S=b-I,_=Math.floor(w/2);f={top:I,bottom:S,left:_,right:w-_,front:x,back:k,type:"SAME"}}return{padInfo:f,outDepth:d,outHeight:p,outWidth:g}}(i,l,f,g,A,T,N,O,B,L,u),U=P.padInfo,z=P.outDepth,W=P.outHeight,V=P.outWidth,G=o?_*m:_;return"channelsFirst"===s?w=[c,G,z,W,V]:"channelsLast"===s&&(w=[c,z,W,V,G]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:f,inWidth:g,inChannels:m,outDepth:z,outHeight:W,outWidth:V,outChannels:G,padInfo:U,strideDepth:A,strideHeight:T,strideWidth:N,filterDepth:k,filterHeight:I,filterWidth:S,effectiveFilterDepth:O,effectiveFilterHeight:B,effectiveFilterWidth:L,dilationDepth:Z,dilationHeight:M,dilationWidth:F,inShape:t,outShape:w,filterShape:e}}function h(t,e,n){var r=p(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((t[0]*(n-1)-n+r)/2)}function f(t){return"number"===typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function d(t){return"number"===typeof t?[t,t,t]:t}function p(t,e){return e<=1?t:t+(t-1)*(e-1)}function v(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode ".concat(e))}}function g(t){var e=f(t),n=(0,r.Z)(e,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function m(t,e){return g(t)||g(e)}function y(t){return f(t).every((function(t){return t>0}))}function b(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(t))}function w(t,e,n){if(null!=n){if("string"===typeof e)throw Error("Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,"."));if("number"===typeof e)i.hu(i.GN(e),(function(){return"Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,".")}));else{if("object"!==typeof e)throw Error("Error in ".concat(t,": Unknown padding parameter: ").concat(e));e.forEach((function(e){e.forEach((function(e){i.hu(i.GN(e),(function(){return"Error in ".concat(t,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(e,".")}))}))}))}}}},21227:function(t,e,n){"use strict";n.d(e,{m:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cos_:function(t){var e={x:(0,i._1)(t,"x","cos","float32")};return r.BV.runKernel(a.mc4,e)}})},46679:function(t,e,n){"use strict";n.d(e,{f:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cosh_:function(t){var e={x:(0,i._1)(t,"x","cosh","float32")};return r.BV.runKernel(a.TR1,e)}})},69457:function(t,e,n){"use strict";n.d(e,{$:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cumprod_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s={x:(0,i._1)(t,"x","cumprod")},u={axis:e,exclusive:n,reverse:o};return r.BV.runKernel(a.Byc,s,u)}})},58862:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({cumsum_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s={x:(0,i._1)(t,"x","cumsum")},u={axis:e,exclusive:n,reverse:o};return r.BV.runKernel(a.iHb,s,u)}})},57419:function(t,e,n){"use strict";n.d(e,{p:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({denseBincount_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(0,i._1)(t,"x","denseBincount"),c=(0,i._1)(e,"weights","denseBincount");o.hu("int32"===u.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(u.dtype)})),o.hu(u.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(u.rank,".")})),o.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.hu(c.size===u.size||0===c.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(u.shape,", weights shape: ")+"".concat(c.shape,".")}));var l={x:u,weights:c},h={size:n,binaryOutput:s};return r.BV.runKernel(a.QRR,l,h)}})},91878:function(t,e,n){"use strict";n.d(e,{n:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({depthToSpace_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",s=(0,i._1)(t,"x","depthToSpace","float32"),u="NHWC"===n?s.shape[1]:s.shape[2],c="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];o.hu(e>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(e)})),o.hu(u*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(e,"  for depthToSpace with input shape\n    ").concat(s.shape)})),o.hu(c*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(e," for depthToSpace with input shape\n        ").concat(s.shape)})),o.hu(l%(e*e)===0,(function(){return"Dimension size must be evenly divisible by ".concat(e*e," but is ").concat(l," for depthToSpace with input shape ").concat(s.shape)}));var h={x:s},f={blockSize:e,dataFormat:n};return r.BV.runKernel(a.T0n,h,f)}})},61147:function(t,e,n){"use strict";n.d(e,{B:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({depthwiseConv2d_:function(t,e,n,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=(0,i._1)(t,"x","depthwiseConv2d","float32"),p=(0,i._1)(e,"filter","depthwiseConv2d","float32"),v=d,g=!1;3===d.rank&&(g=!0,v=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.hu(4===v.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),o.hu(4===p.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")}));var m="NHWC"===l?v.shape[3]:v.shape[1];o.hu(m===p.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(m,") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")})),s.m("depthwiseConv2d",u,f);var y={x:v,filter:p},b={strides:n,pad:u,dataFormat:l,dilations:h,dimRoundingMode:f},w=r.BV.runKernel(a.cie,y,b);return g?(0,c.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},60288:function(t,e,n){"use strict";n.d(e,{z:function(){return s}});var r=n(50391),a=n(32145),i=n(38640),o=n(75561);var s=(0,i.op)({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,i,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t;3===t.rank&&(l=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var h=e;3===h.rank&&(h=(0,o.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f={x:l,dy:h},d={strides:i,pad:s,dimRoundingMode:c,dilations:u,filterShape:n};return r.BV.runKernel(a.sL$,f,d)}})},96939:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var r=n(50391),a=n(32145),i=n(38640),o=n(75561);var s=(0,i.op)({depthwiseConv2dNativeBackpropInput_:function(t,e,n,i,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e,h=!1;3===e.rank&&(h=!0,l=(0,o.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f={dy:l,filter:n},d={strides:i,pad:s,dimRoundingMode:c,dilations:u,inputShape:t},p=r.BV.runKernel(a.y7R,f,d);return h?(0,o.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},57580:function(t,e,n){"use strict";n.d(e,{W:function(){return c}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(38640),u=n(75561);var c=(0,s.op)({dilation2d_:function(t,e,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",h=(0,i._1)(t,"x","dilation2d"),f=(0,i._1)(e,"filter","dilation2d");o.hu(3===h.rank||4===h.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(h.rank,".")})),o.hu(3===f.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(f.rank,".")})),o.hu("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var d=h,p=!1;3===h.rank&&(d=(0,u.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),p=!0),o.hu(d.shape[3]===f.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(d.shape[3]," vs ").concat(f.shape[2])}));var v={x:d,filter:f},g={strides:n,pad:s,dilations:c},m=r.BV.runKernel(a.p4S,v,g);return p?(0,u.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},15750:function(t,e,n){"use strict";n.d(e,{h:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(67145);var c=(0,n(38640).op)({div_:function(t,e){var n=(0,s._1)(t,"a","div"),c=(0,s._1)(e,"b","div"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);if(n=h[0],c=h[1],"int32"===n.dtype&&"int32"===c.dtype)return(0,u.q)(n,c);var f={a:n,b:c};return a.BV.runKernel(i.oHH,f,{})}})},75923:function(t,e,n){"use strict";n.d(e,{N:function(){return h}});var r=n(29439),a=n(99064),i=n(48354),o=n(15750),s=n(63254),u=n(38640),c=n(10329),l=n(87293);var h=(0,u.op)({divNoNan_:function(t,e){var n=(0,i._1)(t,"a","div"),u=(0,i._1)(e,"b","div"),h=(0,a.makeTypesMatch)(n,u),f=(0,r.Z)(h,2);n=f[0],u=f[1];var d=(0,o.h)(n,u),p=(0,l.P)(d),v=(0,s.D)(u,p);return(0,c.a)(v,p,d)}})},45043:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var r=n(48354),a=n(36147),i=n(57221),o=n(38640),s=n(75561);var u=(0,o.op)({dot_:function(t,e){var n=(0,r._1)(t,"t1","dot"),o=(0,r._1)(e,"t2","dot");a.hu((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,".")}));var u=1===n.rank?n.size:n.shape[1],c=1===o.rank?o.size:o.shape[0];if(a.hu(u===c,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(u," and ").concat(c,".")})),1===n.rank&&1===o.rank){var l=(0,s.X)(n,[1,-1]),h=(0,s.X)(o,[-1,1]),f=(0,i.O)(l,h);return(0,s.X)(f,[])}if(1===n.rank&&2===o.rank){var d=(0,s.X)(n,[1,-1]),p=(0,s.X)(o,[o.shape[0],o.shape[1]]),v=(0,i.O)(d,p);return(0,s.X)(v,[v.size])}if(2===n.rank&&1===o.rank){var g=(0,s.X)(o,[-1,1]),m=(0,i.O)(n,g);return(0,s.X)(m,[m.size])}var y=(0,s.X)(o,[o.shape[0],o.shape[1]]);return(0,i.O)(n,y)}})},18320:function(t,e,n){"use strict";n.d(e,{r:function(){return d}});var r=n(23939),a=n(48354),i=n(36147),o=n(43312),s=n(15750),u=n(17625),c=n(22628),l=n(30651),h=n(38640),f=n(16407);var d=(0,h.op)({dropout_:function(t,e,n,h){var d=(0,a._1)(t,"x","dropout");if(i.hu("float32"===d.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(d.dtype," tensor instead.")})),i.hu(e>=0&&e<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(e,".")})),0===e)return t instanceof r.es?d.clone():d;var p=(0,u.k)(d,n),v=1-e,g=(0,s.h)((0,c.G)((0,o.I)((0,f.L)(p,0,1,"float32",h),v)),v);return(0,l.d)(d,g)}})},17625:function(t,e,n){"use strict";n.d(e,{k:function(){return a}});var r=n(36147);function a(t,e){if(null==e)return t.shape.slice();if(r.cO(t.shape,e))return e;if(t.shape.length===e.length){for(var n=[],a=0;a<t.shape.length;a++)null==e[a]&&null!=t.shape[a]?n.push(t.shape[a]):n.push(e[a]);return n}return e}},52353:function(t,e,n){"use strict";n.d(e,{p:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({elu_:function(t){var e={x:(0,i._1)(t,"x","elu","float32")};return r.BV.runKernel(a.SX0,e)}})},63254:function(t,e,n){"use strict";n.d(e,{D:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({equal_:function(t,e){var n=(0,s._1)(t,"a","equal","string_or_numeric"),c=(0,s._1)(e,"b","equal","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.hdR,f)}})},93891:function(t,e,n){"use strict";n.d(e,{q:function(){return u}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(99118);var u=(0,n(38640).op)({erf_:function(t){var e=(0,i._1)(t,"x","erf");o.hu("int32"===e.dtype||"float32"===e.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===e.dtype&&(e=(0,s.p)(e,"float32"));var n={x:e};return r.BV.runKernel(a.Omj,n)}})},26424:function(t,e,n){"use strict";n.d(e,{Aj:function(){return a},IA:function(){return r},Kh:function(){return o},Qy:function(){return s},eh:function(){return u},py:function(){return i}});var r=.3275911,a=.254829592,i=-.284496736,o=1.421413741,s=-1.453152027,u=1.061405429},13313:function(t,e,n){"use strict";n.d(e,{d:function(){return a}});var r=n(56662);var a=(0,n(38640).op)({euclideanNorm_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.K)(t,"euclidean",e,n)}})},411:function(t,e,n){"use strict";n.d(e,{Q:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({exp_:function(t){var e={x:(0,i._1)(t,"x","exp")};return r.BV.runKernel(a.NEP,e)}})},72975:function(t,e,n){"use strict";n.d(e,{d:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({expandDims_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(t,"x","expandDims","string_or_numeric");o.hu(e<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var s={input:n},u={dim:e};return r.BV.runKernel(a.YFo,s,u)}})},15682:function(t,e,n){"use strict";n.d(e,{t:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({expm1_:function(t){var e={x:(0,i._1)(t,"x","expm1")};return r.BV.runKernel(a.Y0y,e)}})},97947:function(t,e,n){"use strict";n.d(e,{i:function(){return u}});var r=n(77039),a=n(72975),i=n(38640),o=n(75561),s=n(42343);var u=(0,i.op)({eye_:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==e&&(e=t);for(var u=(0,r.f)([t,e],i),c=t<=e?t:e,l=0;l<c;++l)u.set(1,l,l);var h=(0,o.X)(u.toTensor(),[t,e]);if(null==n)return h;if(1===n.length)return(0,s.G)((0,a.d)(h,0),[n[0],1,1]);if(2===n.length)return(0,s.G)((0,a.d)((0,a.d)(h,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,s.G)((0,a.d)((0,a.d)((0,a.d)(h,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}})},8582:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(50391),a=n(32145),i=n(36147);function o(t,e,n){(0,i.Mu)(t);var o={shape:t,value:e,dtype:n};return r.BV.runKernel(a.deh,{},o)}},22628:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({floor_:function(t){var e={x:(0,i._1)(t,"x","floor","float32")};return r.BV.runKernel(a.OR,e)}})},67145:function(t,e,n){"use strict";n.d(e,{q:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({floorDiv_:function(t,e){var n=(0,s._1)(t,"a","floorDiv"),u=(0,s._1)(e,"b","floorDiv"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.jeX,h)}})},86219:function(t,e,n){"use strict";n.d(e,{T:function(){return b}});var r=n(29439),a=n(50391),i=n(66450),o=n(32145),s=n(99064),u=n(48354),c=n(36147),l=n(43312),h=n(45774),f=n(93457),d=n(8744),p=n(21045),v=n(39151),g=n(5171),m=n(38640),y=n(75561);var b=(0,m.op)({fusedConv2d_:function(t){var e=t.x,n=t.filter,m=t.strides,b=t.pad,w=t.dataFormat,x=void 0===w?"NHWC":w,k=t.dilations,I=void 0===k?[1,1]:k,S=t.dimRoundingMode,_=t.bias,C=t.activation,E=void 0===C?"linear":C,A=t.preluActivationWeights,T=t.leakyreluAlpha;if(E=E||"linear",!1===(0,g.uy)(a.BV.state.gradientDepth,E)){c.hu("NHWC"===x,(function(){return"Error in fused conv2d: got dataFormat of ".concat(x," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var N=(0,f.T)(e,n,m,b,x,I,S);return null!=_&&(N=(0,l.I)(N,_)),(0,g.QH)(N,E,A,T)}var D=(0,u._1)(e,"x","conv2d","float32"),R=(0,u._1)(n,"filter","conv2d","float32"),Z=D,M=!1;3===D.rank&&(M=!0,Z=(0,y.X)(D,[1,D.shape[0],D.shape[1],D.shape[2]])),c.hu(4===Z.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(Z.rank,".")})),c.hu(4===R.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(R.rank,".")})),v.m("fused conv2d",b,S);var F="NHWC"===x?Z.shape[3]:Z.shape[1];c.hu(R.shape[2]===F,(function(){return"Error in conv2d: depth of input (".concat(F,") must match ")+"input depth for filter ".concat(R.shape[2],".")})),c.hu(v.jT(m,I),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(m," and dilations '").concat(I,"'")}));var O,B,L=v.Ix(Z.shape,R.shape,m,I,b,S);if(null!=_){O=(0,u._1)(_,"bias","fused conv2d");var P=(0,s.makeTypesMatch)(O,D),U=(0,r.Z)(P,1);O=U[0],"NHWC"===x?h.assertAndGetBroadcastShape(L.outShape,O.shape):(c.hu(O.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(O.shape.length,".")})),c.hu(0===O.shape.length||O.shape[0]===L.outChannels||1===O.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(O.shape,") is not ")+"compatible with the number of output channels "+"(".concat(L.outChannels,")")})))}if(null!=A){var z=A.shape;if(c.hu(z.length<=1||3===z.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(z.length,".")})),1===z.length)c.hu(1===z[0]||z[0]===L.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(z,") is not compatible with the number of output ")+"channels (".concat(L.outChannels,").")}));else if(3===z.length)try{h.assertAndGetBroadcastShape(z,L.outShape)}catch(X){var W="Error in fused conv2d: PReLU activation weights (".concat(z,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(L.outShape,").");throw Error(W)}B=(0,u._1)(A,"prelu weights","fused conv2d")}var V=function(t,e){c.hu("NHWC"===x,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(x," but only NHWC is currently supported.")}));var n=(0,r.Z)(e,4),a=n[0],i=n[1],o=n[2],s=n[3],u=(0,g.Fr)(t,o,E);c.hu(v.I0(I),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(I,"'")}));var l=[(0,p._)(i.shape,u,a,m,b),(0,d.p)(i,u,a.shape,m,b)];if(null!=s){var h=(0,g.pf)(s,u);l.push(h)}return l},G={x:Z,filter:R,bias:O,preluActivationWeights:B},j={strides:m,pad:b,dataFormat:x,dilations:I,dimRoundingMode:S,activation:E,leakyreluAlpha:T};if(null==_){var H=(0,i.cb)((function(t,e,n){var r=a.BV.runKernel(o._V0,G,j);return n([e,t,r]),M&&(r=(0,y.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:V}}));return H(Z,R)}return(0,i.cb)((function(t,e,n,r){var i=a.BV.runKernel(o._V0,G,j);return r([e,t,i,n]),M&&(i=(0,y.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:V}}))(Z,R,O)}})},28232:function(t,e,n){"use strict";n.d(e,{B:function(){return b}});var r=n(29439),a=n(50391),i=n(66450),o=n(32145),s=n(99064),u=n(48354),c=n(36147),l=n(43312),h=n(45774),f=n(39151),d=n(61147),p=n(60288),v=n(96939),g=n(5171),m=n(38640),y=n(75561);var b=(0,m.op)({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,m=t.strides,b=t.pad,w=t.dataFormat,x=void 0===w?"NHWC":w,k=t.dilations,I=void 0===k?[1,1]:k,S=t.dimRoundingMode,_=t.bias,C=t.activation,E=void 0===C?"linear":C,A=t.preluActivationWeights,T=t.leakyreluAlpha;if(!1===(0,g.uy)(a.BV.state.gradientDepth,E)){var N=(0,d.B)(e,n,m,b,x,I,S);return null!=_&&(N=(0,l.I)(N,_)),(0,g.QH)(N,E,A,T)}var D=(0,u._1)(e,"x","depthwiseConv2d","float32"),R=(0,u._1)(n,"filter","depthwiseConv2d","float32"),Z=D,M=!1;3===D.rank&&(M=!0,Z=(0,y.X)(D,[1,D.shape[0],D.shape[1],D.shape[2]])),c.hu(4===Z.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(Z.rank,".")})),c.hu(4===R.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(R.rank,".")})),c.hu(Z.shape[3]===R.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(Z.shape[3],") must match the inChannels dimension in ")+"filter ".concat(R.shape[2],".")})),null==I&&(I=[1,1]),c.hu(f.jT(m,I),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(m," and dilations '").concat(I,"'")})),f.m("fused depthwiseConv2d",b,S);var F,O,B=f.Ix(Z.shape,R.shape,m,I,b,S,!0);if(null!=_){F=(0,u._1)(_,"bias","fused conv2d");var L=(0,s.makeTypesMatch)(F,D),P=(0,r.Z)(L,1);F=P[0],h.assertAndGetBroadcastShape(B.outShape,F.shape)}null!=A&&(O=(0,u._1)(A,"prelu weights","fused depthwiseConv2d"));var U=function(t,e){c.hu(f.I0(I),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(I,"'")}));var n=(0,r.Z)(e,4),a=n[0],i=n[1],o=n[2],s=n[3],u=(0,g.Fr)(t,o,E),l=(0,v.v)(i.shape,u,a,m,b,I,S),h=(0,p.z)(i,u,a.shape,m,b,I,S);return null!=s?[l,h,(0,g.pf)(F,u)]:[l,h]},z={x:Z,filter:R,bias:F,preluActivationWeights:O},W={strides:m,pad:b,dataFormat:x,dilations:I,dimRoundingMode:S,activation:E,leakyreluAlpha:T};if(null==_){var V=(0,i.cb)((function(t,e,n){var r=a.BV.runKernel(o.luS,z,W);return n([e,t,r]),M&&(r=(0,y.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:U}}));return V(Z,R)}return(0,i.cb)((function(t,e,n,r){var i=a.BV.runKernel(o.luS,z,W);return r([e,t,i,n]),M&&(i=(0,y.X)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:U}}))(Z,R,F)}})},9560:function(t,e,n){"use strict";n.d(e,{O:function(){return g}});var r=n(29439),a=n(50391),i=n(66450),o=n(32145),s=n(99064),u=n(48354),c=n(36147),l=n(43312),h=n(45774),f=n(5171),d=n(57221),p=n(38640),v=n(75561);var g=(0,p.op)({fusedMatMul_:function(t){var e=t.a,n=t.b,p=t.transposeA,g=void 0!==p&&p,m=t.transposeB,y=void 0!==m&&m,b=t.bias,w=t.activation,x=void 0===w?"linear":w,k=t.preluActivationWeights,I=t.leakyreluAlpha,S=void 0===I?.2:I;if(!1===(0,f.uy)(a.BV.state.gradientDepth,x)){var _=(0,d.O)(e,n,g,y);return null!=b&&(_=(0,l.I)(_,b)),(0,f.QH)(_,x,k,S)}var C=(0,u._1)(e,"a","fused matMul"),E=(0,u._1)(n,"b","fused matMul"),A=(0,s.makeTypesMatch)(C,E),T=(0,r.Z)(A,2);C=T[0],E=T[1];var N=g?C.shape[C.rank-2]:C.shape[C.rank-1],D=y?E.shape[E.rank-1]:E.shape[E.rank-2],R=g?C.shape[C.rank-1]:C.shape[C.rank-2],Z=y?E.shape[E.rank-2]:E.shape[E.rank-1],M=C.shape.slice(0,-2),F=E.shape.slice(0,-2),O=c.NA(M),B=c.NA(F);c.hu(N===D,(function(){return"Error in fused matMul: inner shapes (".concat(N,") and (")+"".concat(D,") of Tensors with shapes ").concat(C.shape," and ")+"".concat(E.shape," and transposeA=").concat(g)+" and transposeB=".concat(y," must match.")}));var L,P,U=h.assertAndGetBroadcastShape(C.shape.slice(0,-2),E.shape.slice(0,-2)).concat([R,Z]),z=g?(0,v.X)(C,[O,N,R]):(0,v.X)(C,[O,R,N]),W=y?(0,v.X)(E,[B,Z,D]):(0,v.X)(E,[B,D,Z]);if(null!=b){L=(0,u._1)(b,"bias","fused matMul");var V=(0,s.makeTypesMatch)(L,C);L=(0,r.Z)(V,1)[0],h.assertAndGetBroadcastShape(U,L.shape)}null!=k&&(P=(0,u._1)(k,"prelu weights","fused matMul"));var G=function(t,e){var n,a,i=(0,r.Z)(e,4),o=i[0],s=i[1],u=i[2],c=i[3],l=(0,f.Fr)((0,v.X)(t,u.shape),u,x);return g||y?!g&&y?(n=(0,d.O)(l,s,!1,!1),a=(0,d.O)(l,o,!0,!1)):g&&!y?(n=(0,d.O)(s,l,!1,!0),a=(0,d.O)(o,l,!1,!1)):(n=(0,d.O)(s,l,!0,!0),a=(0,d.O)(l,o,!0,!0)):(n=(0,d.O)(l,s,!1,!0),a=(0,d.O)(o,l,!0,!1)),null!=b?[n,a,(0,f.pf)(c,l)]:[n,a]},j={a:z,b:W,bias:L,preluActivationWeights:P},H={transposeA:g,transposeB:y,activation:x,leakyreluAlpha:S};if(null==b){var X=(0,i.cb)((function(t,e,n){var r=a.BV.runKernel(o.usg,j,H);return n([t,e,r]),{value:(0,v.X)(r,U),gradFunc:G}}));return X(z,W)}return(0,i.cb)((function(t,e,n,r){var i=a.BV.runKernel(o.usg,j,H);return r([t,e,i,n]),{value:(0,v.X)(i,U),gradFunc:G}}))(z,W,L)}})},24950:function(t,e,n){"use strict";n.r(e),n.d(e,{conv2d:function(){return r.T},depthwiseConv2d:function(){return a.B},matMul:function(){return i.O}});var r=n(86219),a=n(28232),i=n(9560)},5171:function(t,e,n){"use strict";n.d(e,{Fr:function(){return p},QH:function(){return g},pf:function(){return v},uy:function(){return m}});var r=n(45774),a=n(52353),i=n(74419),o=n(30651),s=n(96859),u=n(17539),c=n(65900),l=n(75561),h=n(77643),f=n(94031),d=n(40227);function p(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return(0,o.d)(t,(0,f.N)(e));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function v(t,e){var n=e,a=r.getReductionAxes(t.shape,e.shape);return a.length>0&&(n=(0,d.S)(n,a)),(0,l.X)(n,t.shape)}function g(t,e,n,r){if("linear"===e)return t;if("relu"===e)return(0,u.U)(t);if("elu"===e)return(0,a.p)(t);if("relu6"===e)return(0,c.b)(t);if("prelu"===e)return(0,s.A)(t,n);if("leakyrelu"===e)return(0,i.h)(t,r);if("sigmoid"===e)return(0,h.X)(t);throw new Error("Unknown fused activation ".concat(e,"."))}var m=function(t,e){return!(t>0)||"linear"===e}},49498:function(t,e,n){"use strict";n.d(e,{I:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({gather_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s={x:(0,i._1)(t,"x","gather"),indices:(0,i._1)(e,"indices","gather","int32")},u={axis:n,batchDims:o};return r.BV.runKernel(a.qi_,s,u)}})},11929:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});var r=n(93433),a=n(36147);function i(t,e){var n=t.shape.length,i=e.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(i<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(i,"."));if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.shape[i-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(e.shape[i-1]," vs. ").concat(n));if(0===(0,a.NA)(t.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(t.shape,"."));for(var o=e.shape,s=o[o.length-1],u=1,c=0;c<o.length-1;++c)u*=o[c];var l=t.shape,h=o.slice();h.pop();for(var f=1,d=s;d<n;++d)f*=l[d],h.push(l[d]);var p=[].concat((0,r.Z)((0,a.e3)(t.shape).map((function(t){return t/f}))),[1]).slice(0,s);return[h,u,f,p]}},35014:function(t,e,n){"use strict";n.d(e,{p:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({greater_:function(t,e){var n=(0,s._1)(t,"a","greater","string_or_numeric"),c=(0,s._1)(e,"b","greater","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.iZT,f)}})},18327:function(t,e,n){"use strict";n.d(e,{b:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({greaterEqual_:function(t,e){var n=(0,s._1)(t,"a","greaterEqual","string_or_numeric"),c=(0,s._1)(e,"b","greaterEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.Acj,f)}})},76996:function(t,e,n){"use strict";n.d(e,{a:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({imag_:function(t){var e={input:(0,i._1)(t,"input","imag")};return r.BV.runKernel(a.J_u,e)}})},5264:function(t,e,n){"use strict";n.d(e,{B:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({cropAndResize_:function(t,e,n,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=(0,i._1)(t,"image","cropAndResize"),h=(0,i._1)(e,"boxes","cropAndResize","float32"),f=(0,i._1)(n,"boxInd","cropAndResize","int32"),d=h.shape[0];o.hu(4===l.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(l.rank,".")})),o.hu(2===h.rank&&4===h.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(d,",4] ")+"but had shape ".concat(h.shape,".")})),o.hu(1===f.rank&&f.shape[0]===d,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(d,"] ")+"but had shape ".concat(h.shape,".")})),o.hu(2===s.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(s.length,".")})),o.hu(s[0]>=1&&s[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(s)})),o.hu("bilinear"===u||"nearest"===u,(function(){return"method must be bilinear or nearest, but was ".concat(u)}));var p={image:l,boxes:h,boxInd:f},v={method:u,extrapolationValue:c,cropSize:s};return r.BV.runKernel(a.VcC,p,v)}})},22294:function(t,e,n){"use strict";n.d(e,{V:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({flipLeftRight_:function(t){var e=(0,i._1)(t,"image","flipLeftRight","float32");o.hu(4===e.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(e.rank,".")}));var n={image:e};return r.BV.runKernel(a.Uyb,n,{})}})},34133:function(t,e,n){"use strict";n.d(e,{F:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(42343);var s=(0,i.op)({grayscaleToRGB_:function(t){var e=(0,r._1)(t,"image","grayscaleToRGB"),n=e.rank-1,i=e.shape[n];a.hu(e.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(e.rank,".")})),a.hu(1===i,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(i,".")}));var s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,(0,o.G)(e,s)}})},62987:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(7384);var s=(0,n(38640).op)({nonMaxSuppression_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,c=(0,i._1)(t,"boxes","nonMaxSuppression","float32"),l=(0,i._1)(e,"scores","nonMaxSuppression","float32"),h=(0,o.e)(c,l,n,s,u),f={maxOutputSize:n=h.maxOutputSize,iouThreshold:s=h.iouThreshold,scoreThreshold:u=h.scoreThreshold};return r.BV.runKernel(a.uv1,{boxes:c,scores:l},f)}})},6035:function(t,e,n){"use strict";n.d(e,{V:function(){return l}});var r=n(74165),a=n(15861),i=n(98028),o=n(48354),s=n(7384),u=n(92894);function c(){return c=(0,a.Z)((0,r.Z)().mark((function t(e,n,a){var c,l,h,f,d,p,v,g,m,y,b=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=b.length>3&&void 0!==b[3]?b[3]:.5,l=b.length>4&&void 0!==b[4]?b[4]:Number.NEGATIVE_INFINITY,h=(0,o._1)(e,"boxes","nonMaxSuppressionAsync"),f=(0,o._1)(n,"scores","nonMaxSuppressionAsync"),d=(0,s.e)(h,f,a,c,l),a=d.maxOutputSize,c=d.iouThreshold,l=d.scoreThreshold,t.next=10,Promise.all([h.data(),f.data()]);case 10:return p=t.sent,v=p[0],g=p[1],m=(0,i.GP)(v,g,a,c,l),y=m.selectedIndices,h!==e&&h.dispose(),f!==n&&f.dispose(),t.abrupt("return",(0,u.R)(y,"int32"));case 17:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}var l=function(t,e,n){return c.apply(this,arguments)}},49052:function(t,e,n){"use strict";n.d(e,{q:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(7384);var s=(0,n(38640).op)({nonMaxSuppressionPadded_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=(0,i._1)(t,"boxes","nonMaxSuppression"),h=(0,i._1)(e,"scores","nonMaxSuppression"),f=(0,o.e)(l,h,n,s,u,null),d={boxes:l,scores:h},p={maxOutputSize:f.maxOutputSize,iouThreshold:f.iouThreshold,scoreThreshold:f.scoreThreshold,padToMaxOutputSize:c},v=r.BV.runKernel(a.cye,d,p);return{selectedIndices:v[0],validOutputs:v[1]}}})},96:function(t,e,n){"use strict";n.d(e,{N:function(){return f}});var r=n(74165),a=n(29439),i=n(15861),o=n(98028),s=n(48354),u=n(7384),c=n(27067),l=n(92894);function h(){return h=(0,i.Z)((0,r.Z)().mark((function t(e,n,i){var h,f,d,p,v,g,m,y,b,w,x,k,I,S,_,C,E=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=E.length>3&&void 0!==E[3]?E[3]:.5,f=E.length>4&&void 0!==E[4]?E[4]:Number.NEGATIVE_INFINITY,d=E.length>5&&void 0!==E[5]&&E[5],p=(0,s._1)(e,"boxes","nonMaxSuppressionAsync"),v=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),g=(0,u.e)(p,v,i,h,f,null),m=g.maxOutputSize,y=g.iouThreshold,b=g.scoreThreshold,t.next=11,Promise.all([p.data(),v.data()]);case 11:return w=t.sent,x=(0,a.Z)(w,2),k=x[0],I=x[1],S=(0,o.qP)(k,I,m,y,b,d),_=S.selectedIndices,C=S.validOutputs,p!==e&&p.dispose(),v!==n&&v.dispose(),t.abrupt("return",{selectedIndices:(0,l.R)(_,"int32"),validOutputs:(0,c.i)(C,"int32")});case 19:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}var f=function(t,e,n){return h.apply(this,arguments)}},5918:function(t,e,n){"use strict";n.d(e,{t:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(7384);var s=(0,n(38640).op)({nonMaxSuppressionWithScore_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=(0,i._1)(t,"boxes","nonMaxSuppression"),h=(0,i._1)(e,"scores","nonMaxSuppression"),f=(0,o.e)(l,h,n,s,u,c),d={boxes:l,scores:h},p={maxOutputSize:n=f.maxOutputSize,iouThreshold:s=f.iouThreshold,scoreThreshold:u=f.scoreThreshold,softNmsSigma:c=f.softNmsSigma},v=r.BV.runKernel(a.W0H,d,p);return{selectedIndices:v[0],selectedScores:v[1]}}})},1790:function(t,e,n){"use strict";n.d(e,{B:function(){return l}});var r=n(74165),a=n(15861),i=n(98028),o=n(48354),s=n(7384),u=n(92894);function c(){return c=(0,a.Z)((0,r.Z)().mark((function t(e,n,a){var c,l,h,f,d,p,v,g,m,y,b,w,x=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=x.length>3&&void 0!==x[3]?x[3]:.5,l=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,h=x.length>5&&void 0!==x[5]?x[5]:0,f=(0,o._1)(e,"boxes","nonMaxSuppressionAsync"),d=(0,o._1)(n,"scores","nonMaxSuppressionAsync"),p=(0,s.e)(f,d,a,c,l,h),a=p.maxOutputSize,c=p.iouThreshold,l=p.scoreThreshold,h=p.softNmsSigma,t.next=12,Promise.all([f.data(),d.data()]);case 12:return v=t.sent,g=v[0],m=v[1],y=(0,i.pA)(g,m,a,c,l,h),b=y.selectedIndices,w=y.selectedScores,f!==e&&f.dispose(),d!==n&&d.dispose(),t.abrupt("return",{selectedIndices:(0,u.R)(b,"int32"),selectedScores:(0,u.R)(w)});case 19:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}var l=function(t,e,n){return c.apply(this,arguments)}},90464:function(t,e,n){"use strict";n.d(e,{I:function(){return l}});var r=n(29439),a=n(50391),i=n(32145),o=n(48354),s=n(36147),u=n(38640),c=n(75561);var l=(0,u.op)({resizeBilinear_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o._1)(t,"images","resizeBilinear");s.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.hu(2===e.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(e,".")})),s.hu(!1===u||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var h=l,f=!1;3===l.rank&&(f=!0,h=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(e,0);var d={images:h},p={alignCorners:n,halfPixelCenters:u,size:e},v=a.BV.runKernel(i._Yw,d,p);return f?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},28600:function(t,e,n){"use strict";n.d(e,{j:function(){return l}});var r=n(29439),a=n(50391),i=n(32145),o=n(48354),s=n(36147),u=n(38640),c=n(75561);var l=(0,u.op)({resizeNearestNeighbor_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o._1)(t,"images","resizeNearestNeighbor");s.hu(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),s.hu(2===e.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(e,".")})),s.hu("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),s.hu(!1===u||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var h=l,f=!1;3===l.rank&&(f=!0,h=(0,c.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),(0,r.Z)(e,0);var d={images:h},p={alignCorners:n,halfPixelCenters:u,size:e},v=a.BV.runKernel(i.dpD,d,p);return f?(0,c.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},31965:function(t,e,n){"use strict";n.d(e,{f:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({rotateWithOffset_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=(0,i._1)(t,"image","rotateWithOffset","float32");o.hu(4===u.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(u.rank,".")}));var c={image:u},l={radians:e,fillValue:n,center:s};return r.BV.runKernel(a.b9H,c,l)}})},63887:function(t,e,n){"use strict";n.d(e,{L:function(){return S}});var r=n(29439),a=n(92894),i=n(38640),o=n(99118),s=n(82588),u=n(77531),c=n(12642),l=n(35014),h=n(40227),f=n(43312),d=n(30651),p=n(15750),v=n(84774),g=n(60766),m=n(10329),y=n(8582),b=n(59238),w=n(422),x=n(72442),k=n(36147),I=n(48354);var S=(0,i.op)({threshold_:function(t){var e,n,i,S,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",C=arguments.length>2&&void 0!==arguments[2]&&arguments[2],E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,A=(0,I._1)(t,"image","threshold"),T=A.shape[0]*A.shape[1],N=(0,d.d)((0,a.R)([E]),255);if(k.hu(3===A.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(A.rank,".")})),k.hu(3===A.shape[2]||1===A.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(A.shape[2],".")})),k.hu("int32"===A.dtype||"float32"===A.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(A.dtype,".")})),k.hu("otsu"===_||"binary"===_,(function(){return"Method must be binary or otsu, but was ".concat(_)})),3===A.shape[2]){var D=(0,s.V)(A,[1,1,1],-1),R=(0,r.Z)(D,3);e=R[0],n=R[1],i=R[2];var Z=(0,d.d)(e,.2989),M=(0,d.d)(n,.587),F=(0,d.d)(i,.114);S=(0,f.I)((0,f.I)(Z,M),F)}else S=t;"otsu"===_&&(N=function(t,e){for(var n,r,i,o,s,u,c=(0,a.R)([-1]),g=(0,a.R)([0]),x=(0,a.R)([0]),k=0;k<t.size-1;k++){n=(0,b.t)(t,0,k+1),r=(0,b.t)(t,k+1),s=(0,p.h)((0,h.S)(n),e),u=(0,p.h)((0,h.S)(r),e);var I=(0,h.S)((0,d.d)(n,(0,w.w)(0,n.size)));i=(0,p.h)(I,(0,h.S)(n));var S=(0,y.h)(r.shape,n.size),_=(0,f.I)((0,w.w)(0,r.size),S),C=(0,d.d)(r,_);o=(0,p.h)((0,h.S)(C),(0,h.S)(r));var E=(0,v.l)(i,o),A=(0,v.l)(i,o),T=(0,d.d)(s,u);x=(0,d.d)((0,d.d)(T,E),A);var N=(0,l.p)(x,g);g=(0,m.a)(N,x,g),c=(0,m.a)(N,(0,a.R)([k]),c)}return c}((0,u.y)((0,o.p)((0,g.N)(S),"int32"),(0,x.X)([]),256),T));var O=C?(0,c.z)(S,N):(0,l.p)(S,N);return(0,o.p)((0,d.d)(O,255),"int32")}})},85352:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({transform_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5?arguments[5]:void 0,l=(0,i._1)(t,"image","transform","float32"),h=(0,i._1)(e,"transforms","transform","float32");o.hu(4===l.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(l.rank,".")})),o.hu(2===h.rank&&(h.shape[0]===l.shape[0]||1===h.shape[0])&&8===h.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),o.hu(null==c||2===c.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(c,".")}));var f={image:l,transforms:h},d={interpolation:n,fillMode:s,fillValue:u,outputShape:c};return r.BV.runKernel(a.wx7,f,d)}})},10300:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({isFinite_:function(t){var e={x:(0,i._1)(t,"x","isFinite")};return r.BV.runKernel(a.avt,e)}})},74652:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({isInf_:function(t){var e={x:(0,i._1)(t,"x","isInf")};return r.BV.runKernel(a.iWB,e)}})},37005:function(t,e,n){"use strict";n.d(e,{i:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({isNaN_:function(t){var e={x:(0,i._1)(t,"x","isNaN")};return r.BV.runKernel(a.r7n,e)}})},74419:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({leakyRelu_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:(0,i._1)(t,"x","leakyRelu")},o={alpha:e};return r.BV.runKernel(a.J$2,n,o)}})},44920:function(t,e,n){"use strict";n.d(e,{d:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({less_:function(t,e){var n=(0,s._1)(t,"a","less","string_or_numeric"),c=(0,s._1)(e,"b","less","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.vtC,f)}})},12642:function(t,e,n){"use strict";n.d(e,{z:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({lessEqual_:function(t,e){var n=(0,s._1)(t,"a","lessEqual","string_or_numeric"),c=(0,s._1)(e,"b","lessEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.CAk,f)}})},67957:function(t,e,n){"use strict";n.d(e,{P:function(){return y}});var r=n(29439),a=n(48354),i=n(36147),o=n(18327),s=n(12642),u=n(2177),c=n(38640),l=n(422),h=n(75561),f=n(27067),d=n(18306),p=n(84774),v=n(54566),g=n(10329),m=n(87742);var y=(0,c.op)({bandPart_:function(t,e,n){(0,i.hu)(e%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(e,".")})),(0,i.hu)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var c=(0,a._1)(t,"a","bandPart");(0,i.hu)(c.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(c.rank,".")}));var y=c.shape,b=c.shape.slice(-2),w=(0,r.Z)(b,2),x=w[0],k=w[1];if(!(e<=x))throw new Error("bandPart(): numLower (".concat(e,")")+" must not be greater than the number of rows (".concat(x,")."));if(!(n<=k))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(k,")."));e<0&&(e=x),n<0&&(n=k);var I=(0,h.X)((0,l.w)(0,x,1,"int32"),[-1,1]),S=(0,l.w)(0,k,1,"int32"),_=(0,p.l)(I,S),C=(0,u.H)((0,s.z)(_,(0,f.i)(+e,"int32")),(0,o.b)(_,(0,f.i)(-n,"int32"))),E=(0,m.l)([x,k],c.dtype);return(0,h.X)((0,d.k)((0,v.H)((0,h.X)(c,[-1,x,k])).map((function(t){return(0,g.a)(C,t,E)}))),y)}})},23133:function(t,e,n){"use strict";n.d(e,{G:function(){return p}});var r=n(50391),a=n(36147),i=n(15750),o=n(30651),s=n(56662),u=n(38640),c=n(82588),l=n(83931),h=n(18306),f=n(84774),d=n(40227);var p=(0,u.op)({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,(0,a.hu)(null!=t&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=t[0].shape[0],u=function(e){(0,a.hu)(t[e].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(t[e].shape[0]," vs. ").concat(n,")")}))},p=1;p<t.length;++p)u(p)}else e=!0,t=(0,c.V)(t,t.shape[0],0).map((function(t){return(0,l.L)(t,[0])}));(0,a.hu)(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(t.length,") exceeds ")+"number of dimensions (".concat(t[0].shape[0],").")}));for(var v=[],g=t,m=function(t){v.push(r.BV.tidy((function(){var e=g[t];if(t>0)for(var n=0;n<t;++n){var r=(0,o.d)((0,d.S)((0,o.d)(v[n],e)),v[n]);e=(0,f.l)(e,r)}return(0,i.h)(e,(0,s.K)(e,"euclidean"))})))},y=0;y<t.length;++y)m(y);return e?(0,h.k)(v,0):v}})},95688:function(t,e,n){"use strict";n.d(e,{qr:function(){return C}});var r=n(29439),a=n(50391),i=n(35875),o=n(36147),s=n(10672),u=n(34836),c=n(15750),l=n(97947),h=n(35014),f=n(57221),d=n(30651),p=n(4362),v=n(56662),g=n(38640),m=n(75561),y=n(59238),b=n(18306),w=n(84774),x=n(77517),k=n(61240),I=n(54566),S=n(10329);function _(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.BV.tidy((function(){(0,o.hu)(2===t.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(t.shape.length,"D Tensor.")}));for(var n=t.shape[0],g=t.shape[1],m=(0,l.i)(n),b=(0,s.d)(t),I=(0,x.o)([[1]],[1,1]),_=(0,s.d)(I),C=n>=g?g:n,E=function(t){var e=b,o=_,l=m,C=a.BV.tidy((function(){var e=(0,y.t)(b,[t,t],[n-t,1]),r=(0,v.K)(e),a=(0,y.t)(b,[t,t],[1,1]),i=(0,S.a)((0,h.p)(a,0),(0,x.o)([[-1]]),(0,x.o)([[1]])),o=(0,w.l)(a,(0,d.d)(i,r)),l=(0,c.h)(e,o);_=1===l.shape[0]?(0,s.d)(I):(0,u.z)([I,(0,y.t)(l,[1,0],[l.shape[0]-1,l.shape[1]])],0);var C=(0,p.W)((0,c.h)((0,f.O)(i,o),r)),E=(0,y.t)(b,[t,0],[n-t,g]),A=(0,d.d)(C,_),T=(0,k.p)(_);if(0===t)b=(0,w.l)(E,(0,f.O)(A,(0,f.O)(T,E)));else{var N=(0,w.l)(E,(0,f.O)(A,(0,f.O)(T,E)));b=(0,u.z)([(0,y.t)(b,[0,0],[t,g]),N],0)}var D=(0,k.p)(A),R=(0,y.t)(m,[0,t],[n,m.shape[1]-t]);if(0===t)m=(0,w.l)(R,(0,f.O)((0,f.O)(R,_),D));else{var Z=(0,w.l)(R,(0,f.O)((0,f.O)(R,_),D));m=(0,u.z)([(0,y.t)(m,[0,0],[n,t]),Z],1)}return[_,b,m]})),E=(0,r.Z)(C,3);_=E[0],b=E[1],m=E[2],(0,i.B9)([e,o,l])},A=0;A<C;++A)E(A);return!e&&n>g&&(m=(0,y.t)(m,[0,0],[n,g]),b=(0,y.t)(b,[0,0],[g,g])),[m,b]}))}var C=(0,g.op)({qr_:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,o.hu)(t.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(t.rank)})),2===t.rank)return _(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce((function(t,e){return t*e})),a=(0,I.H)((0,m.X)(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];return a.forEach((function(t){var n=_(t,e),a=(0,r.Z)(n,2),o=a[0],u=a[1];i.push(o),s.push(u)})),[(0,m.X)((0,b.k)(i,0),t.shape),(0,m.X)((0,b.k)(s,0),t.shape)]}})},40936:function(t,e,n){"use strict";n.d(e,{G:function(){return c}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(38640),u=n(75561);var c=(0,s.op)({localResponseNormalization_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=(0,i._1)(t,"x","localResponseNormalization");o.hu(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),o.hu(o.GN(e),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(e,".")}));var h=l,f=!1;3===l.rank&&(f=!0,h=(0,u.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var d={x:h},p={depthRadius:e,bias:n,alpha:s,beta:c},v=r.BV.runKernel(a.eZ0,d,p);return f?(0,u.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},57242:function(t,e,n){"use strict";n.d(e,{Y:function(){return i}});var r=n(50391),a=n(32145);var i=(0,n(38640).op)({localResponseNormalizationBackprop_:function(t,e,n){var i={x:t,y:e,dy:n},o={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return r.BV.runKernel(a.Hhh,i,o)}})},40378:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({log_:function(t){var e={x:(0,i._1)(t,"x","log","float32")};return r.BV.runKernel(a.ZbH,e)}})},95341:function(t,e,n){"use strict";n.d(e,{K:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({log1p_:function(t){var e={x:(0,i._1)(t,"x","log1p")};return r.BV.runKernel(a.kU,e)}})},25113:function(t,e,n){"use strict";n.d(e,{e:function(){return l}});var r=n(66450),a=n(48354),i=n(30651),o=n(4362),s=n(38640),u=n(77643),c=n(54626);var l=(0,s.op)({logSigmoid_:function(t){var e=(0,a._1)(t,"x","logSigmoid");return(0,r.cb)((function(t){return{value:(0,o.W)((0,c.W)((0,o.W)(t))),gradFunc:function(e){return(0,i.d)(e,(0,u.X)((0,o.W)(t)))}}}))(e)}})},54561:function(t,e,n){"use strict";n.d(e,{C:function(){return p}});var r=n(29439),a=n(66450),i=n(48354),o=n(99118),s=n(411),u=n(40378),c=n(56176),l=n(30651),h=n(38640),f=n(84774),d=n(40227);var p=(0,h.op)({logSoftmax_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,i._1)(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(e));return(0,a.cb)((function(t,n){var a=(0,c.F)(t,e,!0),i=(0,f.l)(t,a),h=(0,f.l)((0,o.p)(i,"float32"),(0,u.c)((0,d.S)((0,s.Q)(i),e,!0)));n([h]);return{value:h,gradFunc:function(t,n){var a=(0,r.Z)(n,1)[0],i=(0,s.Q)(a);return(0,f.l)(t,(0,l.d)((0,d.S)(t,e,!0),i))}}}))(n)}})},15530:function(t,e,n){"use strict";n.d(e,{l:function(){return p}});var r=n(48354),a=n(36147),i=n(43312),o=n(88473),s=n(411),u=n(40378),c=n(56176),l=n(38640),h=n(75561),f=n(84774),d=n(40227);var p=(0,l.op)({logSumExp_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,r._1)(t,"x","logSumExp"),p=(0,a.EC)(e,l.shape),v=(0,c.F)(l,p,!0),g=(0,f.l)(l,v),m=(0,s.Q)(g),y=(0,d.S)(m,p),b=(0,u.c)(y),w=(0,i.I)((0,h.X)(v,b.shape),b);if(n){var x=(0,o.rv)(w.shape,p);return(0,h.X)(w,x)}return w}})},2177:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(45774);var s=(0,n(38640).op)({logicalAnd_:function(t,e){var n=(0,i._1)(t,"a","logicalAnd","bool"),s=(0,i._1)(e,"b","logicalAnd","bool");(0,o.assertAndGetBroadcastShape)(n.shape,s.shape);var u={a:n,b:s};return r.BV.runKernel(a.PYm,u)}})},30875:function(t,e,n){"use strict";n.d(e,{h:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({logicalNot_:function(t){var e={x:(0,i._1)(t,"x","logicalNot","bool")};return r.BV.runKernel(a.VfG,e)}})},15117:function(t,e,n){"use strict";n.d(e,{K:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(45774);var s=(0,n(38640).op)({logicalOr_:function(t,e){var n=(0,i._1)(t,"a","logicalOr","bool"),s=(0,i._1)(e,"b","logicalOr","bool");(0,o.assertAndGetBroadcastShape)(n.shape,s.shape);var u={a:n,b:s};return r.BV.runKernel(a.MZg,u)}})},11712:function(t,e,n){"use strict";n.d(e,{e:function(){return u}});var r=n(48354),a=n(45774),i=n(2177),o=n(30875),s=n(15117);var u=(0,n(38640).op)({logicalXor_:function(t,e){var n=(0,r._1)(t,"a","logicalXor","bool"),u=(0,r._1)(e,"b","logicalXor","bool");return(0,a.assertAndGetBroadcastShape)(n.shape,u.shape),(0,i.H)((0,s.K)(t,e),(0,o.h)((0,i.H)(t,e)))}})},47627:function(t,e,n){"use strict";var r;n.d(e,{I:function(){return r}}),function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},56245:function(t,e,n){"use strict";n.d(e,{O:function(){return l}});var r=n(48354),a=n(36147),i=n(7613),o=n(47627),s=n(38640),u=n(84774),c=n(9498);var l=(0,s.op)({absoluteDifference_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.I.SUM_BY_NONZERO_WEIGHTS,l=(0,r._1)(t,"labels","absoluteDifference"),h=(0,r._1)(e,"predictions","absoluteDifference"),f=null;null!=n&&(f=(0,r._1)(n,"weights","absoluteDifference")),(0,a.k5)(l.shape,h.shape,"Error in absoluteDifference: ");var d=(0,i.W)((0,u.l)(l,h));return(0,c.m)(d,f,s)}})},9498:function(t,e,n){"use strict";n.d(e,{m:function(){return p}});var r=n(48354),a=n(99118),i=n(15750),o=n(47627),s=n(6568),u=n(30651),c=n(15549),l=n(86100),h=n(38640),f=n(27067),d=n(40227);var p=(0,h.op)({computeWeightedLoss_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.I.SUM_BY_NONZERO_WEIGHTS,h=(0,r._1)(t,"losses","computeWeightedLoss"),p=null;null!=e&&(p=(0,r._1)(e,"weights","computeWeightedLoss"));var v=null==p?h:(0,u.d)(h,p);if(n===o.I.NONE)return v;if(n===o.I.SUM)return(0,d.S)(v);if(n===o.I.MEAN){if(null==p)return(0,s.J)(v);var g=h.size/p.size,m=(0,i.h)((0,d.S)(v),(0,d.S)(p));return g>1?(0,i.h)(m,(0,f.i)(g)):m}if(n===o.I.SUM_BY_NONZERO_WEIGHTS){if(null==p)return(0,i.h)((0,d.S)(v),(0,f.i)(h.size));var y=(0,u.d)(p,(0,l.i)(h.shape)),b=(0,a.p)((0,d.S)((0,c.Q)(y,(0,f.i)(0))),"float32");return(0,i.h)((0,d.S)(v),b)}throw Error("Unknown reduction: ".concat(n))}})},14756:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(48354),a=n(36147),i=n(47627),o=n(30651),s=n(38640),u=n(27067),c=n(84774),l=n(40227),h=n(9498);var f=(0,s.op)({cosineDistance_:function(t,e,n,s){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.I.SUM_BY_NONZERO_WEIGHTS,d=(0,r._1)(t,"labels","cosineDistance"),p=(0,r._1)(e,"predictions","cosineDistance"),v=null;null!=s&&(v=(0,r._1)(s,"weights","cosineDistance")),(0,a.k5)(d.shape,p.shape,"Error in cosineDistance: ");var g=(0,u.i)(1),m=(0,c.l)(g,(0,l.S)((0,o.d)(d,p),n,!0));return(0,h.m)(m,v,f)}})},14723:function(t,e,n){"use strict";n.d(e,{O:function(){return f}});var r=n(48354),a=n(36147),i=n(47627),o=n(30651),s=n(38640),u=n(17539),c=n(27067),l=n(84774),h=n(9498);var f=(0,s.op)({hingeLoss_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.I.SUM_BY_NONZERO_WEIGHTS,f=(0,r._1)(t,"labels","hingeLoss"),d=(0,r._1)(e,"predictions","hingeLoss"),p=null;null!=n&&(p=(0,r._1)(n,"weights","hingeLoss")),(0,a.k5)(f.shape,d.shape,"Error in hingeLoss: ");var v=(0,c.i)(1);f=(0,l.l)((0,o.d)((0,c.i)(2),f),v);var g=(0,u.U)((0,l.l)(v,(0,o.d)(f,d)));return(0,h.m)(g,p,s)}})},16537:function(t,e,n){"use strict";n.d(e,{H:function(){return v}});var r=n(48354),a=n(36147),i=n(7613),o=n(43312),s=n(47627),u=n(82273),c=n(30651),l=n(38640),h=n(27067),f=n(7391),d=n(84774),p=n(9498);var v=(0,l.op)({huberLoss_:function(t,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.I.SUM_BY_NONZERO_WEIGHTS,g=(0,r._1)(t,"labels","huberLoss"),m=(0,r._1)(e,"predictions","huberLoss"),y=null;null!=n&&(y=(0,r._1)(n,"weights","huberLoss")),(0,a.k5)(g.shape,m.shape,"Error in huberLoss: ");var b=(0,h.i)(l),w=(0,i.W)((0,d.l)(m,g)),x=(0,u.L)(w,b),k=(0,d.l)(w,x),I=(0,o.I)((0,c.d)((0,h.i)(.5),(0,f.h)(x)),(0,c.d)(b,k));return(0,p.m)(I,y,v)}})},28480:function(t,e,n){"use strict";n.d(e,{g:function(){return p}});var r=n(48354),a=n(36147),i=n(43312),o=n(40378),s=n(47627),u=n(30651),c=n(4362),l=n(38640),h=n(27067),f=n(84774),d=n(9498);var p=(0,l.op)({logLoss_:function(t,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.I.SUM_BY_NONZERO_WEIGHTS,v=(0,r._1)(t,"labels","logLoss"),g=(0,r._1)(e,"predictions","logLoss"),m=null;null!=n&&(m=(0,r._1)(n,"weights","logLoss")),(0,a.k5)(v.shape,g.shape,"Error in logLoss: ");var y=(0,h.i)(1),b=(0,h.i)(l),w=(0,c.W)((0,u.d)(v,(0,o.c)((0,i.I)(g,b)))),x=(0,u.d)((0,f.l)(y,v),(0,o.c)((0,i.I)((0,f.l)(y,g),b))),k=(0,f.l)(w,x);return(0,d.m)(k,m,p)}})},74997:function(t,e,n){"use strict";n.d(e,{F:function(){return c}});var r=n(48354),a=n(36147),i=n(47627),o=n(38640),s=n(7993),u=n(9498);var c=(0,o.op)({meanSquaredError_:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.I.SUM_BY_NONZERO_WEIGHTS,c=(0,r._1)(t,"labels","meanSquaredError"),l=(0,r._1)(e,"predictions","meanSquaredError"),h=null;null!=n&&(h=(0,r._1)(n,"weights","meanSquaredError")),(0,a.k5)(c.shape,l.shape,"Error in meanSquaredError: ");var f=(0,s.$)(c,l);return(0,u.m)(f,h,o)}})},66315:function(t,e,n){"use strict";n.d(e,{f:function(){return m}});var r=n(48354),a=n(36147),i=n(7613),o=n(43312),s=n(411),u=n(95341),c=n(47627),l=n(30651),h=n(4362),f=n(38640),d=n(17539),p=n(27067),v=n(84774),g=n(9498);var m=(0,f.op)({sigmoidCrossEntropy_:function(t,e,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.I.SUM_BY_NONZERO_WEIGHTS,y=(0,r._1)(t,"multiClassLabels","sigmoidCrossEntropy"),b=(0,r._1)(e,"logits","sigmoidCrossEntropy"),w=null;if(null!=n&&(w=(0,r._1)(n,"weights","sigmoidCrossEntropy")),(0,a.k5)(y.shape,b.shape,"Error in sigmoidCrossEntropy: "),f>0){var x=(0,p.i)(f),k=(0,p.i)(1),I=(0,p.i)(.5);y=(0,o.I)((0,l.d)(y,(0,v.l)(k,x)),(0,l.d)(I,x))}var S=function(t,e){var n=(0,r._1)(t,"labels","sigmoidCrossEntropyWithLogits"),c=(0,r._1)(e,"logits","sigmoidCrossEntropyWithLogits");(0,a.k5)(n.shape,c.shape,"Error in sigmoidCrossEntropyWithLogits: ");var f=(0,d.U)(c),p=(0,l.d)(c,n),g=(0,u.K)((0,s.Q)((0,h.W)((0,i.W)(c))));return(0,o.I)((0,v.l)(f,p),g)}(y,b);return(0,g.m)(S,w,m)}})},35993:function(t,e,n){"use strict";n.d(e,{E:function(){return k}});var r=n(29439),a=n(66450),i=n(48354),o=n(36147),s=n(43312),u=n(88473),c=n(99118),l=n(15750),h=n(411),f=n(15530),d=n(47627),p=n(30651),v=n(4362),g=n(38640),m=n(75561),y=n(27067),b=n(84774),w=n(40227),x=n(9498);var k=(0,g.op)({softmaxCrossEntropy_:function(t,e,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.I.SUM_BY_NONZERO_WEIGHTS,I=(0,i._1)(t,"onehotLabels","softmaxCrossEntropy"),S=(0,i._1)(e,"logits","softmaxCrossEntropy"),_=null;if(null!=n&&(_=(0,i._1)(n,"weights","softmaxCrossEntropy")),(0,o.k5)(I.shape,S.shape,"Error in softmaxCrossEntropy: "),g>0){var C=(0,y.i)(g),E=(0,y.i)(1),A=(0,y.i)(I.shape[1]);I=(0,s.I)((0,p.d)(I,(0,b.l)(E,C)),(0,l.h)(C,A))}var T=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(e.rank," ")+"and dim was ".concat(n));var i=(0,a.cb)((function(t,e,a){var i=(0,f.l)(e,[n],!0),o=(0,b.l)((0,c.p)(e,"float32"),i);a([t,o]);var s=(0,v.W)((0,p.d)(o,t));return{value:(0,w.S)(s,[n]),gradFunc:function(t,e){var a=(0,r.Z)(e,2),i=a[0],o=a[1],s=(0,u.rv)(t.shape,[n]);return[(0,p.d)((0,m.X)(t,s),(0,b.l)((0,c.p)(i,"float32"),(0,h.Q)(o))),(0,p.d)((0,m.X)(t,s),(0,b.l)((0,h.Q)(o),(0,c.p)(i,"float32")))]}}}));return i(t,e)}(I,S);return(0,x.m)(T,_,k)}})},57221:function(t,e,n){"use strict";n.d(e,{O:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({matMul_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,s._1)(t,"a","matMul"),l=(0,s._1)(e,"b","matMul"),h=(0,o.makeTypesMatch)(c,l),f=(0,r.Z)(h,2),d={a:c=f[0],b:l=f[1]},p={transposeA:n,transposeB:u};return a.BV.runKernel(i.XLW,d,p)}})},56176:function(t,e,n){"use strict";n.d(e,{F:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({max_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={x:(0,i._1)(t,"x","max")},s={reductionIndices:e,keepDims:n};return r.BV.runKernel(a.YoZ,o,s)}})},85777:function(t,e,n){"use strict";n.d(e,{_:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({maxPool_:function(t,e,n,u,l){var h=(0,i._1)(t,"x","maxPool"),f=h,d=!1;3===h.rank&&(d=!0,f=(0,c.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.hu(4===f.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(f.rank,".")})),o.hu(s.jT(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),s.m("maxPool",u,l);var p={x:f},v={filterSize:e,strides:n,pad:u,dimRoundingMode:l},g=r.BV.runKernel(a.mTV,p,v);return d?(0,c.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},39185:function(t,e,n){"use strict";n.d(e,{Y:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({maxPool3d_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",f=(0,i._1)(t,"x","maxPool3d"),d=f,p=!1;4===f.rank&&(p=!0,d=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.hu(5===d.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(d.rank,".")})),o.hu("NDHWC"===h,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(h)})),(0,s.m)("maxPool3d",u,l);var v={x:d},g={filterSize:e,strides:n,pad:u,dimRoundingMode:l,dataFormat:h},m=r.BV.runKernel(a.OAf,v,g);return p?(0,c.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},24068:function(t,e,n){"use strict";n.d(e,{x:function(){return l}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151),u=n(38640),c=n(75561);var l=(0,u.op)({maxPool3dGrad_:function(t,e,n,u,l,h,f){var d=(0,i._1)(t,"dy","maxPool3dGrad"),p=(0,i._1)(e,"input","maxPool3dGrad"),v=(0,i._1)(n,"output","maxPool3dGrad"),g=d,m=p,y=v,b=!1;4===p.rank&&(b=!0,g=(0,c.X)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]]),m=(0,c.X)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]]),y=(0,c.X)(v,[1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]])),o.hu(5===g.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(g.rank,".")})),o.hu(5===m.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(m.rank,".")})),o.hu(5===y.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(y.rank,".")})),(0,s.m)("maxPool3dGrad",h,f);var w={dy:g,input:m,output:y},x={filterSize:u,strides:l,pad:h,dimRoundingMode:f},k=r.BV.runKernel(a.OU7,w,x);return b?(0,c.X)(k,[k.shape[1],k.shape[2],k.shape[3],k.shape[4]]):k}})},1266:function(t,e,n){"use strict";n.d(e,{z:function(){return u}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147),s=n(39151);var u=(0,n(38640).op)({maxPoolGrad_:function(t,e,n,u,c,l,h){var f=(0,i._1)(t,"dy","maxPoolGrad"),d=(0,i._1)(e,"input","maxPoolGrad"),p=(0,i._1)(n,"output","maxPoolGrad");o.hu(d.rank===f.rank,(function(){return"Rank of input (".concat(d.rank,") does not match rank of dy ")+"(".concat(f.rank,")")})),o.hu(4===f.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(f.rank,".")})),o.hu(4===d.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(d.rank,".")})),s.m("maxPoolGrad",l,h);var v={dy:f,input:d,output:p},g={filterSize:u,strides:c,pad:l,dimRoundingMode:h};return r.BV.runKernel(a.OV7,v,g)}})},70705:function(t,e,n){"use strict";n.d(e,{g:function(){return l}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774),c=n(99118);var l=(0,n(38640).op)({maximum_:function(t,e){var n=(0,s._1)(t,"a","maximum"),l=(0,s._1)(e,"b","maximum"),h=(0,o.makeTypesMatch)(n,l),f=(0,r.Z)(h,2);n=f[0],l=f[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var d={a:n,b:l};return a.BV.runKernel(i.BMI,d)}})},6568:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({mean_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={x:(0,i._1)(t,"x","mean")},s={axis:e,keepDims:n};return r.BV.runKernel(a.q2K,o,s)}})},77891:function(t,e,n){"use strict";n.d(e,{V:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({min_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={x:(0,i._1)(t,"x","min")},s={axis:e,keepDims:n};return r.BV.runKernel(a.c17,o,s)}})},82273:function(t,e,n){"use strict";n.d(e,{L:function(){return l}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774),c=n(99118);var l=(0,n(38640).op)({minimum_:function(t,e){var n=(0,s._1)(t,"a","minimum"),l=(0,s._1)(e,"b","minimum"),h=(0,o.makeTypesMatch)(n,l),f=(0,r.Z)(h,2);n=f[0],l=f[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var d={a:n,b:l};return a.BV.runKernel(i.q8u,d)}})},27613:function(t,e,n){"use strict";n.d(e,{V:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({mirrorPad_:function(t,e,n){o.hu("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var s=(0,i._1)(t,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.hu(e.length===s.rank,(function(){return"Padding doesn't match input. Must be ".concat(s.rank,". ")+"Got ".concat(e.length,".")}));for(var u="reflect"===n?1:0,c=function(t){o.hu(2===e[t].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.hu(e[t][0]>=0&&e[t][0]<=s.shape[t]-u&&e[t][1]>=0&&e[t][1]<=s.shape[t]-u,(function(){return"Padding in dimension ".concat(t," cannot be greater than or equal ")+"to ".concat(s.shape[t]-u," or less than 0 for input of ")+"shape ".concat(s.shape)}))},l=0;l<s.rank;l++)c(l);var h={paddings:e,mode:n},f={x:s};return r.BV.runKernel(a.jQs,f,h)}})},84645:function(t,e,n){"use strict";n.d(e,{w:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({mod_:function(t,e){var n=(0,s._1)(t,"a","mod"),u=(0,s._1)(e,"b","mod"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.Vbg,h)}})},92135:function(t,e,n){"use strict";n.d(e,{G:function(){return f}});var r=n(48354),a=n(36147),i=n(88473),o=n(99118),s=n(6568),u=n(38640),c=n(75561),l=n(7391),h=n(84774);var f=(0,u.op)({moments_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=(0,r._1)(t,"x","moments");var u=(0,a.EC)(e,t.shape),f=(0,s.J)(t,u,n),d=f.shape;n||(d=(0,i.rv)(f.shape,u));var p=(0,l.h)((0,h.l)((0,o.p)(t,"float32"),(0,c.X)(f,d)));return{mean:f,variance:(0,s.J)(p,u,n)}}})},30651:function(t,e,n){"use strict";n.d(e,{d:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({mul_:function(t,e){var n=(0,s._1)(t,"a","mul"),u=(0,s._1)(e,"b","mul"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.wYn,h)}})},4362:function(t,e,n){"use strict";n.d(e,{W:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({neg_:function(t){var e={x:(0,i._1)(t,"x","neg")};return r.BV.runKernel(a.kuV,e)}})},7384:function(t,e,n){"use strict";n.d(e,{e:function(){return a}});var r=n(36147);function a(t,e,n,a,i,o){null==a&&(a=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);var s=t.shape[0];return n=Math.min(n,s),r.hu(0<=a&&a<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(a,"'")})),r.hu(2===t.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(t.rank,"'")})),r.hu(4===t.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(t.shape[1])})),r.hu(1===e.rank,(function(){return"scores must be a 1D tensor"})),r.hu(e.shape[0]===s,(function(){return"scores has incompatible shape with boxes. Expected ".concat(s,", ")+"but was ".concat(e.shape[0])})),r.hu(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:a,scoreThreshold:i,softNmsSigma:o}}},56662:function(t,e,n){"use strict";n.d(e,{K:function(){return m}});var r=n(48354),a=n(36147),i=n(7613),o=n(88473),s=n(56176),u=n(77891),c=n(38640),l=n(44334),h=n(75561),f=n(27067),d=n(46902),p=n(7391),v=n(40227);function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t.rank)return(0,i.W)(t);if(1!==t.rank&&null===n)return g((0,h.X)(t,[-1]),e,n);if(1===t.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===e)return(0,v.S)((0,i.W)(t),n);if(e===1/0)return(0,s.F)((0,i.W)(t),n);if(e===-1/0)return(0,u.V)((0,i.W)(t),n);if("euclidean"===e||2===e)return(0,d._)((0,v.S)((0,l.s)((0,i.W)(t),(0,f.i)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}if(Array.isArray(n)&&2===n.length){if(1===e)return(0,s.F)((0,v.S)((0,i.W)(t),n[0]),n[1]-1);if(e===1/0)return(0,s.F)((0,v.S)((0,i.W)(t),n[1]),n[0]);if(e===-1/0)return(0,u.V)((0,v.S)((0,i.W)(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return(0,d._)((0,v.S)((0,p.h)(t),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}throw new Error("Error in norm: invalid axis: ".concat(n))}var m=(0,c.op)({norm_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=g(t=(0,r._1)(t,"x","norm"),e,n),u=s.shape;if(i){var c=(0,a.EC)(n,t.shape);u=o.rv(s.shape,c)}return(0,h.X)(s,u)}})},15549:function(t,e,n){"use strict";n.d(e,{Q:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({notEqual_:function(t,e){var n=(0,s._1)(t,"a","notEqual","string_or_numeric"),c=(0,s._1)(e,"b","notEqual","string_or_numeric"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i.yQU,f)}})},34326:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({oneHot_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(e));var u={indices:(0,i._1)(t,"indices","oneHot","int32")},c={dtype:s,depth:e,onValue:n,offValue:o};return r.BV.runKernel(a.we_,u,c)}})},86100:function(t,e,n){"use strict";n.d(e,{i:function(){return s}});var r=n(50391),a=n(36147),i=n(59253),o=n(87742);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if((0,a.Mu)(t),"complex64"===e){var n=s(t,"float32"),u=(0,o.l)(t,"float32");return(0,i.P)(n,u)}var c=(0,a.p8)((0,a.NA)(t),e);return r.BV.makeTensor(c,t,e)}},20773:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({onesLike_:function(t){var e={x:(0,i._1)(t,"x","onesLike")};return r.BV.runKernel(a.qWM,e)}})},38640:function(t,e,n){"use strict";n.d(e,{op:function(){return o}});var r=n(50391),a=n(36147),i="__op";function o(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(e.length," keys."));var n=e[0],o=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var s=function(){r.BV.startScope(n);try{var t=o.apply(void 0,arguments);return(0,a.tI)(t)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(t),t}catch(e){throw r.BV.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},71970:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({pad_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(0,i._1)(t,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:e,constantValue:n},u={x:o};return r.BV.runKernel(a.lyA,u,s)}})},57226:function(t,e,n){"use strict";n.d(e,{d:function(){return d}});var r=n(29439),a=n(48354),i=n(36147),o=n(49204),s=n(36994),u=n(39151),c=n(85777),l=n(38640),h=n(75561),f=n(65696);var d=(0,l.op)({pool_:function(t,e,n,l,d,p,v){null==d&&(d=[1,1]),null==p&&(p=1),0===l&&(l="valid");var g=(0,a._1)(t,"x","maxPool"),m=g,y=!1;3===g.rank&&(y=!0,m=(0,h.X)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),i.hu(u.jT(p,d),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(p," and dilations '").concat(d,"'")}));var b,w=u.Xw(m.shape,e,p,d,l),x=[w.dilationHeight,w.dilationWidth];b="same"===l?function(t,e){var n=t.map((function(t,n){return t+(t-1)*(e[n]-1)})),r=n.map((function(t){return t-1})),a=r.map((function(t){return Math.floor(t/2)})),i=r.map((function(t,e){return t-a[e]}));return r.map((function(t,e){return[a[e],i[e]]}))}([w.filterHeight,w.filterWidth],x):[[0,0],[0,0]];var k=1===x[0]&&1===x[1],I=function(t,e,n){var r=n.map((function(t){return t[0]})),a=n.map((function(t){return t[1]})),i=t.concat(r,a),o=e.map((function(t,e){return(t-i[e]%t)%t})),s=a.map((function(t,e){return t+o[e]})),u=e.map((function(t,e){return[r[e],s[e]]})),c=e.map((function(t,e){return[0,o[e]]}));return[u,c]}([w.inHeight,w.inWidth],x,b),S=(0,r.Z)(I,2),_=S[0],C=S[1],E=k?l:"valid",A=k?m:(0,f.f)(m,x,_),T=("avg"===n?function(){return(0,o.w)(A,e,p,E,v)}:function(){return(0,c._)(A,e,p,E,v)})(),N=k?T:(0,s.E)(T,x,C);return y?(0,h.X)(N,[N.shape[1],N.shape[2],N.shape[3]]):N}})},44334:function(t,e,n){"use strict";n.d(e,{s:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({pow_:function(t,e){var n=(0,s._1)(t,"base","pow"),u=(0,s._1)(e,"exp","pow"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.pe_,h)}})},96859:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({prelu_:function(t,e){var n={x:(0,i._1)(t,"x","prelu"),alpha:(0,i._1)(e,"alpha","prelu")};return r.BV.runKernel(a.o0g,n)}})},64600:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(t.toString(e))}n.d(e,{S:function(){return r}})},67722:function(t,e,n){"use strict";n.d(e,{W:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(99118);var s=(0,n(38640).op)({prod_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,i._1)(t,"x","prod");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));var u={x:s},c={axis:e,keepDims:n};return r.BV.runKernel(a.DlI,u,c)}})},29499:function(t,e,n){"use strict";n.d(e,{Qd:function(){return i},Qh:function(){return s},Ys:function(){return u},b2:function(){return r},zb:function(){return o}});var r,a=n(37762);function i(t,e,n){var r=new Array;if(null==n&&null==e)return r;if(null==e)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(null==n)return r;if(t+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(e," are incompatible: rt input.rank = ").concat(t+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(e," are incompatible: rt input.shape[").concat(a+t,"] = ").concat(i," but shape[").concat(a+t,"] = ").concat(s))}else r[o]=i}return r}function o(t){var e,n={FIRST_DIM_SIZE:r.FIRST_DIM_SIZE,VALUE_ROWIDS:r.VALUE_ROWIDS,ROW_LENGTHS:r.ROW_LENGTHS,ROW_SPLITS:r.ROW_SPLITS,ROW_LIMITS:r.ROW_LIMITS,ROW_STARTS:r.ROW_STARTS},i=[],o=(0,a.Z)(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(!(s in n))break;i.push(n[s])}}catch(u){o.e(u)}finally{o.f()}return i}function s(t){return 0===t.length?0:t[0]===r.FIRST_DIM_SIZE?t.length-1:t.length}function u(t,e){if(null!=t&&null!=e){var n=t.length,r=e.length;if(n>=r)throw new Error("defaultValue.shape=".concat(t," and ragged tensor flatValues.shape=").concat(e,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=t[a],o=e[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(t,", and ragged tensor input flatValues.shape=").concat(e," are incompatible: defaultValue.shape[").concat(a-t.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-t.length,"] = ").concat(o))}}}!function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"}(r||(r={}))},14466:function(t,e,n){"use strict";n.d(e,{Yi:function(){return o},wv:function(){return s}});var r=n(15671),a=n(43144),i=n(96699),o=function(){function t(e,n,a,o,s){(0,r.Z)(this,t),this.mean=e,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=s||Math.random();this.random=i.alea(u.toString())}return(0,a.Z)(t,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)}},{key:"convertValue",value:function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}},{key:"isValidTruncated",value:function(t){return t<=this.upper&&t>=this.lower}}]),t}(),s=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if((0,r.Z)(this,t),this.canReturnFloat=function(){return null==e.dtype||"float32"===e.dtype},this.min=n,this.range=a-n,this.dtype=o,null==s&&(s=Math.random()),"number"===typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=i.alea(s)}return(0,a.Z)(t,[{key:"convertValue",value:function(t){return this.canReturnFloat()?t:Math.round(t)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),t}()},48953:function(t,e,n){"use strict";n.d(e,{n:function(){return s}});var r=n(36147),a=n(77039),i=n(38640),o=n(14466);var s=(0,i.op)({randomNormal_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if((0,r.Mu)(t),null!=i&&"bool"===i)throw new Error("Unsupported data type ".concat(i));for(var u=new o.Yi(e,n,i,!1,s),c=(0,a.f)(t,i),l=0;l<c.values.length;l++)c.values[l]=u.nextValue();return c.toTensor()}})},16407:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var r=n(36147),a=n(77039),i=n(38640),o=n(14466);var s=(0,i.op)({randomUniform_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",s=arguments.length>4?arguments[4]:void 0;(0,r.Mu)(t);for(var u=(0,a.f)(t,i),c=new o.wv(e,n,null,s),l=0;l<u.values.length;l++)u.values[l]=c.nextValue();return u.toTensor()}})},422:function(t,e,n){"use strict";n.d(e,{w:function(){return i}});var r=n(50391),a=n(32145);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var o={start:t,stop:e,step:n,dtype:i};return r.BV.runKernel(a.e6w,{},o)}},26972:function(t,e,n){"use strict";n.d(e,{k:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({real_:function(t){var e={input:(0,i._1)(t,"input","real")};return r.BV.runKernel(a.xJR,e)}})},12209:function(t,e,n){"use strict";n.d(e,{M:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({reciprocal_:function(t){var e={x:(0,i._1)(t,"x","reciprocal")};return r.BV.runKernel(a.$HU,e)}})},60127:function(t,e,n){"use strict";n.d(e,{A:function(){return i},g:function(){return a}});var r=n(36147),a=30;function i(t){return t<=a?t:(0,r.jP)(t,Math.floor(Math.sqrt(t)))}},17539:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({relu_:function(t){var e={x:(0,i._1)(t,"x","relu")};return r.BV.runKernel(a.qkr,e)}})},65900:function(t,e,n){"use strict";n.d(e,{b:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({relu6_:function(t){var e={x:(0,i._1)(t,"x","relu6")};return r.BV.runKernel(a.SbG,e)}})},75561:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({reshape_:function(t,e){var n={x:(0,i._1)(t,"x","reshape","string_or_numeric")},o={shape:e};return r.BV.runKernel(a.HZH,n,o)}})},34933:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({reverse_:function(t,e){var n={x:(0,i._1)(t,"x","reverse")},o={dims:e};return r.BV.runKernel(a.mKl,n,o)}})},13922:function(t,e,n){"use strict";function r(t,e,n){return[n*("number"===typeof t?t:t[0]),e*("number"===typeof t?t:t[1])]}n.d(e,{Q:function(){return r}})},60766:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({round_:function(t){var e={x:(0,i._1)(t,"x","round")};return r.BV.runKernel(a.e07,e)}})},65115:function(t,e,n){"use strict";n.d(e,{b:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({rsqrt_:function(t){var e={x:(0,i._1)(t,"x","rsqrt","float32")};return r.BV.runKernel(a.bV0,e)}})},27067:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(58860),a=n(77960);function i(t,e){if(((0,r.isTypedArray)(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(t,[],[],e)}},48604:function(t,e,n){"use strict";n.d(e,{SU:function(){return s},b0:function(){return o},l5:function(){return i}});var r=n(93433),a=n(36147);function i(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(e.shape,", shape: ").concat(t)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(t.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+t.length-r)throw new Error(i+" update.rank != ".concat(a+t.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(e.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==t[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(t[s+a],")"))}function o(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(e.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: ".concat(e.shape));if(0===t.size)throw new Error("Updates specified for empty output. updates shape: ".concat(t.shape))}i(n,e,t)}function s(t,e,n){for(var i=e.shape.length,o=i>1?e.shape[i-1]:1,s=n.length,u=1,c=o;c<s;++c)u*=n[c];var l=o<1?1:o;return{sliceRank:o,numUpdates:(0,a.NA)(e.shape)/l,sliceSize:u,strides:[].concat((0,r.Z)((0,a.e3)(n.slice(0,o))),[1]),outputSize:(0,a.NA)(n)}}},10521:function(t,e,n){"use strict";n.r(e),n.d(e,{collectGatherOpShapeInfo:function(){return s},computeOutShape:function(){return o},segOpComputeOptimalWindowSize:function(){return i}});var r=n(36147),a=n(60127);function i(t,e){var n,i=!1;for(t<=a.g?(n=t,i=!0):n=(0,r.jP)(t,Math.floor(Math.sqrt(t)));!i;)n>e||n===t?i=!0:n=(0,r.jP)(t,n+1);return n}function o(t,e,n){for(var r=[],a=t.length,i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function s(t,e,n,r){var a=e.shape.length,i=t.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(t.shape[o]!==e.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(t.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(e.shape[o],"."));for(var s=t.shape[n],u=[],c=1,l=1,h=1,f=0;f<r;++f)u.push(t.shape[f]),c*=t.shape[f];for(var d=r;d<n;d++)u.push(t.shape[d]),l*=t.shape[d];for(var p=r;p<a;p++)u.push(e.shape[p]);for(var v=n+1;v<i;v++)u.push(t.shape[v]),h*=t.shape[v];return{batchSize:c,sliceSize:h,outerSize:l,dimSize:s,outputShape:u}}},20413:function(t,e,n){"use strict";n.d(e,{U:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({selu_:function(t){var e={x:(0,i._1)(t,"x","selu")};return r.BV.runKernel(a.oFR,e)}})},20349:function(t,e,n){"use strict";n.d(e,{$:function(){return a},y:function(){return r}});var r=1.7580993408473768,a=1.0507009873554805},90119:function(t,e,n){"use strict";n.d(e,{U:function(){return c}});var r=n(48354),a=n(36147),i=n(93457),o=n(61147),s=n(38640),u=n(75561);var c=(0,s.op)({separableConv2d_:function(t,e,n,s,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",f=(0,r._1)(t,"x","separableConv2d"),d=(0,r._1)(e,"depthwiseFilter","separableConv2d"),p=(0,r._1)(n,"pointwiseFilter","separableConv2d"),v=f,g=!1;if(3===f.rank&&(g=!0,v=(0,u.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),"NCHW"===h)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.hu(4===v.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),a.hu(4===d.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(d.rank,".")})),a.hu(4===p.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(d.rank,".")})),a.hu(1===p.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(p.shape[0],".")})),a.hu(1===p.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(p.shape[1],".")}));var m=d.shape[2],y=d.shape[3];a.hu(p.shape[2]===m*y,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(m*y,", ")+"but got ".concat(p.shape[2],".")}));var b=(0,o.B)(v,d,s,c,h,l),w=(0,i.T)(b,p,1,"valid",h);return g?(0,u.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},77643:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sigmoid_:function(t){var e={x:(0,i._1)(t,"x","sigmoid","float32")};return r.BV.runKernel(a.a5O,e)}})},2070:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sign_:function(t){var e={x:(0,i._1)(t,"x","sign")};return r.BV.runKernel(a.i5y,e)}})},86764:function(t,e,n){"use strict";n.d(e,{W:function(){return c}});var r=n(34836),a=n(8582),i=n(38640),o=n(75561),s=n(59238),u=n(77517);var c=(0,i.op)({frame_:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=0,h=[];l+e<=t.size;)h.push((0,s.t)(t,l,e)),l+=n;if(i)for(;l<t.size;){var f=l+e-t.size,d=(0,r.z)([(0,s.t)(t,l,e-f),(0,a.h)([f],c)]);h.push(d),l+=n}return 0===h.length?(0,u.o)([],[0,e]):(0,o.X)((0,r.z)(h),[h.length,e])}})},56044:function(t,e,n){"use strict";n.d(e,{f:function(){return i}});var r=n(38640),a=n(11094);var i=(0,r.op)({hammingWindow_:function(t){return(0,a.m)(t,.54,.46)}})},46460:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var r=n(38640),a=n(11094);var i=(0,r.op)({hannWindow_:function(t){return(0,a.m)(t,.5,.5)}})},41836:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(30651),a=n(38640),i=n(11094),o=n(64617),s=n(86764),u=n(46460);var c=(0,a.op)({stft_:function(t,e,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.l;null==a&&(a=(0,i.G)(e));var l=(0,s.W)(t,e,n),h=(0,r.d)(l,c(e));return(0,o.Q)(h,a)}})},11094:function(t,e,n){"use strict";n.d(e,{G:function(){return a},m:function(){return i}});var r=n(92894);function a(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function i(t,e,n){for(var a=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var s=2*Math.PI*o/(t+a-1);i[o]=e-n*Math.cos(s)}return(0,r.R)(i,"float32")}},87254:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sin_:function(t){var e={x:(0,i._1)(t,"x","sin","float32")};return r.BV.runKernel(a.RQH,e)}})},57657:function(t,e,n){"use strict";n.d(e,{R:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sinh_:function(t){var e={x:(0,i._1)(t,"x","sinh")};return r.BV.runKernel(a.wYB,e)}})},59238:function(t,e,n){"use strict";n.d(e,{t:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({slice_:function(t,e,n){var o=(0,i._1)(t,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var s={x:o},u={begin:e,size:n};return r.BV.runKernel(a.p2w,s,u)}})},27819:function(t,e,n){"use strict";n.d(e,{j:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(59238);var s=(0,i.op)({slice1d_:function(t,e,n){var i=(0,r._1)(t,"x","slice1d");return a.hu(1===i.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(i.rank," tensor")})),(0,o.t)(i,[e],[n])}})},90768:function(t,e,n){"use strict";n.d(e,{S:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(59238);var s=(0,i.op)({slice2d_:function(t,e,n){var i=(0,r._1)(t,"x","slice2d");return a.hu(2===i.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(i.rank," tensor")})),(0,o.t)(i,e,n)}})},17196:function(t,e,n){"use strict";n.d(e,{C:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(59238);var s=(0,i.op)({slice3d_:function(t,e,n){var i=(0,r._1)(t,"x","slice3d");return a.hu(3===i.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(i.rank," tensor")})),(0,o.t)(i,e,n)}})},81948:function(t,e,n){"use strict";n.d(e,{p:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(59238);var s=(0,i.op)({slice4d_:function(t,e,n){var i=(0,r._1)(t,"x","slice4d");return a.hu(4===i.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(i.rank," tensor")})),(0,o.t)(i,e,n)}})},52875:function(t,e,n){"use strict";n.r(e),n.d(e,{assertParamsValid:function(){return s},computeFlatOffset:function(){return w},computeOutShape:function(){return c},getNormalizedAxes:function(){return d},isSliceContinous:function(){return b},maskToAxes:function(){return u},parseSliceParams:function(){return x},sliceInfo:function(){return k},startForAxis:function(){return m},startIndicesWithElidedDims:function(){return p},stopForAxis:function(){return y},stopIndicesWithElidedDims:function(){return v},stridesForAxis:function(){return g},stridesWithElidedDims:function(){return l}});var r=n(93433),a=n(36147),i=-2,o=-1;function s(t,e,n){var r=t.shape.length;a.hu(r===e.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(e," must ")+"match the rank of the array (".concat(r,").")})),a.hu(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var i=function(i){a.hu(e[i]+n[i]<=t.shape[i],(function(){return"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(e[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(t.shape[i],")")}))},o=0;o<r;++o)i(o)}function u(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function c(t,e,n){for(var r=[],a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function l(t,e,n,a){for(var i=(0,r.Z)(t),o=i.length;o<a.length;o++)i.push(1);for(var s=0;s<n;s++)0===s?i[e]=1:(i.splice(e,0,1),i.pop());return i}function h(t,e,n){return n<=t?n:n-(e-1)}function f(t,e){for(var n=[],r=0;r<t;r++)n.push(e+r);return n}function d(t,e,n,r,a,i,o,s,u){var c=t.length,h=new Array(c),f=new Array(c),d=new Array(c);if(e.length&&n>0){var b=e[0],w=n+1;h=p(o,b,w,r,t),f=v(s,b,w,a,t),d=l(i,b,w,t)}else for(var x=0;x<c;x++)h[x]=m(o,r,i,t,x,u),f[x]=y(s,a,i,t,x,u),d[x]=g(i,x,u);return{begin:h,end:f,strides:d}}function p(t,e,n,a,i){for(var o=(0,r.Z)(i),s=f(n,e),u=0;u<o.length;u++)if(s.indexOf(u)>-1)o[u]=0;else{var c=h(e,n,u),l=a[c];t&1<<c&&(l=0),o[u]=l}return o}function v(t,e,n,i,o){for(var s=(0,r.Z)(o),u=f(n,e),c=0;c<s.length;c++)if(u.indexOf(c)>-1)s[c]=Number.MAX_SAFE_INTEGER;else{var l=h(e,n,c),d=i[l];t&1<<l&&(d=Number.MAX_SAFE_INTEGER),s[c]=d}for(var p=0;p<s.length;p++){var v=o[p];s[p]<0&&(s[p]+=v),s[p]=a.uZ(0,s[p],o[p])}return s}function g(t,e,n){var r=t[e];return(n&1<<e||null==r)&&(r=1),r}function m(t,e,n,r,i,o){var s=e[i],u=n[i]||1;(t&1<<i||o&1<<i||null==s)&&(s=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[i];return s<0&&(s+=c),s=a.uZ(0,s,c-1)}function y(t,e,n,r,i,o){var s=e[i],u=n[i]||1;(t&1<<i||o&1<<i||null==s)&&(s=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[i];return s<0&&(s+=c),s=u>0?a.uZ(0,s,c):a.uZ(-1,s,c-1)}function b(t,e,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function w(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function x(t,e,n){var i,o,s=t.shape.length;return(i="number"===typeof e?[e].concat((0,r.Z)(new Array(s-1).fill(0))):e.length<s?e.concat(new Array(s-e.length).fill(0)):e.slice()).forEach((function(t){a.hu(-1!==t,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(s).fill(-1):"number"===typeof n?[n].concat((0,r.Z)(new Array(s-1).fill(-1))):n.length<s?n.concat(new Array(s-n.length).fill(-1)):n).map((function(e,n){return e>=0?e:(a.hu(-1===e,(function(){return"Negative size values should be exactly -1 but got "+"".concat(e," for the slice() size at index ").concat(n,".")})),t.shape[n]-i[n])})),[i,o]}function k(t,e,n,r,a,s,u,c,l){var h;if(null==r?(h=new Array(e.length)).fill(1):h=r,null!=u&&0!==(u&u-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var f=!1,d={dims:h.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:h.slice(),beginMask:a,endMask:s,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:l},p=0;p<d.dims;p++)f&&0!==(1<<p&c)&&d.numAddAxisAfterEllipsis++,1<<p&u&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);var v={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;var n=0;e.beginValid=null!=t.begin,e.endValid=null!=t.end,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(var r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask)for(var a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(i),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(e.dims," dims, ").concat(e.begin.length,"."));null!=t.begin&&(e.begin[n]=t.begin[r]),null!=t.end&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(o),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}(d,v);for(var g=!0,m=!0,y=!0,b=[],w=[],x=0;x<t.length;++x){if(0===v.strides[x])throw Error("strides[".concat(x,"] must be non-zero"));var k=!!(v.shrinkAxisMask&1<<x),S=t[x];if(-1!==S){var _=[v.beginMask&1<<x,v.endMask&1<<x],C=[v.strides[x]>0?0:-1,v.strides[x]>0?S:S-1];if(k&&v.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&1===v.strides[x];var E=!!(v.beginMask&1<<x&&v.endMask&1<<x);if(v.beginValid&&v.endValid){if(k){var A=v.begin[x]<0?S+v.begin[x]:v.begin[x];if(v.begin[x]=A,v.end[x]=v.begin[x]+1,A<0||A>=S)throw Error("slice index ".concat(v.begin[x]," of dimension ").concat(x," out of bounds."))}else v.begin[x]=I(v.begin[x],0,v.strides[x],S,_,C),v.end[x]=I(v.end[x],1,v.strides[x],S,_,C);var T=1===v.strides[x]&&0===v.begin[x]&&v.end[x]===S;g=g&&T,m=m&&(0===x&&1===v.strides[x]||T)}else g=g&&1===v.strides[x]&&E,m=m&&(0===x&&1===v.strides[x]||E);var N=void 0,D=!1;if(v.beginValid&&v.endValid?(N=v.end[x]-v.begin[x],D=!0):k?(N=1,D=!0):E&&S>=0&&(N=v.strides[x]<0?-S:S,D=!0),D){var R=void 0;R=0===N||N<0!==v.strides[x]<0?0:Math.trunc(N/v.strides[x])+(N%v.strides[x]!==0?1:0),b.push(R)}else b.push(-1)}else b.push(k?1:-1)}for(var Z=0;Z<v.finalShapeGatherIndices.length;++Z){var M=v.finalShapeGatherIndices[Z];M>=0?w.push(b[M]):M===i&&w.push(1)}var F=w.filter((function(t,e){return v.finalShapeGatherIndices[e]!==i}));return{finalShapeSparse:F,finalShape:w,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:v.begin,end:v.end,strides:v.strides}}function I(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];var o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}},74910:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({softmax_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,i._1)(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(e));var o={logits:n},s={dim:e};return r.BV.runKernel(a.Gcp,o,s)}})},54626:function(t,e,n){"use strict";n.d(e,{W:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({softplus_:function(t){var e={x:(0,i._1)(t,"x","softplus")};return r.BV.runKernel(a.MRv,e)}})},65696:function(t,e,n){"use strict";n.d(e,{f:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({spaceToBatchND_:function(t,e,n){var s=(0,i._1)(t,"x","spaceToBatchND");o.hu(s.rank>=1+e.length,(function(){return"input rank ".concat(s.rank," should be > than [blockShape] ").concat(e.length)})),o.hu(n.length===e.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(e.length)})),o.hu(s.shape.reduce((function(t,r,a){return a>0&&a<=e.length?t&&(r+n[a-1][0]+n[a-1][1])%e[a-1]===0:t}),!0),(function(){return"input spatial dimensions ".concat(s.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(e.toString())}));var u={x:s},c={blockShape:e,paddings:n};return r.BV.runKernel(a.TQc,u,c)}})},71429:function(t,e,n){"use strict";n.d(e,{M:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sparseFillEmptyRows_:function(t,e,n,o){var s=(0,i._1)(t,"indices","sparseFillEmptyRows","int32"),u=(0,i._1)(e,"values","sparseFillEmptyRows"),c=(0,i._1)(n,"denseShape","sparseFillEmptyRows","int32"),l=(0,i._1)(o,"defaultValue","sparseFillEmptyRows",u.dtype);if(2!==s.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(s.shape));if(1!==u.rank)throw new Error("Values should be Tensor1D but received shape ".concat(u.shape));if(1!==c.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(c.shape));if(0!==l.rank)throw new Error("Default value should be a scalar but received shape ".concat(l.shape));var h={indices:s,values:u,denseShape:c,defaultValue:l},f=r.BV.runKernel(a.O3z,h);return{outputIndices:f[0],outputValues:f[1],emptyRowIndicator:f[2],reverseIndexMap:f[3]}}})},81286:function(t,e,n){"use strict";function r(t){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(t)}function a(t,e){return"indices(".concat(t,", 0) is invalid: ").concat(e," < 0")}function i(t,e,n){return"indices(".concat(t,", 0) is invalid: ").concat(e," >= ").concat(n)}n.d(e,{E3:function(){return a},I_:function(){return i},h:function(){return r}})},62499:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sparseReshape_:function(t,e,n){var o=(0,i._1)(t,"inputIndices","sparseReshape","int32"),s=(0,i._1)(e,"inputShape","sparseReshape","int32"),u=(0,i._1)(n,"newShape","sparseReshape","int32");if(2!==o.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(o.shape));if(1!==s.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(s.shape));if(1!==u.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(u.shape));var c={inputIndices:o,inputShape:s,newShape:u},l=r.BV.runKernel(a.nhH,c);return{outputIndices:l[0],outputShape:l[1]}}})},5559:function(t,e,n){"use strict";n.d(e,{Y6:function(){return i},aY:function(){return u},rP:function(){return o},y5:function(){return a},yv:function(){return s}});var r=n(36147);function a(t,e){return"only one output dimension may be -1, not both ".concat(t," and ").concat(e)}function i(t,e){return"size ".concat(t," must be non-negative, not ").concat(e)}function o(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function s(t,e){var n=(0,r.NA)(t),a=(0,r.NA)(e);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(a,". inputShape=").concat(t," outputShape= ").concat(e)}function u(t,e){var n=(0,r.NA)(t),a=(0,r.NA)(e);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(a,". inputShape=").concat(t," outputShape=").concat(e)}},44461:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sparseSegmentMean_:function(t,e,n){var o=(0,i._1)(t,"data","sparseSegmentMean"),s=(0,i._1)(e,"indices","sparseSegmentMean","int32"),u=(0,i._1)(n,"segmentIds","sparseSegmentMean","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(s.shape));if(1!==u.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(u.shape));var c={data:o,indices:s,segmentIds:u};return r.BV.runKernel(a.w3H,c)}})},14956:function(t,e,n){"use strict";function r(){return"segment ids must be >= 0"}function a(){return"segment ids are not increasing"}function i(t,e){return"Segment id ".concat(t," out of range [0, ").concat(e,"), possibly because segmentIds input is not sorted.")}function o(t,e,n){return"Bad: indices[".concat(t,"] == ").concat(e," out of range [0, ").concat(n,")")}n.d(e,{GW:function(){return i},N5:function(){return r},XL:function(){return a},u6:function(){return o}})},57661:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sparseSegmentSum_:function(t,e,n){var o=(0,i._1)(t,"data","sparseSegmentSum"),s=(0,i._1)(e,"indices","sparseSegmentSum","int32"),u=(0,i._1)(n,"segmentIds","sparseSegmentSum","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(s.shape));if(1!==u.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(u.shape));var c={data:o,indices:s,segmentIds:u};return r.BV.runKernel(a.ZjV,c)}})},37635:function(t,e,n){"use strict";n.d(e,{k:function(){return o}});var r=n(50391),a=n(32145),i=n(36147);var o=(0,n(38640).op)({fft_:function(t){(0,i.hu)("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(t.dtype,".")}));var e={input:t};return r.BV.runKernel(a.vwp,e)}})},50530:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(50391),a=n(32145),i=n(36147);var o=(0,n(38640).op)({ifft_:function(t){(0,i.hu)("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(t.dtype,".")}));var e={input:t};return r.BV.runKernel(a.Qg5,e)}})},774:function(t,e,n){"use strict";n.d(e,{w:function(){return p}});var r=n(59253),a=n(34836),i=n(76996),o=n(30651),s=n(38640),u=n(26972),c=n(75561),l=n(34933),h=n(27067),f=n(59238),d=n(50530);var p=(0,s.op)({irfft_:function(t){var e,n=t.shape[t.shape.length-1],s=t.size/n;if(n<=2){var p=(0,c.X)(t,[s,n]);e=(0,d.S)(p)}else{var v=[s,2*(n-1)],g=(0,c.X)((0,u.k)(t),[s,n]),m=(0,c.X)((0,i.a)(t),[s,n]),y=(0,l.G)((0,f.t)(g,[0,1],[s,n-2]),1),b=(0,o.d)((0,l.G)((0,f.t)(m,[0,1],[s,n-2]),1),(0,h.i)(-1)),w=(0,a.z)([g,y],1),x=(0,a.z)([m,b],1),k=(0,c.X)((0,r.P)(w,x),[v[0],v[1]]);e=(0,d.S)(k)}if(e=(0,u.k)(e),3===t.rank&&0!==t.shape[0]){var I=e,S=t.shape[0];e=(0,c.X)(e,[S,e.shape[0]/S,e.shape[1]]),I.dispose()}return e}})},64617:function(t,e,n){"use strict";n.d(e,{Q:function(){return v}});var r=n(36147),a=n(59253),i=n(34836),o=n(76996),s=n(38640),u=n(26972),c=n(75561),l=n(59238),h=n(82588),f=n(87742),d=n(87293),p=n(37635);var v=(0,s.op)({rfft_:function(t,e){(0,r.hu)("float32"===t.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(t.dtype)}));var n,s=t.shape[t.shape.length-1],v=t.size/s;if(null!=e&&e<s){var g=t.shape.map((function(t){return 0})),m=t.shape.map((function(t){return t}));m[t.shape.length-1]=e,n=(0,l.t)(t,g,m),s=e}else if(null!=e&&e>s){var y=t.shape.map((function(t){return t}));y[t.shape.length-1]=e-s,n=(0,i.z)([t,(0,f.l)(y)],t.shape.length-1),s=e}else n=t;var b=(0,d.P)(n),w=(0,c.X)((0,a.P)(n,b),[v,s]),x=(0,p.k)(w),k=Math.floor(s/2)+1,I=(0,u.k)(x),S=(0,o.a)(x),_=(0,h.V)(I,[k,s-k],I.shape.length-1),C=(0,h.V)(S,[k,s-k],S.shape.length-1),E=n.shape.slice();return E[n.shape.length-1]=k,(0,c.X)((0,a.P)(_[0],C[0]),E)}})},82588:function(t,e,n){"use strict";n.d(e,{V:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({split_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o={x:(0,i._1)(t,"x","split")},s={numOrSizeSplits:e,axis:n};return r.BV.runKernel(a.L8s,o,s)}})},13165:function(t,e,n){"use strict";n.d(e,{O:function(){return a}});var r=n(36147);function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=[];if("number"===typeof e)(0,r.hu)(t.shape[n]%e===0,(function(){return"Number of splits must evenly divide the axis."})),a=new Array(e).fill(t.shape[n]/e);else{var i=e.reduce((function(t,e){return-1===e&&(t+=1),t}),0);(0,r.hu)(i<=1,(function(){return"There should be only one negative value in split array."}));var o=e.indexOf(-1);if(-1!==o){var s=e.reduce((function(t,e){return e>0?t+e:t}));e[o]=t.shape[n]-s}(0,r.hu)(t.shape[n]===e.reduce((function(t,e){return t+e})),(function(){return"The sum of sizes must match the size of the axis dimension."})),a=e}return a}},46902:function(t,e,n){"use strict";n.d(e,{_:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({sqrt_:function(t){var e={x:(0,i._1)(t,"x","sqrt","float32")};return r.BV.runKernel(a.FKq,e)}})},7391:function(t,e,n){"use strict";n.d(e,{h:function(){return i}});var r=n(50391),a=n(48354);var i=(0,n(38640).op)({square_:function(t){var e=(0,a._1)(t,"x","square");return r.BV.runKernel("Square",{x:e},{})}})},7993:function(t,e,n){"use strict";n.d(e,{$:function(){return c}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354),u=n(45774);var c=(0,n(38640).op)({squaredDifference_:function(t,e){var n=(0,s._1)(t,"a","squaredDifference"),c=(0,s._1)(e,"b","squaredDifference"),l=(0,o.makeTypesMatch)(n,c),h=(0,r.Z)(l,2);n=h[0],c=h[1],(0,u.assertAndGetBroadcastShape)(n.shape,c.shape);var f={a:n,b:c};return a.BV.runKernel(i._tC,f,{})}})},83931:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var r=n(48354),a=n(36147),i=n(38640),o=n(75561);var s=(0,i.op)({squeeze_:function(t,e){var n=(0,r._1)(t,"x","squeeze","string_or_numeric");return(0,o.X)(n,(0,a.bp)(n.shape,e).newShape)}})},18306:function(t,e,n){"use strict";n.d(e,{k:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({stack_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i.sI)(t,"tensors","stack","string_or_numeric");o.hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.hu(e<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var s=n,u={axis:e};return r.BV.runKernel(a.QiL,s,u)}})},94031:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({step_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:(0,i._1)(t,"x","step")},o={alpha:e};return r.BV.runKernel(a.h8e,n,o)}})},39017:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({stridedSlice_:function(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f={x:(0,i._1)(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:o,beginMask:s,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:h};return r.BV.runKernel(a.jQk,f,d)}})},35251:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({stringNGrams_:function(t,e,n,o,s,u,c,l){var h=(0,i._1)(t,"data","stringNGrams","string");if("string"!==h.dtype)throw new Error("Data must be of datatype string");if(1!==h.shape.length)throw new Error("Data must be a vector, saw: ".concat(h.shape));var f=(0,i._1)(e,"dataSplits","stringNGrams");if("int32"!==f.dtype)throw new Error("Data splits must be of datatype int32");var d={separator:n,nGramWidths:o,leftPad:s,rightPad:u,padWidth:c,preserveShortSequences:l},p={data:h,dataSplits:f},v=r.BV.runKernel(a._JP,p,d);return{nGrams:v[0],nGramsSplits:v[1]}}})},85871:function(t,e,n){"use strict";n.d(e,{S:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({stringSplit_:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=(0,i._1)(t,"input","stringSplit","string"),s=(0,i._1)(e,"delimiter","stringSplit","string");if(1!==o.rank)throw new Error("Input should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(s.shape));var u={skipEmpty:n},c={input:o,delimiter:s},l=r.BV.runKernel(a.s1s,c,u);return{indices:l[0],values:l[1],shape:l[2]}}})},45202:function(t,e,n){"use strict";n.d(e,{I:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({stringToHashBucketFast_:function(t,e){var n=(0,i._1)(t,"input","stringToHashBucketFast","string"),o={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");var s={input:n};return r.BV.runKernel(a.XkS,s,o)}})},84774:function(t,e,n){"use strict";n.d(e,{l:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(99064),s=n(48354);var u=(0,n(38640).op)({sub_:function(t,e){var n=(0,s._1)(t,"a","sub"),u=(0,s._1)(e,"b","sub"),c=(0,o.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),h={a:n=l[0],b:u=l[1]};return a.BV.runKernel(i.Tr8,h)}})},40227:function(t,e,n){"use strict";n.d(e,{S:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(99118);var s=(0,n(38640).op)({sum_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,i._1)(t,"x","sum");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));var u={x:s},c={axis:e,keepDims:n};return r.BV.runKernel(a.GBy,u,c)}})},66999:function(t,e,n){"use strict";n.d(e,{O:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({tan_:function(t){var e={x:(0,i._1)(t,"x","tan","float32")};return r.BV.runKernel(a.sEM,e)}})},11744:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({tanh_:function(t){var e={x:(0,i._1)(t,"x","tanh","float32")};return r.BV.runKernel(a.MIZ,e)}})},72442:function(t,e,n){"use strict";n.d(e,{X:function(){return i}});var r=n(48354),a=n(77960);function i(t,e,n){var i=(0,r.C)(t,n);return(0,a.H)(t,e,i,n)}},92894:function(t,e,n){"use strict";n.d(e,{R:function(){return o}});var r=n(48354),a=n(36147),i=n(77960);function o(t,e){(0,a.Cq)(t);var n=(0,r.C)(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,i.H)(t,null,n,e)}},77517:function(t,e,n){"use strict";n.d(e,{o:function(){return o}});var r=n(48354),a=n(36147),i=n(77960);function o(t,e,n){if((0,a.Cq)(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var o=(0,r.C)(t,n);if(2!==o.length&&1!==o.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===o.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,i.H)(t,e,o,n)}},77960:function(t,e,n){"use strict";n.d(e,{H:function(){return o}});var r=n(50391),a=n(36147),i=n(58860);function o(t,e,n,o){if(null==o)o=(0,a.D2)(t);else if("complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if("object"===typeof t&&("texture"in t||"buffer"in t&&!(t.buffer instanceof ArrayBuffer))){if("float32"!==o&&"int32"!==o)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(o,"."));return r.BV.backend.createTensorFromGPUData(t,e||n,o)}if(!(0,i.isTypedArray)(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){(0,a.Mu)(e);var s=(0,a.NA)(e),u=(0,a.NA)(n);(0,a.hu)(s===u,(function(){return"Based on the provided shape, [".concat(e,"], the tensor should have ")+"".concat(s," values but has ").concat(u)}));for(var c=0;c<n.length;++c){var l=n[c],h=c!==n.length-1||l!==(0,a.NA)(e.slice(c));(0,a.hu)(n[c]===e[c]||!h,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(e,"). ")}))}}return(0,i.isTypedArray)(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==o?(0,i.toTypedArray)(t,o):(0,i.flatten)(t,[],!0),r.BV.makeTensor(t,e,o)}},42343:function(t,e,n){"use strict";n.d(e,{G:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({tile_:function(t,e){var n=(0,i._1)(t,"x","tile","string_or_numeric");o.hu(n.rank===e.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(e,".")}));var s={x:n},u={reps:e};return r.BV.runKernel(a.n9L,s,u)}})},29085:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var r=n(29439),a=n(50391),i=n(32145),o=n(48354);var s=(0,n(38640).op)({topk_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=(0,o._1)(t,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var u=s.shape[s.shape.length-1];if(e<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(e));if(e>u)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(u,") ")+"but got ".concat(e));var c={x:s},l={k:e,sorted:n},h=a.BV.runKernel(i.cWu,c,l),f=(0,r.Z)(h,2);return{values:f[0],indices:f[1]}}})},61240:function(t,e,n){"use strict";n.d(e,{p:function(){return d}});var r=n(50391),a=n(35875),i=n(32145),o=n(48354),s=n(36147),u=n(59253),c=n(76996),l=n(4362),h=n(38640),f=n(26972);var d=(0,h.op)({transpose_:function(t,e,n){var h=(0,o._1)(t,"x","transpose");if(null==e&&(e=h.shape.map((function(t,e){return e})).reverse()),s.hu(h.rank===e.length,(function(){return"Error in transpose: rank of input ".concat(h.rank," ")+"must match length of perm ".concat(e,".")})),e.forEach((function(t){s.hu(t>=0&&t<h.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(h.rank-1)+" but got ".concat(e)}))})),h.rank<=1)return h.clone();var d={x:h},p={perm:e};return"complex64"===h.dtype?(0,a.lu)((function(){var t=(0,f.k)(h),e=(0,c.a)(h);return t=r.BV.runKernel(i.G3Y,{x:t},p),e=r.BV.runKernel(i.G3Y,{x:e},p),n&&(e=(0,l.W)(e)),(0,u.P)(t,e)})):r.BV.runKernel(i.G3Y,d,p)}})},52453:function(t,e,n){"use strict";n.d(e,{X:function(){return s}});var r=n(36147),a=n(77039),i=n(38640),o=n(14466);var s=(0,i.op)({truncatedNormal_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if((0,r.Mu)(t),null!=i&&"bool"===i)throw new Error("Unsupported data type $ { dtype }");for(var u=new o.Yi(e,n,i,!0,s),c=(0,a.f)(t,i),l=0;l<c.values.length;l++)c.values[l]=u.nextValue();return c.toTensor()}})},74860:function(t,e,n){"use strict";n.d(e,{T:function(){return u}});var r=n(29439),a=n(50391),i=n(32145),o=n(48354),s=n(36147);var u=(0,n(38640).op)({unique_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(t,"x","unique","string_or_numeric");(0,s.hu)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var u={x:n},c={axis:e},l=a.BV.runKernel(i.kpP,u,c),h=(0,r.Z)(l,2);return{values:h[0],indices:h[1]}}})},46918:function(t,e,n){"use strict";n.d(e,{p:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({unsortedSegmentSum_:function(t,e,n){var s=(0,i._1)(t,"x","unsortedSegmentSum"),u=(0,i._1)(e,"segmentIds","unsortedSegmentSum","int32");(0,o.hu)((0,o.GN)(n),(function(){return"numSegments must be of dtype int"}));var c={x:s,segmentIds:u},l={numSegments:n};return r.BV.runKernel(a.Qvg,c,l)}})},54566:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=n(50391),a=n(32145),i=n(48354),o=n(36147);var s=(0,n(38640).op)({unstack_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,i._1)(t,"x","unstack","string_or_numeric");o.hu(e>=-n.shape.length&&e<n.shape.length,(function(){return"Axis = ".concat(e," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var s={value:n},u={axis:e};return r.BV.runKernel(a.ToN,s,u)}})},32892:function(t,e,n){"use strict";n.d(e,{V:function(){return a}});var r=n(50391);function a(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return r.BV.makeVariable(t,e,n,a)}},10329:function(t,e,n){"use strict";n.d(e,{a:function(){return u}});var r=n(50391),a=n(32145),i=n(48354),o=n(49742),s=n(45774);var u=(0,n(38640).op)({where_:function(t,e,n){var u=(0,i._1)(e,"a","where"),c=(0,i._1)(n,"b","where"),l=(0,i._1)(t,"condition","where","bool"),h=(0,s.assertAndGetBroadcastShape)((0,s.assertAndGetBroadcastShape)(l.shape,u.shape),c.shape),f={condition:(0,o.U)(l,h),t:(0,o.U)(u,h),e:(0,o.U)(c,h)};return r.BV.runKernel(a.PhF,f)}})},87742:function(t,e,n){"use strict";n.d(e,{l:function(){return o}});var r=n(50391),a=n(36147),i=n(59253);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if((0,a.Mu)(t),"complex64"===e){var n=o(t,"float32"),s=o(t,"float32");return(0,i.P)(n,s)}var u=(0,a.wT)((0,a.NA)(t),e);return r.BV.makeTensor(u,t,e)}},87293:function(t,e,n){"use strict";n.d(e,{P:function(){return o}});var r=n(50391),a=n(32145),i=n(48354);var o=(0,n(38640).op)({zerosLike_:function(t){var e={x:(0,i._1)(t,"x","zerosLike")};return r.BV.runKernel(a.RuY,e)}})},85561:function(t,e,n){"use strict";n.d(e,{z:function(){return y}});var r=n(74165),a=n(93433),i=n(15861),o=n(15671),s=n(43144),u=n(60136),c=n(29388),l=n(50391),h=n(35875),f=n(43312),d=n(15750),p=n(30651),v=n(46902),g=n(7391),m=n(87293),y=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o.Z)(this,n),(a=e.call(this)).learningRate=t,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=l.BV.backend.epsilon()),a}return(0,s.Z)(n,[{key:"applyGradients",value:function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var a=l.BV.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:(0,h.lu)((function(){return(0,m.P)(a).variable(false)}))}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:(0,h.lu)((function(){return(0,m.P)(a).variable(false)}))});var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var o=e.accumulatedGrads[r].variable,s=e.accumulatedUpdates[r].variable;(0,h.lu)((function(){var t=(0,f.I)((0,p.d)(o,e.rho),(0,p.d)((0,g.h)(i),1-e.rho)),n=(0,p.d)((0,d.h)((0,v._)((0,f.I)(s,e.epsilon)),(0,v._)((0,f.I)(o,e.epsilon))),i),r=(0,f.I)((0,p.d)(s,e.rho),(0,p.d)((0,g.h)(n),1-e.rho));o.assign(t),s.assign(r);var u=(0,f.I)((0,p.d)(n,-e.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&((0,h.B9)(this.accumulatedGrads.map((function(t){return t.variable}))),(0,h.B9)(this.accumulatedUpdates.map((function(t){return t.variable}))))}},{key:"getWeights",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[].concat((0,a.Z)(this.accumulatedGrads),(0,a.Z)(this.accumulatedUpdates)),t.next=3,this.saveIterations();case 3:return t.t0=t.sent,t.abrupt("return",[t.t0].concat(e.map((function(t){return{name:t.originalName,tensor:t.variable}}))));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractIterations(e);case 2:e=t.sent,n=e.length/2,!1,this.accumulatedGrads=e.slice(0,n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(false)}})),this.accumulatedUpdates=e.slice(n,2*n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(false)}}));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}]),n}(n(5736).g)},51165:function(t,e,n){"use strict";n.d(e,{H:function(){return m}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=n(60136),u=n(29388),c=n(50391),l=n(35875),h=n(43312),f=n(15750),d=n(8582),p=n(30651),v=n(46902),g=n(7391),m=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,i.Z)(this,n),(r=e.call(this)).learningRate=t,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,o.Z)(n,[{key:"applyGradients",value:function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var a=c.BV.registeredVariables[n];if(null==e.accumulatedGrads[r]){e.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:(0,l.lu)((function(){return(0,d.h)(a.shape,e.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(t)?t[r].tensor:t[n];if(null!=i){var o=e.accumulatedGrads[r].variable;(0,l.lu)((function(){var t=(0,h.I)(o,(0,g.h)(i));o.assign(t);var n=(0,h.I)((0,p.d)((0,f.h)(i,(0,v._)((0,h.I)(t,c.BV.backend.epsilon()))),-e.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&(0,l.B9)(this.accumulatedGrads.map((function(t){return t.variable})))}},{key:"getWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.saveIterations();case 2:return t.t0=t.sent,t.abrupt("return",[t.t0].concat(this.accumulatedGrads.map((function(t){return{name:t.originalName,tensor:t.variable}}))));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractIterations(e);case 2:e=t.sent,!1,this.accumulatedGrads=e.map((function(t){return{originalName:t.name,variable:t.tensor.variable(false)}}));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}]),n}(n(5736).g)},34204:function(t,e,n){"use strict";n.d(e,{a:function(){return x}});var r=n(74165),a=n(93433),i=n(15861),o=n(15671),s=n(43144),u=n(60136),c=n(29388),l=n(50391),h=n(35875),f=n(43312),d=n(15750),p=n(30651),v=n(44334),g=n(27067),m=n(46902),y=n(7391),b=n(84774),w=n(87293),x=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,r,a){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,o.Z)(this,n),(i=e.call(this)).learningRate=t,i.beta1=r,i.beta2=a,i.epsilon=s,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],(0,h.lu)((function(){i.accBeta1=(0,g.i)(r).variable(),i.accBeta2=(0,g.i)(a).variable()})),null==s&&(i.epsilon=l.BV.backend.epsilon()),i}return(0,s.Z)(n,[{key:"applyGradients",value:function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t);(0,h.lu)((function(){var r=(0,b.l)(1,e.accBeta1),a=(0,b.l)(1,e.accBeta2);n.forEach((function(n,i){var o=l.BV.registeredVariables[n];null==e.accumulatedFirstMoment[i]&&(e.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,h.lu)((function(){return(0,w.P)(o).variable(false)}))}),null==e.accumulatedSecondMoment[i]&&(e.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:(0,h.lu)((function(){return(0,w.P)(o).variable(false)}))});var s=Array.isArray(t)?t[i].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[i].variable,c=e.accumulatedSecondMoment[i].variable,v=(0,f.I)((0,p.d)(u,e.beta1),(0,p.d)(s,1-e.beta1)),g=(0,f.I)((0,p.d)(c,e.beta2),(0,p.d)((0,y.h)(s),1-e.beta2)),b=(0,d.h)(v,r),x=(0,d.h)(g,a);u.assign(v),c.assign(g);var k=(0,f.I)((0,p.d)((0,d.h)(b,(0,f.I)((0,m._)(x),e.epsilon)),-e.learningRate),o);o.assign(k)}})),e.accBeta1.assign((0,p.d)(e.accBeta1,e.beta1)),e.accBeta2.assign((0,p.d)(e.accBeta2,e.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,h.B9)(this.accumulatedFirstMoment.map((function(t){return t.variable}))),null!=this.accumulatedSecondMoment&&(0,h.B9)(this.accumulatedSecondMoment.map((function(t){return t.variable})))}},{key:"getWeights",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[].concat((0,a.Z)(this.accumulatedFirstMoment),(0,a.Z)(this.accumulatedSecondMoment)),t.next=3,this.saveIterations();case 3:return t.t0=t.sent,t.abrupt("return",[t.t0].concat(e.map((function(t){return{name:t.originalName,tensor:t.variable}}))));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){var n,a=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractIterations(e);case 2:e=t.sent,(0,h.lu)((function(){a.accBeta1.assign((0,v.s)(a.beta1,a.iterations_+1)),a.accBeta2.assign((0,v.s)(a.beta2,a.iterations_+1))})),n=e.length/2,!1,this.accumulatedFirstMoment=e.slice(0,n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(false)}})),this.accumulatedSecondMoment=e.slice(n,2*n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(false)}}));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}]),n}(n(5736).g)},9527:function(t,e,n){"use strict";n.d(e,{D:function(){return b}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=n(60136),u=n(29388),c=n(50391),l=n(35875),h=n(7613),f=n(43312),d=n(15750),p=n(70705),v=n(30651),g=n(27067),m=n(84774),y=n(87293),b=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,i.Z)(this,n),(o=e.call(this)).learningRate=t,o.beta1=r,o.beta2=a,o.epsilon=s,o.decay=u,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],(0,l.lu)((function(){o.iteration=(0,g.i)(0).variable(),o.accBeta1=(0,g.i)(r).variable()})),null==s&&(o.epsilon=c.BV.backend.epsilon()),o}return(0,o.Z)(n,[{key:"applyGradients",value:function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t);(0,l.lu)((function(){var r=(0,m.l)(1,e.accBeta1),a=(0,d.h)(-e.learningRate,(0,f.I)((0,v.d)(e.iteration,e.decay),1));n.forEach((function(n,i){var o=c.BV.registeredVariables[n];null==e.accumulatedFirstMoment[i]&&(e.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:(0,y.P)(o).variable(false)}),null==e.accumulatedWeightedInfNorm[i]&&(e.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:(0,y.P)(o).variable(false)});var s=Array.isArray(t)?t[i].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[i].variable,l=e.accumulatedWeightedInfNorm[i].variable,g=(0,f.I)((0,v.d)(u,e.beta1),(0,v.d)(s,1-e.beta1)),m=(0,v.d)(l,e.beta2),b=(0,h.W)(s),w=(0,p.g)(m,b);u.assign(g),l.assign(w);var x=(0,f.I)((0,v.d)((0,d.h)(a,r),(0,d.h)(g,(0,f.I)(w,e.epsilon))),o);o.assign(x)}})),e.iteration.assign((0,f.I)(e.iteration,1)),e.accBeta1.assign((0,v.d)(e.accBeta1,e.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,l.B9)(this.accumulatedFirstMoment.map((function(t){return t.variable}))),null!=this.accumulatedWeightedInfNorm&&(0,l.B9)(this.accumulatedWeightedInfNorm.map((function(t){return t.variable})))}},{key:"getWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}]),n}(n(5736).g)},51796:function(t,e,n){"use strict";n.d(e,{r:function(){return v}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=n(60136),u=n(29388),c=n(50391),l=n(35875),h=n(43312),f=n(30651),d=n(27067),p=n(87293),v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,i.Z)(this,n),(a=e.call(this,t)).learningRate=t,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=(0,d.i)(a.momentum),a}return(0,o.Z)(n,[{key:"applyGradients",value:function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var a=c.BV.registeredVariables[n];if(null==e.accumulations[r]){e.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:(0,l.lu)((function(){return(0,p.P)(a).variable(false)}))}}var i=e.accumulations[r].variable,o=Array.isArray(t)?t[r].tensor:t[n];null!=o&&(0,l.lu)((function(){var t,n=(0,h.I)((0,f.d)(e.m,i),o);t=e.useNesterov?(0,h.I)((0,f.d)(e.c,(0,h.I)(o,(0,f.d)(n,e.m))),a):(0,h.I)((0,f.d)(e.c,n),a),i.assign(n),a.assign(t)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&(0,l.B9)(this.accumulations.map((function(t){return t.variable})))}},{key:"setMomentum",value:function(t){this.momentum=t}},{key:"getWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.saveIterations();case 2:return t.t0=t.sent,t.abrupt("return",[t.t0].concat(this.accumulations.map((function(t){return{name:t.originalName,tensor:t.variable}}))));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractIterations(e);case 2:e=t.sent,!1,this.accumulations=e.map((function(t){return{originalName:t.name,variable:t.tensor.variable(false)}}));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}]),n}(n(11402).D)},5736:function(t,e,n){"use strict";n.d(e,{g:function(){return f}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=n(60136),u=n(29388),c=n(35875),l=n(66450),h=n(27067),f=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"minimize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(t,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(t){return{name:t.name,tensor:i[t.name]}}));this.applyGradients(o)}else this.applyGradients(i);return(0,c.B9)(i),e?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(t,e){return(0,l.pn)(t,e)}},{key:"dispose",value:function(){null!=this.iterations_&&(0,c.B9)(this.iterations_)}},{key:"saveIterations",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==this.iterations_&&(this.iterations_=0),t.abrupt("return",{name:"iter",tensor:(0,h.i)(this.iterations_,"int32")});case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e[0].tensor.data();case 2:return this.iterations_=t.sent[0],t.abrupt("return",e.slice(1));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(n(26640).Serializable);Object.defineProperty(f,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}})},18931:function(t,e,n){"use strict";n.d(e,{e:function(){return f}});var r=n(15671),a=n(43144),i=n(85561),o=n(51165),s=n(34204),u=n(9527),c=n(51796),l=n(23452),h=n(11402),f=function(){function t(){(0,r.Z)(this,t)}return(0,a.Z)(t,null,[{key:"sgd",value:function(t){return new h.D(t)}},{key:"momentum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new c.r(t,e,n)}},{key:"rmsprop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new l.g(t,e,n,r,a)}},{key:"adam",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new s.a(t,e,n,r)}},{key:"adadelta",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new i.z(t,e,n)}},{key:"adamax",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new u.D(t,e,n,r,a)}},{key:"adagrad",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new o.H(t,e)}}]),t}()},44402:function(t,e,n){"use strict";n.d(e,{V:function(){return d}});var r=n(37762),a=n(85561),i=n(51165),o=n(34204),s=n(9527),u=n(51796),c=n(23452),l=n(11402),h=n(26640),f=[a.z,i.H,o.a,s.D,u.r,c.g,l.D];function d(){var t,e=(0,r.Z)(f);try{for(e.s();!(t=e.n()).done;){var n=t.value;(0,h.registerClass)(n)}}catch(a){e.e(a)}finally{e.f()}}},23452:function(t,e,n){"use strict";n.d(e,{g:function(){return b}});var r=n(74165),a=n(93433),i=n(15861),o=n(15671),s=n(43144),u=n(60136),c=n(29388),l=n(50391),h=n(35875),f=n(43312),d=n(15750),p=n(30651),v=n(46902),g=n(7391),m=n(84774),y=n(87293),b=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,o.Z)(this,n),(r=e.call(this)).learningRate=t,r.decay=a,r.momentum=i,r.epsilon=s,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=u,null==s&&(r.epsilon=l.BV.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,s.Z)(n,[{key:"applyGradients",value:function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var a=l.BV.registeredVariables[n],i=!1;null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:(0,h.lu)((function(){return(0,y.P)(a).variable(i)}))}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:(0,h.lu)((function(){return(0,y.P)(a).variable(i)}))}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:(0,h.lu)((function(){return(0,y.P)(a).variable(i)}))});var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var s=e.accumulatedMeanSquares[r].variable,u=e.accumulatedMoments[r].variable;(0,h.lu)((function(){var t=(0,f.I)((0,p.d)(s,e.decay),(0,p.d)((0,g.h)(o),1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,i=(0,f.I)((0,p.d)(n,e.decay),(0,p.d)(o,1-e.decay)),c=(0,d.h)((0,p.d)(o,e.learningRate),(0,v._)((0,m.l)(t,(0,f.I)((0,g.h)(i),e.epsilon)))),l=(0,f.I)((0,p.d)(u,e.momentum),c);s.assign(t),n.assign(i),u.assign(l);var h=(0,m.l)(a,l);a.assign(h)}else{var y=(0,f.I)((0,p.d)(s,e.decay),(0,p.d)((0,g.h)(o),1-e.decay)),b=(0,f.I)((0,p.d)(u,e.momentum),(0,d.h)((0,p.d)(o,e.learningRate),(0,v._)((0,f.I)(y,e.epsilon))));s.assign(y),u.assign(b);var w=(0,m.l)(a,b);a.assign(w)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&(0,h.B9)(this.accumulatedMeanSquares.map((function(t){return t.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&(0,h.B9)(this.accumulatedMeanGrads.map((function(t){return t.variable}))),null!=this.accumulatedMoments&&(0,h.B9)(this.accumulatedMoments.map((function(t){return t.variable})))}},{key:"getWeights",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[].concat((0,a.Z)(this.accumulatedMeanSquares),(0,a.Z)(this.accumulatedMoments)),this.centered&&e.push.apply(e,(0,a.Z)(this.accumulatedMeanGrads)),t.next=4,this.saveIterations();case 4:return t.t0=t.sent,t.abrupt("return",[t.t0].concat(e.map((function(t){return{name:t.originalName,tensor:t.variable}}))));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractIterations(e);case 2:e=t.sent,n=this.centered?e.length/3:e.length/2,a=!1,this.accumulatedMeanSquares=e.slice(0,n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(a)}})),this.accumulatedMoments=e.slice(n,2*n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(a)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*n,3*n).map((function(t){return{originalName:t.name,variable:t.tensor.variable(a)}})));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}]),n}(n(5736).g)},11402:function(t,e,n){"use strict";n.d(e,{D:function(){return p}});var r=n(74165),a=n(15861),i=n(15671),o=n(43144),s=n(60136),u=n(29388),c=n(50391),l=n(35875),h=n(43312),f=n(30651),d=n(27067),p=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this)).learningRate=t,r.setLearningRate(t),r}return(0,o.Z)(n,[{key:"applyGradients",value:function(t){var e=this;(Array.isArray(t)?t.map((function(t){return t.name})):Object.keys(t)).forEach((function(n,r){var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=c.BV.registeredVariables[n];(0,l.lu)((function(){var t=(0,h.I)((0,f.d)(e.c,a),i);i.assign(t)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=(0,l.Cn)((0,d.i)(-t))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.saveIterations();case 2:return t.t0=t.sent,t.abrupt("return",[t.t0]);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setWeights",value:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractIterations(e);case 2:if(0===(e=t.sent).length){t.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(t,e){return new t(e.learningRate)}}]),n}(n(5736).g)},76968:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=(n(69126),n(35050)),o=n(22179),s=n(30541),u=n(64973),c=function(){function t(){(0,r.Z)(this,t),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,a.Z)(t,[{key:"fetch",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return fetch(t,e)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got ".concat(e));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}},{key:"decode",value:function(t,e){return new TextDecoder(e).decode(t)}},{key:"setTimeoutCustom",value:function(t,e){var n=this;"undefined"!==typeof window&&(0,i.OB)().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(t),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(t){t.source===window&&t.data.name===n.messageName&&(t.stopPropagation(),(0,n.functionRefs[t.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(t,e)}},{key:"isTypedArray",value:function(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}}]),t}();if((0,i.OB)().get("IS_BROWSER")){(0,i.OB)().setPlatform("browser",new c);try{u.xQ.registerManager(s.Ew.URL_SCHEME,new s.JL)}catch(l){}try{u.xQ.registerManager(o.ns.URL_SCHEME,new o.y$)}catch(l){}}},24561:function(t,e,n){"use strict";var r,a=n(15671),i=n(43144),o=n(35050),s=function(){return n(75410)};var u=function(){function t(){(0,a.Z)(this,t),this.util=n(48628),this.textEncoder=new this.util.TextEncoder}return(0,i.Z)(t,[{key:"fetch",value:function(t,e){return null!=(0,o.OB)().global.fetch?(0,o.OB)().global.fetch(t,e):(null==r&&(r=s()),r(t,e))}},{key:"now",value:function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}},{key:"encode",value:function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(e));return this.textEncoder.encode(t)}},{key:"decode",value:function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}},{key:"isTypedArray",value:function(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}]),t}();(0,o.OB)().get("IS_NODE")&&!(0,o.OB)().get("IS_BROWSER")&&(0,o.OB)().setPlatform("node",new u)},81622:function(t,e,n){"use strict";n.d(e,{Q1:function(){return c}});var r=n(37762),a=n(15671),i=n(43144),o=n(35050),s=n(58860),u=n(36147),c=function(){function t(e,n){(0,a.Z)(this,t),this.backendTimer=e,this.logger=n,null==n&&(this.logger=new l)}return(0,i.Z)(t,[{key:"profileKernel",value:function(t,e,n){var a,i,u=function(){a=n()},c=s.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(u);else{u();var l,h=(0,r.Z)(a);try{for(h.s();!(l=h.n()).done;){l.value.dataSync()}}catch(p){h.e(p)}finally{h.f()}i=Promise.resolve({kernelMs:s.now()-c})}if((0,o.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var f=function(){var e=a[d];e.data().then((function(n){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var a=t[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,e.dtype,t)}))},d=0;d<a.length;d++)f();return{kernelName:t,outputs:a,inputs:e,timeMs:i.then((function(t){return t.kernelMs})),extraInfo:i.then((function(t){return null!=t.getExtraProfileInfo?t.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(t){var e=this,n=t.kernelName,r=t.outputs,a=t.timeMs,i=t.inputs,o=t.extraInfo;r.forEach((function(t){Promise.all([t.data(),a,o]).then((function(r){e.logger.logKernelProfile(n,t,r[0],r[1],i,r[2])}))}))}}]),t}();var l=function(){function t(){(0,a.Z)(this,t)}return(0,i.Z)(t,[{key:"logKernelProfile",value:function(t,e,n,r,a,i){var o="number"===typeof r?u.oj("".concat(r,"ms"),9):r.error,s=u.oj(t,25),c=e.rank,l=e.size,h=u.oj(e.shape.toString(),14),f="";for(var d in a){var p=a[d];if(null!=p){var v=p.shape||e.shape,g=v.length;f+="".concat(d,": ").concat(g,"D ").concat(g>0?v:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(c,"D ").concat(h,"\t%c").concat(l,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),t}()},60890:function(t,e,n){"use strict";var r=n(7613);(0,n(23939).t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,r.W)(this)}},14252:function(t,e,n){"use strict";var r=n(1719);(0,n(23939).t3)().prototype.acos=function(){return this.throwIfDisposed(),(0,r.K)(this)}},358:function(t,e,n){"use strict";var r=n(24502);(0,n(23939).t3)().prototype.acosh=function(){return this.throwIfDisposed(),(0,r._)(this)}},20742:function(t,e,n){"use strict";var r=n(43312);(0,n(23939).t3)().prototype.add=function(t){return this.throwIfDisposed(),(0,r.I)(this,t)}},76394:function(t,e,n){"use strict";var r=n(14108);(0,n(23939).t3)().prototype.all=function(t,e){return this.throwIfDisposed(),(0,r.$)(this,t,e)}},48412:function(t,e,n){"use strict";var r=n(58543);(0,n(23939).t3)().prototype.any=function(t,e){return this.throwIfDisposed(),(0,r.Y)(this,t,e)}},71575:function(t,e,n){"use strict";var r=n(29995);(0,n(23939).t3)().prototype.argMax=function(t){return this.throwIfDisposed(),(0,r.N)(this,t)}},59167:function(t,e,n){"use strict";var r=n(95157);(0,n(23939).t3)().prototype.argMin=function(t){return this.throwIfDisposed(),(0,r.v)(this,t)}},56694:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,r.X)(this,[this.size])}},53989:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.as2D=function(t,e){return this.throwIfDisposed(),(0,r.X)(this,[t,e])}},64465:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),(0,r.X)(this,[t,e,n])}},97859:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.as4D=function(t,e,n,a){return this.throwIfDisposed(),(0,r.X)(this,[t,e,n,a])}},77628:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.as5D=function(t,e,n,a,i){return this.throwIfDisposed(),(0,r.X)(this,[t,e,n,a,i])}},85607:function(t,e,n){"use strict";var r=n(75561),a=n(23939),i=n(36147);(0,a.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,i.hu)(1===this.size,(function(){return"The array must have only 1 element."})),(0,r.X)(this,[])}},95837:function(t,e,n){"use strict";var r=n(99118);(0,n(23939).t3)().prototype.asType=function(t){return this.throwIfDisposed(),(0,r.p)(this,t)}},73883:function(t,e,n){"use strict";var r=n(33053);(0,n(23939).t3)().prototype.asin=function(){return this.throwIfDisposed(),(0,r.Z)(this)}},51421:function(t,e,n){"use strict";var r=n(30054);(0,n(23939).t3)().prototype.asinh=function(){return this.throwIfDisposed(),(0,r.V)(this)}},70039:function(t,e,n){"use strict";var r=n(64778);(0,n(23939).t3)().prototype.atan=function(){return this.throwIfDisposed(),(0,r.z)(this)}},81538:function(t,e,n){"use strict";var r=n(32227);(0,n(23939).t3)().prototype.atan2=function(t){return this.throwIfDisposed(),(0,r.f)(this,t)}},62989:function(t,e,n){"use strict";var r=n(47897);(0,n(23939).t3)().prototype.atanh=function(){return this.throwIfDisposed(),(0,r.C)(this)}},85714:function(t,e,n){"use strict";var r=n(49204);(0,n(23939).t3)().prototype.avgPool=function(t,e,n,a){return this.throwIfDisposed(),(0,r.w)(this,t,e,n,a)}},58596:function(t,e,n){"use strict";var r=n(36994);(0,n(23939).t3)().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),(0,r.E)(this,t,e)}},96325:function(t,e,n){"use strict";var r=n(42818);(0,n(23939).t3)().prototype.batchNorm=function(t,e,n,a,i){return this.throwIfDisposed(),(0,r.t)(this,t,e,n,a,i)}},85290:function(t,e,n){"use strict";var r=n(49742);(0,n(23939).t3)().prototype.broadcastTo=function(t){return this.throwIfDisposed(),(0,r.U)(this,t)}},19074:function(t,e,n){"use strict";var r=n(99118);(0,n(23939).t3)().prototype.cast=function(t){return this.throwIfDisposed(),(0,r.p)(this,t)}},1335:function(t,e,n){"use strict";var r=n(31396);(0,n(23939).t3)().prototype.ceil=function(){return this.throwIfDisposed(),(0,r.m)(this)}},17058:function(t,e,n){"use strict";var r=n(89836);(0,n(23939).t3)().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),(0,r.i)(this,t,e)}},52671:function(t,e,n){"use strict";var r=n(93433),a=n(34836),i=n(23939);(0,i.t3)().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof i.es&&(t=[t]),(0,a.z)([this].concat((0,r.Z)(t)),e)}},96512:function(t,e,n){"use strict";var r=n(44918);(0,n(23939).t3)().prototype.conv1d=function(t,e,n,a,i,o){return this.throwIfDisposed(),(0,r.P)(this,t,e,n,a,i,o)}},94124:function(t,e,n){"use strict";var r=n(93457);(0,n(23939).t3)().prototype.conv2d=function(t,e,n,a,i,o){return this.throwIfDisposed(),(0,r.T)(this,t,e,n,a,i,o)}},62043:function(t,e,n){"use strict";var r=n(71732);(0,n(23939).t3)().prototype.conv2dTranspose=function(t,e,n,a,i){return this.throwIfDisposed(),(0,r.b)(this,t,e,n,a,i)}},11141:function(t,e,n){"use strict";var r=n(21227);(0,n(23939).t3)().prototype.cos=function(){return this.throwIfDisposed(),(0,r.m)(this)}},25209:function(t,e,n){"use strict";var r=n(46679);(0,n(23939).t3)().prototype.cosh=function(){return this.throwIfDisposed(),(0,r.f)(this)}},36421:function(t,e,n){"use strict";var r=n(69457);(0,n(23939).t3)().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),(0,r.$)(this,t,e,n)}},75817:function(t,e,n){"use strict";var r=n(58862);(0,n(23939).t3)().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),(0,r.z)(this,t,e,n)}},51042:function(t,e,n){"use strict";var r=n(91878);(0,n(23939).t3)().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),(0,r.n)(this,t,e)}},38738:function(t,e,n){"use strict";var r=n(61147);(0,n(23939).t3)().prototype.depthwiseConv2d=function(t,e,n,a,i,o){return this.throwIfDisposed(),(0,r.B)(this,t,e,n,a,i,o)}},52754:function(t,e,n){"use strict";var r=n(57580);(0,n(23939).t3)().prototype.dilation2d=function(t,e,n,a,i){return this.throwIfDisposed(),(0,r.W)(this,t,e,n,a,i)}},63364:function(t,e,n){"use strict";var r=n(15750);(0,n(23939).t3)().prototype.div=function(t){return this.throwIfDisposed(),(0,r.h)(this,t)}},62233:function(t,e,n){"use strict";var r=n(75923);(0,n(23939).t3)().prototype.divNoNan=function(t){return this.throwIfDisposed(),(0,r.N)(this,t)}},99756:function(t,e,n){"use strict";var r=n(45043);(0,n(23939).t3)().prototype.dot=function(t){return this.throwIfDisposed(),(0,r.A)(this,t)}},84304:function(t,e,n){"use strict";var r=n(52353);(0,n(23939).t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,r.p)(this)}},86008:function(t,e,n){"use strict";var r=n(63254);(0,n(23939).t3)().prototype.equal=function(t){return this.throwIfDisposed(),(0,r.D)(this,t)}},55621:function(t,e,n){"use strict";var r=n(93891);(0,n(23939).t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,r.q)(this)}},72980:function(t,e,n){"use strict";var r=n(13313);(0,n(23939).t3)().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),(0,r.d)(this,t,e)}},17335:function(t,e,n){"use strict";var r=n(411);(0,n(23939).t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,r.Q)(this)}},79170:function(t,e,n){"use strict";var r=n(72975);(0,n(23939).t3)().prototype.expandDims=function(t){return this.throwIfDisposed(),(0,r.d)(this,t)}},29578:function(t,e,n){"use strict";var r=n(15682);(0,n(23939).t3)().prototype.expm1=function(){return this.throwIfDisposed(),(0,r.t)(this)}},74603:function(t,e,n){"use strict";var r=n(37635);(0,n(23939).t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,r.k)(this)}},98162:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,r.X)(this,[this.size])}},38373:function(t,e,n){"use strict";var r=n(22628);(0,n(23939).t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,r.G)(this)}},55801:function(t,e,n){"use strict";var r=n(67145);(0,n(23939).t3)().prototype.floorDiv=function(t){return this.throwIfDisposed(),(0,r.q)(this,t)}},84354:function(t,e,n){"use strict";var r=n(49498);(0,n(23939).t3)().prototype.gather=function(t,e){return this.throwIfDisposed(),(0,r.I)(this,t,e)}},77170:function(t,e,n){"use strict";var r=n(35014);(0,n(23939).t3)().prototype.greater=function(t){return this.throwIfDisposed(),(0,r.p)(this,t)}},51247:function(t,e,n){"use strict";var r=n(18327);(0,n(23939).t3)().prototype.greaterEqual=function(t){return this.throwIfDisposed(),(0,r.b)(this,t)}},23423:function(t,e,n){"use strict";var r=n(50530);(0,n(23939).t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,r.S)(this)}},90609:function(t,e,n){"use strict";var r=n(774);(0,n(23939).t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,r.w)(this)}},98328:function(t,e,n){"use strict";var r=n(10300);(0,n(23939).t3)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,r.x)(this)}},66647:function(t,e,n){"use strict";var r=n(74652);(0,n(23939).t3)().prototype.isInf=function(){return this.throwIfDisposed(),(0,r.U)(this)}},27576:function(t,e,n){"use strict";var r=n(37005);(0,n(23939).t3)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,r.i)(this)}},18113:function(t,e,n){"use strict";var r=n(74419);(0,n(23939).t3)().prototype.leakyRelu=function(t){return this.throwIfDisposed(),(0,r.h)(this,t)}},39275:function(t,e,n){"use strict";var r=n(44920);(0,n(23939).t3)().prototype.less=function(t){return this.throwIfDisposed(),(0,r.d)(this,t)}},22533:function(t,e,n){"use strict";var r=n(12642);(0,n(23939).t3)().prototype.lessEqual=function(t){return this.throwIfDisposed(),(0,r.z)(this,t)}},94183:function(t,e,n){"use strict";var r=n(40936);(0,n(23939).t3)().prototype.localResponseNormalization=function(t,e,n,a){return this.throwIfDisposed(),(0,r.G)(this,t,e,n,a)}},1629:function(t,e,n){"use strict";var r=n(40378);(0,n(23939).t3)().prototype.log=function(){return this.throwIfDisposed(),(0,r.c)(this)}},83704:function(t,e,n){"use strict";var r=n(95341);(0,n(23939).t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,r.K)(this)}},68303:function(t,e,n){"use strict";var r=n(25113);(0,n(23939).t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,r.e)(this)}},17390:function(t,e,n){"use strict";var r=n(54561);(0,n(23939).t3)().prototype.logSoftmax=function(t){return this.throwIfDisposed(),(0,r.C)(this,t)}},67063:function(t,e,n){"use strict";var r=n(15530);(0,n(23939).t3)().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),(0,r.l)(this,t,e)}},93807:function(t,e,n){"use strict";var r=n(2177);(0,n(23939).t3)().prototype.logicalAnd=function(t){return this.throwIfDisposed(),(0,r.H)(this,t)}},79393:function(t,e,n){"use strict";var r=n(30875);(0,n(23939).t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,r.h)(this)}},63048:function(t,e,n){"use strict";var r=n(15117);(0,n(23939).t3)().prototype.logicalOr=function(t){return this.throwIfDisposed(),(0,r.K)(this,t)}},75690:function(t,e,n){"use strict";var r=n(11712);(0,n(23939).t3)().prototype.logicalXor=function(t){return this.throwIfDisposed(),(0,r.e)(this,t)}},71921:function(t,e,n){"use strict";var r=n(57221);(0,n(23939).t3)().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),(0,r.O)(this,t,e,n)}},34494:function(t,e,n){"use strict";var r=n(56176);(0,n(23939).t3)().prototype.max=function(t,e){return this.throwIfDisposed(),(0,r.F)(this,t,e)}},80620:function(t,e,n){"use strict";var r=n(85777);(0,n(23939).t3)().prototype.maxPool=function(t,e,n,a){return this.throwIfDisposed(),(0,r._)(this,t,e,n,a)}},80294:function(t,e,n){"use strict";var r=n(70705);(0,n(23939).t3)().prototype.maximum=function(t){return this.throwIfDisposed(),(0,r.g)(this,t)}},18166:function(t,e,n){"use strict";var r=n(6568);(0,n(23939).t3)().prototype.mean=function(t,e){return this.throwIfDisposed(),(0,r.J)(this,t,e)}},33679:function(t,e,n){"use strict";var r=n(77891);(0,n(23939).t3)().prototype.min=function(t,e){return this.throwIfDisposed(),(0,r.V)(this,t,e)}},66722:function(t,e,n){"use strict";var r=n(82273);(0,n(23939).t3)().prototype.minimum=function(t){return this.throwIfDisposed(),(0,r.L)(this,t)}},68300:function(t,e,n){"use strict";var r=n(27613);(0,n(23939).t3)().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),(0,r.V)(this,t,e)}},90523:function(t,e,n){"use strict";var r=n(84645);(0,n(23939).t3)().prototype.mod=function(t){return this.throwIfDisposed(),(0,r.w)(this,t)}},56287:function(t,e,n){"use strict";var r=n(30651);(0,n(23939).t3)().prototype.mul=function(t){return this.throwIfDisposed(),(0,r.d)(this,t)}},26724:function(t,e,n){"use strict";var r=n(4362);(0,n(23939).t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,r.W)(this)}},74697:function(t,e,n){"use strict";var r=n(56662);(0,n(23939).t3)().prototype.norm=function(t,e,n){return this.throwIfDisposed(),(0,r.K)(this,t,e,n)}},96867:function(t,e,n){"use strict";var r=n(15549);(0,n(23939).t3)().prototype.notEqual=function(t){return this.throwIfDisposed(),(0,r.Q)(this,t)}},64921:function(t,e,n){"use strict";var r=n(34326);(0,n(23939).t3)().prototype.oneHot=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),(0,r.l)(this,t,e,n)}},45243:function(t,e,n){"use strict";var r=n(20773);(0,n(23939).t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,r.J)(this)}},90167:function(t,e,n){"use strict";var r=n(71970);(0,n(23939).t3)().prototype.pad=function(t,e){return this.throwIfDisposed(),(0,r.v)(this,t,e)}},77682:function(t,e,n){"use strict";var r=n(57226);(0,n(23939).t3)().prototype.pool=function(t,e,n,a,i,o){return this.throwIfDisposed(),(0,r.d)(this,t,e,n,a,i,o)}},77739:function(t,e,n){"use strict";var r=n(44334);(0,n(23939).t3)().prototype.pow=function(t){return this.throwIfDisposed(),(0,r.s)(this,t)}},78060:function(t,e,n){"use strict";var r=n(96859);(0,n(23939).t3)().prototype.prelu=function(t){return this.throwIfDisposed(),(0,r.A)(this,t)}},3057:function(t,e,n){"use strict";var r=n(67722);(0,n(23939).t3)().prototype.prod=function(t,e){return this.throwIfDisposed(),(0,r.W)(this,t,e)}},3466:function(t,e,n){"use strict";var r=n(12209);(0,n(23939).t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,r.M)(this)}},23958:function(t,e,n){"use strict";n(60890),n(14252),n(358),n(20742),n(76394),n(48412),n(71575),n(59167),n(85607),n(95837),n(56694),n(53989),n(64465),n(97859),n(77628),n(73883),n(51421),n(70039),n(81538),n(62989),n(85714),n(58596),n(96325),n(85290),n(19074),n(1335),n(17058),n(52671),n(96512),n(62043),n(94124),n(11141),n(25209),n(36421),n(75817),n(51042),n(38738),n(52754),n(62233),n(63364),n(99756),n(84304),n(86008),n(55621),n(72980),n(17335),n(79170),n(29578),n(74603),n(98162),n(38373),n(55801),n(84354),n(51247),n(77170),n(23423),n(90609),n(98328),n(66647),n(27576),n(18113),n(22533),n(39275),n(94183),n(68303),n(17390),n(67063),n(1629),n(83704),n(93807),n(79393),n(63048),n(75690),n(71921),n(80620),n(34494),n(80294),n(18166),n(33679),n(66722),n(68300),n(90523),n(56287),n(26724),n(74697),n(96867),n(64921),n(45243),n(90167),n(77682),n(77739),n(78060),n(3057),n(3466),n(93096),n(15),n(71495),n(45577),n(24364),n(92377),n(23191),n(43479),n(53407),n(97720),n(17440),n(15235),n(26617),n(92854),n(35633),n(86223),n(94365),n(24595),n(72431),n(42088),n(56298),n(1391),n(51528),n(28115),n(76489),n(18028),n(68659),n(58348),n(13816),n(61864),n(34703),n(53447),n(90297),n(66082),n(42390),n(89755),n(33532),n(35223),n(96289),n(86973),n(22122),n(77585),n(35154)},93096:function(t,e,n){"use strict";var r=n(17539);(0,n(23939).t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,r.U)(this)}},15:function(t,e,n){"use strict";var r=n(65900);(0,n(23939).t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,r.b)(this)}},45577:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.reshape=function(t){return this.throwIfDisposed(),(0,r.X)(this,t)}},71495:function(t,e,n){"use strict";var r=n(75561);(0,n(23939).t3)().prototype.reshapeAs=function(t){return this.throwIfDisposed(),(0,r.X)(this,t.shape)}},24364:function(t,e,n){"use strict";var r=n(90464);(0,n(23939).t3)().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),(0,r.I)(this,t,e,n)}},92377:function(t,e,n){"use strict";var r=n(28600);(0,n(23939).t3)().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),(0,r.j)(this,t,e,n)}},23191:function(t,e,n){"use strict";var r=n(34933);(0,n(23939).t3)().prototype.reverse=function(t){return this.throwIfDisposed(),(0,r.G)(this,t)}},43479:function(t,e,n){"use strict";var r=n(64617);(0,n(23939).t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,r.Q)(this)}},53407:function(t,e,n){"use strict";var r=n(60766);(0,n(23939).t3)().prototype.round=function(){return this.throwIfDisposed(),(0,r.N)(this)}},97720:function(t,e,n){"use strict";var r=n(65115);(0,n(23939).t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,r.b)(this)}},17440:function(t,e,n){"use strict";var r=n(20413);(0,n(23939).t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,r.U)(this)}},15235:function(t,e,n){"use strict";var r=n(90119);(0,n(23939).t3)().prototype.separableConv2d=function(t,e,n,a,i,o){return this.throwIfDisposed(),(0,r.U)(this,t,e,n,a,i,o)}},26617:function(t,e,n){"use strict";var r=n(77643);(0,n(23939).t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,r.X)(this)}},92854:function(t,e,n){"use strict";var r=n(2070);(0,n(23939).t3)().prototype.sign=function(){return this.throwIfDisposed(),(0,r.X)(this)}},35633:function(t,e,n){"use strict";var r=n(87254);(0,n(23939).t3)().prototype.sin=function(){return this.throwIfDisposed(),(0,r.O)(this)}},86223:function(t,e,n){"use strict";var r=n(57657);(0,n(23939).t3)().prototype.sinh=function(){return this.throwIfDisposed(),(0,r.R)(this)}},94365:function(t,e,n){"use strict";var r=n(59238);(0,n(23939).t3)().prototype.slice=function(t,e){return this.throwIfDisposed(),(0,r.t)(this,t,e)}},24595:function(t,e,n){"use strict";var r=n(74910);(0,n(23939).t3)().prototype.softmax=function(t){return this.throwIfDisposed(),(0,r.X)(this,t)}},72431:function(t,e,n){"use strict";var r=n(54626);(0,n(23939).t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,r.W)(this)}},42088:function(t,e,n){"use strict";var r=n(65696);(0,n(23939).t3)().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),(0,r.f)(this,t,e)}},56298:function(t,e,n){"use strict";var r=n(82588);(0,n(23939).t3)().prototype.split=function(t,e){return this.throwIfDisposed(),(0,r.V)(this,t,e)}},1391:function(t,e,n){"use strict";var r=n(46902);(0,n(23939).t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,r._)(this)}},51528:function(t,e,n){"use strict";var r=n(7391);(0,n(23939).t3)().prototype.square=function(){return this.throwIfDisposed(),(0,r.h)(this)}},28115:function(t,e,n){"use strict";var r=n(7993);(0,n(23939).t3)().prototype.squaredDifference=function(t){return this.throwIfDisposed(),(0,r.$)(this,t)}},76489:function(t,e,n){"use strict";var r=n(83931);(0,n(23939).t3)().prototype.squeeze=function(t){return this.throwIfDisposed(),(0,r.L)(this,t)}},18028:function(t,e,n){"use strict";var r=n(93433),a=n(18306),i=n(23939);(0,i.t3)().prototype.stack=function(t,e){this.throwIfDisposed();var n=t instanceof i.es?[this,t]:[this].concat((0,r.Z)(t));return(0,a.k)(n,e)}},68659:function(t,e,n){"use strict";var r=n(94031);(0,n(23939).t3)().prototype.step=function(t){return this.throwIfDisposed(),(0,r.N)(this,t)}},58348:function(t,e,n){"use strict";var r=n(39017);(0,n(23939).t3)().prototype.stridedSlice=function(t,e,n,a,i,o,s,u){return this.throwIfDisposed(),(0,r.N)(this,t,e,n,a,i,o,s,u)}},13816:function(t,e,n){"use strict";var r=n(84774);(0,n(23939).t3)().prototype.sub=function(t){return this.throwIfDisposed(),(0,r.l)(this,t)}},61864:function(t,e,n){"use strict";var r=n(40227);(0,n(23939).t3)().prototype.sum=function(t,e){return this.throwIfDisposed(),(0,r.S)(this,t,e)}},34703:function(t,e,n){"use strict";var r=n(66999);(0,n(23939).t3)().prototype.tan=function(){return this.throwIfDisposed(),(0,r.O)(this)}},53447:function(t,e,n){"use strict";var r=n(11744);(0,n(23939).t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,r.A)(this)}},90297:function(t,e,n){"use strict";var r=n(42343);(0,n(23939).t3)().prototype.tile=function(t){return this.throwIfDisposed(),(0,r.G)(this,t)}},66082:function(t,e,n){"use strict";var r=n(99118);(0,n(23939).t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,r.p)(this,"bool")}},42390:function(t,e,n){"use strict";var r=n(99118);(0,n(23939).t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,r.p)(this,"float32")}},89755:function(t,e,n){"use strict";var r=n(99118);(0,n(23939).t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,r.p)(this,"int32")}},33532:function(t,e,n){"use strict";var r=n(29085);(0,n(23939).t3)().prototype.topk=function(t,e){return this.throwIfDisposed(),(0,r.h)(this,t,e)}},35223:function(t,e,n){"use strict";var r=n(61240);(0,n(23939).t3)().prototype.transpose=function(t){return this.throwIfDisposed(),(0,r.p)(this,t)}},96289:function(t,e,n){"use strict";var r=n(74860);(0,n(23939).t3)().prototype.unique=function(t){return this.throwIfDisposed(),(0,r.T)(this,t)}},86973:function(t,e,n){"use strict";var r=n(46918);(0,n(23939).t3)().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),(0,r.p)(this,t,e)}},22122:function(t,e,n){"use strict";var r=n(54566);(0,n(23939).t3)().prototype.unstack=function(t){return this.throwIfDisposed(),(0,r.H)(this,t)}},77585:function(t,e,n){"use strict";var r=n(10329);(0,n(23939).t3)().prototype.where=function(t,e){return this.throwIfDisposed(),(0,r.a)(t,this,e)}},35154:function(t,e,n){"use strict";var r=n(87293);(0,n(23939).t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,r.P)(this)}},57118:function(t,e,n){"use strict";for(var r=n(99122),a=n(87684),i=n(66283),o=n(97748),s=n(99905),u=n(69791),c=n(68201),l=n(89576),h=n(80307),f=n(35348),d=n(80330),p=n(88625),v=n(62832),g=n(93209),m=n(38676),y=n(86616),b=n(93638),w=n(60553),x=n(44343),k=n(58879),I=n(18467),S=n(30299),_=n(2101),C=n(17794),E=n(53687),A=n(49059),T=n(44224),N=n(76344),D=n(30470),R=n(58791),Z=n(3940),M=n(26175),F=n(75574),O=n(94426),B=n(94734),L=n(11908),P=n(87231),U=n(52003),z=n(9041),W=n(54357),V=n(80316),G=n(40940),j=n(98916),H=n(87433),X=n(76878),q=n(90197),Y=n(97526),K=n(38398),Q=n(40563),J=n(80763),$=n(17236),tt=n(46279),et=n(40190),nt=n(5436),rt=n(62581),at=n(9489),it=n(57678),ot=n(96836),st=n(83141),ut=n(61135),ct=n(31159),lt=n(53875),ht=n(60718),ft=n(31373),dt=n(9130),pt=n(9349),vt=n(35691),gt=n(6107),mt=n(87559),yt=n(33230),bt=n(3760),wt=n(89908),xt=n(8027),kt=n(16991),It=n(42903),St=n(4154),_t=n(4059),Ct=n(31986),Et=n(99189),At=n(18393),Tt=n(74572),Nt=n(96766),Dt=n(98325),Rt=n(31653),Zt=n(1641),Mt=n(28284),Ft=n(73140),Ot=n(86316),Bt=n(88793),Lt=n(32961),Pt=n(49129),Ut=n(98741),zt=n(57865),Wt=n(70583),Vt=n(91317),Gt=n(17056),jt=n(88163),Ht=n(57217),Xt=n(98957),qt=n(89539),Yt=n(66971),Kt=n(78864),Qt=0,Jt=[r.Q,a.K,i.M,o.m,s.C,u.C,c.Q,l.V,h.f,f.H,d.A,p.q,v.Y,g.v,m.C,y.s,b.O,w.D,x.t,k.v,I.Q,S.x,C.F,_.S,E.w,A.L,T.a,N.g,D.v,R.T,gt.Z,Z.q,M.j,F.K,O.B,B.g,P.T,L.G,U.c,z.t,W.i,V.w,G.Y,j.i,H.W,X.T,q.P,Y.X,K.K,Q.e,J.J,J.J,$.R,tt.J,et.f,nt.m,rt.j,at.c,it.i,ot.E,st.q,ut.R,ct.p,lt.N,ht.n,ft.G,ft.G,dt.i,pt.d,vt.X,mt.a,yt.d,bt.T,wt.H,xt.G,kt.S,It.T,St.O,_t.C,Ct.X,Et.W,At.E,Tt.Q,Nt._,Dt.m,Rt.M,Zt.J,Mt.H,Ft.a,Ft.a,Ot.n,Ot.n,Bt.C,Pt.k,Lt.t,Ut.l,zt.h,Wt.y,Vt.w,Gt.W,jt.x,Ht.j,Xt.T,qt.x,Yt.a];Qt<Jt.length;Qt++){var $t=Jt[Qt];(0,Kt.Li)($t)}},26640:function(t,e,n){"use strict";n.r(e),n.d(e,{Serializable:function(){return o},SerializationMap:function(){return s},registerClass:function(){return u}});var r=n(15671),a=n(43144),i=n(36147),o=function(){function t(){(0,r.Z)(this,t)}return(0,a.Z)(t,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(t,e){return new t(e)}}]),t}(),s=function(){function t(){(0,r.Z)(this,t),this.classNameMap={}}return(0,a.Z)(t,null,[{key:"getMap",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"register",value:function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]}}]),t}();function u(t){(0,i.hu)(null!=t.className,(function(){return"Class being registered does not have the static className property defined."})),(0,i.hu)("string"===typeof t.className,(function(){return"className is required to be a string, but got type "+typeof t.className})),(0,i.hu)(t.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),s.register(t)}},18227:function(t,e,n){"use strict";n.d(e,{C:function(){return a},_:function(){return i}});var r=n(36147);function a(t,e,n){for(var r={},a={},i=0;i<e.length;i++)r[e[i].id]=!0;for(var o=0;o<t.length;o++){var s=t[o],u=s.inputs;for(var c in u){for(var l=u[c],h=!1,f=0;f<e.length;f++)if(r[l.id]){s.outputs.forEach((function(t){return r[t.id]=!0})),h=!0,a[s.id]=!0;break}if(h)break}}var d={};d[n.id]=!0;for(var p={},v=t.length-1;v>=0;v--)for(var g=t[v],m=g.inputs,y=0;y<g.outputs.length;y++)if(d[g.outputs[y].id]){for(var b in m)d[m[b].id]=!0,p[g.id]=!0;break}for(var w=[],x=0;x<t.length;x++){var k=t[x];if(a[k.id]&&p[k.id]){var I={};for(var S in k.inputs){var _=k.inputs[S];r[_.id]&&(I[S]=_)}var C=Object.assign({},k);C.inputs=I,C.outputs=k.outputs,w.push(C)}}return w}function i(t,e,n,a){for(var i=function(){var i=e[o],s=[];if(i.outputs.forEach((function(e){var n=t[e.id];null!=n?s.push(n):s.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var u=i.gradient(s),c=function(e){if(!(e in u))throw new Error("Cannot backprop through input ".concat(e,". ")+"Available gradients found: ".concat(Object.keys(u),"."));var o=n((function(){return u[e]()}));if("float32"!==o.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(e," must have 'float32' dtype, but has '").concat(o.dtype,"'"));var s=i.inputs[e];if(!r.cO(o.shape,s.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(e,"' has shape '").concat(o.shape,"', which does not match ")+"the shape of the input '".concat(s.shape,"'"));if(null==t[s.id])t[s.id]=o;else{var c=t[s.id];t[s.id]=a(c,o),c.dispose()}};for(var l in i.inputs)c(l)},o=e.length-1;o>=0;o--)i()}},23939:function(t,e,n){"use strict";n.d(e,{FZ:function(){return y},Vi:function(){return g},Vp:function(){return m},YD:function(){return d},_w:function(){return x},es:function(){return b},t3:function(){return w}});var r=n(60136),a=n(29388),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=n(96581),l=n(21147),h=n(36147),f=n(58860),d=function(){function t(e,n,r){var a=this;if((0,s.Z)(this,t),this.dtype=n,this.shape=e.slice(),this.size=h.NA(e),null!=r){var i=r.length;h.hu(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||h.rQ(n,this.size),this.strides=(0,h.e3)(e)}return(0,u.Z)(t,[{key:"set",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),h.hu(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(e.rank,")")}));var i=this.locToIndex(r);this.values[i]=t}},{key:"get",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];0===e.length&&(e=[0]);for(var r=0,a=0,i=e;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(e,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=e[e.length-1],c=0;c<e.length-1;++c)u+=this.strides[c]*e[c];return this.values[u]}},{key:"locToIndex",value:function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}},{key:"indexToLoc",value:function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return p().makeTensor(this.values,this.shape,this.dtype)}}]),t}(),p=null,v=null;function g(t){p=t}function m(t){v=t}function y(t){t}var b=function(){function t(e,n,r,a){(0,s.Z)(this,t),this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=h.NA(e),this.strides=(0,h.e3)(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,u.Z)(t,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data();case 2:return e=t.sent,t.abrupt("return",v.buffer(this.shape,this.dtype,e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return v.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data();case 2:return e=t.sent,t.abrupt("return",(0,h.GX)(this.shape,e,"complex64"===this.dtype));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"arraySync",value:function(){return(0,h.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var e,n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.throwIfDisposed(),e=p().read(this.dataId),"string"!==this.dtype){t.next=13;break}return t.next=5,e;case 5:return n=t.sent,t.prev=6,t.abrupt("return",n.map((function(t){return f.decodeString(t)})));case 10:throw t.prev=10,t.t0=t.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,this,[[6,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"dataToGPU",value:function(t){return this.throwIfDisposed(),p().readToGPU(this.dataId,t)}},{key:"dataSync",value:function(){this.throwIfDisposed();var t=p().readSync(this.dataId);if("string"===this.dtype)try{return t.map((function(t){return f.decodeString(t)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}},{key:"bytes",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.throwIfDisposed(),t.next=3,p().read(this.dataId);case 3:if(e=t.sent,"string"!==this.dtype){t.next=8;break}return t.abrupt("return",e);case 8:return t.abrupt("return",new Uint8Array(e.buffer));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(p().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v.print(this,t)}},{key:"clone",value:function(){return this.throwIfDisposed(),v.clone(this)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.dataSync();return(0,l.H)(e,this.shape,this.dtype,t)}},{key:"cast",value:function(t){return this.throwIfDisposed(),v.cast(this,t)}},{key:"variable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),p().makeVariable(this,t,e,n)}}]),t}();function w(){return(0,c.R)("Tensor",(function(){return b}))}Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}}),w();var x=function(t){(0,r.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,a,i){var o;return(0,s.Z)(this,n),(o=e.call(this,t.shape,t.dtype,t.dataId,i)).trainable=r,o.name=a,o}return(0,u.Z)(n,[{key:"assign",value:function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(t.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!h.cO(t.shape,this.shape))throw new Error("shape of the new value (".concat(t.shape,") and ")+"previous value (".concat(this.shape,") must match"));p().disposeTensor(this),this.dataId=t.dataId,p().incRef(this,null)}},{key:"dispose",value:function(){p().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(b);Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return t instanceof b&&null!=t.assign&&t.assign instanceof Function}})},21147:function(t,e,n){"use strict";n.d(e,{H:function(){return u}});var r=n(93433),a=n(36147),i=20,o=3,s=7;function u(t,e,n,r){var i=(0,a.e3)(e),o=function(t,e,n,r){var i=(0,a.NA)(e),o=r[r.length-1],s=new Array(o).fill(0),u=e.length,l="complex64"===n?f(t):t;if(u>1)for(var h=0;h<i/o;h++)for(var d=h*o,p=0;p<o;p++)s[p]=Math.max(s[p],c(l[d+p],0,n).length);return s}(t,e,n,i),s=e.length,u=h(t,e,n,i,o),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(s)),l.push("  shape: [".concat(e,"]")),l.push("  values:")),l.push(u.map((function(t){return"    "+t})).join("\n")),l.join("\n")}function c(t,e,n){var r;return r=Array.isArray(t)?"".concat(parseFloat(t[0].toFixed(s))," + ")+"".concat(parseFloat(t[1].toFixed(s)),"j"):(0,a.HD)(t)?"'".concat(t,"'"):"bool"===n?l(t):parseFloat(t.toFixed(s)).toString(),(0,a.oj)(r,e)}function l(t){return 0===t?"false":"true"}function h(t,e,n,a,s){var u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d="complex64"===n?2:1,p=e[0],v=e.length;if(0===v)return"complex64"===n?[c(f(t)[0],0,n)]:"bool"===n?[l(t[0])]:[t[0].toString()];if(1===v){if(p>i){var g=o*d,m=Array.from(t.slice(0,g)),y=Array.from(t.slice((p-o)*d,p*d));return"complex64"===n&&(m=f(m),y=f(y)),["["+m.map((function(t,e){return c(t,s[e],n)})).join(", ")+", ..., "+y.map((function(t,e){return c(t,s[p-o+e],n)})).join(", ")+"]"]}return["["+("complex64"===n?f(t):Array.from(t)).map((function(t,e){return c(t,s[e],n)})).join(", ")+"]"]}var b=e.slice(1),w=a.slice(1),x=a[0]*d,k=[];if(p>i){for(var I=0;I<o;I++){var S=I*x,_=S+x;k.push.apply(k,(0,r.Z)(h(t.slice(S,_),b,n,w,s,!1)))}k.push("...");for(var C=p-o;C<p;C++){var E=C*x,A=E+x;k.push.apply(k,(0,r.Z)(h(t.slice(E,A),b,n,w,s,C===p-1)))}}else for(var T=0;T<p;T++){var N=T*x,D=N+x;k.push.apply(k,(0,r.Z)(h(t.slice(N,D),b,n,w,s,T===p-1)))}var R=2===v?",":"";k[0]="["+(p>0?k[0]+R:"");for(var Z=1;Z<k.length-1;Z++)k[Z]=" "+k[Z]+R;for(var M=",\n",F=2;F<v;F++)M+="\n";return k[k.length-1]=" "+k[k.length-1]+"]"+(u?"":M),k}function f(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}},99064:function(t,e,n){"use strict";n.r(e),n.d(e,{assertTypesMatch:function(){return s},getTensorsInContainer:function(){return c},isTensorInList:function(){return u},makeTypesMatch:function(){return o}});var r=n(23939),a=n(3525),i=n(36147);function o(t,e){if(t.dtype===e.dtype)return[t,e];var n=(0,a.x8)(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function s(t,e){(0,i.hu)(t.dtype===e.dtype,(function(){return"The dtypes of the first(".concat(t.dtype,") and")+" second(".concat(e.dtype,") input must match")}))}function u(t,e){return e.some((function(e){return e.id===t.id}))}function c(t){var e=[];return l(t,e,new Set),e}function l(t,e,n){if(null!=t)if(t instanceof r.es)e.push(t);else if(a=t,Array.isArray(a)||"object"===typeof a){var a,i=t;for(var o in i){var s=i[o];n.has(s)||(n.add(s),l(s,e,n))}}}},48354:function(t,e,n){"use strict";n.d(e,{C:function(){return u},_1:function(){return h},sI:function(){return f}});var r=n(50391),a=n(35050),i=n(23939),o=n(58860),s=n(36147);function u(t,e){var n=t;if((0,o.isTypedArray)(t))return"string"===e?[]:[t.length];if("object"===typeof t){if("texture"in t){var r=t.channels||"RGBA";return[t.height,t.width*r.length]}if("buffer"in t&&!(t.buffer instanceof ArrayBuffer))return[t.buffer.size/(null==e?4:(0,s.bT)(e))]}if(!Array.isArray(t))return[];for(var i=[];Array.isArray(n)||(0,o.isTypedArray)(n)&&"string"!==e;)i.push(n.length),n=n[0];return Array.isArray(t)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(t,i,[]),i}function c(t,e,n){if(n=n||[],Array.isArray(t)||(0,o.isTypedArray)(t)){(0,s.hu)(e.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(t.length," elements")})),(0,s.hu)(t.length===e[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(e[0]," ")+"elements, but has ".concat(t.length," elements")}));for(var r=e.slice(1),a=0;a<t.length;++a)c(t[a],r,n.concat(a))}else(0,s.hu)(0===e.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(e[0]," elements")}))}function l(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(t," tensor, but got ").concat(e," tensor"))}}function h(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(t instanceof i.es)return l(a,t.dtype,e,n),t;var c=(0,s.D2)(t);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,e,n),null==t||!(0,o.isTypedArray)(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t){var h=null==t?"null":t.constructor.name;throw new Error("Argument '".concat(e,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(h,"'"))}var f=u(t,c);(0,o.isTypedArray)(t)||Array.isArray(t)||(t=[t]);var d="string"!==c?(0,o.toTypedArray)(t,c):(0,o.flatten)(t,[],!0);return r.BV.makeTensor(d,f,c)}function f(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(t))throw new Error("Argument ".concat(e," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return t.map((function(t,a){return h(t,"".concat(e,"[").concat(a,"]"),n,r)}))}},47465:function(t,e,n){"use strict";n.d(e,{p:function(){return r}});var r=n(18931).e},3525:function(t,e,n){"use strict";var r,a,i,o,s;n.d(e,{x8:function(){return c},z4:function(){return l}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(r||(r={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(a||(a={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(i||(i={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(o||(o={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(s||(s={}));var u={float32:o,int32:a,bool:i,complex64:s};function c(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast ".concat(t," with ").concat(e))}return u[t][e]}function l(t){return c(t,"int32")}},58860:function(t,e,n){"use strict";n.r(e),n.d(e,{arraysEqual:function(){return a.cO},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},convertBackendValuesAndArrayBuffer:function(){return a.KS},createScalarValue:function(){return o},createShuffledIndices:function(){return a.U$},decodeString:function(){return h},distSquared:function(){return a.E7},encodeString:function(){return l},fetch:function(){return c},fingerPrint64:function(){return i.O},flatten:function(){return d},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return i.E},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.xH},isString:function(){return a.HD},isTypedArray:function(){return f},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return u},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return s}});var r=n(35050),a=n(36147),i=n(97113);function o(t,e){return"string"===e?l(t):s([t],e)}function s(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=d(t)),(0,r.OB)().getBool("DEBUG")&&a.D5(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var n=new Uint8Array(t.length),i=0;i<n.length;++i)0!==Math.round(t[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(e))}function u(){return(0,r.OB)().platform.now()}function c(t,e){return(0,r.OB)().platform.fetch(t,e)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return e=e||"utf-8",(0,r.OB)().platform.encode(t,e)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return e=e||"utf-8",(0,r.OB)().platform.decode(t,e)}function f(t){return(0,r.OB)().platform.isTypedArray(t)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e&&(e=[]),"boolean"===typeof t||"number"===typeof t||"string"===typeof t||a.tI(t)||null==t||f(t)&&n)e.push(t);else if(Array.isArray(t)||f(t))for(var r=0;r<t.length;++r)d(t[r],e,n);else{for(var i=-1,o=0,s=Object.keys(t);o<s.length;o++){var u=s[o];/^([1-9]+[0-9]*|0)$/.test(u)&&(i=Math.max(i,Number(u)))}for(var c=0;c<=i;c++)d(t[c],e,n)}return e}},36147:function(t,e,n){"use strict";function r(t){for(var e=t.length,n=0;e>0;)n=Math.random()*e|0,s(t,--e,n)}function a(t,e){if(t.length!==e.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(t.length)+"Second array length was ".concat(e.length));for(var n=t.length,r=0;n>0;)r=Math.random()*n|0,s(t,--n,r),s(e,n,r)}function i(t,e,n){return Math.max(t,Math.min(e,n))}function o(t){return t%2===0?t:t+1}function s(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function u(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function c(t,e){var n=Math.random();return e*n+(1-n)*t}function l(t,e){for(var n=0,r=0;r<t.length;r++){var a=Number(t[r])-Number(e[r]);n+=a*a}return n}function h(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";h(g(t,e),(function(){return n+" Shapes ".concat(t," and ").concat(e," must match")}))}function d(t){h(null!=t,(function(){return"The input to the tensor constructor must be a non-null value."}))}function p(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function v(t){return 0===t.length}function g(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function m(t){return t%1===0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function b(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function w(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return r(e),e}function x(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function s(){if(t())a();else{o++;var u=e(o);null!=n&&o>=n?i():null!=r?r(s,u):setTimeout(s,u)}}()}))}function I(t,e){for(var n=1,r=-1,a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(-1===t[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(t[a]<0)throw Error("Shapes can not be < 0. Found ".concat(t[a]," at dim ").concat(a));if(-1===r){if(e>0&&e!==n)throw Error("Size(".concat(e,") must match the product of shape ").concat(t));return t}if(0===n)throw Error("Cannot infer the missing size in [".concat(t,"] when ")+"there are 0 elements");if(e%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(e," / ").concat(n));var i=t.slice();return i[r]=e/n,i}function S(t,e){var n=e.length;return h((t=null==t?e.map((function(t,e){return e})):[].concat(t)).every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t)})),h(t.every((function(t){return m(t)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(t)})),t.map((function(t){return t<0?n+t:t}))}function _(t,e){for(var n=[],r=[],a=null!=e&&Array.isArray(e)&&0===e.length,i=null==e||a?null:S(e,t).sort(),o=0,s=0;s<t.length;++s){if(null!=i){if(i[o]===s&&1!==t[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(t[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function C(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type ".concat(t));n=new Uint8Array(e)}return n}function E(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type ".concat(t));n=new Array(e)}return n}function A(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(e," being uploaded contains ").concat(r,"."))}}function T(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function N(t,e){return"complex64"!==e&&(("float32"!==e||"complex64"===t)&&(("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)))}function D(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype ".concat(t))}function R(t){if(null==t)return 0;var e=0;return t.forEach((function(t){return e+=t.length})),e}function Z(t){return"string"===typeof t||t instanceof String}function M(t){return"boolean"===typeof t}function F(t){return"number"===typeof t}function O(t){return Array.isArray(t)?O(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":F(t)?"float32":Z(t)?"string":M(t)?"bool":"float32"}function B(t){return!!(t&&t.constructor&&t.call&&t.apply)}function L(t,e){for(var n=e;n<t;++n)if(t%n===0)return n;return t}function P(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function U(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===e.length)for(var i=e[0]*(r?2:1),o=0;o<i;o++)a[o]=n[t+o];else for(var s=e[0],u=e.slice(1),c=u.reduce((function(t,e){return t*e}))*(r?2:1),l=0;l<s;l++)a[l]=U(t+l*c,u,n,r);return a}function z(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===t.length)return e[0];var r=t.reduce((function(t,e){return t*e}))*(n?2:1);if(0===r)return[];if(r!==e.length)throw new Error("[".concat(t,"] does not match the input size ").concat(e.length).concat(n?" for a complex tensor":"","."));return U(0,t,e,n)}function W(t,e){if(Array.isArray(t))return t;if("float32"===e)return t instanceof Float32Array?t:new Float32Array(t);if("int32"===e)return t instanceof Int32Array?t:new Int32Array(t);if("bool"===e||"string"===e)return Uint8Array.from(new Int32Array(t));throw new Error("Unknown dtype ".concat(e))}function V(t,e){for(var n=G(t,e),r=0;r<n.length;r++)n[r]=1;return n}function G(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type ".concat(e))}function j(t,e){var n=t.reduce((function(t,e){return t*e}),1);if(null==e||"float32"===e)return z(t,new Float32Array(n));if("int32"===e)return z(t,new Int32Array(n));if("bool"===e)return z(t,new Uint8Array(n));throw new Error("Unknown data type ".concat(e))}function H(t){t.forEach((function(e){h(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(t,"].")}))}))}function X(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function q(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Y(t){return t&&t.then&&"function"===typeof t.then}n.d(e,{AE:function(){return y},Cq:function(){return d},D2:function(){return O},D5:function(){return A},E7:function(){return l},EC:function(){return S},GN:function(){return m},GX:function(){return z},HD:function(){return Z},JZ:function(){return I},KS:function(){return W},LF:function(){return s},LP:function(){return T},Mu:function(){return H},NA:function(){return p},NE:function(){return q},QB:function(){return N},Sm:function(){return u},TV:function(){return r},U$:function(){return w},Ub:function(){return R},WD:function(){return k},WP:function(){return C},YP:function(){return b},bT:function(){return D},bj:function(){return c},bp:function(){return _},cO:function(){return g},d7:function(){return a},e3:function(){return P},hj:function(){return F},hu:function(){return h},jP:function(){return L},jn:function(){return M},k5:function(){return f},l6:function(){return j},mf:function(){return B},nY:function(){return o},oj:function(){return x},p8:function(){return V},qy:function(){return X},rQ:function(){return E},tI:function(){return Y},uZ:function(){return i},wT:function(){return G},xH:function(){return v}})},1649:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},90156:function(t,e,n){"use strict";var r=n(60136),a=n(29388),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=n(87884),l=n(96699),h=n(28607),f=n(65005),d=function(){function t(){(0,s.Z)(this,t),this.size=null}return(0,u.Z)(t,[{key:"batch",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return c.D5U.assert(t>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(t)})),e=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/t):Math.floor(this.size/t),p((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.iterator();case 2:return e.abrupt("return",e.sent.columnMajorBatch(t,n,v));case 3:case"end":return e.stop()}}),e)}))),e)}},{key:"concatenate",value:function(t){var e,n=this;return e=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null,p((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.next=5,t.iterator();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.concatenate.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)}))),e)}},{key:"filter",value:function(t){var e,n=this;return e=this.size===1/0?1/0:null,p((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.abrupt("return",e.sent.filter((function(e){return c.lub((function(){return t(e)}))})));case 3:case"end":return e.stop()}}),e)}))),e)}},{key:"forEachAsync",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.iterator();case 2:return t.abrupt("return",t.sent.forEachAsync(e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"map",value:function(t){var e=this;return p((0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.iterator();case 2:return n.abrupt("return",n.sent.map((function(e){return c.lub((function(){return t(e)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(t){var e=this;return p((0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(t));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var e=this;return p((0,o.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.iterator();case 2:return n.abrupt("return",n.sent.prefetch(t));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(t){var e,n=this;return e=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null,p((0,o.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,h.N8)((0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.abrupt("return",{value:t.t0,done:!1});case 4:case"end":return t.stop()}}),t)})))),e.abrupt("return",(0,h.hW)(r.take(t)));case 2:case"end":return e.stop()}}),e)}))),e)}},{key:"skip",value:function(t){var e,n=this;return e=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null,p((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.abrupt("return",e.sent.skip(t));case 3:case"end":return e.stop()}}),e)}))),e)}},{key:"shuffle",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=l.alea(e||c.D5U.now().toString());return p((0,o.Z)((0,i.Z)().mark((function e(){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.int32(),n&&(o+=a.int32()),e.next=4,r.iterator();case 4:return e.abrupt("return",e.sent.shuffle(t,o.toString()));case 5:case"end":return e.stop()}}),e)}))),this.size)}},{key:"take",value:function(t){var e,n=this;return e=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null,p((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.abrupt("return",e.sent.take(t));case 3:case"end":return e.stop()}}),e)}))),e)}},{key:"toArray",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.size!==1/0){t.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return t.next=4,this.iterator();case 4:return t.abrupt("return",t.sent.toArray());case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.size!==1/0){t.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return t.next=4,this.iterator();case 4:return t.abrupt("return",t.sent.toArrayForTest());case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){(0,r.Z)(l,n);var c=(0,a.Z)(l);function l(){var t;return(0,s.Z)(this,l),(t=c.apply(this,arguments)).size=e,t}return(0,u.Z)(l,[{key:"iterator",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),l}(d))}function v(t){if(null===t)return null;var e=t[0];return(0,f._L)(e)?{value:function(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof c.esB?c.knu(t):c.XeE(t)}(t),recurse:!1}:{value:null,recurse:!0}}d.MAX_BUFFER_SIZE=1e4},45104:function(t,e,n){"use strict";n(87884),n(90156),n(62116),Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote")},62116:function(t,e,n){"use strict";n(90156)},59582:function(t,e,n){"use strict";n.d(e,{version_data:function(){return r.i}});n(90156),n(45104),n(62116),n(1921),n(43251),n(94450);var r=n(8192)},1919:function(t,e,n){"use strict";n(87884),n(28607),n(14951)},34820:function(t,e,n){"use strict";n(87884),n(1919)},28607:function(t,e,n){"use strict";n.d(e,{N8:function(){return g},hW:function(){return m}});var r=n(37762),a=n(60136),i=n(29388),o=n(74165),s=n(15861),u=n(15671),c=n(43144),l=n(87884),h=n(96699),f=n(11640),d=n(65005),p=n(13373),v=n(61643);function g(t){return new x(t)}function m(t,e){return new R(t,e)}var y,b=function(){function t(){(0,u.Z)(this,t)}return(0,c.Z)(t,[{key:"toArray",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,this.next();case 3:n=t.sent;case 4:if(n.done){t.next=11;break}return e.push(n.value),t.next=8,this.next();case 8:n=t.sent,t.next=4;break;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.prefetch(100),n=[],t.next=4,e.next();case 4:r=t.sent;case 5:if(r.done){t.next=12;break}return n.push(r.value),t.next=9,e.next();case 9:r=t.sent,t.next=5;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.next();case 2:e=t.sent;case 3:if(e.done){t.next=9;break}return t.next=6,this.next();case 6:e=t.sent,t.next=3;break;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.next();case 2:n=t.sent,r=e(n.value);case 4:if(n.done||!r){t.next=11;break}return t.next=7,this.next();case 7:n=t.sent,r=e(n.value),t.next=4;break;case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleErrors",value:function(t){return new A(this,t)}},{key:"filter",value:function(t){return new C(this,t)}},{key:"map",value:function(t){return new E(this,t)}},{key:"mapAsync",value:function(t){return new T(this,t)}},{key:"serialMapAsync",value:function(t){return new T(this,t).serial()}},{key:"flatmap",value:function(t){return new D(this,t)}},{key:"forEachAsync",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.map(e).resolveFully());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.serialMapAsync(e).resolveWhile((function(t){return!0===t})));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(t){return new _(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"columnMajorBatch",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.VF;return this.rowMajorBatch(t,e).map((function(t){return(0,d.iq)(t,n)}))}},{key:"concatenate",value:function(t,e){return new R(new w([this,t]),e)}},{key:"take",value:function(t){return t<0||null==t?this:new S(this,t)}},{key:"skip",value:function(t){return t<0||null==t?this:new I(this,t)}},{key:"prefetch",value:function(t){return new Z(this,t)}},{key:"shuffle",value:function(t,e){return new M(this,t,e)}},{key:"serial",value:function(){return new k(this)}}]),t}(),w=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t){var r;return(0,u.Z)(this,n),(r=e.call(this)).items=t,r.trav=0,r}return(0,c.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.trav>=this.items.length)){t.next=2;break}return t.abrupt("return",{value:null,done:!0});case 2:return e=this.items[this.trav],this.trav++,t.abrupt("return",{value:(0,f.I)(e),done:!1});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),x=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t){var r;return(0,u.Z)(this,n),(r=e.call(this)).nextFn=t,r}return(0,c.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",this.nextFn());case 4:throw t.prev=4,t.t0=t.catch(0),t.t0.message="Error thrown while iterating through a dataset: ".concat(t.t0.message),t.t0;case 8:case"end":return t.stop()}}),t,this,[[0,4]])})));return function(){return t.apply(this,arguments)}}()}]),n}(b),k=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t){var r;return(0,u.Z)(this,n),(r=e.call(this)).upstream=t,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.upstream.next());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),I=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.count++<this.maxCount)){t.next=9;break}return t.next=3,this.upstream.next();case 3:if(!(e=t.sent).done){t.next=6;break}return t.abrupt("return",e);case 6:l.B90(e.value),t.next=0;break;case 9:return t.abrupt("return",this.upstream.next());case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),S=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.maxCount=r,a.count=0,a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.count++>=this.maxCount)){t.next=2;break}return t.abrupt("return",{value:null,done:!0});case 2:return t.abrupt("return",this.upstream.next());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),_=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[];case 1:if(!(e.length<this.batchSize)){t.next=12;break}return t.next=4,this.upstream.next();case 4:if(!(n=t.sent).done){t.next=9;break}if(!(this.enableSmallLastBatch&&e.length>0)){t.next=8;break}return t.abrupt("return",{value:e,done:!1});case 8:return t.abrupt("return",{value:null,done:!0});case 9:e.push(n.value),t.next=1;break;case 12:return t.abrupt("return",{value:e,done:!1});case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),C=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.upstream.next();case 3:if(!(e=t.sent).done&&!this.predicate(e.value)){t.next=6;break}return t.abrupt("return",e);case 6:l.B90(e.value),t.next=0;break;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),E=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.transform=r,a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,a,i,s,u,c;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.upstream.next();case 2:if(!(e=t.sent).done){t.next=5;break}return t.abrupt("return",{value:null,done:!0});case 5:n=l.piX.getTensorsInContainer(e.value),a=this.transform(e.value),i=l.piX.getTensorsInContainer(a),s=(0,r.Z)(n);try{for(s.s();!(u=s.n()).done;)c=u.value,l.piX.isTensorInList(c,i)||c.dispose()}catch(o){s.e(o)}finally{s.f()}return t.abrupt("return",{value:a,done:!1});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),A=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,this.upstream.next();case 4:return t.abrupt("return",t.sent);case 7:if(t.prev=7,t.t0=t.catch(1),this.handler(t.t0)){t.next=11;break}return t.abrupt("return",{value:null,done:!0});case 11:t.next=0;break;case 13:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}()}]),n}(b),T=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.transform=r,a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,a,i,s,u,c;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.upstream.next();case 2:if(!(e=t.sent).done){t.next=5;break}return t.abrupt("return",{value:null,done:!0});case 5:return n=l.piX.getTensorsInContainer(e.value),t.next=8,this.transform(e.value);case 8:a=t.sent,i=l.piX.getTensorsInContainer(a),s=(0,r.Z)(n);try{for(s.s();!(u=s.n()).done;)c=u.value,l.piX.isTensorInList(c,i)||c.dispose()}catch(o){s.e(o)}finally{s.f()}return t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),N=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(){var t;return(0,u.Z)(this,n),(t=e.call(this)).outputQueue=new p.R,t.lastRead=Promise.resolve({value:null,done:!1}),t}return(0,c.Z)(n,[{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.outputQueue.length()){t.next=7;break}return t.next=3,this.pump();case 3:if(t.sent){t.next=5;break}return t.abrupt("return",{value:null,done:!0});case 5:t.next=0;break;case 7:return t.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b),D=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.transform=r,a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n,a,i,s,u,c;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.upstream.next();case 2:if(!(e=t.sent).done){t.next=5;break}return t.abrupt("return",!1);case 5:n=l.piX.getTensorsInContainer(e.value),a=this.transform(e.value),i=l.piX.getTensorsInContainer(a),this.outputQueue.pushAll(a),s=(0,r.Z)(n);try{for(s.s();!(u=s.n()).done;)c=u.value,l.piX.isTensorInList(c,i)||c.dispose()}catch(o){s.e(o)}finally{s.f()}return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(N),R=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=t,a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(e){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(null!=this.iterator){t.next=10;break}return t.next=5,this.moreIterators.next();case 5:if(!(n=t.sent).done){t.next=8;break}return t.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return t.next=12,this.iterator.next();case 12:if(!(r=t.sent).done){t.next=16;break}return this.iterator=null,t.abrupt("return",this.readFromChain(e));case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(b);!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(y||(y={}));var Z=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var a;return(0,u.Z)(this,n),(a=e.call(this)).upstream=t,a.bufferSize=r,a.buffer=new v.d(r),a}return(0,c.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var t=this.upstream.next();this.buffer.push(t)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(b),M=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,r,a){var i;return(0,u.Z)(this,n),(i=e.call(this,t,r)).upstream=t,i.windowSize=r,i.upstreamExhausted=!1,i.random=h.alea(a||l.D5U.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,c.Z)(n,[{key:"next",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),t.abrupt("return",this.lastRead);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"randomInt",value:function(t){return Math.floor(this.random()*t)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var e,n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){t.next=14;break}return e=this.chooseIndex(),t.next=5,this.buffer.shuffleExcise(e);case 5:if(!(n=t.sent).done){t.next=10;break}this.upstreamExhausted=!0,t.next=12;break;case 10:return this.refill(),t.abrupt("return",n);case 12:t.next=1;break;case 14:return t.abrupt("return",{value:null,done:!0});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(Z)},55144:function(t,e,n){"use strict";n(87884),n(28607)},14951:function(t,e,n){"use strict";n(28607)},87992:function(t,e,n){"use strict";n(87884),n(34820)},16530:function(t,e,n){"use strict";n(87884),n(28607)},1921:function(t,e,n){"use strict";n(90156),n(45104),n(28607),n(55144),n(16530),n(94450)},43251:function(t,e,n){"use strict";n(87884),n(34820)},94450:function(t,e,n){"use strict";n(87992),n(43251)},11640:function(t,e,n){"use strict";n.d(e,{I:function(){return i}});var r=n(87884),a=n(65005);function i(t){return(0,a.Fh)(t,o)}function o(t){return t instanceof r.esB?{value:t.clone(),recurse:!1}:(0,a.TW)(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}},65005:function(t,e,n){"use strict";n.d(e,{Fh:function(){return a},TW:function(){return c},VF:function(){return u},_L:function(){return l},iq:function(){return o}});var r=n(87884);function a(t,e){return i(t,e)}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==t)return null;if("function"===typeof Blob&&t instanceof Blob)return t.slice();if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);var a=e(t);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(c(t)){var o=Array.isArray(t)?[]:{};for(var s in r.add(t),t){var u=i(t[s],e,n,r);o[s]=u}return r.delete(t),t.__proto__&&(o.__proto__=t.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(t))}return n.set(t,a.value),a.value}function o(t){return s(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:u)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=e(t);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(c(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=s(t.map((function(t){return t[r]})),e,n);i[r]=a};for(var u in r)o(u);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function u(t){return null===t?null:c(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function c(t){var e=!1;r.OBj().get("IS_BROWSER")?e=t instanceof TextDecoder:e=t instanceof n(34977).StringDecoder;return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"===typeof t&&!(t instanceof r.esB)&&!(t instanceof Promise)&&!e)}function l(t){return null==t||(null===(e=t)||"object"!==typeof e&&"function"!==typeof e)||Array.isArray(t)||"object"===typeof t&&t instanceof r.esB||r.D5U.isTypedArray(t);var e}},13373:function(t,e,n){"use strict";n.d(e,{R:function(){return c}});var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),e.call(this,n.INITIAL_CAPACITY)}return(0,a.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(t){(0,i.Z)((0,o.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),(0,i.Z)((0,o.Z)(n.prototype),"push",this).call(this,t)}},{key:"unshift",value:function(t){(0,i.Z)((0,o.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),(0,i.Z)((0,o.Z)(n.prototype),"unshift",this).call(this,t)}},{key:"expand",value:function(){for(var t=2*this.capacity,e=new Array(t),n=this.length(),r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(n(61643).d);c.INITIAL_CAPACITY=32},61643:function(t,e,n){"use strict";n.d(e,{d:function(){return o}});var r=n(37762),a=n(15671),i=n(43144),o=function(){function t(e){if((0,a.Z)(this,t),this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}return(0,i.Z)(t,[{key:"wrap",value:function(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}},{key:"get",value:function(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}},{key:"set",value:function(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}},{key:"length",value:function(){var t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(t){var e,n=(0,r.Z)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var t=this.get(this.end);return this.set(this.end,void 0),t}},{key:"unshift",value:function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}},{key:"shuffleExcise",value:function(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}]),t}()},8192:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},32532:function(t,e,n){"use strict";n.d(e,{GD:function(){return _},Gc:function(){return x},aI:function(){return E}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(87884),u=n(55658),c=n(17319),l=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(s.m7h.Serializable),h=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u.py(t,e)}}]),n}(l);h.className="elu",s.m7h.registerClass(h);var f=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return s.U8D(t)}}]),n}(l);f.className="selu",s.m7h.registerClass(f);var d=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return s.UYe(t)}}]),n}(l);d.className="relu",s.m7h.registerClass(d);var p=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return(0,s.lub)((function(){return s.LTh(6,s.UYe(t))}))}}]),n}(l);p.className="relu6",s.m7h.registerClass(p);var v=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return t}}]),n}(l);v.className="linear",s.m7h.registerClass(v);var g=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return s.XD2(t)}}]),n}(l);g.className="sigmoid",s.m7h.registerClass(g);var m=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return u.HX(t)}}]),n}(l);m.className="hardSigmoid",s.m7h.registerClass(m);var y=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return s.Wvh(t)}}]),n}(l);y.className="softplus",s.m7h.registerClass(y);var b=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return u.O(t)}}]),n}(l);b.className="softsign",s.m7h.registerClass(b);var w=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return s.AEp(t)}}]),n}(l);w.className="tanh",s.m7h.registerClass(w);var x=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return s.XAC(t,e)}}]),n}(l);x.className="softmax",s.m7h.registerClass(x);var k=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return s.CmS(t,e)}}]),n}(l);k.className="logSoftmax",s.m7h.registerClass(k);var I=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,s.lub)((function(){return s.dC7(s.XD2(s.dC7(t,e)),t)}))}}]),n}(l);I.className="swish",s.m7h.registerClass(I);var S=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return(0,s.lub)((function(){return s.dC7(t,s.AEp(s.Wvh(t)))}))}}]),n}(l);function _(t){return t.getClassName()}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.tU)(t,s.m7h.SerializationMap.getMap().classNameMap,e,"activation")}function E(t){if(null==t){var e={className:"linear",config:{}};return C(e)}if("string"===typeof t){var n={};return n.className=t,n.config={},C(n)}return t instanceof l?t:C(t)}S.className="mish",s.m7h.registerClass(S)},40785:function(t,e,n){"use strict";n.d(e,{Ho:function(){return i},rf:function(){return o}});var r,a=n(87884);function i(){return null==r&&(r=(0,a.y3$)().epsilon()),r}function o(){return"channelsLast"}},70387:function(t,e,n){"use strict";n.d(e,{L:function(){return a},s:function(){return o}});var r=0;function a(){return r++}var i={};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t in i||(i[t]=0),i[t]+=1,t+i[t].toString()}},55658:function(t,e,n){"use strict";n.d(e,{AK:function(){return x},GZ:function(){return y},Gg:function(){return b},HX:function(){return T},Iq:function(){return k},KC:function(){return N},O:function(){return E},Uz:function(){return d},a2:function(){return _},c9:function(){return p},dt:function(){return l},h6:function(){return I},mV:function(){return m},nG:function(){return w},pj:function(){return c},py:function(){return C},rv:function(){return A},rx:function(){return h},uI:function(){return g},xH:function(){return f}});var r=n(93433),a=n(87884),i=n(36446),o=n(59593),s=n(23294),u=n(40785);function c(t,e){return a.pju(t,e)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),a.XLQ(t,n)}function h(t,e){return(0,a.lub)((function(){if(2!==t.shape.length)throw new o.nu("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return b(l(t,1),[1,e,1])}))}function f(t){var e=[s.NS(t.shape)];return a.XLQ(t,e)}function d(t){if(t.rank<=1)throw new o.nu("batchFlatten requires a minimum rank of 2. Got rank: ".concat(t.rank,"."));var e=[t.shape[0],s.NS(t.shape,1)];return a.XLQ(t,e)}function p(t,e,n){return(0,a.lub)((function(){switch(t.rank){case 1:return a.jZU(t,e,n);case 2:return a.SmN(t,[e,0],[n,t.shape[1]]);case 3:return a.CnO(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return a.p0P(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return a.tPi(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return a.tPi(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new o.nu("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(t.rank))}}))}function v(t,e,n){return(0,a.lub)((function(){switch(t.rank){case 1:return a.jZU(t,e,n);case 2:return a.SmN(t,[0,e],[t.shape[0],n]);case 3:return a.CnO(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return a.p0P(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new o.nu("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(t.rank))}}))}function g(t,e,n,r){return(0,a.lub)((function(){switch(t.rank){case 1:return a.jZU(t,e,n);case 2:switch(r){case 1:return p(t,e,n);case 2:return v(t,e,n);default:throw new o.nu("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return p(t,e,n);case 2:return a.CnO(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return v(t,e,n);default:throw new o.nu("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return p(t,e,n);case 2:return a.p0P(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return a.p0P(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return v(t,e,n);default:throw new o.nu("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new o.nu("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(t.rank))}}))}function m(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(e=t[0].rank)?e:0),n===t[0].rank&&(n=-1),a.zoF(t,n)}function y(t,e){switch(t.rank){case 1:return a.gME([t,e]);case 2:return a.Izb([t,e],0);case 3:return a.MNy([t,e],0);case 4:return a.ZaL([t,e],0);default:throw new o.nu("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(t.rank))}}function b(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new o.nu("The length of input n (".concat(e.length,") does not match ")+"the number of dimensions in input x (".concat(t.rank,")"));return a.Gg6(t,e)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return a.nGf(t,e,n,r,i)}function x(t,e,n,i){if(t.rank<2||e.rank<2)throw new o.nj("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(t.shape," and y shape = ").concat(e.shape));if(e.rank>=3&&t.shape.slice(-1)[0]!==e.shape.slice(-2)[0])throw new o.nj("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(t.shape," and ")+" y shape = ".concat(e.shape));if(2===t.rank&&2===e.rank){return a.imm.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:i?S(t.rank,i,(0,u.rf)()):null,activation:n})}var s=t.shape.slice(),c=s.pop();t=a.XLQ(t,[-1,c]);var l=e.shape.slice(),h=l.pop(),f=l.pop(),d=[].concat((0,r.Z)(l),[h]),p=Array.from({length:e.rank},(function(t,n){return 0===n?e.rank-2:n<=e.rank-2?n-1:n}));e=a.XLQ(a.p4s(e,p),[f,-1]);var v=[].concat((0,r.Z)(s),(0,r.Z)(d));return a.XLQ(a.imm.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:i?S(t.rank,i,(0,u.rf)()):null,activation:n}),v)}function k(t,e,n){return(0,a.lub)((function(){return e=Array.isArray(e)?(0,a.RRF)(e,"int32"):a.pju(e,"int32"),a.Iqj(t,e,n)}))}function I(t){return a.dC7(t,t)}function S(t,e,n){var r=e.shape;if(1!==e.rank&&e.rank!==t)throw new o.nu("Unexpected bias dimensions: ".concat(e.rank)+"; expected it to be 1 or ".concat(t));if(5===t){if("channelsFirst"===n)return 1===r.length?a.XLQ(e,[1,r[0],1,1,1]):a.XLQ(e,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?a.XLQ(e,[1,1,1,1,r[0]]):a.XLQ(e,[1].concat(r))}else if(4===t){if("channelsFirst"===n)return 1===r.length?a.XLQ(e,[1,r[0],1,1]):a.XLQ(e,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?a.XLQ(e,[1,1,1,r[0]]):a.XLQ(e,[1].concat(r))}else if(3===t){if("channelsFirst"===n)return 1===r.length?a.XLQ(e,[1,r[0],1]):a.XLQ(e,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?a.XLQ(e,[1,1,r[0]]):a.XLQ(e,[1].concat(r))}else if(t<3)return e;throw new o.nu("Unsupported input rank by biasAdd: ".concat(e.rank))}function _(t,e,n){return(0,a.lub)((function(){return null==n&&(n=(0,u.rf)()),(0,i.cj)(n),a.IHx(t,S(t.rank,e,n))}))}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==e)throw new o.nj("Support for alpha values other than 1 (".concat(e,") is not implemented ")+"yet.");return a.pyx(t)}function E(t){return(0,a.lub)((function(){return a.hiC(t,a.IHx(a.WnP(t),1))}))}function A(t,e,n,r){return(0,a.lub)((function(){return a.rvX(t,e,n,r)}))}function T(t){return(0,a.lub)((function(){var e=a.IHx(.5,a.dC7(.2,t));return a.iUl(e,0,1)}))}function N(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t():e()}},93108:function(t,e,n){"use strict";n.d(e,{CZ:function(){return k},ex:function(){return m},m$:function(){return S}});var r,a=n(93433),i=n(97326),o=n(60136),s=n(29388),u=n(37762),c=n(74165),l=n(15861),h=n(15671),f=n(43144),d=n(87884),p=n(59593),v=n(38518),g=n(17319);!function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(r||(r={}));var m=function(){function t(){(0,h.Z)(this,t),this.validationData=null}return(0,f.Z)(t,[{key:"setParams",value:function(t){this.params=t}},{key:"onEpochBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"setModel",value:function(t){}}]),t}(),y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,h.Z)(this,t),null==e&&(e=[]),this.callbacks=e,this.queueLength=n}return(0,f.Z)(t,[{key:"append",value:function(t){this.callbacks.push(t)}},{key:"setParams",value:function(t){var e,n=(0,u.Z)(this.callbacks);try{for(n.s();!(e=n.n()).done;){e.value.setParams(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(t){var e,n=(0,u.Z)(this.callbacks);try{for(n.s();!(e=n.n()).done;){e.value.setModel(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,a,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==n&&(n={}),r=(0,u.Z)(this.callbacks),t.prev=2,r.s();case 4:if((a=r.n()).done){t.next=10;break}return i=a.value,t.next=8,i.onEpochBegin(e,n);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,a,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==n&&(n={}),r=(0,u.Z)(this.callbacks),t.prev=2,r.s();case 4:if((a=r.n()).done){t.next=10;break}return i=a.value,t.next=8,i.onEpochEnd(e,n);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,a,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==n&&(n={}),r=(0,u.Z)(this.callbacks),t.prev=2,r.s();case 4:if((a=r.n()).done){t.next=10;break}return i=a.value,t.next=8,i.onBatchBegin(e,n);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,a,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==n&&(n={}),r=(0,u.Z)(this.callbacks),t.prev=2,r.s();case 4:if((a=r.n()).done){t.next=10;break}return i=a.value,t.next=8,i.onBatchEnd(e,n);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==e&&(e={}),n=(0,u.Z)(this.callbacks),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=10;break}return a=r.value,t.next=8,a.onTrainBegin(e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])})));return function(e){return t.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var n,r,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==e&&(e={}),n=(0,u.Z)(this.callbacks),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=10;break}return a=r.value,t.next=8,a.onTrainEnd(e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),b=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(){return(0,h.Z)(this,n),e.call(this)}return(0,f.Z)(n,[{key:"onEpochBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.seen=0,this.totals={};case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,a,i,o=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=(0,c.Z)().mark((function t(e){var a,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"number"===typeof(a=n[e])?(o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+a*r):(e in o.totals?i=o.totals[e]:o.totals[e]=0,s=(0,d.lub)((function(){return(0,d.IHx)(o.totals[e],(0,d.dC7)(a,r))})),o.totals[e]=s,null!=i&&i.dispose());case 2:case"end":return t.stop()}}),t)})),t.t0=(0,c.Z)().keys(n);case 5:if((t.t1=t.t0()).done){t.next=10;break}return i=t.t1.value,t.delegateYield(a(i),"t2",8);case 8:t.next=5;break;case 10:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r,a,i,o=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n){t.next=20;break}r=(0,u.Z)(this.params.metrics),t.prev=2,i=(0,c.Z)().mark((function t(){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.value,null!=o.totals[e]){t.next=3;break}return t.abrupt("return","continue");case 3:"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:(0,d.lub)((function(){var t=(0,d.dC7)((0,d.hiC)(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),(0,d.CnY)(n[e])}));case 4:case"end":return t.stop()}}),t)})),r.s();case 5:if((a=r.n()).done){t.next=12;break}return t.delegateYield(i(),"t0",7);case 7:if("continue"!==t.t0){t.next=10;break}return t.abrupt("continue",10);case 10:t.next=5;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(2),r.e(t.t1);case 17:return t.prev=17,r.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[2,14,17,20]])})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(m),w=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(){return(0,h.Z)(this,n),e.apply(this,arguments)}return(0,f.Z)(n,[{key:"onTrainBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.epoch=[],this.history={};case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in null==n&&(n={}),this.epoch.push(e),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"syncData",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(){var e,n,r,a,i,o,s,u,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in e=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],e.push(s.data()),n.push(a),r.push(o));return t.next=6,Promise.all(e);case 6:for(u=t.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(m),x=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r){var a;if((0,h.Z)(this,n),(a=e.call(this)).currentEpoch=0,a.nowFunc=t.nowFunc,a.nextFrameFunc=t.nextFrameFunc||d.glt,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return d.D5U.isNumber(a.yieldEvery)&&(a.maybeWait=g.Ds(a.maybeWait.bind((0,i.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=t.onTrainBegin,a.trainEnd=t.onTrainEnd,a.epochBegin=t.onEpochBegin,a.epochEnd=t.onEpochEnd,a.batchBegin=t.onBatchBegin,a.batchEnd=t.onBatchEnd,a.yield=t.onYield,a}return(0,f.Z)(n,[{key:"maybeWait",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n,r){var a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],null==this.yield){t.next=5;break}return t.next=4,(0,v.Z)(r);case 4:a.push(this.yield(e,n,r));case 5:return a.push(this.nextFrameFunc()),t.next=8,Promise.all(a);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentEpoch=e,null==this.epochBegin){t.next=6;break}return t.next=4,(0,v.Z)(n);case 4:return t.next=6,this.epochBegin(e,n);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],null==this.epochEnd){t.next=5;break}return t.next=4,(0,v.Z)(n);case 4:r.push(this.epochEnd(e,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),t.next=8,Promise.all(r);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.batchBegin){t.next=5;break}return t.next=3,(0,v.Z)(n);case 3:return t.next=5,this.batchBegin(e,n);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e,n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],null==this.batchEnd){t.next=5;break}return t.next=4,(0,v.Z)(n);case 4:r.push(this.batchEnd(e,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):d.D5U.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),t.next=8,Promise.all(r);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.trainBegin){t.next=5;break}return t.next=3,(0,v.Z)(e);case 3:return t.next=5,this.trainBegin(e);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.trainEnd){t.next=5;break}return t.next=3,(0,v.Z)(e);case 3:return t.next=5,this.trainEnd(e);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(m);function k(t,e){return null==t&&(t={}),t instanceof m?[t]:Array.isArray(t)&&t[0]instanceof m?t:g.zZ(t).map((function(t){return new x(t,e)}))}var I=function(){function t(){(0,h.Z)(this,t)}return(0,f.Z)(t,null,[{key:"registerCallbackConstructor",value:function(e,n){d.D5U.assert(e>=0&&Number.isInteger(e),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)})),t.checkForDuplicate(n),null==t.constructors[e]&&(t.constructors[e]=[]),t.constructors[e].push(n)}},{key:"checkForDuplicate",value:function(e){for(var n in t.constructors){t.constructors[+n].forEach((function(t){if(t===e)throw new p.nu("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){t.constructors={}}},{key:"createCallbacks",value:function(e){var n=[];for(var r in t.constructors){var i=+r;e>=i&&n.push.apply(n,(0,a.Z)(t.constructors[i]))}return n.map((function(t){return new t}))}}]),t}();function S(t,e,n,r,i,o,s,u,c){var l=new w,h=[new b].concat((0,a.Z)(I.createCallbacks(e)));null!=t&&h.push.apply(h,(0,a.Z)(t)),h.push(l);var f=new y(h);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:s,verbose:e,doValidation:u,metrics:c}),{callbackList:f,history:l}}I.constructors={}},72828:function(t,e,n){"use strict";n(74165),n(15861);var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(93108),u=n(2472);n(59593),n(38518),s.ex},36446:function(t,e,n){"use strict";n.d(e,{Lp:function(){return c},MU:function(){return d},cj:function(){return o},f4:function(){return f},w8:function(){return p},wU:function(){return s},zb:function(){return u}});var r=n(18452),a=n(17319),i=new Map;function o(t){(0,a.xn)(r.PS,"DataFormat",t)}function s(t){(0,a.xn)(r.Mz,"InterpolationFormat",t)}function u(t){(0,a.xn)(r.zx,"PaddingMode",t)}function c(t){(0,a.xn)(r.MK,"PoolMode",t)}var l=[],h="/";function f(t,e){l.push(t);try{var n=e();return l.pop(),n}catch(r){throw l.pop(),r}}function d(t){if(!g(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===l.length?"":l.join(h)+h)+t}function p(t){if(!g(t))throw new Error("Not a valid tensor name: '"+t+"'");i.has(t)||i.set(t,0);var e=i.get(t);if(i.set(t,i.get(t)+1),e>0){var n="".concat(t,"_").concat(e);return i.set(n,1),n}return t}var v=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function g(t){return!!t.match(v)}},98625:function(t,e,n){"use strict";n.d(e,{Ad:function(){return b},xF:function(){return m}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(87884),u=n(40785),c=n(17319);function l(t,e){return(0,s.lub)((function(){return s._b3(s.Smz(s.dC7(t,t),e,!0))}))}var h=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(s.m7h.Serializable),f=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).defaultMaxValue=2,a.defaultAxis=0,a.maxValue=null!=t.maxValue?t.maxValue:a.defaultMaxValue,a.axis=null!=t.axis?t.axis:a.defaultAxis,a}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=this;return(0,s.lub)((function(){var n=l(t,e.axis),r=s.iUl(n,0,e.maxValue);return s.dC7(t,s.hiC(r,s.IHx((0,u.Ho)(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(h);f.className="MaxNorm",s.m7h.registerClass(f);var d=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).defaultAxis=0,a.axis=null!=t.axis?t.axis:a.defaultAxis,a}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=this;return(0,s.lub)((function(){return s.hiC(t,s.IHx((0,u.Ho)(),l(t,e.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(h);d.className="UnitNorm",s.m7h.registerClass(d);var p=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t){return s.UYe(t)}}]),n}(h);p.className="NonNeg",s.m7h.registerClass(p);var v=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).defaultMinValue=0,a.defaultMaxValue=1,a.defaultRate=1,a.defaultAxis=0,a.minValue=null!=t.minValue?t.minValue:a.defaultMinValue,a.maxValue=null!=t.maxValue?t.maxValue:a.defaultMaxValue,a.rate=null!=t.rate?t.rate:a.defaultRate,a.axis=null!=t.axis?t.axis:a.defaultAxis,a}return(0,a.Z)(n,[{key:"apply",value:function(t){var e=this;return(0,s.lub)((function(){var n=l(t,e.axis),r=s.IHx(s.dC7(e.rate,s.iUl(n,e.minValue,e.maxValue)),s.dC7(1-e.rate,n));return s.dC7(t,s.hiC(r,s.IHx((0,u.Ho)(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(h);v.className="MinMaxNorm",s.m7h.registerClass(v);var g={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function m(t){return(0,c.Kj)(t)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.tU)(t,s.m7h.SerializationMap.getMap().classNameMap,e,"constraint")}function b(t){return null==t?null:"string"===typeof t?y({className:t in g?g[t]:t,config:{}}):t instanceof h?t:y(t)}},37495:function(t,e,n){"use strict";n.d(e,{W:function(){return I}});var r=n(29439),a=n(93433),i=n(37762),o=n(15671),s=n(43144),u=n(97326),c=n(60136),l=n(29388),h=n(87884),f=n(70387),d=n(59593),p=n(58505),v=n(17319),g=n(62141),m=n(81111),y=n(92247),b=n(18667),w=n(30510),x=n(17777),k=n(69804),I=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,o.Z)(this,n),(r=e.call(this,{})).containerNodes=new Set,r.name=t.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=(0,f.s)(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(t.inputs)?r.inputs=t.inputs.slice():r.inputs=[t.inputs],Array.isArray(t.outputs)?r.outputs=t.outputs.slice():r.outputs=[t.outputs],v.Tw(r.inputs).length!==r.inputs.length)throw new d.nu("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(t){return t.name}))));v.Tw(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(t){return t.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var s,c=(0,i.Z)(r.outputs);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=l.sourceLayer,p=l.nodeIndex,g=l.tensorIndex;r.outputLayers.push(h),r.outputLayersNodeIndices.push(p),r.outputLayersTensorIndices.push(g)}}catch(Nt){c.e(Nt)}finally{c.f()}var m,y=(0,i.Z)(r.inputs);try{for(y.s();!(m=y.n()).done;){var b=m.value,w=b.sourceLayer,I=b.nodeIndex,S=b.tensorIndex;v.hu(0===I,"input layer has >1 nodes"),v.hu(0===S,"input layer has >1 tensors"),r.inputLayers.push(w),r.inputLayersNodeIndices.push(I),r.inputLayersTensorIndices.push(S)}}catch(Nt){y.e(Nt)}finally{y.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var _=0;_<r.inputLayers.length;_++){var C=r.inputLayers[_];if(!(C instanceof x.l))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(t.inputs,". ")+"Input ".concat(_," (0-based) originates ")+"from layer type ".concat(C.getClassName(),"."));r.inputNames.push(C.name),r.feedInputShapes.push(C.batchInputShape),r.feedInputNames.push(C.name)}var E,A=(0,i.Z)(r.outputLayers);try{for(A.s();!(E=A.n()).done;){var T=E.value;r.outputNames.push(T.name)}}catch(Nt){A.e(Nt)}finally{A.f()}r.internalInputShapes=r.inputs.map((function(t){return t.shape})),r.internalOutputShapes=r.outputs.map((function(t){return t.shape}));var N,D={},R={},Z={},M={},F={},O=[],B=function t(e,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=e.sourceLayer,s=e.nodeIndex,u=e.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new d.LH("The tensor ".concat(e.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in F||(F[o.id]=Object.keys(F).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,h=0;h<l;h++){t(c.inputTensors[h],a,i,c.inboundLayers[h],c.nodeIndices[h],c.tensorIndices[h])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);O.push(c)}},L=[],P=[],U=(0,i.Z)(r.outputs);try{for(U.s();!(N=U.n()).done;){B(N.value,L,P)}}catch(Nt){U.e(Nt)}finally{U.f()}var z,W=O.slice().reverse(),V=(0,i.Z)(W);try{for(V.s();!(z=V.n()).done;){var G=z.value;R[G.id]=G,G.id in D||(D[G.id]=0);var j=D[G.id],H=null==Z[G.outboundLayer.id]?0:Z[G.outboundLayer.id];j=Math.max(j,H),Z[G.outboundLayer.id]=j,M[G.outboundLayer.id]=G.outboundLayer,D[G.id]=j;for(var X=0;X<G.inboundLayers.length;X++){var q=G.inboundLayers[X],Y=G.nodeIndices[X],K=q.inboundNodes[Y],Q=null==D[K.id]?0:D[K.id];D[K.id]=Math.max(j+1,Q),R[K.id]=K}}}catch(Nt){V.e(Nt)}finally{V.f()}var J={};for(var $ in D){var tt=D[$];tt in J||(J[tt]=[]),J[tt].push(R[$])}var et={};for(var nt in Z){var rt=Z[nt];rt in et||(et[rt]=[]),et[rt].push(M[nt])}var at=Object.keys(et).map((function(t){return parseInt(t,10)})).sort(v.L7);r.layers=[];var it,ot=(0,i.Z)(at);try{for(ot.s();!(it=ot.n()).done;){var st=et[it.value];st.sort((function(t,e){var n=F[t.id],r=F[e.id];return n<r?-1:n>r?1:0}));var ut,ct=(0,i.Z)(st);try{for(ct.s();!(ut=ct.n()).done;){var lt=ut.value;lt instanceof n&&r.internalContainerRefs.push(lt),r.layers.push(lt)}}catch(Nt){ct.e(Nt)}finally{ct.f()}}}catch(Nt){ot.e(Nt)}finally{ot.f()}r.layersByDepth=et,at=Object.keys(J).map((function(t){return parseInt(t,10)})).sort(v.L7);var ht,ft=r.inputs.slice(),dt=[],pt=(0,i.Z)(at);try{for(pt.s();!(ht=pt.n()).done;){var vt,gt=ht.value,mt=(0,i.Z)(J[gt]);try{for(mt.s();!(vt=mt.n()).done;){var yt=vt.value,bt=yt.outboundLayer;if(null!=bt){var wt,xt=(0,i.Z)(yt.inputTensors);try{for(xt.s();!(wt=xt.n()).done;){var kt=wt.value;if(-1===ft.indexOf(kt))throw new d.LH("Graph disconnected: cannot obtain value for tensor ".concat(kt)+' at layer "'.concat(bt.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(dt))}}catch(Nt){xt.e(Nt)}finally{xt.f()}var It,St=(0,i.Z)(yt.outputTensors);try{for(St.s();!(It=St.n()).done;){var _t=It.value;ft.push(_t)}}catch(Nt){St.e(Nt)}finally{St.f()}dt.push(bt.name)}}}catch(Nt){mt.e(Nt)}finally{mt.f()}}}catch(Nt){pt.e(Nt)}finally{pt.f()}r.nodesByDepth=J;var Ct,Et=r.layers.map((function(t){return t.name})),At=(0,i.Z)(Et);try{var Tt=function(){var t=Ct.value,e=Et.filter((function(e){return e===t})).length;if(1!==e)throw new d.LH('The name "'.concat(t,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(Et))};for(At.s();!(Ct=At.n()).done;)Tt()}catch(Nt){At.e(Nt)}finally{At.f()}return r.outboundNodes=[],r.inboundNodes=[],new k.NB({outboundLayer:(0,u.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(t){return null})),outputMasks:r.outputs.map((function(t){return null})),inputShapes:r.inputs.map((function(t){return t.shape})),outputShapes:r.outputs.map((function(t){return t.shape}))}),r.built=!0,r._refCount=1,r}return(0,s.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var t={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var e,n=(0,i.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(u){n.e(u)}finally{n.f()}var a,o=(0,i.Z)(this.internalContainerRefs);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.numDisposedVariables+=s.dispose().numDisposedVariables}}catch(u){o.e(u)}finally{o.f()}}return t.refCountAfterDispose=this._refCount,t}},{key:"trainable",get:function(){return this.trainable_},set:function(t){this.layers.forEach((function(e){e._trainableWeights.forEach((function(e){return e.trainable=t}))})),this.trainable_=t}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new d.nu("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var t,e=[],n=(0,i.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e=e.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"nonTrainableWeights",get:function(){var t,e=[],n=(0,i.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push.apply(e,(0,a.Z)(r.nonTrainableWeights))}}catch(l){n.e(l)}finally{n.f()}if(!this.trainable){var o,s=[],u=(0,i.Z)(this.layers);try{for(u.s();!(o=u.n()).done;){var c=o.value;s.push.apply(s,(0,a.Z)(c.trainableWeights))}}catch(l){u.e(l)}finally{u.f()}return s.concat(e)}return e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,o=(0,i.Z)(this.layers);try{for(o.s();!(e=o.n()).done;){var s,u=e.value,c=(0,i.Z)(u.weights);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(null!=r[l.originalName])throw new d.nu("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(b){c.e(b)}finally{c.f()}}}catch(b){o.e(b)}finally{o.f()}var h=[];for(var f in t){var p=f;if(null==r[f]){var v=f.split("/");p=v.slice(0,-2).concat([v[v.length-1]]).join("/")}if(null!=r[p])h.push([r[p],t[f]]);else if(n)throw new d.nu("Provided weight data has no target variable: ".concat(f));delete r[p]}if(n){var g=[];for(var m in r)g.push(m);if(g.length>0)throw new d.nu("".concat(g.length," of ").concat(a," weights are not set: ")+"".concat(g))}(0,y.zb)(h)}},{key:"updatedConfig",value:function(){var t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion="tfjs-layers ".concat(b.i),e.backend="TensorFlow.js",e}},{key:"toJSON",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,g.q)(this.updatedConfig());return e?JSON.stringify(n):n}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){t=v.zZ(t);for(var r=new w.l2,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],t[a]);return(0,w.ht)(n.outputs,r,e)}))}},{key:"computeMask",value:function(t,e){var n=this;return(0,h.lub)((function(){var r;return t=v.zZ(t),r=null==e?v.JE(null,t.length):v.zZ(e),n.runInternalGraph(t,r)[1]}))}},{key:"computeOutputShape",value:function(t){var e=m.x6(t);if(e.length!==this.inputLayers.length)throw new d.nu("Invalid inputShape argument ".concat(t,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<e.length;r++){var a=this.inputLayers[r],o=e[r];n[a.name+"_0_0"]=o}var s=Object.keys(this.nodesByDepth).map((function(t){return parseInt(t,10)})).sort(v.L7);if(s.length>1){var u,c=(0,i.Z)(s);try{for(c.s();!(u=c.n()).done;){var l,h=u.value,f=this.nodesByDepth[h],p=(0,i.Z)(f);try{for(p.s();!(l=p.n()).done;){var g=l.value,y=g.outboundLayer;if(-1===this.inputLayers.map((function(t){return t.id})).indexOf(y.id)){for(var b=[],w=0;w<g.inboundLayers.length;w++){var x=g.inboundLayers[w],k=g.nodeIndices[w],I=g.tensorIndices[w],S=n["".concat(x.name,"_").concat(k,"_").concat(I)];b.push(S)}for(var _=y.computeOutputShape(v.Bq(b)),C=m.x6(_),E=y.inboundNodes.indexOf(g),A=0;A<C.length;A++){n["".concat(y.name,"_").concat(E,"_").concat(A)]=C[A]}}}}catch(L){p.e(L)}finally{p.f()}}}catch(L){c.e(L)}finally{c.f()}}for(var T=[],N=[],D=0;D<this.outputLayers.length;D++){var R=this.outputLayers[D],Z=this.outputLayersNodeIndices[D],M=this.outputLayersTensorIndices[D],F="".concat(R.name,"_").concat(Z,"_").concat(M);N.push(F)}for(var O=0;O<N.length;O++){var B=N[O];v.hu(B in n),T.push(n[B])}return v.Bq(T)}},{key:"runInternalGraph",value:function(t,e){null==e&&(e=v.JE(null,t.length));for(var n={},a=0;a<this.inputs.length;++a){var o=this.inputs[a],s=t[a],u=e[a];n[o.id]=[s,u]}var c,l=Object.keys(this.nodesByDepth).map((function(t){return parseInt(t,10)})).sort(v.L7),h=(0,i.Z)(l);try{for(h.s();!(c=h.n()).done;){var f,p=c.value,g=this.nodesByDepth[p],m=(0,i.Z)(g);try{for(m.s();!(f=m.n()).done;){var y,b=f.value,w=b.outboundLayer,x=b.inputTensors,k=b.outputTensors,I=new Array,S=(0,i.Z)(x);try{for(S.s();!(y=S.n()).done;){var _=y.value;_.id in n&&I.push(n[_.id])}}catch(X){S.e(X)}finally{S.f()}if(I.length===x.length){var C={},E=void 0,A=void 0,T=void 0,N=void 0;if(null!=b.callArgs&&(C=b.callArgs),1===I.length){var D=(0,r.Z)(I[0],2),R=D[0],Z=D[1];null==C.mask&&(C.mask=Z),T=v.zZ(w.call(R,C)),N=v.zZ(w.computeMask(R,Z)),E=[R],A=[Z]}else E=I.map((function(t){return t[0]})),A=I.map((function(t){return t[1]})),null==C.mask&&(C.mask=A),T=v.zZ(w.call(E,C)),N=v.zZ(w.computeMask(E,A));if(w.activityRegularizer)throw new d.nj("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var M=0;M<k.length;++M){var F=k[M],O=T[M],B=N[M];n[F.id]=[O,B]}}}}catch(X){m.e(X)}finally{m.f()}}}catch(X){h.e(X)}finally{h.f()}var L,P=[],U=[],z=[],W=(0,i.Z)(this.outputs);try{for(W.s();!(L=W.n()).done;){var V=L.value;v.hu(V.id in n,"Could not compute output ".concat(V.name," : ").concat(V.id));var G=(0,r.Z)(n[V.id],2),j=G[0],H=G[1];z.push(j.shape),P.push(j),U.push(H)}}catch(X){W.e(X)}finally{W.f()}return[P,U,z]}},{key:"buildNodeConversionMap",value:function(t){var e,r,a={},o=(0,i.Z)(this.layers);try{for(o.s();!(r=o.n()).done;){var s=r.value;e=s instanceof n?1:0;for(var u=0;u<s.inboundNodes.length;u++){var c=n.nodeKey(s,u);this.containerNodes.has(c)&&(a[c]=e,e+=1)}}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"getLayer",value:function(t,e){if(null!=e){if(this.layers.length<=e)throw new d.nu("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}if(null==t)throw new d.nu("Provide either a layer name or layer index");var n,r=(0,i.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===t)return a}}catch(o){r.e(o)}finally{r.f()}throw new d.nu("No such layer: ".concat(t))}},{key:"calculateLosses",value:function(){var t=this;return(0,h.lub)((function(){var e,r=[],o=(0,i.Z)(t.layers);try{for(o.s();!(e=o.n()).done;)for(var s=e.value,u=0;u<s.inboundNodes.length;++u){var c=n.nodeKey(s,u);t.containerNodes.has(c)&&r.push.apply(r,(0,a.Z)(s.calculateLosses()))}}catch(l){o.e(l)}finally{o.f()}return r}))}},{key:"getConfig",value:function(){var t,e={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],o=(0,i.Z)(this.layers);try{for(o.s();!(t=o.n()).done;){for(var s=t.value,u=s.getClassName(),c=s.getConfig(),l=[],h=0;h<s.inboundNodes.length;h++){var f=s.inboundNodes[h],d=n.nodeKey(s,h),p={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch(O){console.warn("Layer ".concat(s.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(f.inboundLayers.length>0){for(var v=[],g=0;g<f.inboundLayers.length;g++){var m=f.inboundLayers[g],y=f.nodeIndices[g],b=f.tensorIndices[g],w=r[n.nodeKey(m,y)];null==w&&(w=0),v.push([m.name,w,b,p])}l.push(v)}}}var x={};x.name=s.name,x.className=u,x.config=c,x.inboundNodes=l,a.push(x)}}catch(O){o.e(O)}finally{o.f()}e.layers=a;for(var k=[],I=0;I<this.inputLayers.length;I++){var S=this.inputLayers[I],_=this.inputLayersNodeIndices[I],C=n.nodeKey(S,_);if(this.containerNodes.has(C)){var E=r[C];null!==E&&void 0!==E||(E=0);var A=this.inputLayersTensorIndices[I];k.push([S.name,E,A])}}e.inputLayers=k;for(var T=[],N=0;N<this.outputLayers.length;N++){var D=this.outputLayers[N],R=this.outputLayersNodeIndices[N],Z=n.nodeKey(D,R);if(this.containerNodes.has(Z)){var M=r[Z];null!==M&&void 0!==M||(M=0);var F=this.outputLayersTensorIndices[N];T.push([D.name,M,F])}}return e.outputLayers=T,e}},{key:"stateful",get:function(){if(this._stateful)throw new d.nu("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var t,e=(0,i.Z)(this.layers);try{for(e.s();!(t=e.n()).done;){if(t.value.stateful)return!0}}catch(n){e.e(n)}finally{e.f()}return!1}},{key:"resetStates",value:function(){var t=this;(0,h.lub)((function(){t.layers.forEach((function(t){t.stateful&&t.resetStates()}))}))}}],[{key:"fromConfig",value:function(t,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function o(t,e){t.name in a?a[t.name].push(e):a[t.name]=[e]}function s(t,e){var n,a,s=[],u=(0,i.Z)(e);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c[0],h=c[1],f=c[2];if(n=null==c[3]?{}:c[3],!(l in r))return void o(t,e);var d=r[l];if(d.inboundNodes.length<=h)return void o(t,e);var p=d.inboundNodes[h];s.push(p.outputTensors[f])}}catch(g){u.e(g)}finally{u.f()}s.length>0&&t.apply(v.Bq(s),n)}function u(t){var a=t.name,i=(0,p.v)(t,null!=e.customObjects?e.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i,t.inboundNodes.forEach((function(t){if(!(t instanceof Array))throw new d.nu("Corrupted configuration, expected array for nodeData: ".concat(t));o(i,t)}))}var c,l=e.name,h=e.layers,f=(0,i.Z)(h);try{for(f.s();!(c=f.n()).done;){u(c.value)}}catch(z){f.e(z)}finally{f.f()}for(;!v.nK(a);){var g,m=(0,i.Z)(h);try{for(m.s();!(g=m.n()).done;){var y=g.value,b=r[y.name];if(b.name in a){var w=a[b.name];delete a[b.name];var x,k=(0,i.Z)(w);try{for(k.s();!(x=k.n()).done;){s(b,x.value)}}catch(z){k.e(z)}finally{k.f()}}}}catch(z){m.e(z)}finally{m.f()}}var I,S=[],_=[],C=e.inputLayers,E=(0,i.Z)(C);try{for(E.s();!(I=E.n()).done;){var A=I.value,T=A[0],N=A[1],D=A[2];v.hu(T in r);var R=r[T].inboundNodes[N].outputTensors;S.push(R[D])}}catch(z){E.e(z)}finally{E.f()}var Z,M=e.outputLayers,F=(0,i.Z)(M);try{for(F.s();!(Z=F.n()).done;){var O=Z.value,B=O[0],L=O[1],P=O[2];v.hu(B in r);var U=r[B].inboundNodes[L].outputTensors;_.push(U[P])}}catch(z){F.e(z)}finally{F.f()}return new t({inputs:S,outputs:_,name:l})}}]),n}(k.mh)},30510:function(t,e,n){"use strict";n.d(e,{ht:function(){return g},kS:function(){return v},l2:function(){return f}});var r=n(37762),a=n(15671),i=n(43144),o=n(87884),s=n(59593),u=n(1258),c=n(17319),l=n(17777),h=n(69804);var f=function(){function t(e){if((0,a.Z)(this,t),this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof t)for(var n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(null==e)return;var i,o=(0,r.Z)(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;this.add(s.key,s.value)}}catch(u){o.e(u)}finally{o.f()}}}return(0,i.Z)(t,[{key:"add",value:function(t,e,n){if(null!=this.id2Value[t.id])throw new s.nu("Duplicate key: name=".concat(t.name,", id=").concat(t.id));return this.id2Value[t.id]=function(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return(0,o.pju)(e,t.dtype)}catch(n){throw new s.nu("The dtype of the feed (".concat(e.dtype,") can not be cast to the dtype ")+"of the key '".concat(t.name,"' (").concat(t.dtype,")."))}}(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}},{key:"addFeed",value:function(t){this.add(t.key,t.value)}},{key:"hasKey",value:function(t){return null!=this.id2Value[t.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(t){if(t instanceof h.Iy){if(null==this.id2Value[t.id])throw new s.nu("Nonexistent key: ".concat(t.name));return this.id2Value[t.id]}var e=this.name2Id[t];if(null==e)throw new s.nu("Feed dict has no SymbolicTensor name: ".concat(t));return this.id2Value[e]}},{key:"getMask",value:function(t){if(t instanceof h.Iy){if(null==this.id2Value[t.id])throw new s.nu("Nonexistent key: ".concat(t.name));return this.id2Mask[t.id]}var e=this.name2Id[t];if(null==e)throw new s.nu("Feed dict has no SymbolicTensor name: ".concat(t));return this.id2Mask[e]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&(0,o.B90)(this.id2Mask)}}]),t}(),d=new u.s,p=new u.s;function v(t){null!=d&&d.setMaxEntries(t),null!=p&&p.setMaxEntries(t)}function g(t,e,n,a){var i,s=null!=n&&n.training,u=Array.isArray(t),h=u?t:[t],v=h.map((function(t){return t.name})),g=[],w=e.names(),x=(0,r.Z)(v);try{for(x.s();!(i=x.n()).done;){var k=i.value;-1!==w.indexOf(k)?g.push(e.getValue(k)):g.push(null)}}catch(X){x.e(X)}finally{x.f()}null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);var I,S=v.join(",")+"|"+e.names().sort().join(","),_=d.get(S);if(null==_){var C=function(t,e){o.D5U.assert(null!=t&&t.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],a={};if(1===t.length){var i=y(t[0],e);n=i.sorted,a=i.recipientMap}else{var s,u=new Set,c=(0,r.Z)(t);try{for(c.s();!(s=c.n()).done;){var l,h=y(s.value,e),f=h.sorted,d=h.recipientMap,p=(0,r.Z)(f);try{for(p.s();!(l=p.n()).done;){var v=l.value;u.has(v.name)||(n.push(v),u.add(v.name))}}catch(X){p.e(X)}finally{p.f()}var g=function(t){null==a[t]&&(a[t]=new Set),d[t].forEach((function(e){return a[t].add(e)}))};for(var b in d)g(b)}}catch(X){c.e(X)}finally{c.f()}}return{sorted:n,recipientCounts:m(a)}}(h,e);_=C.sorted,I=C.recipientCounts,d.put(S,_),p.put(S,I)}I={},s||Object.assign(I,p.get(S));for(var E=new f(e),A=0;A<_.length;++A){if(null!=a){var T=(0,o.sq6)().numTensors;T>a.maxNumTensors&&(a.maxNumTensors=T),T<a.minNumTensors&&(a.minNumTensors=T)}var N=_[A],D=N.sourceLayer;if(!(D instanceof l.l)){var R,Z=[],M=[],F=[],O=!1,B=(0,r.Z)(N.inputs);try{for(B.s();!(R=B.n()).done;){var L=R.value,P=E.getValue(L),U=E.getMask(L);Z.push(P),M.push(U),null!=U&&(O=!0),s||(I[L.name]--,0!==I[L.name]||e.hasKey(L)||-1!==v.indexOf(L.name)||P.isDisposed||!0===L.sourceLayer.stateful||F.push(P))}}catch(X){B.e(X)}finally{B.f()}O&&((n=n||{}).mask=M[0]);var z=(0,c.zZ)(D.apply(Z,n)),W=null;D.supportsMasking&&(W=D.computeMask(Z,M));for(var V=b(N),G=Array.isArray(V)?V:[V],j=0;j<G.length;++j){E.hasKey(G[j])||E.add(G[j],z[j],Array.isArray(W)?W[0]:W);var H=v.indexOf(G[j].name);-1!==H&&(g[H]=z[j])}s||(0,o.B90)(F)}}return E.disposeMasks(),u?g:g[0]}function m(t){var e={};for(var n in t)e[n]=t[n].size;return e}function y(t,e){var n,a=new Set,i=[],o={},s=(0,r.Z)(e.names());try{for(s.s();!(n=s.n()).done;){var u=n.value;a.add(u)}}catch(g){s.e(g)}finally{s.f()}var c=[],l=[];for(c.push(t);c.length>0;){var h=c[c.length-1];if(a.has(h.name))c.pop();else{var f=l[l.length-1]===c.length-1;if(0===h.inputs.length||f)c.pop(),i.push(h),a.add(h.name),f&&l.pop();else{l.push(c.length-1);var d,p=(0,r.Z)(h.inputs);try{for(p.s();!(d=p.n()).done;){var v=d.value;null==o[v.name]&&(o[v.name]=new Set),o[v.name].add(h.name),a.has(v.name)||c.push(v)}}catch(g){p.e(g)}finally{p.f()}}}}return{sorted:i,recipientMap:o}}function b(t){var e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{for(var n=null,a=0;a<t.sourceLayer.inboundNodes.length;++a){var i,o=(0,r.Z)(t.sourceLayer.inboundNodes[a].outputTensors);try{for(o.s();!(i=o.n()).done;){if(i.value.id===t.id){n=a;break}}}catch(s){o.e(s)}finally{o.f()}}e=t.sourceLayer.getOutputAt(n)}return e}},17777:function(t,e,n){"use strict";n.d(e,{I:function(){return d},l:function(){return f}});var r=n(15671),a=n(43144),i=n(97326),o=n(60136),s=n(29388),u=n(87884),c=n(70387),l=n(59593),h=n(69804),f=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var a;if((0,r.Z)(this,n),a=e.call(this,{dtype:t.dtype,name:null!=t.name?t.name:(0,c.s)("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),a.trainable=!1,a.built=!0,a.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new l.nu("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var o=t.batchInputShape;if(null==o){if(null==t.inputShape)throw new l.nu("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");o=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new l.nu("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var s=t.dtype||"float32";a.batchInputShape=o,a.dtype=s,a.inputSpec=[{shape:o}];var u=new h.Iy(a.dtype,a.batchInputShape,(0,i.Z)(a),[],{},a.name);return u.nodeIndex=0,u.tensorIndex=0,new h.NB({outboundLayer:(0,i.Z)(a),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[u],outputTensors:[u],inputMasks:[null],outputMasks:[null],inputShapes:[o],outputShapes:[o]}),a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){throw new l.nu("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(h.mh);function d(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new l.nu("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));var n=t.dtype;return null==n&&(n="float32"),new f({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}f.className="InputLayer",u.m7h.registerClass(f)},69804:function(t,e,n){"use strict";n.d(e,{Iy:function(){return b},NB:function(){return x},Zg:function(){return y},hA:function(){return S},mh:function(){return I}});var r=n(93433),a=n(60136),i=n(29388),o=n(37762),s=n(43144),u=n(15671),c=n(87884),l=n(70387),h=n(36446),f=n(59593),d=n(85149),p=n(17319),v=n(81111),g=n(97972),m=n(92247),y=(0,s.Z)((function t(e){(0,u.Z)(this,t),this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}})),b=(0,s.Z)((function t(e,n,r,a,i,o,s){(0,u.Z)(this,t),this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=(0,l.L)(),null!=o&&(this.originalName=(0,h.MU)(o),this.name=(0,h.w8)(this.originalName)),this.rank=n.length})),w=0,x=function(){function t(e,n){(0,u.Z)(this,t),this.callArgs=n,this.id=w++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;var r,a=(0,o.Z)(e.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(s){a.e(s)}finally{a.f()}e.outboundLayer.inboundNodes.push(this)}return(0,s.Z)(t,[{key:"getConfig",value:function(){var t,e=[],n=(0,o.Z)(this.inboundLayers);try{for(n.s();!(t=n.n()).done;){var r=t.value;null!=r?e.push(r.name):e.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),t}(),k=0,I=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,n),(t=e.call(this))._callHook=null,t._addedWeightNames=[],t._stateful=!1,t.id=k++,t.activityRegularizer=null,t.inputSpec=null,t.supportsMasking=!1,t._trainableWeights=[],t._nonTrainableWeights=[],t._losses=[],t._updates=[],t._built=!1,t.inboundNodes=[],t.outboundNodes=[];var a=r.name;if(!a){var i=t.getClassName();a=p.D1(i)+"_"+(0,l.s)(i)}if(t.name=a,t.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}t.batchInputShape=o;var c=r.dtype;null==c&&(c=r.inputDType),null==c&&(c="float32"),t.dtype=c}return null!=r.weights?t.initialWeights=r.weights:t.initialWeights=null,t._refCount=null,t.fastWeightInitDuringBuild=!1,t}return(0,s.Z)(n,[{key:"getNodeAtIndex",value:function(t,e){if(0===this.inboundNodes.length)throw new f.LH("The layer has never been called "+"and thus has no defined ".concat(e,"."));if(this.inboundNodes.length<=t)throw new f.nu("Asked to get ".concat(e," at node ").concat(t,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[t]}},{key:"getInputAt",value:function(t){return p.Bq(this.getNodeAtIndex(t,"input").inputTensors)}},{key:"getOutputAt",value:function(t){return p.Bq(this.getNodeAtIndex(t,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new f.j1("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new f.j1("Layer ".concat(this.name)+" is not connected, no input to return.");return p.Bq(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new f.j1("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new f.j1("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return p.Bq(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(t){return t()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(t){this._built=t}},{key:"trainable",get:function(){return this.trainable_},set:function(t){this._trainableWeights.forEach((function(e){return e.trainable=t})),this.trainable_=t}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(t){return t.trainable})):[]},set:function(t){this._trainableWeights=t}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(t){return!t.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(t){if(t=p.zZ(t),null!=this.inputSpec&&0!==this.inputSpec.length){var e=p.zZ(this.inputSpec);if(t.length!==e.length)throw new f.nu("Layer ".concat(this.name," expects ").concat(e.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(t));for(var n=0;n<t.length;n++){var r=t[n],a=e[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new f.nu("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new f.nu("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new f.nu("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new f.nu("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new f.nu("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var h=0;h<a.shape.length;++h){var d=a.shape[h],v=r.shape[h];if(null!=d&&null!=v&&d!==v)throw new f.nu("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(t,e){return t}},{key:"invokeCallHook",value:function(t,e){null!=this._callHook&&this._callHook(t,e)}},{key:"setCallHook",value:function(t){this._callHook=t}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(t,e){var n=this;e=e||{},this.assertNotDisposed();var r,a=p.zZ(t),i=!0,s=(0,o.Z)(a);try{for(s.s();!(r=s.n()).done;){if(!(r.value instanceof b)){i=!1;break}}}catch(d){s.e(d)}finally{s.f()}var u,c=!0,l=(0,o.Z)(a);try{for(l.s();!(u=l.n()).done;){if(u.value instanceof b){c=!1;break}}}catch(d){l.e(d)}finally{l.f()}if(i===c)throw new f.nu("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,h.f4)(this.name,(function(){if(!n.built){n.assertInputCompatibility(t);var r,i=[],s=(0,o.Z)(p.zZ(t));try{for(s.s();!(r=s.n()).done;){var u=r.value;i.push(u.shape)}}catch(d){s.e(d)}finally{s.f()}n.build(p.Bq(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&c&&(n._refCount=1)}if(n.assertInputCompatibility(t),c){var l,h=n.call(t,e),v=p.zZ(h),g=[],m=(0,o.Z)(v);try{for(m.s();!(l=m.n()).done;){var y=l.value;-1!==a.indexOf(y)&&(y=y.clone()),g.push(y)}}catch(d){m.e(d)}finally{m.f()}if(h=p.Bq(g),null!=n.activityRegularizer)throw new f.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h}var w,x=function(t){t=p.zZ(t);var e,n=[],r=(0,o.Z)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;n.push(a.shape)}}catch(d){r.e(d)}finally{r.f()}return p.Bq(n)}(t),k=n.computeOutputShape(x),I="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(t)?x[0]:x),w=null!=k&&k.length>0&&Array.isArray(k[0])?k.map((function(r,a){return new b(I,r,n,p.zZ(t),e,n.name,a)})):new b(I,k,n,p.zZ(t),e,n.name),n.addInboundNode(t,w,null,null,x,k,e),n._refCount++,null!=n.activityRegularizer)throw new f.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return w}))}},{key:"warnOnIncompatibleInputShape",value:function(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(t),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var e=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)})),e&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(t),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new f.j1("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var t,e=[],n=(0,o.Z)(this.inboundNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=JSON.stringify(r.outputShapes);-1===e.indexOf(a)&&e.push(a)}}catch(s){n.e(s)}finally{n.f()}if(1===e.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new f.j1("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new f.LH("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return g.t(this.weights)}},{key:"build",value:function(t){this.built=!0}},{key:"getWeights",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,m.FQ)(t?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(t){var e=this;(0,c.lub)((function(){var n=e.weights;if(n.length!==t.length)throw new f.nu('You called setWeights(weights) on layer "'.concat(e.name,'" ')+"with a weight list of length ".concat(t.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(t,"..."));if(0!==n.length){for(var r=[],a=(0,m.FQ)(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=t[i];if(!c.D5U.arraysEqual(o.shape,u.shape))throw new f.nu("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}(0,m.zb)(r)}}))}},{key:"addWeight",value:function(t,e,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(t))throw new f.nu("Duplicate weight name ".concat(t," for layer ").concat(this.name));this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():(0,d.L5)("zeros"));var u=r.apply(e,n),c=new m.fU(u,n,t,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(t){this.fastWeightInitDuringBuild=t}},{key:"addLoss",value:function(t){var e;null==t||Array.isArray(t)&&0===t.length||(t=p.zZ(t),void 0!==this._losses&&null!==this._losses&&(e=this.losses).push.apply(e,(0,r.Z)(t)))}},{key:"computeOutputShape",value:function(t){return t}},{key:"computeMask",value:function(t,e){var n=this;if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");e.forEach((function(t){if(null!=t)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return e}},{key:"addInboundNode",value:function(t,e,n,r,a,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=p.zZ(t);e=p.zZ(e),n=p.zZ(n),r=p.zZ(r),a=v.x6(a),i=v.x6(i);var c,l=[],h=[],f=[],d=(0,o.Z)(u);try{for(d.s();!(c=d.n()).done;){var g=c.value;l.push(g.sourceLayer),h.push(g.nodeIndex),f.push(g.tensorIndex)}}catch(y){d.e(y)}finally{d.f()}new x({outboundLayer:this,inboundLayers:l,nodeIndices:h,tensorIndices:f,inputTensors:u,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},s);for(var m=0;m<e.length;m++)e[m].sourceLayer=this,e[m].nodeIndex=this.inboundNodes.length-1,e[m].tensorIndex=m}},{key:"getConfig",value:function(){var t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(t){return t.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var t=0;return 0===--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}],[{key:"nodeKey",value:function(t,e){return t.name+"_ib-"+e.toString()}}]),n}(c.m7h.Serializable);function S(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];var r=e.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var s,u=S(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),c=(0,o.Z)(u);try{for(c.s();!(s=c.n()).done;){var l=s.value;-1===a.indexOf(l)&&a.push(l)}}catch(h){c.e(h)}finally{c.f()}}return a}},2472:function(t,e,n){"use strict";n.d(e,{QV:function(){return P}});var r=n(93433),a=n(29439),i=n(74165),o=n(15861),s=n(15671),u=n(43144),c=n(88301),l=n(61120),h=n(60136),f=n(29388),d=n(37762),p=n(87884),v=n(55658),g=n(93108),m=n(36446),y=n(59593),b=n(58505),w=n(38518),x=n(35615),k=n(4613),I=n(19142),S=n(32106),_=n(17319),C=n(48201),E=n(23294),A=n(62141),T=n(18667),N=n(37495),D=n(30510),R=n(32192),Z=n(49898),M=n(40547);function F(t){return Array.isArray(t)}function O(t){return!function(t){return t instanceof p.esB}(t)&&!F(t)}function B(t,e,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==e||0===e.length){if(null!=t){var o=!1;if(F(t)&&t.length>0)o=!0;else if(O(t)){for(var s in t)if(t.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new y.nu("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(t))}return[]}if(null==t)return e.map((function(t){return null}));if(O(t)){r=[];var u,c=(0,d.Z)(e);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==t[l])throw new y.nu('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(e));r.push(t[l])}}catch(m){c.e(m)}finally{c.f()}}else if(F(t)){if(t.length!==e.length)throw new y.nu("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(e.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(t));r=t}else{if(e.length>1)throw new y.nu("The model ".concat(i," expects ").concat(e.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(t.shape));r=[t]}if(r=(0,Z.YV)(r),null!=n)for(var h=0;h<e.length;++h)if(null!=n[h]){var f=r[h];if(f.shape.length!==n[h].length)throw new y.nu("Error when checking ".concat(i,": expected ").concat(e[h]," ")+"to have ".concat(n[h].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var p=0;p<n[h].length;++p)if(0!==p||a){var v=f.shape[p],g=n[h][p];if(null!=g&&g>=0&&v!==g)throw new y.nu("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[h].slice(1,n[h].length),"] ")+"(i.e.,tensor shape [*,".concat(n[h].slice(1,n[h].length),"])")+" but the ".concat(i," received an input with ").concat(f.shape[0])+" examples, each with shape [".concat(f.shape.slice(1,f.shape.length),"]")+" (tensor shape [".concat(f.shape,"])"))}}return r}function L(t,e,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(t)){if(t.length!==e.length)throw new y.nu("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(e.length," Tensor(s),")+" but instead got ".concat(t.length," Tensors(s)."));r=t}else{if(e.length>1)throw new y.nu("The model expects ".concat(e.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(t.shape),"."));r=[t]}if(null!=n)for(var o=0;o<e.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new y.nu("Error when checking ".concat(i,": expected ").concat(e[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new y.nu("Error when checking ".concat(i,": expected ")+"".concat(e[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var P=function(t){(0,h.Z)(n,t);var e=(0,f.Z)(n);function n(t){var r;return(0,s.Z)(this,n),(r=e.call(this,t)).isTraining=!1,r}return(0,u.Z)(n,[{key:"summary",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new y.nu("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");(0,C.I)(this,t,e,n)}},{key:"compile",value:function(t){var e=this;if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"===typeof t.optimizer)this.optimizer_=I.j(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof p.gaJ))throw new y.nu("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(t.loss)||"string"===typeof t.loss||"function"===typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new y.nu("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(t.loss,"."));var r=t.loss;n=r.map((function(t){return x.U2(t)}))}else{var a=x.U2(t.loss);this.outputs.forEach((function(t){n.push(a)}))}else{for(var i in t.loss=t.loss,t.loss)if(-1===this.outputNames.indexOf(i))throw new y.nu('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=(0,d.Z)(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==t.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(x.U2(t.loss[u]))}}catch(g){s.e(g)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],h=this.outputNames[c];this.feedOutputNames.push(h),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var f=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],(0,m.f4)("loss",(function(){for(var t=0;t<e.outputs.length;++t)if(-1===f.indexOf(t)){var n=e.lossFunctions[t];e.outputs.length>1&&(e.metricsTensors.push([n,t]),e.metricsNames.push(e.outputNames[t]+"_loss"))}}));var v=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map((function(t){return[]}));var n;if("string"===typeof t||"function"===typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!==typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(t));n=t}if(Array.isArray(n))return e.map((function(t){return n}));var r,a=[],i=(0,d.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(g){i.e(g)}finally{i.f()}return a}(t.metrics,this.outputNames);(0,m.f4)("metric",(function(){for(var t=function(t){if(-1!==f.indexOf(t))return"continue";!function(n){var r,a,i,o,s=(0,d.Z)(n);try{var u=function(){var n,s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var u,c=e.internalOutputShapes[t];1===c[c.length-1]||e.lossFunctions[t]===x.fO?-1!==["accuracy","acc"].indexOf(s)?a=k._F:-1!==["crossentropy","ce"].indexOf(s)&&(a=k.fO):e.lossFunctions[t]===x.KM?-1!==["accuracy","acc"].indexOf(s)?a=k.TY:-1!==["crossentropy","ce"].indexOf(s)&&(a=k.KM):-1!==["accuracy","acc"].indexOf(s)?a=k.G5:-1!==["crossentropy","ce"].indexOf(s)&&(a=k.uq),-1!==["accuracy","acc"].indexOf(s)?u="acc":-1!==["crossentropy","ce"].indexOf(s)&&(u="ce"),i=a,r=""+u}else{var l=k.U2(s);i=l,r=""+k.aI(s)}(0,m.f4)(r,(function(){n=i})),function(t,n,r){e.outputNames.length>1&&(n=e.outputNames[t]+"_"+n),e.metricsNames.push(n),e.metricsTensors.push([r,t])}(t,r,n)};for(s.s();!(o=s.n()).done;)u()}catch(g){s.e(g)}finally{s.f()}}(v[t])},n=0;n<e.outputs.length;++n)t(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;(0,Z.fQ)(r);var a=this.standardizeUserDataXY(t,e,!0,r);try{var i=a[0].concat(a[1]);this.makeTestFunction();var o=this.testFunction,s=this.testLoop(o,i,r,n.verbose,n.steps);return(0,_.Bq)(s)}finally{(0,Z.kS)(a[0],t),(0,Z.kS)(a[1],e)}}},{key:"evaluateDataset",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.makeTestFunction(),t.abrupt("return",(0,R.D)(this,e,n));case 2:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(t,e,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=e)throw new y.nu("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(e))}else{if(null==t)throw new y.nu("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return r}},{key:"execute",value:function(t,e){if(Array.isArray(e)&&0===e.length)throw new y.nu("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(e),r=n?e:[e],a=this.retrieveSymbolicTensors(r),i=new D.l2;if(t instanceof p.esB&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new y.nu("The number of inputs provided (".concat(t.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],t[o])}else{var s,u=(0,d.Z)(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=t[c.name];if(null==l)throw new y.nu("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(f){u.e(f)}finally{u.f()}}var h=(0,D.ht)(a,i);return n?h:h[0]}},{key:"retrieveSymbolicTensors",value:function(t){var e,n=(0,_.JE)(null,t.length),r=t.length,a=(0,d.Z)(this.layers);try{for(a.s();!(e=a.n()).done;){for(var i=e.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(t){return t.name})),u=0;u<t.length;++u){var c=s.indexOf(t[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(h){a.e(h)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(e,n){null==e&&l.push(t[n])})),new y.nu("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return p.lub((function(){var a=e.checkNumSamples(t);if(r)throw new y.nj("Verbose predictLoop() is not implemented yet.");for(var i=(0,Z.R_)(a,n),o=e.outputs.map((function(t){return[]})),s=function(n){p.lub((function(){var r=i[n][0],a=i[n][1],o=(0,Z.sf)(t,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:e.inputs[u],value:o[u]});else s.push({key:e.inputs[0],value:o});var c=new D.l2(s);return(0,D.ht)(e.outputs,c)})).forEach((function(t,e){return o[e].push(t)}))},u=0;u<i.length;++u)s(u);return(0,_.Bq)(o.map((function(t){return p.zoF(t,0)})))}))}},{key:"predict",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,Z.YV)(t);L(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==e.batchSize?32:e.batchSize;return(0,Z.fQ)(r),this.predictLoop(n,r)}finally{(0,Z.kS)(n,t)}}},{key:"predictOnBatch",value:function(t){L(t,this.inputNames,this.feedInputShapes,!0);var e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}},{key:"standardizeUserDataXY",value:function(t,e){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new y.LH("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===x.KM?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(function(t,e,n){var r=(0,_.Tw)(t.map((function(t){return t.shape[0]})));r.sort();var a=(0,_.Tw)(e.map((function(t){return t.shape[0]})));if(a.sort(),r.length>1)throw new y.nu("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(t){return t.shape})))));if(a.length>1)throw new y.nu("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(t){return t.shape})))));if(r.length>0&&a.length>0&&!p.D5U.arraysEqual(r,a))throw new y.nu("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(t=B(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=B(e,this.feedOutputNames,r,!1,"target")),function(t,e,n){for(var r=[x.FD,x.fO,x.uq],a=0;a<t.length;++a){var i=t[a],o=e[a],s=n[a];if(null!=o){if(o===x.uq&&1===i.shape[i.shape.length-1])throw new y.nu("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var h=u[l],f=c[l];if(null!=f&&h!==f)throw new y.nu("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&t[0].shape[0]%n!==0)throw new y.nu("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(t[0].shape[0]," sample(s)."));return[t,e]}},{key:"standardizeUserData",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n,r,o){var s,u,c,l,h,f,d,p,v,g=arguments;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=!(g.length>4&&void 0!==g[4])||g[4],u=g.length>5?g[5]:void 0,c=this.standardizeUserDataXY(e,n,s,u),l=(0,a.Z)(c,2),h=l[0],f=l[1],null==r){t.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==o){t.next=19;break}p=(0,M.Vf)(o,this.outputNames),d=[],v=0;case 10:if(!(v<p.length)){t.next=19;break}return t.t0=d,t.next=14,(0,M.tl)(f[v],null,p[v]);case 14:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 16:++v,t.next=10;break;case 19:return t.abrupt("return",[h,f,d]);case 20:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"testLoop",value:function(t,e,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return p.lub((function(){var o=r.checkNumSamples(e,n,i,"steps"),s=[];if(a>0)throw new y.nj("Verbose mode is not implemented yet.");if(null!=i)throw new y.nj("steps mode in testLoop() is not implemented yet");for(var u=(0,Z.R_)(o,n),c=(0,p.RRF)((0,E.w6)(0,o)),l=0;l<u.length;++l){var h=u[l][0],f=u[l][1],d=v.c9(c,h,f-h),g=(0,Z.YX)(e,d),m=t(g);if(0===l)for(var b=0;b<m.length;++b)s.push((0,p.iD$)(0));for(var w=0;w<m.length;++w){var x=m[w];s[w]=p.IHx(s[w],p.dC7(f-h,x))}}for(var k=0;k<s.length;++k)s[k]=p.hiC(s[k],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var t=this.metricsNames,e=[],n=0;n<t.length;++n){var r=t[n],a=r;if((0,_.QX)(t,r)>1){var i=(0,_.QX)(t.slice(0,n),r);a+="_".concat(i)}e.push(a)}return e}},{key:"makeTrainFunction",value:function(){var t=this;return function(e){var n=[],r=e.slice(0,t.inputs.length),a=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),i=e.slice(t.inputs.length+t.outputs.length,t.inputs.length+2*t.outputs.length),o=[],s=t.collectedTrainableWeights.map((function(t){return t.read()}));return[t.optimizer_.minimize((function(){for(var e=[],s=0;s<t.inputs.length;++s)e.push({key:t.inputs[s],value:r[s]});for(var u,c=new D.l2(e),l=(0,D.ht)(t.outputs,c,{training:!0}),h=0;h<t.lossFunctions.length;++h){var f=(0,t.lossFunctions[h])(a[h],l[h]);null!=i[h]&&(f=(0,M.mo)(f,i[h]));var d=p.J69(f);n.push(d),u=0===h?f:p.IHx(u,f)}for(var v=0;v<t.metricsTensors.length;++v){var g=void 0;if(t.outputs.length>1&&v<t.outputs.length)g=n[v];else{var m=t.metricsTensors[v][0],y=t.metricsTensors[v][1];g=p.J69(m(a[y],l[y]))}p.CnY(g),o.push(g)}return u=p.J69(u),t.calculateLosses().forEach((function(t){u=p.IHx(u,t)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var t=this;this.testFunction=function(e){return p.lub((function(){for(var n,r=[],a=e.slice(0,t.inputs.length),i=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),o=[],s=0;s<t.inputs.length;++s)o.push({key:t.inputs[s],value:a[s]});for(var u=new D.l2(o),c=(0,D.ht)(t.outputs,u),l=0;l<t.lossFunctions.length;++l){var h=t.lossFunctions[l],f=p.J69(h(i[l],c[l]));n=0===l?f:p.IHx(n,f),r.push(n)}for(var d=0;d<t.metricsTensors.length;++d){var v=t.metricsTensors[d][0],g=t.metricsTensors[d][1],m=p.J69(v(i[g],c[g]));r.push(m)}return r}))}}},{key:"fit",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n){var r,a,o,s,u,c,l,h,f,d,v,m,b,w,x,k,I,S,_,C,E,A,T,N,D=arguments;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=D.length>2&&void 0!==D[2]?D[2]:{},!this.isTraining){t.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,t.prev=4,v=null==r.batchSize?32:r.batchSize,(0,Z.fQ)(v),!1,t.next=10,this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,false,v);case 10:if(m=t.sent,a=m[0],o=m[1],d=m[2],b=!1,!(null!=r.validationData&&r.validationData.length>0)){t.next=36;break}if(b=!0,2!==r.validationData.length){t.next=22;break}c=r.validationData[0],l=r.validationData[1],t.next=27;break;case 22:if(3!==r.validationData.length){t.next=26;break}throw new y.nj("validationData including sample weights is not supported yet.");case 26:throw new y.nu("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return!0,t.next=30,this.standardizeUserData(c,l,null,null,true,v);case 30:x=t.sent,h=x[0],f=x[1],w=h.concat(f),t.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(b=!0,k=Math.floor(a[0].shape[0]*(1-r.validationSplit)),I=a[0].shape[0],h=(0,Z.sf)(a,k,I),s=a,a=(0,Z.sf)(a,0,k),f=(0,Z.sf)(o,k,I),u=o,o=(0,Z.sf)(o,0,k),w=h.concat(f)):null!=r.validationSteps&&(b=!0);case 37:return S=a.concat(o).concat(d),this.checkTrainableWeightsConsistency(),_=this.makeTrainFunction(),C=this.getDedupedMetricsNames(),b?(this.makeTestFunction(),E=this.testFunction,A=C.slice().concat(C.map((function(t){return"val_"+t})))):(E=null,w=[],A=C.slice()),T=(0,g.CZ)(r.callbacks,r.yieldEvery),t.next=45,this.fitLoop(_,S,C,v,r.epochs,r.verbose,T,E,w,r.shuffle,A,r.initialEpoch,null,null);case 45:return N=t.sent,t.abrupt("return",N);case 47:return t.prev=47,this.isTraining=!1,(0,Z.kS)(a,e),(0,Z.kS)(o,n),(0,Z.kS)(s,e),(0,Z.kS)(u,n),(0,Z.kS)(h,c),(0,Z.kS)(f,l),null!=d&&p.B90(d),t.finish(47);case 57:case"end":return t.stop()}}),t,this,[[4,,47,57]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"fitLoop",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n,r,a,o,s,u,c,l,h,f,d,m,b){var x,k,I,S,_,C,A,T,N=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==a&&(a=32),null==o&&(o=1),null==h&&(h=!0),null==d&&(d=0),x=!1,null!=c&&null!=l&&(x=!0),null==b){t.next=10;break}if(x=!0,null!=m){t.next=10;break}throw new y.nu("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(k=this.checkNumSamples(n,a,m,"steps_per_epoch"))&&(I=(0,E.w6)(0,k)),null==s&&(s=1),S=(0,g.m$)(u,s,o,d,k,m,a,x,f),_=S.callbackList,C=S.history,_.setModel(this),this.history=C,t.next=18,_.onTrainBegin();case 18:this.stopTraining_=!1,A=(0,i.Z)().mark((function t(){var o,s,u,f,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.onEpochBegin(T);case 2:if(o={},null==m){t.next=7;break}throw new y.nj("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==h){t.next=11;break}throw new y.nj("batch shuffling is not implemneted yet");case 11:h&&p.D5U.shuffle(I);case 12:s=(0,p.RRF)(I),u=(0,Z.R_)(k,a),f=(0,i.Z)().mark((function t(h){var f;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f={},t.next=3,_.onBatchBegin(h,f);case 3:return p.lub((function(){var t=u[h][0],i=u[h][1],d=v.c9(s,t,i-t);f.batch=h,f.size=i-t;for(var g=(0,Z.YX)(n,d),m=e(g),y=0;y<r.length;++y){var b=r[y],w=m[y];f[b]=w,p.CnY(w)}if(h===u.length-1&&x)for(var k=N.testLoop(c,l,a),I=0;I<r.length;++I){var S=r[I],_=k[I];p.CnY(_),o["val_"+S]=_}})),t.next=6,_.onBatchEnd(h,f);case 6:if((0,w.i)(f),!N.stopTraining_){t.next=9;break}return t.abrupt("return","break");case 9:case"end":return t.stop()}}),t)})),d=0;case 16:if(!(d<u.length)){t.next=24;break}return t.delegateYield(f(d),"t0",18);case 18:if("break"!==t.t0){t.next=21;break}return t.abrupt("break",24);case 21:++d,t.next=16;break;case 24:s.dispose();case 25:return t.next=27,_.onEpochEnd(T,o);case 27:if(!N.stopTraining_){t.next=29;break}return t.abrupt("return","break");case 29:case"end":return t.stop()}}),t)})),T=d;case 21:if(!(T<o)){t.next=29;break}return t.delegateYield(A(),"t0",23);case 23:if("break"!==t.t0){t.next=26;break}return t.abrupt("break",29);case 26:++T,t.next=21;break;case 29:return t.next=31,_.onTrainEnd();case 31:return t.next=33,this.history.syncData();case 33:return t.abrupt("return",this.history);case 34:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a,i,o,s,u,c,l,h,f,d,p){return t.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,R.y)(this,e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n){var r,a,o,s,u,c,l,h,f,v;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.standardizeUserData(e,n);case 2:r=t.sent,a=r[0],o=r[1],s=this.makeTrainFunction(),u=s(a.concat(o)),c=[],l=(0,d.Z)(u),t.prev=9,l.s();case 11:if((h=l.n()).done){t.next=19;break}return f=h.value,t.next=15,f.data();case 15:v=t.sent,c.push(v[0]);case 17:t.next=11;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(9),l.e(t.t0);case 24:return t.prev=24,l.f(),t.finish(24);case 27:return p.B90(u),(0,Z.kS)(r[0],e),(0,Z.kS)(r[1],n),t.abrupt("return",(0,_.Bq)(c));case 31:case"end":return t.stop()}}),t,this,[[9,21,24,27]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(t){for(var e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||e.push({name:r[i].originalName,tensor:a[i]});return e}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(t){this.stopTraining_=t}},{key:"optimizer",get:function(){return this.optimizer_},set:function(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var t=(0,c.Z)((0,l.Z)(n.prototype),"dispose",this).call(this);if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var e=p.sq6().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-p.sq6().numTensors}return t}},{key:"getLossIdentifiers",value:function(){var t;if("string"===typeof this.loss)t=(0,_.D1)(this.loss);else if(Array.isArray(this.loss)){var e,n=(0,d.Z)(this.loss);try{for(n.s();!(e=n.n()).done;){if("string"!==typeof e.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(u){n.e(u)}finally{n.f()}t=this.loss.map((function(t){return(0,_.D1)(t)}))}else{var r=Object.keys(this.loss);t={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");t[s]=(0,_.D1)(a[s])}}return t}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[(0,_.D1)(k.aI(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(t){return(0,_.D1)(k.aI(t))}));var t={};for(var e in this.metrics)t[e]=(0,_.D1)(k.aI(this.metrics[e]));return t}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var e,n,r=(0,A.a)(t.optimizer_config),a=(0,b.v)(r);if("string"===typeof t.loss)e=(0,_.zW)(t.loss);else if(Array.isArray(t.loss))e=t.loss.map((function(t){return(0,_.zW)(t)}));else if(null!=t.loss)for(var i in e={},t.loss)e[i]=(0,_.zW)(t.loss[i]);if(Array.isArray(t.metrics))n=t.metrics.map((function(t){return(0,_.zW)(t)}));else if(null!=t.metrics)for(var o in n={},t.metrics)n[o]=(0,_.zW)(t.metrics[o]);this.compile({loss:e,metrics:n,optimizer:a})}},{key:"save",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n){var a,o,s,u,c,l,h,f,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=9;break}if(0!==(a=p.io.getSaveHandlers(e)).length){t.next=6;break}throw new y.nu("Cannot find any save handlers for URL '".concat(e,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new y.nu("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(e,"'"));case 8:e=a[0];case 9:if(null!=e.save){t.next=11;break}throw new y.nu("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,p.io.encodeWeights(this.getNamedWeights(n));case 13:if(o=t.sent,!1,null,s=this.toJSON(null,false),u={modelTopology:s,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(T.i),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){t.next=34;break}return u.trainingConfig=this.getTrainingConfig(),l="optimizer",t.t0=p.io,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=l,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:h=t.sent,f=h.data,d=h.specs,(c=o.specs).push.apply(c,(0,r.Z)(d)),o.data=p.io.concatenateArrayBuffers([o.data,f]);case 34:return null!=this.userDefinedMetadata&&(!0,(0,S.WE)(this.userDefinedMetadata,this.name,true),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=o.data,u.weightSpecs=o.specs,t.abrupt("return",e.save(u));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(t){(0,S.WE)(t,this.name),this.userDefinedMetadata=t}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(N.W);P.className="Model",p.m7h.registerClass(P);var U=function(t){(0,h.Z)(n,t);var e=(0,f.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,u.Z)(n)}(P);U.className="Functional",p.m7h.registerClass(U)},32192:function(t,e,n){"use strict";n.d(e,{D:function(){return w},y:function(){return g}});var r=n(74165),a=n(15861),i=n(37762),o=n(87884),s=n(93108),u=n(59593),c=n(38518),l=n(17319),h=n(40547),f=32;function d(t,e){var n,r,a=e;n=a.xs,r=a.ys,o.D5U.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(e)}));var i=p("input",t.inputNames,n),s=p("output",t.outputNames,r),u=i[0].shape[0];o.D5U.assert(i.length===t.inputs.length,(function(){return"LayersModel has ".concat(t.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(t.inputNames),")")})),o.D5U.assert(s.length===t.outputs.length,(function(){return"LayersModel has ".concat(t.outputs.length," outputs, but the dataset ")+"provides ".concat(s.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(t.outputNames),")")}));for(var c=function(e){o.D5U.assert(i[e].shape[0]===u,(function(){return"Batch size mismatch: input "+"".concat(t.inputNames[e]," has ").concat(i[e].shape[0],"; ")+"expected  ".concat(u," based on input ").concat(t.inputNames[0],".")}))},l=0;l<i.length;l++)c(l);for(var h=function(e){o.D5U.assert(s[e].shape[0]===u,(function(){return"Batch size mismatch: output "+"".concat(t.outputNames[e]," has ").concat(s[e].shape[0],"; ")+"expected  ".concat(u," based on input ").concat(t.inputNames[0],".")}))},f=0;f<s.length;f++)h(f);return{xs:i,ys:s}}function p(t,e,n){if(n instanceof o.esB)return[n];if(Array.isArray(n))return o.D5U.assert(n.length===e.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(e.length," to match the ").concat(t," keys ").concat(e,".")})),n;var r,a=[],s=(0,i.Z)(e);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(null==n[c])throw new u.nu("The feature data generated by the dataset lacks the required "+"".concat(t," key '").concat(c,"'."));a.push(n[c])}}catch(l){s.e(l)}finally{s.f()}return a}function v(t){if(3===t.length)throw new u.nj("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function g(t,e,n){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,r.Z)().mark((function t(e,n,a){var i,u,p,g,m,w,x,k,I,S,_,C,E,A,T,N,D,R,Z,M,F,O,B,L,P,U,z,W,V,G,j,H,X;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null!=a.batchesPerEpoch,o.D5U.assert(null!=e.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),o.D5U.assert(null!=a,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),o.D5U.assert(null!=a.epochs&&a.epochs>0&&Number.isInteger(a.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(a.epochs)})),o.D5U.assert(!i||a.batchesPerEpoch>0&&Number.isInteger(a.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(a.batchesPerEpoch)})),o.D5U.assert(null==a.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!e.isTraining){t.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return e.isTraining=!0,t.prev=9,(u=null!=a.validationData)&&(b(a.validationData)?o.D5U.assert(null==a.validationBatches||a.validationBatches>0&&Number.isInteger(a.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(a.validationBatches)})):(m=v(a.validationData),p=m.xs,g=m.ys)),w=e.makeTrainFunction(),x=e.getDedupedMetricsNames(),k=u?x.slice().concat(x.map((function(t){return"val_"+t}))):x.slice(),I=(0,s.CZ)(a.callbacks,a.yieldEvery),S=null==a.verbose?1:a.verbose,_=(0,s.m$)(I,S,a.epochs,null,null,y(n,a),null,u,k),C=_.callbackList,E=_.history,C.setModel(e),e.history=E,t.next=22,C.onTrainBegin();case 22:return e.stopTraining_=!1,A=null==a.initialEpoch?0:a.initialEpoch,t.next=26,n.iterator();case 26:T=t.sent;case 27:if(!(A<a.epochs)){t.next=98;break}return N={},t.next=31,C.onEpochBegin(A);case 31:if(D=0,R=0,i){t.next=37;break}return t.next=36,n.iterator();case 36:T=t.sent;case 37:if(i&&!(D<a.batchesPerEpoch)){t.next=91;break}return t.next=40,T.next();case 40:if(Z=t.sent,!i||!Z.done){t.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(a.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(D," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(a.batchesPerEpoch*a.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),t.abrupt("break",91);case 44:if(null==Z.value){t.next=73;break}return M=d(e,Z.value),F=M.xs,O=M.ys,(B={}).batch=R,B.size=F[0].shape[0],t.next=51,C.onBatchBegin(R,B);case 51:if(L=[],null==a.classWeight){t.next=64;break}P=(0,h.Vf)(a.classWeight,e.outputNames),U=0;case 55:if(!(U<P.length)){t.next=64;break}return t.t0=L,t.next=59,(0,h.tl)(O[U],null,P[U]);case 59:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 61:++U,t.next=55;break;case 64:for(z=F.concat(O).concat(L),W=w(z),o.B90(z),V=0;V<x.length;++V)G=x[V],j=W[V],B[G]=j,o.CnY(j);return t.next=70,C.onBatchEnd(R,B);case 70:(0,c.i)(B),R++,D++;case 73:if(!(i?D>=a.batchesPerEpoch:Z.done)){t.next=87;break}if(!u){t.next=86;break}if(H=void 0,!b(a.validationData)){t.next=84;break}return t.t2=l.zZ,t.next=80,e.evaluateDataset(a.validationData,{batches:a.validationBatches});case 80:t.t3=t.sent,H=(0,t.t2)(t.t3),t.next=85;break;case 84:H=(0,l.zZ)(e.evaluate(p,g,{batchSize:null==a.validationBatchSize?f:a.validationBatchSize,verbose:0}));case 85:for(X=0;X<e.metricsNames.length;++X)N["val_".concat(e.metricsNames[X])]=H[X];case 86:return t.abrupt("break",91);case 87:if(!e.stopTraining_){t.next=89;break}return t.abrupt("break",91);case 89:t.next=37;break;case 91:return t.next=93,C.onEpochEnd(A,N);case 93:if(A++,!e.stopTraining_){t.next=96;break}return t.abrupt("break",98);case 96:t.next=27;break;case 98:return t.next=100,C.onTrainEnd();case 100:return t.next=102,e.history.syncData();case 102:return t.abrupt("return",e.history);case 103:return t.prev=103,e.isTraining=!1,t.finish(103);case 106:case"end":return t.stop()}}),t,null,[[9,,103,106]])})))).apply(this,arguments)}function y(t,e){var n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function b(t){return"function"===typeof t.iterator}function w(t,e,n){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function t(e,n,a){var i,s,c,h,f,p,v,g,m;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null!=(a=a||{}).batches,s=e.testFunction,c=[],!(a.verbose>0)){t.next=6;break}throw new u.nj("Verbose mode is not implemented yet.");case 6:if(o.D5U.assert(!i||a.batches>0&&Number.isInteger(a.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(a.batches))})),"function"!==typeof n.next){t.next=11;break}t.t0=n,t.next=14;break;case 11:return t.next=13,n.iterator();case 13:t.t0=t.sent;case 14:h=t.t0,f=0,p=0,v=(0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.next();case 2:if(n=t.sent,c=o.lub((function(){if(n.value){var t=d(e,n.value),r=t.xs,a=t.ys,i=r.concat(a),u=o.lub((function(){return s(i)}));if(o.B90(i),0===p)for(var l=0;l<u.length;++l)c.push((0,o.iD$)(0));for(var h=i[0].shape[0],v=function(t){var e=u[t],n=c[t];c[t]=o.lub((function(){return o.IHx(c[t],o.dC7(h,e))})),p>0&&o.B90(n)},g=0;g<u.length;++g)v(g);o.B90(u),f+=h,++p}return c})),!n.done){t.next=7;break}return i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(a.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),t.abrupt("return","break");case 7:case"end":return t.stop()}}),t)}));case 18:if(i&&!(p<a.batches)){t.next=25;break}return t.delegateYield(v(),"t1",20);case 20:if("break"!==t.t1){t.next=23;break}return t.abrupt("break",25);case 23:t.next=18;break;case 25:for(g=0;g<c.length;++g)m=c[g],c[g]=o.hiC(c[g],f),o.B90(m);return t.abrupt("return",(0,l.Bq)(c));case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},49898:function(t,e,n){"use strict";n.d(e,{R_:function(){return u},YV:function(){return c},YX:function(){return s},fQ:function(){return i},kS:function(){return l},sf:function(){return o}});var r=n(87884),a=n(55658);function i(t){r.D5U.assert(t>0&&Number.isInteger(t),(function(){return"batchSize is required to be a positive integer, but got ".concat(t)}))}function o(t,e,n){return null==t?[null]:Array.isArray(t)?t.map((function(t){return(0,a.c9)(t,e,n-e)})):(0,a.c9)(t,e,n-e)}function s(t,e){return r.lub((function(){return null==t?null:Array.isArray(t)?t.map((function(t){return s(t,e)})):(0,a.Iq)(t,"int32"===e.dtype?e:r.pju(e,"int32"))}))}function u(t,e){for(var n=[],r=0,a=null;r<t;)(a=r+e)>=t&&(a=t),n.push([r,a]),r=a;return n}function c(t){var e=[];t instanceof r.esB&&(t=[t]);for(var n=0;n<t.length;++n){var i=t[n];if(1===i.rank)e.push((0,a.dt)(i,1));else{if(0===i.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(i)}}return e}function l(t,e){if(null!=t){var n=[];if(e instanceof r.esB)n.push(e.id);else if(Array.isArray(e))e.forEach((function(t){return n.push(t.id)}));else if(null!=e)for(var a in e){var i=e[a];n.push(i.id)}var o=[];if(t instanceof r.esB)-1===n.indexOf(t.id)&&o.push(t);else if(Array.isArray(t))t.forEach((function(t){-1===n.indexOf(t.id)&&o.push(t)}));else if(null!=t)for(var s in t){var u=t[s];-1===n.indexOf(u.id)&&o.push(u)}o.forEach((function(t){t.isDisposed||t.dispose()}))}}},40547:function(t,e,n){"use strict";n.d(e,{Vf:function(){return s},mo:function(){return l},tl:function(){return u}});var r=n(74165),a=n(15861),i=n(87884);function o(t,e,n){var r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map((function(t){return null}));if(1===r)return Array.isArray(t)&&1===t.length?t:"object"===typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(t.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return t}if("object"===typeof t&&Object.keys(t).length>0&&"object"===typeof t[Object.keys(t)[0]]){var a=[];return e.forEach((function(e){e in t?a.push(t[e]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(e," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(t)))}function s(t,e){return o(t,e,"classWeight")}function u(t,e,n,r){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)((0,r.Z)().mark((function t(e,n,a,o){var s,u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n&&null==o){t.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==a){t.next=15;break}return s=(0,i.lub)((function(){if(1===e.shape.length)return(0,i.d9v)(e);if(2===e.shape.length){if(e.shape[1]>1){return(0,i.NqF)(e,1)}if(1===e.shape[1])return(0,i.XLQ)(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),t.t0=Array,t.next=7,s.data();case 7:return t.t1=t.sent,u=t.t0.from.call(t.t0,t.t1),(0,i.B90)(s),c=[],u.forEach((function(t){if(null==a[t])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(t," exists in the data but not in ")+"classWeight");c.push(a[t])})),t.abrupt("return",(0,i.RRF)(c,"float32"));case 15:return t.abrupt("return",null);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t,e){return(0,i.dC7)(t,e)}},59593:function(t,e,n){"use strict";n.d(e,{LH:function(){return l},j1:function(){return c},nj:function(){return f},nu:function(){return h},ps:function(){return d}});var r=n(43144),a=n(15671),i=n(97326),o=n(60136),s=n(29388),u=n(7112),c=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),Object.setPrototypeOf((0,i.Z)(r),n.prototype),r}return(0,r.Z)(n)}((0,u.Z)(Error)),l=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),Object.setPrototypeOf((0,i.Z)(r),n.prototype),r}return(0,r.Z)(n)}((0,u.Z)(Error)),h=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),Object.setPrototypeOf((0,i.Z)(r),n.prototype),r}return(0,r.Z)(n)}((0,u.Z)(Error)),f=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),Object.setPrototypeOf((0,i.Z)(r),n.prototype),r}return(0,r.Z)(n)}((0,u.Z)(Error)),d=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),Object.setPrototypeOf((0,i.Z)(r),n.prototype),r}return(0,r.Z)(n)}((0,u.Z)(Error))},98151:function(t,e,n){"use strict";n(93108),n(17777),n(2472),n(63292)},90383:function(t,e,n){"use strict";n(98625)},70390:function(t,e,n){"use strict";n(85149)},11181:function(t,e,n){"use strict";n(17777),n(69804),n(98151),n(75051),n(16400),n(37197),n(98311),n(62792),n(94954),n(45542),n(14977),n(26490),n(39465),n(90241),n(95943),n(29804),n(50336),n(25737),n(70904),n(10816)},52477:function(t,e,n){"use strict";n(35615),n(4613)},30689:function(t,e,n){"use strict";n(63292)},14481:function(t,e,n){"use strict";n(67085)},30085:function(t,e,n){"use strict";var r=n(87884),a=n(30510);(0,r.OBj)().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),a.kS)},33608:function(t,e,n){"use strict";n.d(e,{H6:function(){return r.i}});n(30085),n(87884),n(57118),n(90383),n(70390),n(11181),n(52477),n(30689),n(14481),n(93108),n(72828),n(69804),n(2472),n(98151),n(95943),n(63292),n(92247);var r=n(18667)},85149:function(t,e,n){"use strict";n.d(e,{Cx:function(){return R},L5:function(){return Z},M6:function(){return g},m7:function(){return p}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(87884),u=n(55658),c=n(36446),l=n(59593),h=n(14024),f=n(17319),d=n(23294);var p=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(s.m7h.Serializable),v=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t,e){return(0,s.lls)(t,e)}}]),n}(p);v.className="Zeros",s.m7h.registerClass(v);var g=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"apply",value:function(t,e){return(0,s.iUs)(t,e)}}]),n}(p);g.className="Ones",s.m7h.registerClass(g);var m=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;if((0,r.Z)(this,n),a=e.call(this),"object"!==typeof t)throw new l.nu("Expected argument of type ConstantConfig but got ".concat(t));if(void 0===t.value)throw new l.nu("config must have value set but got ".concat(t));return a.value=t.value,a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){var n=this;return(0,s.lub)((function(){return(0,s.dC7)((0,s.iD$)(n.value),(0,s.iUs)(t,e))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(p);m.className="Constant",s.m7h.registerClass(m);var y=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).DEFAULT_MINVAL=-.05,a.DEFAULT_MAXVAL=.05,a.minval=t.minval||a.DEFAULT_MINVAL,a.maxval=t.maxval||a.DEFAULT_MAXVAL,a.seed=t.seed,a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){return(0,s.LGj)(t,this.minval,this.maxval,e,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(p);y.className="RandomUniform",s.m7h.registerClass(y);var b=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).DEFAULT_MEAN=0,a.DEFAULT_STDDEV=.05,a.mean=t.mean||a.DEFAULT_MEAN,a.stddev=t.stddev||a.DEFAULT_STDDEV,a.seed=t.seed,a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new l.nj("randomNormal does not support dType ".concat(e,"."));return u.nG(t,this.mean,this.stddev,e,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(p);b.className="RandomNormal",s.m7h.registerClass(b);var w=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).DEFAULT_MEAN=0,a.DEFAULT_STDDEV=.05,a.mean=t.mean||a.DEFAULT_MEAN,a.stddev=t.stddev||a.DEFAULT_STDDEV,a.seed=t.seed,a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new l.nj("truncatedNormal does not support dType ".concat(e,"."));return(0,s.Xu6)(t,this.mean,this.stddev,e,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(p);w.className="TruncatedNormal",s.m7h.registerClass(w);var x=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).gain=null!=t.gain?t.gain:1,a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){var n=this;return(0,s.lub)((function(){if(2!==t.length||t[0]!==t[1])throw new l.nu("Identity matrix initializer can only be used for 2D square matrices.");return(0,s.dC7)(n.gain,(0,s.iyy)(t[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(p);x.className="Identity",s.m7h.registerClass(x);var k=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a,i;if((0,r.Z)(this,n),a=e.call(this),t.scale<0)throw new l.nu("scale must be a positive float. Got: ".concat(t.scale));return a.scale=null==t.scale?1:t.scale,a.mode=null==t.mode?"fanIn":t.mode,i=a.mode,(0,f.xn)(h.RR,"FanMode",i),a.distribution=null==t.distribution?"normal":t.distribution,function(t){(0,f.xn)(h.J7,"Distribution",t)}(a.distribution),a.seed=t.seed,a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){var n=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if((0,c.cj)(r),2===t.length)e=t[0],n=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===r){var a=(0,d.NS)(t,2);e=t[1]*a,n=t[0]*a}else if("channelsLast"===r){var i=(0,d.NS)(t,0,t.length-2);e=t[t.length-2]*i,n=t[t.length-1]*i}}else{var o=(0,d.NS)(t);e=Math.sqrt(o),n=Math.sqrt(o)}return[e,n]}(t),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(e=e||"float32")&&"int32"!==e)throw new l.nj("".concat(this.getClassName()," does not support dType ").concat(e,"."));return(0,s.Xu6)(t,0,o,e,this.seed)}var u=Math.sqrt(3*i);return(0,s.LGj)(t,-u,u,e,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(p);k.className="VarianceScaling",s.m7h.registerClass(k);var I=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}return(0,a.Z)(n,[{key:"getClassName",value:function(){return k.className}}]),n}(k);I.className="GlorotUniform",s.m7h.registerClass(I);var S=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}return(0,a.Z)(n,[{key:"getClassName",value:function(){return k.className}}]),n}(k);S.className="GlorotNormal",s.m7h.registerClass(S);var _=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}return(0,a.Z)(n,[{key:"getClassName",value:function(){return k.className}}]),n}(k);_.className="HeNormal",s.m7h.registerClass(_);var C=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}return(0,a.Z)(n,[{key:"getClassName",value:function(){return k.className}}]),n}(k);C.className="HeUniform",s.m7h.registerClass(C);var E=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}return(0,a.Z)(n,[{key:"getClassName",value:function(){return k.className}}]),n}(k);E.className="LeCunNormal",s.m7h.registerClass(E);var A=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}return(0,a.Z)(n,[{key:"getClassName",value:function(){return k.className}}]),n}(k);A.className="LeCunUniform",s.m7h.registerClass(A);var T=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;if((0,r.Z)(this,n),(a=e.call(this)).DEFAULT_GAIN=1,a.gain=null==t.gain?a.DEFAULT_GAIN:t.gain,a.seed=t.seed,null!=a.seed)throw new l.nj("Random seed is not implemented for Orthogonal Initializer yet.");return a}return(0,a.Z)(n,[{key:"apply",value:function(t,e){var n=this;return(0,s.lub)((function(){if(t.length<2)throw new l.nj("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(t[0]*t[1],") elements: ")+"Slowness may result.");var e=t[0]>t[1]?[t[1],t[0]]:t,r=u.nG(e,0,1,"float32"),a=s.$r2.gramSchmidt(r);return t[0]>t[1]&&(a=(0,s.p4s)(a)),(0,s.dC7)(n.gain,a)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(p);T.className="Orthogonal",s.m7h.registerClass(T);var N={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.tU)(t,s.m7h.SerializationMap.getMap().classNameMap,e,"initializer")}function R(t){return(0,f.Kj)(t)}function Z(t){if("string"===typeof t){var e=t in N?N[t]:t;if("GlorotNormal"===e)return new S;if("GlorotUniform"===e)return new I;if("HeNormal"===e)return new _;if("HeUniform"===e)return new C;if("LeCunNormal"===e)return new E;if("LeCunUniform"===e)return new A;var n={};return n.className=e,n.config={},D(n)}return t instanceof p?t:D(t)}},18452:function(t,e,n){"use strict";n.d(e,{MK:function(){return o},Mz:function(){return a},PS:function(){return r},eY:function(){return s},zx:function(){return i}});var r=["channelsFirst","channelsLast"],a=["nearest","bilinear"],i=["valid","same","causal"],o=["max","avg"],s=["sum","mul","concat","ave"]},14024:function(t,e,n){"use strict";n.d(e,{J7:function(){return a},RR:function(){return r}});var r=["fanIn","fanOut","fanAvg"],a=["normal","uniform","truncatedNormal"]},75051:function(t,e,n){"use strict";var r=n(37762),a=n(15671),i=n(43144),o=n(88301),s=n(61120),u=n(60136),c=n(29388),l=n(87884),h=n(32532),f=n(98625),d=n(69804),p=n(59593),v=n(85149),g=n(67085),m=n(81111),y=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,null==t?{}:t)).supportsMasking=!0,null!=t&&(r.maxValue=t.maxValue),r}return(0,i.Z)(n,[{key:"call",value:function(t,e){t=(0,m.nQ)(t);var n=(0,l.UYe)(t);return null!=this.maxValue&&(n=(0,l.iUl)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t={maxValue:this.maxValue},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);y.className="ReLU",l.m7h.registerClass(y);var b=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,null==t?{}:t)).DEFAULT_ALPHA=.3,null==t&&(t={}),r.alpha=null==t.alpha?r.DEFAULT_ALPHA:t.alpha,r}return(0,i.Z)(n,[{key:"call",value:function(t,e){var n=(0,m.nQ)(t);return(0,l.hi7)(n,this.alpha)}},{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t={alpha:this.alpha},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);b.className="LeakyReLU",l.m7h.registerClass(b);var w=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;if((0,a.Z)(this,n),(r=e.call(this,null==t?{}:t)).DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),r.supportsMasking=!0,r.alphaInitializer=(0,v.L5)(t.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=(0,g.EC)(t.alphaRegularizer),r.alphaConstraint=(0,f.Ad)(t.alphaConstraint),null==t.sharedAxes)r.sharedAxes=null;else if(Array.isArray(t.sharedAxes))r.sharedAxes=t.sharedAxes;else{if("number"!==typeof t.sharedAxes)throw new p.nu("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(t.sharedAxes));r.sharedAxes=[t.sharedAxes]}return r}return(0,i.Z)(n,[{key:"build",value:function(t){var e=(t=(0,m.Wf)(t)).slice(1);if(null!=this.sharedAxes){var n,a=(0,r.Z)(this.sharedAxes);try{for(a.s();!(n=a.n()).done;){e[n.value-1]=1}}catch(s){a.e(s)}finally{a.f()}}this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var i={};if(null!=this.sharedAxes)for(var o=1;o<t.length;++o)i[o]=t[o];this.inputSpec=[new d.Zg({ndim:t.length,axes:i})],this.built=!0}},{key:"call",value:function(t,e){return t=(0,m.nQ)(t),(0,l.AL3)(t,this.alpha.read())}},{key:"getConfig",value:function(){var t={alphaInitializer:(0,v.Cx)(this.alphaInitializer),alphaRegularizer:(0,g.SG)(this.alphaRegularizer),alphaConstraint:(0,f.xF)(this.alphaConstraint),sharedAxes:this.sharedAxes},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);w.className="PReLU",l.m7h.registerClass(w);var x=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;if((0,a.Z)(this,n),(r=e.call(this,null==t?{}:t)).DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==r.DEFAULT_ALPHA)throw new p.nj("Non-default alpha value (".concat(t.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==t.alpha?r.DEFAULT_ALPHA:t.alpha,r}return(0,i.Z)(n,[{key:"call",value:function(t,e){var n=(0,m.nQ)(t);return(0,l.pyx)(n)}},{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t={alpha:this.alpha},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);x.className="ELU",l.m7h.registerClass(x);var k=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,null==t?{}:t)).DEFAULT_THETA=1,null==t&&(t={}),r.theta=null==t.theta?r.DEFAULT_THETA:t.theta,r}return(0,i.Z)(n,[{key:"call",value:function(t,e){var n=(0,m.nQ)(t);return(0,l.dC7)(n,(0,l.pju)((0,l.pjt)(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t={theta:this.theta},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);k.className="ThresholdedReLU",l.m7h.registerClass(k);var I=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,null==t?{}:t)).DEFAULT_AXIS=1,null==t&&(t={}),r.softmax=(new h.Gc).apply,r.axis=null==t.axis?r.DEFAULT_AXIS:t.axis,r}return(0,i.Z)(n,[{key:"call",value:function(t,e){var n=(0,m.nQ)(t);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t={axis:this.axis},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);I.className="Softmax",l.m7h.registerClass(I)},16400:function(t,e,n){"use strict";n.d(e,{aP:function(){return I},fN:function(){return S},nx:function(){return A}});var r=n(4942),a=n(15671),i=n(43144),o=n(88301),s=n(61120),u=n(60136),c=n(29388),l=n(87884),h=n(32532),f=n(40785),d=n(55658),p=n(36446),v=n(98625),g=n(69804),m=n(59593),y=n(85149),b=n(67085),w=n(14913),x=n(17319),k=n(81111);function I(t,e){return(0,l.lub)((function(){return(0,p.cj)(e),"channelsFirst"===e?l.p4s(t,[0,2,3,1]):t}))}function S(t,e){return(0,l.lub)((function(){return(0,p.cj)(e),"channelsFirst"===e?l.p4s(t,[0,2,3,4,1]):t}))}function _(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return(0,l.lub)((function(){if(null==i&&(i=(0,f.rf)()),(0,p.cj)(i),3!==t.shape.length)throw new m.nu("The input of a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead."));if(3!==e.shape.length)throw new m.nu("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new m.nu("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(e.shape.length," instead"));if("channelsFirst"===i&&(t=l.p4s(t,[0,2,1])),"causal"===a)throw new m.nj("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=l.PAt(t,e,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=d.a2(s,n)),s}))}function C(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return(0,l.lub)((function(){if(null==i&&(i=(0,f.rf)()),(0,p.cj)(i),3!==t.rank&&4!==t.rank)throw new m.nu("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(t.rank,"."));if(3!==e.rank&&4!==e.rank)throw new m.nu("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(t.rank,"."));var u=I(t,i);if("causal"===a)throw new m.nj("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=l.imm.conv2d({x:u,filter:e,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=l.p4s(u,[0,3,1,2])),u}))}function E(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return(0,l.lub)((function(){if(null==i&&(i=(0,f.rf)()),(0,p.cj)(i),4!==t.rank&&5!==t.rank)throw new m.nu("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(t.rank,"."));if(4!==e.rank&&5!==e.rank)throw new m.nu("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(t.rank,"."));var s=S(t,i);if("causal"===a)throw new m.nj("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=l.pdZ(s,e,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=d.a2(s,n)),"channelsFirst"===i&&(s=l.p4s(s,[0,4,1,2,3])),s}))}var A=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,r){var i;if((0,a.Z)(this,n),(i=e.call(this,r)).bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),i.rank=t,x.iQ(i.rank,"rank"),1!==i.rank&&2!==i.rank&&3!==i.rank)throw new m.nj("Convolution layer for rank other than 1, 2, or 3 (".concat(i.rank,") is ")+"not implemented yet.");if(i.kernelSize=(0,w.AF)(r.kernelSize,t,"kernelSize"),i.strides=(0,w.AF)(null==r.strides?1:r.strides,t,"strides"),i.padding=null==r.padding?"valid":r.padding,(0,p.zb)(i.padding),i.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,(0,p.cj)(i.dataFormat),i.activation=(0,h.aI)(r.activation),i.useBias=null==r.useBias||r.useBias,i.biasInitializer=(0,y.L5)(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=(0,v.Ad)(r.biasConstraint),i.biasRegularizer=(0,b.EC)(r.biasRegularizer),i.activityRegularizer=(0,b.EC)(r.activityRegularizer),i.dilationRate=(0,w.AF)(null==r.dilationRate?1:r.dilationRate,t,"dilationRate"),1===i.rank&&Array.isArray(i.dilationRate)&&1!==i.dilationRate.length)throw new m.nu("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(i.dilationRate)));if(2===i.rank){if("number"===typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate];else if(2!==i.dilationRate.length)throw new m.nu("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(i.dilationRate)))}else if(3===i.rank)if("number"===typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(3!==i.dilationRate.length)throw new m.nu("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(i.dilationRate)));return i}return(0,i.Z)(n,[{key:"getConfig",value:function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:(0,h.GD)(this.activation),useBias:this.useBias,biasInitializer:(0,y.Cx)(this.biasInitializer),biasRegularizer:(0,b.SG)(this.biasRegularizer),activityRegularizer:(0,b.SG)(this.activityRegularizer),biasConstraint:(0,v.xF)(this.biasConstraint)},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}],[{key:"verifyArgs",value:function(t){if(x.hu("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!==typeof t.kernelSize&&!x.Mx(t.kernelSize,"number",1,3))throw new m.nu("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(t.kernelSize),"."))}}]),n}(g.mh),T=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(i=e.call(this,t,r)).kernel=null,n.verifyArgs(r),i.filters=r.filters,x.iQ(i.filters,"filters"),i.kernelInitializer=(0,y.L5)(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=(0,v.Ad)(r.kernelConstraint),i.kernelRegularizer=(0,b.EC)(r.kernelRegularizer),i}return(0,i.Z)(n,[{key:"build",value:function(t){t=(0,k.Wf)(t);var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new m.nu("The channel dimension of the input should be defined. "+"Found ".concat(t[e]));var n=t[e],a=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,r.Z)({},e,n)}],this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){var e;t=(0,k.nQ)(t);var r=null==n.bias?null:n.bias.read(),a=x.WT(n.activation.getClassName());if(null!=a&&2===n.rank)e=C(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)e=_(t,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)e=C(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new m.nj("convolutions greater than 3D are not implemented yet.");e=E(t,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(e=n.activation.apply(e))}return e}))}},{key:"computeOutputShape",value:function(t){t=(0,k.Wf)(t);for(var e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2),r=0;r<n.length;++r){var a=(0,w.kt)(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(a)}var i=[t[0]];return"channelsLast"===this.dataFormat?(i=i.concat(e)).push(this.filters):(i.push(this.filters),i=i.concat(e)),i}},{key:"getConfig",value:function(){var t={filters:this.filters,kernelInitializer:(0,y.Cx)(this.kernelInitializer),kernelRegularizer:(0,b.SG)(this.kernelRegularizer),kernelConstraint:(0,v.xF)(this.kernelConstraint)},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}],[{key:"verifyArgs",value:function(t){if(!("filters"in t)||"number"!==typeof t.filters||t.filters<1)throw new m.nu("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(t.filters)))}}]),n}(A),N=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,2,t),n.verifyArgs(t),r}return(0,i.Z)(n,[{key:"getConfig",value:function(){var t=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return delete t.rank,t}}],[{key:"verifyArgs",value:function(t){if("number"!==typeof t.kernelSize&&!x.Mx(t.kernelSize,"number",1,2))throw new m.nu("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(t.kernelSize),"."))}}]),n}(T);N.className="Conv2D",l.m7h.registerClass(N);var D=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,3,t),n.verifyArgs(t),r}return(0,i.Z)(n,[{key:"getConfig",value:function(){var t=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return delete t.rank,t}}],[{key:"verifyArgs",value:function(t){if("number"!==typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new m.nu("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(t.kernelSize),"."))}}]),n}(T);D.className="Conv3D",l.m7h.registerClass(D);var R=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;if((0,a.Z)(this,n),(r=e.call(this,t)).inputSpec=[new g.Zg({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new m.nu("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,i.Z)(n,[{key:"build",value:function(t){if(4!==(t=(0,k.Wf)(t)).length)throw new m.nu("Input should have rank 4; Received input shape: "+JSON.stringify(t));var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new m.nu("The channel dimension of the inputs should be defined. Found `None`.");var n=t[e],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new g.Zg({ndim:4,axes:(0,r.Z)({},e,n)})],this.built=!0}},{key:"call",value:function(t,e){var n=this;return l.lub((function(){var e=(0,k.nQ)(t);if(4!==e.shape.length)throw new m.nu("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(e.shape.length));var r,a,i=e.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],h=n.kernelSize[1],f=n.strides[0],p=n.strides[1],v=[o,(0,w.$U)(s,f,c,n.padding),(0,w.$U)(u,p,h,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(e=l.p4s(e,[0,2,3,1]));var g=l.bc(e,n.kernel.read(),v,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(g=l.p4s(g,[0,3,1,2])),null!=n.bias&&(g=d.a2(g,n.bias.read(),n.dataFormat)),null!=n.activation&&(g=n.activation.apply(g)),g}))}},{key:"computeOutputShape",value:function(t){var e,n,r,a=(t=(0,k.Wf)(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3):(e=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[e]=this.filters,a[n]=(0,w.$U)(a[n],s,i,this.padding),a[r]=(0,w.$U)(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var t=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return delete t.dilationRate,t}}]),n}(N);R.className="Conv2DTranspose",l.m7h.registerClass(R);var Z=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;if((0,a.Z)(this,n),(r=e.call(this,t)).inputSpec=[new g.Zg({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new m.nu("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,i.Z)(n,[{key:"build",value:function(t){if(5!==(t=(0,k.Wf)(t)).length)throw new m.nu("Input should have rank 5; Received input shape: "+JSON.stringify(t));var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new m.nu("The channel dimension of the inputs should be defined. Found `None`.");var n=t[e],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new g.Zg({ndim:5,axes:(0,r.Z)({},e,n)})],this.built=!0}},{key:"call",value:function(t,e){var n=this;return l.lub((function(){var e=(0,k.nQ)(t);if(5!==e.shape.length)throw new m.nu("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(e.shape.length));var r,a,i,o=e.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],h=o[a],f=n.kernelSize[0],p=n.kernelSize[1],v=n.kernelSize[2],g=n.strides[0],y=n.strides[1],b=n.strides[2],x=[s,(0,w.$U)(u,g,f,n.padding),(0,w.$U)(c,y,p,n.padding),(0,w.$U)(h,b,v,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(e=l.p4s(e,[0,2,3,4,1]));var I=l.$QV(e,n.kernel.read(),x,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(I=l.p4s(I,[0,4,1,2,3])),null!==n.bias&&(I=d.a2(I,n.bias.read(),n.dataFormat)),null!==n.activation&&(I=n.activation.apply(I)),I}))}},{key:"computeOutputShape",value:function(t){var e,n,r,a,i=(t=(0,k.Wf)(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3,a=4):(e=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],h=this.strides[2];return i[e]=this.filters,i[n]=(0,w.$U)(i[n],c,o,this.padding),i[r]=(0,w.$U)(i[r],l,s,this.padding),i[a]=(0,w.$U)(i[a],h,u,this.padding),i}},{key:"getConfig",value:function(){var t=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return delete t.dilationRate,t}}]),n}(D);Z.className="Conv3DTranspose",l.m7h.registerClass(Z);var M=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,r){var i;if((0,a.Z)(this,n),(i=e.call(this,t,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",i.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",i.depthwiseKernel=null,i.pointwiseKernel=null,null==r.filters)throw new m.nu("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new m.nu("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new m.nu("SeparableConv".concat(i.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return i.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,i.depthwiseInitializer=(0,y.L5)(r.depthwiseInitializer||i.DEFAULT_DEPTHWISE_INITIALIZER),i.depthwiseRegularizer=(0,b.EC)(r.depthwiseRegularizer),i.depthwiseConstraint=(0,v.Ad)(r.depthwiseConstraint),i.pointwiseInitializer=(0,y.L5)(r.depthwiseInitializer||i.DEFAULT_POINTWISE_INITIALIZER),i.pointwiseRegularizer=(0,b.EC)(r.pointwiseRegularizer),i.pointwiseConstraint=(0,v.Ad)(r.pointwiseConstraint),i}return(0,i.Z)(n,[{key:"build",value:function(t){if((t=(0,k.Wf)(t)).length<this.rank+2)throw new m.nu("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(t)));var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new m.nu("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(t[e])));for(var n=t[e],a=this.kernelSize.concat([n,this.depthMultiplier]),i=[],o=0;o<this.rank;++o)i.push(1);i.push(n*this.depthMultiplier,this.filters);var s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new g.Zg({ndim:this.rank+2,axes:(0,r.Z)({},e,n)})],this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){var e;if(t=(0,k.nQ)(t),1===n.rank)throw new m.nj("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(t=l.p4s(t,[0,2,3,1])),e=l.U_I(t,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(e=d.a2(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),"channelsFirst"===n.dataFormat&&(e=l.p4s(e,[0,3,1,2])),e}))}},{key:"getConfig",value:function(){var t=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=(0,y.Cx)(this.depthwiseInitializer),t.pointwiseInitializer=(0,y.Cx)(this.pointwiseInitializer),t.depthwiseRegularizer=(0,b.SG)(this.depthwiseRegularizer),t.pointwiseRegularizer=(0,b.SG)(this.pointwiseRegularizer),t.depthwiseConstraint=(0,v.xF)(this.depthwiseConstraint),t.pointwiseConstraint=(0,v.xF)(this.pointwiseConstraint),t}}]),n}(T);M.className="SeparableConv";var F=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){return(0,a.Z)(this,n),e.call(this,2,t)}return(0,i.Z)(n)}(M);F.className="SeparableConv2D",l.m7h.registerClass(F);var O=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,1,t),n.verifyArgs(t),r.inputSpec=[{ndim:3}],r}return(0,i.Z)(n,[{key:"getConfig",value:function(){var t=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return delete t.rank,delete t.dataFormat,t}}],[{key:"verifyArgs",value:function(t){if("number"!==typeof t.kernelSize&&!x.Mx(t.kernelSize,"number",1,1))throw new m.nu("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(t.kernelSize),"."))}}]),n}(T);O.className="Conv1D",l.m7h.registerClass(O);var B=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),"number"===typeof t.cropping?r.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"===typeof t.cropping[0]?r.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:r.cropping=t.cropping,r.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,i.Z)(n,[{key:"computeOutputShape",value:function(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){if(t=(0,k.nQ)(t),"channelsLast"===n.dataFormat){var e=d.uI(t,n.cropping[0][0],t.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return d.uI(e,n.cropping[1][0],t.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=d.uI(t,n.cropping[0][0],t.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return d.uI(r,n.cropping[1][0],t.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(g.mh);B.className="Cropping2D",l.m7h.registerClass(B);var L=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==t.size?r.DEFAULT_SIZE:t.size,r.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,p.cj)(r.dataFormat),r.interpolation=null==t.interpolation?"nearest":t.interpolation,(0,p.wU)(r.interpolation),r}return(0,i.Z)(n,[{key:"computeOutputShape",value:function(t){if("channelsFirst"===this.dataFormat){var e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}var r=null==t[1]?null:this.size[0]*t[1],a=null==t[2]?null:this.size[1]*t[2];return[t[0],r,a,t[3]]}},{key:"call",value:function(t,e){var n=this;return l.lub((function(){var e=(0,k.nQ)(t),r=e.shape;if("channelsFirst"===n.dataFormat){e=l.p4s(e,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?l.BHj.resizeNearestNeighbor(e,[a,i]):l.BHj.resizeBilinear(e,[a,i]);return l.p4s(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?l.BHj.resizeNearestNeighbor(e,[s,u]):l.BHj.resizeBilinear(e,[s,u])}))}},{key:"getConfig",value:function(){var t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(g.mh);L.className="UpSampling2D",l.m7h.registerClass(L)},37197:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(87884),l=n(40785),h=n(55658),f=n(36446),d=n(98625),p=n(59593),v=n(85149),g=n(67085),m=n(14913),y=n(81111),b=n(16400);var w=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,2,t)).depthwiseKernel=null,a.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,a.depthwiseInitializer=(0,v.L5)(t.depthwiseInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.depthwiseConstraint=(0,d.Ad)(t.depthwiseConstraint),a.depthwiseRegularizer=(0,g.EC)(t.depthwiseRegularizer),a}return(0,a.Z)(n,[{key:"build",value:function(t){if((t=(0,y.Wf)(t)).length<4)throw new p.nu("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(t),"."));var e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new p.nu("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(t[e],")."));var n=t[e],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){var e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return(0,c.lub)((function(){null==a&&(a=(0,l.rf)()),(0,f.cj)(a);var o=(0,b.aP)(t,a);if(4!==t.rank)throw new p.nu("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));if(4!==e.rank)throw new p.nu("depthwiseKernel is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));return o=c.B10(o,e,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=c.p4s(o,[0,3,1,2])),o}))}(t=(0,y.nQ)(t),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(e=h.a2(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),e}))}},{key:"computeOutputShape",value:function(t){t=(0,y.Wf)(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,a=(0,m.kt)(e,this.kernelSize[0],this.padding,this.strides[0]),i=(0,m.kt)(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],r,a,i]:[t[0],a,i,r]}},{key:"getConfig",value:function(){var t=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=(0,v.Cx)(this.depthwiseInitializer),t.depthwiseRegularizer=(0,g.SG)(this.depthwiseRegularizer),t.depthwiseConstraint=(0,d.xF)(this.depthwiseRegularizer),t}}]),n}(b.nx);w.className="DepthwiseConv2D",c.m7h.registerClass(w)},98311:function(t,e,n){"use strict";var r=n(29439),a=n(93433),i=n(88301),o=n(61120),s=n(43144),u=n(15671),c=n(60136),l=n(29388),h=n(87884),f=n(55658),d=n(36446),p=n(69804),v=n(59593),g=n(85149),m=n(14913),y=n(17319),b=n(81111),w=n(95943),x=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n},k=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,u.Z)(this,n),t.unroll)throw new v.nj("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new v.nj("It is not possible at the moment to stack convolutional cells.");return(r=e.call(this,t)).inputSpec=[new p.Zg({ndim:5})],r}return(0,s.Z)(n,[{key:"call",value:function(t,e){var r=this;return h.lub((function(){if(null!=r.cell.dropoutMask&&(h.B90(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(h.B90(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),e&&e.constants)throw new v.nu("ConvRNN2D cell does not support constants");var a=null==e?null:e.mask,s=null==e?null:e.training,u=null==e?null:e.initialState;return(0,i.Z)((0,o.Z)(n.prototype),"call",r).call(r,t,{mask:a,training:s,initialState:u})}))}},{key:"computeOutputShape",value:function(t){var e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0]].concat((0,a.Z)(e.slice(2)))),this.returnState&&(e=[e].concat((0,a.Z)(Array(2).fill([t[0]].concat((0,a.Z)(e.slice(-3))))))),e}},{key:"getInitialState",value:function(t){var e=this;return h.lub((function(){var n=e.cell.stateSize,r=t.shape,i=e.computeSingleOutputShape(r),o=[i[0]].concat((0,a.Z)(i.slice(2))),s=h.lls(o);return Array.isArray(n)?Array(n.length).fill(s):[s]}))}},{key:"resetStates",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.lub((function(){if(!e.stateful)throw new v.j1("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=e.inputSpec[0].shape,i=e.computeSingleOutputShape(r),o=[i[0]].concat((0,a.Z)(i.slice(2)));if(null==r[0])throw new v.nu("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==e.getStates())Array.isArray(e.cell.stateSize)?e.states_=e.cell.stateSize.map((function(){return h.lls(o)})):e.states_=[h.lls(o)];else if(null==t)h.B90(e.states_),null!=e.keptStates&&(h.B90(e.keptStates),e.keptStates=[]),Array.isArray(e.cell.stateSize)?e.states_=e.cell.stateSize.map((function(){return h.lls(o)})):e.states_[0]=h.lls(o);else{if(Array.isArray(t)||(t=[t]),t.length!==e.states_.length)throw new v.nu("Layer ".concat(e.name," expects ").concat(e.states_.length," state(s), ")+"but it received ".concat(t.length," state value(s). Input ")+"received: ".concat(t));n?e.keptStates.push(e.states_.slice()):h.B90(e.states_);for(var s=0;s<e.states_.length;++s){var u=t[s],c=o;if(!h.D5U.arraysEqual(u.shape,c))throw new v.nu("State ".concat(s," is incompatible with layer ").concat(e.name,": ")+"expected shape=".concat(c,", received shape=").concat(u.shape));e.states_[s]=u}}e.states_=e.states_.map((function(t){return h.CnY(t.clone())}))}))}},{key:"computeSingleOutputShape",value:function(t){var e=this.cell,n=e.dataFormat,r=e.filters,i=e.kernelSize,o=e.padding,s=e.strides,u=e.dilationRate,c="channelsFirst"===n,l=t[c?3:2],h=t[c?4:3],f=(0,m.kt)(l,i[0],o,s[0],u[0]),d=(0,m.kt)(h,i[1],o,s[1],u[1]);return[].concat((0,a.Z)(t.slice(0,2)),(0,a.Z)(c?[r,f,d]:[f,d,r]))}}]),n}(w.$p);k.className="ConvRNN2D";var I=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;(0,u.Z)(this,n);var a=t.filters,i=t.kernelSize,o=t.strides,s=t.padding,c=t.dataFormat,l=t.dilationRate;return(r=e.call(this,Object.assign(Object.assign({},t),{units:a}))).filters=a,(0,y.iQ)(r.filters,"filters"),r.kernelSize=(0,m.AF)(i,2,"kernelSize"),r.kernelSize.forEach((function(t){return(0,y.iQ)(t,"kernelSize")})),r.strides=(0,m.AF)(o||1,2,"strides"),r.strides.forEach((function(t){return(0,y.iQ)(t,"strides")})),r.padding=s||"valid",(0,d.zb)(r.padding),r.dataFormat=c||"channelsLast",(0,d.cj)(r.dataFormat),r.dilationRate=(0,m.AF)(l||1,2,"dilationRate"),r.dilationRate.forEach((function(t){return(0,y.iQ)(t,"dilationRate")})),r}return(0,s.Z)(n,[{key:"build",value:function(t){var e;t=(0,b.Wf)(t);var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new v.nu("The channel dimension of the input should be defined. "+"Found ".concat(t[n]));var r=t[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var d=this.biasInitializer,p=this.filters;o=new(e=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"apply",value:function(t,e){var n=d.apply([p]),r=h.iUs([p]),a=d.apply([2*p]);return f.mV([n,r,a])}}]),n}(g.m7),e.className="CustomInit",e)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(t,e){var n=this;return h.lub((function(){if(3!==t.length)throw new v.nu("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(t.length,"."));var a=e.training||!1,i=t[0],o=t[1],s=t[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=(0,w._0)({ones:function(){return h.JpU(i)},rate:n.dropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var u=n.dropoutMask,c=function(t,e,n){return e&&e[n]?h.dC7(e[n],t):t},l=c(i,u,0),f=c(i,u,1),d=c(i,u,2),p=c(i,u,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=(0,w._0)({ones:function(){return h.JpU(o)},rate:n.recurrentDropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var g=n.recurrentDropoutMask,m=c(o,g,0),y=c(o,g,1),b=c(o,g,2),x=c(o,g,3),k=h.Vl2(n.kernel.read(),4,3),I=(0,r.Z)(k,4),S=I[0],_=I[1],C=I[2],E=I[3],A=n.useBias?h.Vl2(n.bias.read(),4):[null,null,null,null],T=(0,r.Z)(A,4),N=T[0],D=T[1],R=T[2],Z=T[3];l=n.inputConv(l,S,N,n.padding),f=n.inputConv(f,_,D,n.padding),d=n.inputConv(d,C,R,n.padding),p=n.inputConv(p,E,Z,n.padding);var M=h.Vl2(n.recurrentKernel.read(),4,3),F=(0,r.Z)(M,4),O=F[0],B=F[1],L=F[2],P=F[3];m=n.recurrentConv(m,O),y=n.recurrentConv(y,B),b=n.recurrentConv(b,L),x=n.recurrentConv(x,P);var U=n.recurrentActivation.apply(h.IHx(l,m)),z=n.recurrentActivation.apply(h.IHx(f,y)),W=h.IHx(h.dC7(z,s),h.dC7(U,n.activation.apply(h.IHx(d,b)))),V=h.dC7(n.recurrentActivation.apply(h.IHx(p,x)),n.activation.apply(W));return[V,V,W]}))}},{key:"getConfig",value:function(){var t=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this),e=(t.units,x(t,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},e),r)}},{key:"inputConv",value:function(t,e,n,r){var a=h.Tek(t,e,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?f.a2(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(t,e){return h.Tek(t,e,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(w.U7);I.className="ConvLSTM2DCell",h.m7h.registerClass(I);var S=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){(0,u.Z)(this,n);var r=new I(t);return e.call(this,Object.assign(Object.assign({},t),{cell:r}))}return(0,s.Z)(n,null,[{key:"fromConfig",value:function(t,e){return new t(e)}}]),n}(k);S.className="ConvLSTM2D",h.m7h.registerClass(S)},62792:function(t,e,n){"use strict";var r=n(37762),a=n(4942),i=n(15671),o=n(43144),s=n(88301),u=n(61120),c=n(60136),l=n(29388),h=n(87884),f=n(32532),d=n(55658),p=n(98625),v=n(69804),g=n(59593),m=n(85149),y=n(67085),b=n(17319),w=n(23294),x=n(81111),k=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).rate=Math.max(Math.min(t.rate,1),0),r.noiseShape=t.noiseShape,r.seed=t.seed,r.supportsMasking=!0,r}return(0,o.Z)(n,[{key:"getNoiseShape",value:function(t){if(null==this.noiseShape)return this.noiseShape;for(var e=t.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){n.invokeCallHook(t,e);var r=(0,x.nQ)(t);if(0<n.rate&&n.rate<1){var a=null!=e.training&&e.training,i=n.getNoiseShape(r);return d.KC((function(){return d.rv(r,n.rate,i,n.seed)}),(function(){return r}),a)}return t}))}},{key:"getConfig",value:function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}},{key:"dispose",value:function(){return(0,s.Z)((0,u.Z)(n.prototype),"dispose",this).call(this)}}]),n}(v.mh);k.className="Dropout",h.m7h.registerClass(k);var I=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).inputSpec=[{ndim:3}],r}return(0,o.Z)(n,[{key:"getNoiseShape",value:function(t){var e=t.shape;return[e[0],1,e[2]]}}]),n}(k);I.className="SpatialDropout1D",h.m7h.registerClass(I);var S=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,i.Z)(this,n),(r=e.call(this,t)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var a=null;null!=t.batchSize&&(a=t.batchSize),r.batchInputShape=[a,t.inputDim]}return r.units=t.units,(0,b.iQ)(r.units,"units"),r.activation=(0,f.aI)(t.activation),null!=t.useBias&&(r.useBias=t.useBias),r.kernelInitializer=(0,m.L5)(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=(0,m.L5)(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=(0,p.Ad)(t.kernelConstraint),r.biasConstraint=(0,p.Ad)(t.biasConstraint),r.kernelRegularizer=(0,y.EC)(t.kernelRegularizer),r.biasRegularizer=(0,y.EC)(t.biasRegularizer),r.activityRegularizer=(0,y.EC)(t.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,o.Z)(n,[{key:"build",value:function(t){var e=(t=(0,x.Wf)(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,a.Z)({},-1,e)}],this.built=!0}},{key:"computeOutputShape",value:function(t){var e=(t=(0,x.Wf)(t)).slice();return e[e.length-1]=this.units,e}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){n.invokeCallHook(t,e);var r,a=(0,x.nQ)(t),i=(0,b.WT)(n.activation.getClassName());return null!=i?r=d.AK(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=d.AK(a,n.kernel.read()),null!=n.bias&&(r=d.a2(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var t={units:this.units,activation:(0,f.GD)(this.activation),useBias:this.useBias,kernelInitializer:(0,m.Cx)(this.kernelInitializer),biasInitializer:(0,m.Cx)(this.biasInitializer),kernelRegularizer:(0,y.SG)(this.kernelRegularizer),biasRegularizer:(0,y.SG)(this.biasRegularizer),activityRegularizer:(0,y.SG)(this.activityRegularizer),kernelConstraint:(0,p.xF)(this.kernelConstraint),biasConstraint:(0,p.xF)(this.biasConstraint)},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(v.mh);S.className="Dense",h.m7h.registerClass(S);var _=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),t=t||{},(r=e.call(this,t)).inputSpec=[{minNDim:3}],r.dataFormat=t.dataFormat,r}return(0,o.Z)(n,[{key:"computeOutputShape",value:function(t){t=(0,x.Wf)(t);var e,n=(0,r.Z)(t.slice(1));try{for(n.s();!(e=n.n()).done;){if(null==e.value)throw new g.nu('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(t.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(a){n.e(a)}finally{n.f()}return[t[0],(0,w.NS)(t,1)]}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){n.invokeCallHook(t,e);var r=(0,x.nQ)(t);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=(0,h.p4s)(r,a)}return d.Uz(r)}))}},{key:"getConfig",value:function(){var t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);var e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(v.mh);_.className="Flatten",h.m7h.registerClass(_);var C=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).supportsMasking=!0,r.activation=(0,f.aI)(t.activation),r}return(0,o.Z)(n,[{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){n.invokeCallHook(t,e);var r=(0,x.nQ)(t);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var t={activation:(0,f.GD)(this.activation)},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(v.mh);C.className="Activation",h.m7h.registerClass(C);var E=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).n=t.n,r.inputSpec=[{ndim:2}],r}return(0,o.Z)(n,[{key:"computeOutputShape",value:function(t){return[t[0],this.n,t[1]]}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){return t=(0,x.nQ)(t),d.rx(t,n.n)}))}},{key:"getConfig",value:function(){var t={n:this.n},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(v.mh);E.className="RepeatVector",h.m7h.registerClass(E);var A=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;(0,i.Z)(this,n),(r=e.call(this,t)).targetShape=t.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,o.Z)(n,[{key:"isUnknown",value:function(t){return t<0||null==t}},{key:"fixUnknownDimension",value:function(t,e){for(var n="Total size of new array must be unchanged.",r=e.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new g.nu("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=(0,w.NS)(t);if(null!==i){if(0===a||u%a!==0)throw new g.nu(n);r[i]=u/a}else if(u!==a)throw new g.nu(n);return r}},{key:"computeOutputShape",value:function(t){for(var e=!1,n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){n.invokeCallHook(t,e);var r=(0,x.nQ)(t),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return(0,h.XLQ)(r,i)}))}},{key:"getConfig",value:function(){var t={targetShape:this.targetShape},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(v.mh);A.className="Reshape",h.m7h.registerClass(A);var T=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,i.Z)(this,n),r=e.call(this,t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(t.dims," instead."));var a=(0,w.w6)(1,t.dims.length+1);if(!h.D5U.arraysEqual(t.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=t.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new v.Zg({ndim:r.dims.length+1})],r}return(0,o.Z)(n,[{key:"computeOutputShape",value:function(t){var e=(t=(0,x.Wf)(t)).slice();return this.dims.forEach((function(n,r){e[r+1]=t[n]})),e}},{key:"call",value:function(t,e){return(0,h.p4s)((0,x.nQ)(t),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var t={dims:this.dims},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(v.mh);T.className="Permute",h.m7h.registerClass(T);var N=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,null==t?{}:t)).supportsMasking=!0,r.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0,r}return(0,o.Z)(n,[{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this),e={maskValue:this.maskValue};return Object.assign(e,t),e}},{key:"computeMask",value:function(t,e){var n=(0,x.nQ)(t);return(0,h.YjB)((0,h.Quu)(n,this.maskValue),-1)}},{key:"call",value:function(t,e){var n=this;return(0,h.lub)((function(){n.invokeCallHook(t,e);var r=(0,x.nQ)(t),a=(0,h.YjB)((0,h.Quu)(r,n.maskValue),-1,!0);return(0,h.dC7)(r,(0,h.pju)(a,r.dtype))}))}}]),n}(v.mh);N.className="Masking",h.m7h.registerClass(N)},94954:function(t,e,n){"use strict";var r=n(93433),a=n(15671),i=n(43144),o=n(88301),s=n(61120),u=n(60136),c=n(29388),l=n(87884),h=n(55658),f=n(98625),d=n(69804),p=n(59593),v=n(85149),g=n(67085),m=n(17319),y=n(81111),b=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;if((0,a.Z)(this,n),(r=e.call(this,t)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var i=null;null!=t.batchSize&&(i=t.batchSize),null==t.inputLength?r.batchInputShape=[i,null]:r.batchInputShape=[i].concat(m.zZ(t.inputLength))}return r.inputDim=t.inputDim,m.iQ(r.inputDim,"inputDim"),r.outputDim=t.outputDim,m.iQ(r.outputDim,"outputDim"),r.embeddingsInitializer=(0,v.L5)(t.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=(0,g.EC)(t.embeddingsRegularizer),r.activityRegularizer=(0,g.EC)(t.activityRegularizer),r.embeddingsConstraint=(0,f.Ad)(t.embeddingsConstraint),r.maskZero=t.maskZero,r.supportsMasking=t.maskZero,r.inputLength=t.inputLength,r}return(0,i.Z)(n,[{key:"build",value:function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(t){}},{key:"computeMask",value:function(t,e){var n=this;return(0,l.lub)((function(){return n.maskZero?(t=(0,y.nQ)(t),(0,l.Quu)(t,(0,l.P84)(t))):null}))}},{key:"computeOutputShape",value:function(t){if(t=(0,y.Wf)(t),null==this.inputLength)return[].concat((0,r.Z)(t),[this.outputDim]);var e=m.zZ(this.inputLength);if(e.length!==t.length-1)throw new p.nu('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(t));for(var n=0,a=0;a<e.length;++a){var i=e[a],o=t[a+1];if(null!=i&&null!=o&&i!==o)throw new p.nu('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(t));null==i&&(e[n]=o),n++}return[t[0]].concat((0,r.Z)(e),[this.outputDim])}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){n.invokeCallHook(t,e);var r=(0,y.nQ)(t);"int32"!==r.dtype&&(r=h.pj(r,"int32"));var a=h.Iq(n.embeddings.read(),(0,l.XLQ)(r,[r.size]));return(0,l.XLQ)(a,(0,y.Wf)(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,v.Cx)(this.embeddingsInitializer),embeddingsRegularizer:(0,g.SG)(this.embeddingsRegularizer),activityRegularizer:(0,g.SG)(this.activityRegularizer),embeddingsConstraint:(0,f.xF)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh);b.className="Embedding",l.m7h.registerClass(b)},45542:function(t,e,n){"use strict";var r=n(88301),a=n(61120),i=n(37762),o=n(15671),s=n(43144),u=n(60136),c=n(29388),l=n(87884),h=n(55658),f=n(69804),d=n(59593),p=n(35615),v=n(17319),g=n(23294),m=n(81111),y=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t||{})).supportsMasking=!0,r}return(0,s.Z)(n,[{key:"mergeFunction",value:function(t){throw new d.nj}},{key:"computeElementwiseOpOutputShape",value:function(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;for(var n=t.slice(0,t.length-e.length),r=0;r<e.length;++r){var a=t[t.length-e.length+r],i=e[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new d.nu("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(a)}}return n}},{key:"build",value:function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[(0,m.Wf)(t)]),t.length<2)throw new d.nu("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(t.length," input(s)."));var e,n=[],r=(0,i.Z)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(l){r.e(l)}finally{r.f()}if((n=v.Tw(n)).length>1)throw new d.nu("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(t),"."));for(var o=null==t[0]?null:t[0].slice(1),s=1;s<t.length;++s){var u=null==t[s]?null:t[s].slice(1);o=this.computeElementwiseOpOutputShape(o,u)}var c=t.map((function(t){return t.length}));-1===t.indexOf(null)&&1===v.Tw(c).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){if(n.reshapeRequired){var e=[],r=t.map((function(t){return t.rank}));if(-1===r.indexOf(null)){var a,o=g.Fp(r),s=(0,i.Z)(t);try{for(s.s();!(a=s.n()).done;){for(var u=a.value,c=u.rank,f=0;f<o-c;++f)u=h.dt(u,1);e.push(u)}}catch(N){s.e(N)}finally{s.f()}return n.mergeFunction(e)}var d,p=!1,v=(0,i.Z)(t);try{for(v.s();!(d=v.n()).done;){var m=d.value,y=m.rank;if(null==y){var b=m.shape,w=b[0],x=b.slice(1).concat([w]),k=l.XLQ(m,[w].concat(g.NS(b.slice(1))));k=l.p4s(k,[1,0]),k=l.XLQ(k,x),e.push(k),p=!0}else if(y>1){var I=g.w6(1,y).concat([0]);e.push(l.p4s(m,I)),p=!0}else e.push(m)}}catch(N){v.e(N)}finally{v.f()}var S=n.mergeFunction(e),_=S.rank;if(p)if(null==_){var C=S.shape,E=C[C.length-1],A=[E].concat(C.slice(0,C.length-1));S=l.XLQ(l.p4s(l.XLQ(S,[-1,E]),[1,0]),A)}else if(_>1){var T=[_-1].concat(g.w6(0,_-1));S=l.p4s(S,T)}return S}return n.mergeFunction(t)}))}},{key:"computeOutputShape",value:function(t){var e;e=null==t[0]?null:t[0].slice(1);for(var n=1;n<t.length;++n){var r=null==t[n]?null:t[n].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}var a,o=[],s=(0,i.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;null!=u&&null!==u[0]&&o.push(u[0])}}catch(c){s.e(c)}finally{s.f()}return e=1===(o=v.Tw(o)).length?o.concat(e):[null].concat(e)}},{key:"computeMask",value:function(t,e){return l.lub((function(){if(null==e)return null;if(!Array.isArray(e))throw new d.nu("`mask` should be an Array");if(!Array.isArray(t))throw new d.nu("`inputs` should be an Array");if(e.length!==t.length)throw new d.nu("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(t.length," vs ").concat(e.length,")"));if(e.every((function(t){return null==t})))return null;for(var n=(e=e.map((function(t){return null==t?t:l.dt4(t,0)})))[0],r=1;r<e.length-1;++r)n=l.HvI(n,e[r]);return n}))}}]),n}(f.mh),b=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){return(0,o.Z)(this,n),e.call(this,t)}return(0,s.Z)(n,[{key:"mergeFunction",value:function(t){return(0,l.lub)((function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=l.IHx(e,t[n]);return e}))}}]),n}(y);b.className="Add",l.m7h.registerClass(b);var w=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){return(0,o.Z)(this,n),e.call(this,t)}return(0,s.Z)(n,[{key:"mergeFunction",value:function(t){return(0,l.lub)((function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=l.dC7(e,t[n]);return e}))}}]),n}(y);w.className="Multiply",l.m7h.registerClass(w);var x=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){return(0,o.Z)(this,n),e.call(this,t)}return(0,s.Z)(n,[{key:"mergeFunction",value:function(t){return(0,l.lub)((function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=l.IHx(e,t[n]);return l.dC7(1/t.length,e)}))}}]),n}(y);x.className="Average",l.m7h.registerClass(x);var k=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){return(0,o.Z)(this,n),e.call(this,t)}return(0,s.Z)(n,[{key:"mergeFunction",value:function(t){return(0,l.lub)((function(){for(var e=t[0],n=1;n<t.length;++n)e=l.gWQ(e,t[n]);return e}))}}]),n}(y);k.className="Maximum",l.m7h.registerClass(k);var I=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){return(0,o.Z)(this,n),e.call(this,t)}return(0,s.Z)(n,[{key:"mergeFunction",value:function(t){return(0,l.lub)((function(){for(var e=t[0],n=1;n<t.length;++n)e=l.LTh(e,t[n]);return e}))}}]),n}(y);I.className="Minimum",l.m7h.registerClass(I);var S=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).DEFAULT_AXIS=-1,null==t&&(t={}),r.axis=null==t.axis?r.DEFAULT_AXIS:t.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,s.Z)(n,[{key:"build",value:function(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new d.nu("A `Concatenate` layer should be called on a list of at least 2 inputs");var e,n=!0,r=(0,i.Z)(t);try{for(r.s();!(e=r.n()).done;){if(null!=e.value){n=!1;break}}}catch(p){r.e(p)}finally{r.f()}if(!n){for(var a=[],o=0;o<t.length;++o){var s=t[o].slice();s.splice(this.axis,1);var u,c=!1,h=(0,i.Z)(a);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(l.D5U.arraysEqual(f,s)){c=!0;break}}}catch(p){h.e(p)}finally{h.f()}c||a.push(s)}if(a.length>1)throw new d.nu("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}}},{key:"mergeFunction",value:function(t){var e=this;return(0,l.lub)((function(){return h.mV(t,e.axis)}))}},{key:"computeOutputShape",value:function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new d.nu("A `Concatenate` layer should be called on a list of inputs.");var e,n=t,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,o=(0,i.Z)(n.slice(1));try{for(o.s();!(e=o.n()).done;){var s=e.value;if(null==r[a]||null==s[a]){r[a]=null;break}r[a]+=s[a]}}catch(u){o.e(u)}finally{o.f()}return r}},{key:"computeMask",value:function(t,e){var n=this;if(null==e)return null;if(!Array.isArray(e))throw new d.nu("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new d.nu("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new d.nu("Mismatch in the length of mask (".concat(e.length,") ")+"and the legnth of inputs (".concat(t.length,")"));return l.lub((function(){var r=!0;if(e.forEach((function(t){null==t||(r=!1)})),r)return null;for(var a=[],i=0;i<t.length;++i)null==e[i]?a.push(l.pju(l.JpU(t[i]),"bool")):e[i].rank<t[i].rank?a.push(l.dt4(e[i],-1)):a.push(e[i]);var o=l.zoF(a,n.axis);return l.$6P(o,-1,!1)}))}},{key:"getConfig",value:function(){var t={axis:this.axis},e=(0,r.Z)((0,a.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(y);function _(t,e){for(;t<0;)t+=e;return t}S.className="Concatenate",l.m7h.registerClass(S);var C=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).axes=t.axes,r.normalize=null!=t.normalize&&t.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,s.Z)(n,[{key:"build",value:function(t){l.D5U.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var e=t[0],n=t[1];if(e.length>3||n.length>3)throw new d.nj("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(e,n);if(e[r[0]]!==n[r[1]])throw new d.nu("Dimension incompatibility: "+"".concat(e[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(t){if(2!==t.length)throw new d.nu("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(t.length," input(s)."));var e,n=t[0],r=t[1];return e=Array.isArray(this.axes)?this.axes.map((function(e,n){return _(e,t[n].shape.length)})):[_(this.axes,n.shape.length),_(this.axes,r.shape.length)],this.normalize&&(n=(0,p.Eq)(n,e[0]),r=(0,p.Eq)(r,e[1])),function(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new d.nj("batchDot is not implemented for tensors of 4D or higher rank yet");if(l.D5U.assert(t.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(t.shape.length)})),l.D5U.assert(t.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(e.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new d.nj("batchDot is not implemented for complex64-type Tensors yet.");var r=t.shape.length,a=e.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return l.lub((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);e=l.XLQ(e,e.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],h=0;h<n;++h)c.push(1);t=l.XLQ(t,t.shape.concat(c))}else n=0;if(2===t.shape.length&&2===e.shape.length)o=i[0]===i[1]?l.Smz(l.dC7(t,e),i[0]):l.Smz(l.dC7(l.p4s(t,[1,0]),e),i[1]);else{var f=i[0]!==t.shape.length-1,d=i[1]===e.shape.length-1;o=l.OI3(t,e,f,d)}if(n>0){for(var p,v=[],g=p=r>a?r+a-3:r-1;g<p+n;++g)v.push(g);o=l.L9e(o,v)}return 1===o.shape.length&&(o=l.dt4(o,1)),o}))}(n,r,e)}},{key:"interpretAxes",value:function(t,e){return Array.isArray(this.axes)?this.axes:[_(this.axes,t.length),_(this.axes,e.length)]}},{key:"computeOutputShape",value:function(t){l.D5U.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new d.nj("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(e,n);e.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=e.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(t,e){return null}},{key:"getConfig",value:function(){var t={axes:this.axes,normalize:this.normalize},e=(0,r.Z)((0,a.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(y);C.className="Dot",l.m7h.registerClass(C)},14977:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(87884),l=n(55658),h=n(69804),f=n(81111),d=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).supportsMasking=!0,a.stddev=t.stddev,a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this),e={stddev:this.stddev};return Object.assign(e,t),e}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){n.invokeCallHook(t,e);var r=(0,f.nQ)(t);return l.KC((function(){return(0,c.IHx)(l.nG(r.shape,0,n.stddev),r)}),(function(){return r}),e.training||!1)}))}}]),n}(h.mh);d.className="GaussianNoise",c.m7h.registerClass(d);var p=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).supportsMasking=!0,a.rate=t.rate,a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this),e={rate:this.rate};return Object.assign(e,t),e}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){n.invokeCallHook(t,e);var r=(0,f.nQ)(t);if(n.rate>0&&n.rate<1){return l.KC((function(){var t=Math.sqrt(n.rate/(1-n.rate));return(0,c.dC7)(r,l.nG(r.shape,1,t))}),(function(){return r}),e.training||!1)}return r}))}}]),n}(h.mh);p.className="GaussianDropout",c.m7h.registerClass(p);var v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).supportsMasking=!0,a.rate=t.rate,a.noiseShape=t.noiseShape,a}return(0,a.Z)(n,[{key:"_getNoiseShape",value:function(t){return this.noiseShape||(0,f.nQ)(t).shape}},{key:"computeOutputShape",value:function(t){return t}},{key:"getConfig",value:function(){var t=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this),e={rate:this.rate};return Object.assign(e,t),e}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(t);return l.KC((function(){var e=(0,f.nQ)(t),a=-1.7580993408473766,i=(0,c.brS)((0,c.LGj)(r),n.rate);i=l.pj(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=(0,c.IHx)((0,c.dC7)(e,i),(0,c.dC7)((0,c.IHx)(i,-1),a));return(0,c.IHx)((0,c.dC7)(u,o),s)}),(function(){return(0,f.nQ)(t)}),e.training||!1)}return t}))}}]),n}(h.mh);v.className="AlphaDropout",c.m7h.registerClass(v)},26490:function(t,e,n){"use strict";var r=n(29439),a=n(4942),i=n(15671),o=n(43144),s=n(88301),u=n(61120),c=n(60136),l=n(29388),h=n(37762),f=n(87884),d=n(98625),p=n(69804),v=n(59593),g=n(85149),m=n(67085),y=n(17319),b=n(23294),w=n(81111);function x(t,e,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===t.rank)i=f.Dxk(t,e,n,r,a,o);else if(3===t.rank)i=f.JY5(t,e,n,r,a,o);else{if(4!==t.rank)throw new v.nj("batchNormalization is not implemented for array of rank ".concat(t.rank," ")+"yet");i=f.p3b(t,e,n,r,a,o)}return i}function k(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return f.D5U.arraysEqual(r.slice().sort(),b.w6(0,t.rank-1))?function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,f.lub)((function(){var i=f.Gi7(t,r),o=i.mean,s=i.variance;return[x(t,o,s,n,e,a),o,s]}))}(t,e,n,r,a):function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return(0,f.lub)((function(){var i,o=f.Gi7(t,r),s=o.mean,u=o.variance,c=[],l=(0,h.Z)(b.w6(0,t.rank));try{for(l.s();!(i=l.n()).done;){var d=i.value;-1!==r.indexOf(d)?c.push(1):c.push(t.shape[d])}}catch(y){l.e(y)}finally{l.f()}var p=(0,f.XLQ)(s,c),v=(0,f.XLQ)(u,c),g=null==e?null:(0,f.XLQ)(e,c),m=null==n?null:(0,f.XLQ)(n,c);return[x(t,p,v,m,g,a),s,u]}))}(t,e,n,r,a)}var I=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;return(0,i.Z)(this,n),null==t&&(t={}),(r=e.call(this,t)).supportsMasking=!0,r.axis=null==t.axis?-1:t.axis,r.momentum=null==t.momentum?.99:t.momentum,r.epsilon=null==t.epsilon?.001:t.epsilon,r.center=null==t.center||t.center,r.scale=null==t.scale||t.scale,r.betaInitializer=(0,g.L5)(t.betaInitializer||"zeros"),r.gammaInitializer=(0,g.L5)(t.gammaInitializer||"ones"),r.movingMeanInitializer=(0,g.L5)(t.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=(0,g.L5)(t.movingVarianceInitializer||"ones"),r.betaConstraint=(0,d.Ad)(t.betaConstraint),r.gammaConstraint=(0,d.Ad)(t.gammaConstraint),r.betaRegularizer=(0,m.EC)(t.betaRegularizer),r.gammaRegularizer=(0,m.EC)(t.gammaRegularizer),r}return(0,o.Z)(n,[{key:"build",value:function(t){t=(0,w.Wf)(t);var e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new v.nu("Axis ".concat(e," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(t),"."));this.inputSpec=[new p.Zg({ndim:t.length,axes:(0,a.Z)({},e,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,f.lub)((function(){var a=null!=e.training&&e.training,i=(0,w.nQ)(t),o=i.shape,s=o.length,u=b.w6(0,s),c=n.axis>=0?n.axis:n.axis+s;u.splice(c,1);var l=y.JE(1,s);l[c]=o[c];var h=u.slice();h.sort();var d=!f.D5U.arraysEqual(h,b.w6(0,s).slice(0,s-1));if(!a)return function(){if(d){var t=(0,f.XLQ)(n.movingMean.read(),l),e=(0,f.XLQ)(n.movingVariance.read(),l),r=n.center?(0,f.XLQ)(n.beta.read(),l):null,a=n.scale?(0,f.XLQ)(n.gamma.read(),l):null;return x(i,t,e,r,a,n.epsilon)}return x(i,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=k(i,n.gamma.read(),n.beta.read(),u,n.epsilon),v=(0,r.Z)(p,3),g=v[0],m=v[1],I=v[2],S=function(t,e,n){f.lub((function(){var r=1-n,a=t.read(),i=f.dC7(f.luU(a,e),r);t.write(f.luU(a,i))}))};return S(n.movingMean,m,n.momentum),S(n.movingVariance,I,n.momentum),g}))}},{key:"getConfig",value:function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,g.Cx)(this.betaInitializer),gammaInitializer:(0,g.Cx)(this.gammaInitializer),movingMeanInitializer:(0,g.Cx)(this.movingMeanInitializer),movingVarianceInitializer:(0,g.Cx)(this.movingVarianceInitializer),betaRegularizer:(0,m.SG)(this.betaRegularizer),gammaRegularizer:(0,m.SG)(this.gammaRegularizer),betaConstraint:(0,d.xF)(this.betaConstraint),gammaConstraint:(0,d.xF)(this.gammaConstraint)},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(p.mh);I.className="BatchNormalization",f.m7h.registerClass(I);var S=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,i.Z)(this,n),null==t&&(t={}),(r=e.call(this,t)).axis=null==t.axis?-1:t.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,o=(0,h.Z)(r.axis);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(!Number.isInteger(s))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(u){o.e(u)}finally{o.f()}}return r.epsilon=null==t.epsilon?.001:t.epsilon,r.center=null==t.center||t.center,r.scale=null==t.scale||t.scale,r.betaInitializer=(0,g.L5)(t.betaInitializer||"zeros"),r.gammaInitializer=(0,g.L5)(t.gammaInitializer||"ones"),r.betaRegularizer=(0,m.EC)(t.betaRegularizer),r.gammaRegularizer=(0,m.EC)(t.gammaRegularizer),r.supportsMasking=!0,r}return(0,o.Z)(n,[{key:"build",value:function(t){var e=(t=(0,w.Wf)(t)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=e);var r,a=(0,h.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=e)throw new Error("Invalid axis: ".concat(i))}}catch(s){a.e(s)}finally{a.f()}if(this.axis.length!==y.Tw(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(e){return t[e]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(t,e){var n=this,r=(0,w.nQ)(t),a=r.shape,i=a.length;return(0,f.lub)((function(){var t,e=(0,f.Gi7)(r,n.axis,!0),o=e.mean,s=e.variance,u=y.JE(1,i),c=(0,h.Z)(n.axis);try{for(c.s();!(t=c.n()).done;){var l=t.value;u[l]=a[l]}}catch(w){c.e(w)}finally{c.f()}for(var d=function(t){return null!=t&&t.shape.length!==i?f.XLQ(t,u):t},p=n.scale?d(n.gamma.read()):null,v=n.center?d(n.beta.read()):null,g=[],m=[],b=0;b<i;++b)-1!==n.axis.indexOf(b)?(g.push(a[b]),m.push(1)):(g.push(1),m.push(a[b]));return o=f.Gg6(o,g),s=f.Gg6(s,g),null!=p&&(p=f.Gg6(p,m)),null!=v&&(v=f.Gg6(v,m)),x(r,o,s,v,p,n.epsilon)}))}},{key:"getConfig",value:function(){var t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,g.Cx)(this.betaInitializer),gammaInitializer:(0,g.Cx)(this.gammaInitializer),betaRegularizer:(0,m.SG)(this.betaRegularizer),gammaRegularizer:(0,m.SG)(this.gammaRegularizer)},e=(0,s.Z)((0,u.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(p.mh);S.className="LayerNormalization",f.m7h.registerClass(S)},39465:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(87884),l=n(40785),h=n(69804),f=n(59593),d=n(81111);var p=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;if((0,r.Z)(this,n),null==t&&(t={}),(a=e.call(this,t)).dataFormat=null==t.dataFormat?(0,l.rf)():t.dataFormat,null==t.padding)a.padding=[[1,1],[1,1]];else if("number"===typeof t.padding)a.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new f.nu("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(t.padding.length," array."));var i,o;if("number"===typeof t.padding[0])i=[t.padding[0],t.padding[0]],o=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new f.nu("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(t.padding[0].length," array."));if(i=t.padding[0],2!==t.padding[1].length)throw new f.nu("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(t.padding[1].length," array."));o=t.padding[1]}a.padding=[i,o]}return a.inputSpec=[new h.Zg({ndim:4})],a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){var e,n;return t=(0,d.Wf)(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){return e=(0,d.nQ)(t),r=n.padding,a=n.dataFormat,(0,c.lub)((function(){if(4!==e.rank)throw new f.nu("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new f.nu("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a=(0,l.rf)()),"channelsLast"!==a&&"channelsFirst"!==a)throw new f.nu("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var t;return t="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],c.vku(e,t)}));var e,r,a}))}},{key:"getConfig",value:function(){var t={padding:this.padding,dataFormat:this.dataFormat},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(h.mh);p.className="ZeroPadding2D",c.m7h.registerClass(p)},90241:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(87884),l=n(40785),h=n(55658),f=n(36446),d=n(69804),p=n(59593),v=n(14913),g=n(17319),m=n(81111),y=n(16400);function b(t,e,n,r,a,i){return(0,c.lub)((function(){var o;(0,f.cj)(a),(0,f.Lp)(i),(0,f.zb)(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a=(0,l.rf)()),null==i&&(i="max"),t=(0,y.aP)(t,a);var s="same"===r?"same":"valid";return o="max"===i?c._sB(t,e,n,s):c.wS1(t,e,n,s),"channelsFirst"===a&&(o=c.p4s(o,[0,3,1,2])),o}))}function w(t,e,n,r,a,i){return(0,c.lub)((function(){var o;(0,f.cj)(a),(0,f.Lp)(i),(0,f.zb)(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a=(0,l.rf)()),null==i&&(i="max"),t=(0,y.fN)(t,a);var s="same"===r?"same":"valid";return o="max"===i?c.YQQ(t,e,n,s):c.uR5(t,e,n,s),"channelsFirst"===a&&(o=c.p4s(o,[0,4,1,2,3])),o}))}var x=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;if((0,r.Z)(this,n),null==t.poolSize&&(t.poolSize=2),a=e.call(this,t),"number"===typeof t.poolSize)a.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!==typeof t.poolSize[0])throw new p.nu("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(t.poolSize)));a.poolSize=t.poolSize}if((0,g.iQ)(a.poolSize,"poolSize"),null==t.strides)a.strides=a.poolSize;else if("number"===typeof t.strides)a.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!==typeof t.strides[0])throw new p.nu("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(t.strides)));a.strides=t.strides}return(0,g.iQ)(a.strides,"strides"),a.padding=null==t.padding?"valid":t.padding,(0,f.zb)(a.padding),a.inputSpec=[new d.Zg({ndim:3})],a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){t=(0,m.Wf)(t);var e=(0,v.kt)(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){n.invokeCallHook(t,e),t=h.dt((0,m.nQ)(t),2);var r=n.poolingFunction((0,m.nQ)(t),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return c.L9e(r,[2])}))}},{key:"getConfig",value:function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh),k=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t)}return(0,a.Z)(n,[{key:"poolingFunction",value:function(t,e,n,r,a){return(0,f.cj)(a),(0,f.zb)(r),b(t,e,n,r,a,"max")}}]),n}(x);k.className="MaxPooling1D",c.m7h.registerClass(k);var I=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t)}return(0,a.Z)(n,[{key:"poolingFunction",value:function(t,e,n,r,a){return(0,f.cj)(a),(0,f.zb)(r),b(t,e,n,r,a,"avg")}}]),n}(x);I.className="AveragePooling1D",c.m7h.registerClass(I);var S=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;if((0,r.Z)(this,n),null==t.poolSize&&(t.poolSize=[2,2]),(a=e.call(this,t)).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)a.strides=a.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new p.nu("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(t.strides.length,"."));a.strides=t.strides}else a.strides=[t.strides,t.strides];return(0,g.iQ)(a.poolSize,"poolSize"),(0,g.iQ)(a.strides,"strides"),a.padding=null==t.padding?"valid":t.padding,a.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,f.cj)(a.dataFormat),(0,f.zb)(a.padding),a.inputSpec=[new d.Zg({ndim:4})],a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){t=(0,m.Wf)(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=(0,v.kt)(e,this.poolSize[0],this.padding,this.strides[0]),n=(0,v.kt)(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){return n.invokeCallHook(t,e),n.poolingFunction((0,m.nQ)(t),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh),_=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t)}return(0,a.Z)(n,[{key:"poolingFunction",value:function(t,e,n,r,a){return(0,f.cj)(a),(0,f.zb)(r),b(t,e,n,r,a,"max")}}]),n}(S);_.className="MaxPooling2D",c.m7h.registerClass(_);var C=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t)}return(0,a.Z)(n,[{key:"poolingFunction",value:function(t,e,n,r,a){return(0,f.cj)(a),(0,f.zb)(r),b(t,e,n,r,a,"avg")}}]),n}(S);C.className="AveragePooling2D",c.m7h.registerClass(C);var E=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;if((0,r.Z)(this,n),null==t.poolSize&&(t.poolSize=[2,2,2]),(a=e.call(this,t)).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)a.strides=a.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new p.nu("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(t.strides.length,"."));a.strides=t.strides}else a.strides=[t.strides,t.strides,t.strides];return(0,g.iQ)(a.poolSize,"poolSize"),(0,g.iQ)(a.strides,"strides"),a.padding=null==t.padding?"valid":t.padding,a.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,f.cj)(a.dataFormat),(0,f.zb)(a.padding),a.inputSpec=[new d.Zg({ndim:5})],a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){t=(0,m.Wf)(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=(0,v.kt)(e,this.poolSize[0],this.padding,this.strides[0]),n=(0,v.kt)(n,this.poolSize[1],this.padding,this.strides[1]),r=(0,v.kt)(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){return n.invokeCallHook(t,e),n.poolingFunction((0,m.nQ)(t),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh),A=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t)}return(0,a.Z)(n,[{key:"poolingFunction",value:function(t,e,n,r,a){return(0,f.cj)(a),(0,f.zb)(r),w(t,e,n,r,a,"max")}}]),n}(E);A.className="MaxPooling3D",c.m7h.registerClass(A);var T=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t)}return(0,a.Z)(n,[{key:"poolingFunction",value:function(t,e,n,r,a){return(0,f.cj)(a),(0,f.zb)(r),w(t,e,n,r,a,"avg")}}]),n}(E);T.className="AveragePooling3D",c.m7h.registerClass(T);var N=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).inputSpec=[new d.Zg({ndim:3})],a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){return[t[0],t[2]]}},{key:"call",value:function(t,e){throw new p.nj}}]),n}(d.mh),D=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t||{})}return(0,a.Z)(n,[{key:"call",value:function(t,e){return(0,c.lub)((function(){var e=(0,m.nQ)(t);return c.J69(e,1)}))}}]),n}(N);D.className="GlobalAveragePooling1D",c.m7h.registerClass(D);var R=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t||{})}return(0,a.Z)(n,[{key:"call",value:function(t,e){return(0,c.lub)((function(){var e=(0,m.nQ)(t);return c.Fp7(e,1)}))}}]),n}(N);R.className="GlobalMaxPooling1D",c.m7h.registerClass(R);var Z=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,f.cj)(a.dataFormat),a.inputSpec=[new d.Zg({ndim:4})],a}return(0,a.Z)(n,[{key:"computeOutputShape",value:function(t){return"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}},{key:"call",value:function(t,e){throw new p.nj}},{key:"getConfig",value:function(){var t={dataFormat:this.dataFormat},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}]),n}(d.mh),M=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){var e=(0,m.nQ)(t);return"channelsLast"===n.dataFormat?c.J69(e,[1,2]):c.J69(e,[2,3])}))}}]),n}(Z);M.className="GlobalAveragePooling2D",c.m7h.registerClass(M);var F=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){var e=(0,m.nQ)(t);return"channelsLast"===n.dataFormat?c.Fp7(e,[1,2]):c.Fp7(e,[2,3])}))}}]),n}(Z);F.className="GlobalMaxPooling2D",c.m7h.registerClass(F)},70904:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(69804),l=n(87884),h=n(81111),f=n(59593),d=n(55658),p=n(40681),v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).numTokens=t.numTokens,t.outputMode?a.outputMode=t.outputMode:a.outputMode="multiHot",a}return(0,a.Z)(n,[{key:"getConfig",value:function(){var t={numTokens:this.numTokens,outputMode:this.outputMode},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}},{key:"computeOutputShape",value:function(t){return null==(t=(0,h.Wf)(t))?[this.numTokens]:"oneHot"===this.outputMode&&1!==t[t.length-1]?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){var r;if("int32"!==(t=(0,h.nQ)(t)).dtype&&(t=d.pj(t,"int32")),"undefined"!==typeof e.countWeights){if("count"!==n.outputMode)throw new f.nu("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(e.countWeights));r=(0,h.nQ)(e.countWeights)}var a=(0,l.Fp7)(t),i=(0,l.VV$)(t),o=(0,l.pjt)(n.numTokens,a).bufferSync().get(0),s=(0,l.brS)(i,0).bufferSync().get(0);if(!o||!s)throw new f.nu("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return p.n(t,n.outputMode,n.numTokens,r)}))}}]),n}(c.mh);v.className="CategoryEncoding",l.m7h.registerClass(v)},25737:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(87884),l=n(81111),h=n(69804),f=n(55658),d=c.BHj.resizeBilinear,p=c.BHj.cropAndResize,v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).height=t.height,a.width=t.width,a}return(0,a.Z)(n,[{key:"centerCrop",value:function(t,e,n,r,a,i,o,s){return(0,c.lub)((function(){var u,h=!1,d=[e/i,n/o,(r+e)/i,(a+n)/o],v=[];3===t.rank?(h=!0,u=(0,c.knu)([t])):u=t;for(var g=0;g<u.shape[0];g++)v.push(d);var m=(0,c.XeE)(v,[v.length,4]),y=(0,c.w6H)(0,v.length,1,"int32"),b=p(u,m,y,[r,a],"nearest");return h?f.pj((0,l.nQ)((0,c.HHK)(b)),s):f.pj(b,s)}))}},{key:"upsize",value:function(t,e,n,r){return(0,c.lub)((function(){var a=d(t,[e,n]);return f.pj(a,r)}))}},{key:"call",value:function(t,e){var n=this;return(0,c.lub)((function(){var e=(0,l.nQ)(t),r=e.dtype,a=e.shape,i=a[a.length-3],o=a[a.length-2],s=0;i!==n.height&&(s=Math.floor((i-n.height)/2));var u=0;return o!==n.width&&0===(u=Math.floor((o-n.width)/2))&&(u=1),s>=0&&u>=0?n.centerCrop(e,s,u,n.height,n.width,i,o,r):n.upsize(t,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var t={height:this.height,width:this.width},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}},{key:"computeOutputShape",value:function(t){var e=(t=(0,l.Wf)(t)).length-3,n=t.length-2;return t[e]=this.height,t[n]=this.width,t}}]),n}(h.mh);v.className="CenterCrop",c.m7h.registerClass(v)},50336:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(88301),o=n(61120),s=n(60136),u=n(29388),c=n(69804),l=n(87884),h=n(81111),f=n(55658),d=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t)).scale=t.scale,t.offset?a.offset=t.offset:a.offset=0,a}return(0,a.Z)(n,[{key:"getConfig",value:function(){var t={scale:this.scale,offset:this.offset},e=(0,i.Z)((0,o.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){return"float32"!==(t=(0,h.nQ)(t)).dtype&&(t=f.pj(t,"float32")),(0,l.IHx)((0,l.dC7)(t,n.scale),n.offset)}))}}]),n}(c.mh);d.className="Rescaling",l.m7h.registerClass(d)},10816:function(t,e,n){"use strict";var r=n(93433),a=n(15671),i=n(43144),o=n(88301),s=n(61120),u=n(60136),c=n(29388),l=n(87884),h=n(69804),f=n(59593),d=n(81111),p=new Set(["bilinear","nearest"]),v=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;if((0,a.Z)(this,n),(r=e.call(this,t)).height=t.height,r.width=t.width,t.interpolation){if(!p.has(t.interpolation))throw new f.nu("Invalid interpolation parameter: ".concat(t.interpolation," is not implemented"));r.interpolation=t.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(t.cropToAspectRatio),r}return(0,i.Z)(n,[{key:"computeOutputShape",value:function(t){var e=(t=(0,d.Wf)(t))[2];return[this.height,this.width,e]}},{key:"getConfig",value:function(){var t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){var e=[n.height,n.width];if("bilinear"===n.interpolation)return l.BHj.resizeBilinear(t,e,!n.cropToAspectRatio);if("nearest"===n.interpolation)return l.BHj.resizeNearestNeighbor(t,e,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,r.Z)(p)," are supported"))}))}}]),n}(h.mh);v.className="Resizing",l.m7h.registerClass(v)},40681:function(t,e,n){"use strict";n.d(e,{n:function(){return s}});var r=n(87884),a=n(81111),i=n(59593),o=n(55658);function s(t,e,n,s){var u=(0,a.nQ)(t);if("int32"!==u.dtype&&(u=o.pj(u,"int32")),"int"===e)return u;var c=u.shape;if(0===u.rank&&(u=(0,r.dt4)(u,-1)),"oneHot"===e&&1!==u.shape[u.shape.length-1]&&(u=(0,r.dt4)(u,-1)),u.rank>2)throw new i.nu("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(e," and input shape ").concat(c)+" which would result in output rank ".concat(u.rank,"."));var l,h=["multiHot","oneHot"].includes(e),f=u;if(l="undefined"!==typeof s&&"count"===e?(0,r.ppE)(f,s,n,h):(0,r.ppE)(f,[],n,h),"tfIdf"!==e)return l;if(s)return(0,r.dC7)(l,s);throw new i.nu("When outputMode is 'tfIdf', weights must be provided.")}},95943:function(t,e,n){"use strict";n.d(e,{$p:function(){return A},U7:function(){return M},_0:function(){return B},lx:function(){return C},nd:function(){return E}});var r=n(29439),a=n(93433),i=n(37762),o=n(15671),s=n(43144),u=n(88301),c=n(61120),l=n(60136),h=n(29388),f=n(87884),d=n(32532),p=n(55658),v=n(36446),g=n(98625),m=n(69804),y=n(59593),b=n(85149),w=n(67085),x=n(17319),k=n(23294),I=n(81111),S=n(92247),_=n(58505);function C(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new y.nu("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function a(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=a(e),constants:n=a(n)}}function E(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return f.lub((function(){var u=e.shape.length;if(u<3)throw new y.nu("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(k.w6(2,u));if(e=f.p4s(e,c),null!=i)throw new y.nj("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=f.pju(f.pju(a,"bool"),"float32")).rank===u-1&&(a=f.dt4(a,-1)),a=f.p4s(a,c)),r&&(e=f.GYS(e,0),null!=a&&(a=f.GYS(a,0)));var l,h,d=[],p=n,v=e.shape[0],g=f.HHK(e);null!=a&&(h=f.HHK(a));for(var m,b=function(e){var n=g[e],r=f.lub((function(){return t(n,p)}));if(null==a)l=r[0],p=r[1];else{var i=f.lub((function(){var t=h[e],n=f.luU(f.JpU(t),t);return{output:f.IHx(f.dC7(r[0],t),f.dC7(p[0],n)),newStates:p.map((function(e,a){return f.IHx(f.dC7(r[1][a],t),f.dC7(e,n))}))}}));l=i.output,p=i.newStates}s&&d.push(l)},w=0;w<v;++w)b(w);if(s){m=f.knu(d,1)}return[l,m,p]}))}var A=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r,a;if((0,o.Z)(this,n),r=e.call(this,t),null==t.cell)throw new y.nu("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(t.cell)?new O({cells:t.cell}):t.cell).stateSize)throw new y.nu("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=t.returnSequences&&t.returnSequences,r.returnState=null!=t.returnState&&t.returnState,r.goBackwards=null!=t.goBackwards&&t.goBackwards,r._stateful=null!=t.stateful&&t.stateful,r.unroll=null!=t.unroll&&t.unroll,r.supportsMasking=!0,r.inputSpec=[new m.Zg({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,s.Z)(n,[{key:"getStates",value:function(){if(null==this.states_){var t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return k.w6(0,t).map((function(t){return null}))}return this.states_}},{key:"setStates",value:function(t){this.states_=t}},{key:"computeOutputShape",value:function(t){(0,I.XO)(t)&&(t=t[0]);var e=this.cell.stateSize;Array.isArray(e)||(e=[e]);var n,r=e[0];if(n=this.returnSequences?[t[0],t[1],r]:[t[0],r],this.returnState){var a,o=[],s=(0,i.Z)(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;o.push([t[0],u])}}catch(c){s.e(c)}finally{s.f()}return[n].concat(o)}return n}},{key:"computeMask",value:function(t,e){var n=this;return f.lub((function(){Array.isArray(e)&&(e=e[0]);var t=n.returnSequences?e:null;if(n.returnState){var r=n.states.map((function(t){return null}));return[t].concat(r)}return t}))}},{key:"states",get:function(){if(null==this.states_){for(var t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[],n=0;n<t;++n)e.push(null);return e}return this.states_},set:function(t){this.states_=t}},{key:"build",value:function(t){if(null!=this.numConstants)throw new y.nj("Constants support is not implemented in RNN yet.");(0,I.XO)(t)&&(t=t[0]);var e=this.stateful?t[0]:null,n=t.slice(2);this.inputSpec[0]=new m.Zg({shape:[e,null].concat((0,a.Z)(n))});var r,i=[t[0]].concat(t.slice(2));if(this.cell.build(i),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!f.D5U.arraysEqual(this.stateSpec.map((function(t){return t.shape[t.shape.length-1]})),r))throw new y.nu("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(t){return new m.Zg({shape:[null,t]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,f.lub)((function(){if(!e.stateful)throw new y.j1("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=e.inputSpec[0].shape[0];if(null==r)throw new y.nu("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==e.states_)Array.isArray(e.cell.stateSize)?e.states_=e.cell.stateSize.map((function(t){return f.lls([r,t])})):e.states_=[f.lls([r,e.cell.stateSize])];else if(null==t)f.B90(e.states_),null!=e.keptStates&&(f.B90(e.keptStates),e.keptStates=[]),Array.isArray(e.cell.stateSize)?e.states_=e.cell.stateSize.map((function(t){return f.lls([r,t])})):e.states_[0]=f.lls([r,e.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==e.states_.length)throw new y.nu("Layer ".concat(e.name," expects ").concat(e.states_.length," state(s), ")+"but it received ".concat(t.length," state value(s). Input ")+"received: ".concat(t));!0===n?e.keptStates.push(e.states_.slice()):f.B90(e.states_);for(var a=0;a<e.states_.length;++a){var i=t[a],o=Array.isArray(e.cell.stateSize)?e.cell.stateSize[a]:e.cell.stateSize,s=[r,o];if(!f.D5U.arraysEqual(i.shape,s))throw new y.nu("State ".concat(a," is incompatible with layer ").concat(e.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));e.states_[a]=i}}e.states_=e.states_.map((function(t){return f.CnY(t.clone())}))}))}},{key:"apply",value:function(t,e){var r=null==e?null:e.initialState,a=null==e?null:e.constants;null==e&&(e={});var o=C(t,r,a,this.numConstants);t=o.inputs,r=o.initialState,a=o.constants;var s=[],l=[];if(null!=r){e.initialState=r,s=s.concat(r),this.stateSpec=[];var h,f=(0,i.Z)(r);try{for(f.s();!(h=f.n()).done;){var d=h.value;this.stateSpec.push(new m.Zg({shape:d.shape}))}}catch(b){f.e(b)}finally{f.f()}l=l.concat(this.stateSpec)}if(null!=a&&(e.constants=a,s=s.concat(a),this.numConstants=a.length),s[0]instanceof m.Iy){var p=[t].concat(s),v=this.inputSpec.concat(l),g=this.inputSpec;this.inputSpec=v;var y=(0,u.Z)((0,c.Z)(n.prototype),"apply",this).call(this,p,e);return this.inputSpec=g,y}return(0,u.Z)((0,c.Z)(n.prototype),"apply",this).call(this,t,e)}},{key:"call",value:function(t,e){var n=this;return(0,f.lub)((function(){var r=null==e?null:e.mask,a=null==e?null:e.training,i=null==e?null:e.initialState;t=(0,I.nQ)(t),null==i&&(i=n.stateful?n.states_:n.getInitialState(t));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new y.nu("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=E((function(t,e){var r=n.cell.call([t].concat(e),s);return[r[0],r.slice(1)]}),t,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],h=u[2];n.stateful&&n.resetStates(h,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(h):f}))}},{key:"getInitialState",value:function(t){var e=this;return(0,f.lub)((function(){var n=f.lls(t.shape);return n=f.Smz(n,[1,2]),n=p.dt(n),Array.isArray(e.cell.stateSize)?e.cell.stateSize.map((function(t){return t>1?p.Gg(n,[1,t]):n})):e.cell.stateSize>1?[p.Gg(n,[1,e.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(t){(0,u.Z)((0,c.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}},{key:"getConfig",value:function(){var t=(0,u.Z)((0,c.Z)(n.prototype),"getConfig",this).call(this),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(e.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),e)}}],[{key:"fromConfig",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.cell,a=(0,_.v)(r,n);return new t(Object.assign(e,{cell:a}))}}]),n}(m.mh);A.className="RNN",f.m7h.registerClass(A);var T=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,o.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n)}(m.mh),N=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=t.units,(0,x.iQ)(r.units,"units"),r.activation=(0,d.aI)(null==t.activation?r.DEFAULT_ACTIVATION:t.activation),r.useBias=null==t.useBias||t.useBias,r.kernelInitializer=(0,b.L5)(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=(0,b.L5)(t.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=(0,b.L5)(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=(0,w.EC)(t.kernelRegularizer),r.recurrentRegularizer=(0,w.EC)(t.recurrentRegularizer),r.biasRegularizer=(0,w.EC)(t.biasRegularizer),r.kernelConstraint=(0,g.Ad)(t.kernelConstraint),r.recurrentConstraint=(0,g.Ad)(t.recurrentConstraint),r.biasConstraint=(0,g.Ad)(t.biasConstraint),r.dropout=k.VV([1,k.Fp([0,null==t.dropout?0:t.dropout])]),r.recurrentDropout=k.VV([1,k.Fp([0,null==t.recurrentDropout?0:t.recurrentDropout])]),r.dropoutFunc=t.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,s.Z)(n,[{key:"build",value:function(t){t=(0,I.Wf)(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,f.lub)((function(){if(2!==t.length)throw new y.nu("SimpleRNNCell expects 2 input Tensors, got ".concat(t.length,"."));var r=t[1];t=t[0];var a,i=null!=e.training&&e.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=B({ones:function(){return f.JpU(t)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=B({ones:function(){return f.JpU(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=null!=o?p.AK(f.dC7(t,o),n.kernel.read()):p.AK(t,n.kernel.read()),null!=n.bias&&(a=p.a2(a,n.bias.read())),null!=s&&(r=f.dC7(r,s));var u=f.IHx(a,p.AK(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var t=(0,u.Z)((0,c.Z)(n.prototype),"getConfig",this).call(this),e={units:this.units,activation:(0,d.GD)(this.activation),useBias:this.useBias,kernelInitializer:(0,b.Cx)(this.kernelInitializer),recurrentInitializer:(0,b.Cx)(this.recurrentInitializer),biasInitializer:(0,b.Cx)(this.biasInitializer),kernelRegularizer:(0,w.SG)(this.kernelRegularizer),recurrentRegularizer:(0,w.SG)(this.recurrentRegularizer),biasRegularizer:(0,w.SG)(this.biasRegularizer),activityRegularizer:(0,w.SG)(this.activityRegularizer),kernelConstraint:(0,g.xF)(this.kernelConstraint),recurrentConstraint:(0,g.xF)(this.recurrentConstraint),biasConstraint:(0,g.xF)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),e)}}]),n}(T);N.className="SimpleRNNCell",f.m7h.registerClass(N);var D=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){return(0,o.Z)(this,n),t.cell=new N(t),e.call(this,t)}return(0,s.Z)(n,[{key:"call",value:function(t,e){var r=this;return(0,f.lub)((function(){null!=r.cell.dropoutMask&&(f.B90(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(f.B90(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==e?null:e.mask,i=null==e?null:e.training,o=null==e?null:e.initialState;return(0,u.Z)((0,c.Z)(n.prototype),"call",r).call(r,t,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(t,e){return new t(e)}}]),n}(A);D.className="SimpleRNN",f.m7h.registerClass(D);var R=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;if((0,o.Z)(this,n),(r=e.call(this,t)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new y.nu("GRUCell does not support reset_after parameter set to true.");return r.units=t.units,(0,x.iQ)(r.units,"units"),r.activation=(0,d.aI)(void 0===t.activation?r.DEFAULT_ACTIVATION:t.activation),r.recurrentActivation=(0,d.aI)(void 0===t.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),r.useBias=null==t.useBias||t.useBias,r.kernelInitializer=(0,b.L5)(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=(0,b.L5)(t.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=(0,b.L5)(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=(0,w.EC)(t.kernelRegularizer),r.recurrentRegularizer=(0,w.EC)(t.recurrentRegularizer),r.biasRegularizer=(0,w.EC)(t.biasRegularizer),r.kernelConstraint=(0,g.Ad)(t.kernelConstraint),r.recurrentConstraint=(0,g.Ad)(t.recurrentConstraint),r.biasConstraint=(0,g.Ad)(t.biasConstraint),r.dropout=k.VV([1,k.Fp([0,null==t.dropout?0:t.dropout])]),r.recurrentDropout=k.VV([1,k.Fp([0,null==t.recurrentDropout?0:t.recurrentDropout])]),r.dropoutFunc=t.dropoutFunc,r.implementation=t.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,s.Z)(n,[{key:"build",value:function(t){var e=(t=(0,I.Wf)(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,f.lub)((function(){if(2!==t.length)throw new y.nu("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(t.length,"."));var a=null!=e.training&&e.training,i=t[1];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=B({ones:function(){return f.JpU(t)},rate:n.dropout,training:a,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=B({ones:function(){return f.JpU(i)},rate:n.recurrentDropout,training:a,count:3,dropoutFunc:n.dropoutFunc}));var o,s,u,c=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(t=f.dC7(t,c[0]));var h=p.AK(t,n.kernel.read());n.useBias&&(h=p.a2(h,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(i=f.dC7(i,l[0]));var d=n.recurrentKernel.read(),v=f.Vl2(d,[2*n.units,n.units],d.rank-1),g=(0,r.Z)(v,2),m=g[0],b=g[1],w=p.AK(i,m),x=f.Vl2(h,3,h.rank-1),k=(0,r.Z)(x,3),I=k[0],S=k[1],_=k[2],C=f.Vl2(w,2,w.rank-1),E=(0,r.Z)(C,2),A=E[0],T=E[1];o=n.recurrentActivation.apply(f.IHx(I,A)),s=n.recurrentActivation.apply(f.IHx(S,T));var N=p.AK(f.dC7(s,i),b);u=n.activation.apply(f.IHx(_,N));var D=f.IHx(f.dC7(o,i),f.dC7(f.IHx(1,f.W76(o)),u));return[D,D]}))}},{key:"getConfig",value:function(){var t=(0,u.Z)((0,c.Z)(n.prototype),"getConfig",this).call(this),e={units:this.units,activation:(0,d.GD)(this.activation),recurrentActivation:(0,d.GD)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,b.Cx)(this.kernelInitializer),recurrentInitializer:(0,b.Cx)(this.recurrentInitializer),biasInitializer:(0,b.Cx)(this.biasInitializer),kernelRegularizer:(0,w.SG)(this.kernelRegularizer),recurrentRegularizer:(0,w.SG)(this.recurrentRegularizer),biasRegularizer:(0,w.SG)(this.biasRegularizer),activityRegularizer:(0,w.SG)(this.activityRegularizer),kernelConstraint:(0,g.xF)(this.kernelConstraint),recurrentConstraint:(0,g.xF)(this.recurrentConstraint),biasConstraint:(0,g.xF)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),e)}}]),n}(T);R.className="GRUCell",f.m7h.registerClass(R);var Z=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){return(0,o.Z)(this,n),0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new R(t),e.call(this,t)}return(0,s.Z)(n,[{key:"call",value:function(t,e){var r=this;return(0,f.lub)((function(){null!=r.cell.dropoutMask&&(f.B90(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(f.B90(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==e?null:e.mask,i=null==e?null:e.training,o=null==e?null:e.initialState;return(0,u.Z)((0,c.Z)(n.prototype),"call",r).call(r,t,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}]),n}(A);Z.className="GRU",f.m7h.registerClass(Z);var M=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=t.units,(0,x.iQ)(r.units,"units"),r.activation=(0,d.aI)(void 0===t.activation?r.DEFAULT_ACTIVATION:t.activation),r.recurrentActivation=(0,d.aI)(void 0===t.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),r.useBias=null==t.useBias||t.useBias,r.kernelInitializer=(0,b.L5)(t.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=(0,b.L5)(t.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=(0,b.L5)(t.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=t.unitForgetBias,r.kernelRegularizer=(0,w.EC)(t.kernelRegularizer),r.recurrentRegularizer=(0,w.EC)(t.recurrentRegularizer),r.biasRegularizer=(0,w.EC)(t.biasRegularizer),r.kernelConstraint=(0,g.Ad)(t.kernelConstraint),r.recurrentConstraint=(0,g.Ad)(t.recurrentConstraint),r.biasConstraint=(0,g.Ad)(t.biasConstraint),r.dropout=k.VV([1,k.Fp([0,null==t.dropout?0:t.dropout])]),r.recurrentDropout=k.VV([1,k.Fp([0,null==t.recurrentDropout?0:t.recurrentDropout])]),r.dropoutFunc=t.dropoutFunc,r.implementation=t.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,s.Z)(n,[{key:"build",value:function(t){var e,n,r=(t=(0,I.Wf)(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(e=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(){return(0,o.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"apply",value:function(t,e){var n=a.apply([i]),r=(new b.M6).apply([i]),o=a.apply([2*i]);return p.GZ(p.GZ(n,r),o)}}]),n}(b.m7),e.className="CustomInit",e)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(t,e){var n=this;return(0,f.lub)((function(){var a=null!=e.training&&e.training;if(3!==t.length)throw new y.nu("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(t.length,"."));var i=t[1],o=t[2];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=B({ones:function(){return f.JpU(t)},rate:n.dropout,training:a,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=B({ones:function(){return f.JpU(i)},rate:n.recurrentDropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var s,u,c,l,h=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(t=f.dC7(t,h[0]));var v=p.AK(t,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(i=f.dC7(i,d[0])),v=f.IHx(v,p.AK(i,n.recurrentKernel.read())),n.useBias&&(v=p.a2(v,n.bias.read()));var g=f.Vl2(v,4,v.rank-1),m=(0,r.Z)(g,4),b=m[0],w=m[1],x=m[2],k=m[3];s=n.recurrentActivation.apply(b),u=n.recurrentActivation.apply(w),c=f.IHx(f.dC7(u,o),f.dC7(s,n.activation.apply(x))),l=n.recurrentActivation.apply(k);var I=f.dC7(l,n.activation.apply(c));return[I,I,c]}))}},{key:"getConfig",value:function(){var t=(0,u.Z)((0,c.Z)(n.prototype),"getConfig",this).call(this),e={units:this.units,activation:(0,d.GD)(this.activation),recurrentActivation:(0,d.GD)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,b.Cx)(this.kernelInitializer),recurrentInitializer:(0,b.Cx)(this.recurrentInitializer),biasInitializer:(0,b.Cx)(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:(0,w.SG)(this.kernelRegularizer),recurrentRegularizer:(0,w.SG)(this.recurrentRegularizer),biasRegularizer:(0,w.SG)(this.biasRegularizer),activityRegularizer:(0,w.SG)(this.activityRegularizer),kernelConstraint:(0,g.xF)(this.kernelConstraint),recurrentConstraint:(0,g.xF)(this.recurrentConstraint),biasConstraint:(0,g.xF)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),e)}}]),n}(T);M.className="LSTMCell",f.m7h.registerClass(M);var F=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){return(0,o.Z)(this,n),0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new M(t),e.call(this,t)}return(0,s.Z)(n,[{key:"call",value:function(t,e){var r=this;return(0,f.lub)((function(){null!=r.cell.dropoutMask&&(f.B90(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(f.B90(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==e?null:e.mask,i=null==e?null:e.training,o=null==e?null:e.initialState;return(0,u.Z)((0,c.Z)(n.prototype),"call",r).call(r,t,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}]),n}(A);F.className="LSTM",f.m7h.registerClass(F);var O=function(t){(0,l.Z)(n,t);var e=(0,h.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).cells=t.cells,r}return(0,s.Z)(n,[{key:"stateSize",get:function(){var t,e=[],n=(0,i.Z)(this.cells.slice().reverse());try{for(n.s();!(t=n.n()).done;){var r=t.value;Array.isArray(r.stateSize)?e.push.apply(e,(0,a.Z)(r.stateSize)):e.push(r.stateSize)}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"call",value:function(t,e){var n=this;return(0,f.lub)((function(){var r,o=t.slice(1),s=[],u=(0,i.Z)(n.cells.slice().reverse());try{for(u.s();!(r=u.n()).done;){var c=r.value;Array.isArray(c.stateSize)?s.push(o.splice(0,c.stateSize.length)):s.push(o.splice(0,1))}}catch(y){u.e(y)}finally{u.f()}s.reverse();for(var l,h=[],f=0;f<n.cells.length;++f){var d=n.cells[f];o=s[f],l=0===f?[t[0]].concat(o):[l[0]].concat(o),l=d.call(l,e),h.push(l.slice(1))}o=[];var p,v=(0,i.Z)(h.slice().reverse());try{for(v.s();!(p=v.n()).done;){var g,m=p.value;(g=o).push.apply(g,(0,a.Z)(m))}}catch(y){v.e(y)}finally{v.f()}return[l[0]].concat(o)}))}},{key:"build",value:function(t){var e;(0,I.XO)(t)&&(t=t[0]),this.cells.forEach((function(n,r){(0,v.f4)("RNNCell_".concat(r),(function(){n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]}))})),this.built=!0}},{key:"getConfig",value:function(){var t=(0,u.Z)((0,c.Z)(n.prototype),"getConfig",this).call(this),e={cells:this.cells.map((function(t){return{className:t.getClassName(),config:t.getConfig()}}))};return Object.assign(Object.assign({},t),e)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var t,e=[],n=(0,i.Z)(this.cells);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push.apply(e,(0,a.Z)(r.trainableWeights))}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"nonTrainableWeights",get:function(){var t,e=[],n=(0,i.Z)(this.cells);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push.apply(e,(0,a.Z)(r.nonTrainableWeights))}}catch(l){n.e(l)}finally{n.f()}if(!this.trainable){var o,s=[],u=(0,i.Z)(this.cells);try{for(u.s();!(o=u.n()).done;){var c=o.value;s.push.apply(s,(0,a.Z)(c.trainableWeights))}}catch(l){u.e(l)}finally{u.f()}return s.concat(e)}return e}},{key:"getWeights",value:function(){var t,e=[],n=(0,i.Z)(this.cells);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push.apply(e,(0,a.Z)(r.weights))}}catch(o){n.e(o)}finally{n.f()}return(0,S.FQ)(e)}},{key:"setWeights",value:function(t){var e,n=[],r=(0,i.Z)(this.cells);try{for(r.s();!(e=r.n()).done;)for(var a=e.value,o=a.weights.length,s=t.splice(o),u=0;u<a.weights.length;++u)n.push([a.weights[u],s[u]])}catch(c){r.e(c)}finally{r.f()}(0,S.zb)(n)}}],[{key:"fromConfig",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=(0,i.Z)(e.cells);try{for(o.s();!(n=o.n()).done;){var s=n.value;a.push((0,_.v)(s,r))}}catch(u){o.e(u)}finally{o.f()}return new t({cells:a})}}]),n}(T);function B(t){var e=t.ones,n=t.rate,r=t.training,a=void 0!==r&&r,i=t.count,o=void 0===i?1:i,s=t.dropoutFunc,u=function(){return null!=s?s(e(),n):p.rv(e(),n)},c=function(){return p.KC(u,e,a)};return!o||o<=1?f.CnY(c().clone()):Array(o).fill(void 0).map(c).map((function(t){return f.CnY(t.clone())}))}O.className="StackedRNNCells",f.m7h.registerClass(O)},58505:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=n(87884),a=n(17319);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.tU)(t,r.m7h.SerializationMap.getMap().classNameMap,e,"layer",n)}},29804:function(t,e,n){"use strict";var r=n(93433),a=n(15671),i=n(43144),o=n(88301),s=n(61120),u=n(60136),c=n(29388),l=n(87884),h=n(55658),f=n(36446),d=n(69804),p=n(59593),v=n(18452),g=n(17319),m=n(81111),y=n(95943),b=n(58505),w=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).layer=t.layer,r}return(0,i.Z)(n,[{key:"build",value:function(t){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(t){null!=this.layer&&(this.layer.trainable=t)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(t){this.layer.setWeights(t)}},{key:"getConfig",value:function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}},{key:"setFastWeightInitDuringBuild",value:function(t){(0,o.Z)((0,s.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}}],[{key:"fromConfig",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.layer,a=(0,b.v)(r,n);delete e.layer;var i={layer:a};return Object.assign(i,e),new t(i)}}]),n}(d.mh),x=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).supportsMasking=!0,r}return(0,i.Z)(n,[{key:"build",value:function(t){if((t=(0,m.Wf)(t)).length<3)throw new p.nu("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(t)));this.inputSpec=[{shape:t}];var e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),(0,o.Z)((0,s.Z)(n.prototype),"build",this).call(this,t)}},{key:"computeOutputShape",value:function(t){var e=[(t=(0,m.Wf)(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e),r=t[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){t=(0,m.nQ)(t);return(0,y.nd)((function(t,r){return[(0,m.nQ)(n.layer.call(t,e)),[]]}),t,[],!1,null,null,!1,!0)[1]}))}}]),n}(w);x.className="TimeDistributed",l.m7h.registerClass(x);var k=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var r;(0,a.Z)(this,n),r=e.call(this,t);var i=t.layer.getConfig(),o={};o.className=t.layer.getClassName(),o.config=i,r.forwardLayer=(0,b.v)(o),i.goBackwards=!0!==i.goBackwards;var s,u={};if(u.className=t.layer.getClassName(),u.config=i,r.backwardLayer=(0,b.v)(u),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===t.mergeMode?"concat":t.mergeMode,s=r.mergeMode,g.xn(v.eY,"BidirectionalMergeMode",s),t.weights)throw new p.nj("weights support is not implemented for Bidirectional layer yet.");return r._stateful=t.layer.stateful,r.returnSequences=t.layer.returnSequences,r.returnState=t.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=t.layer.inputSpec,r.numConstants=null,r}return(0,i.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(t){var e=t.length,n=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,n)),this.backwardLayer.setWeights(t.slice(n))}},{key:"computeOutputShape",value:function(t){var e,n,r,a=this.forwardLayer.computeOutputShape(t);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),e=a[0]):e=a[0],"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):g.Bq(n)}},{key:"apply",value:function(t,e){var a=null==e?null:e.initialState,i=null==e?null:e.constants;null==e&&(e={});var u=(0,y.lx)(t,a,i,this.numConstants);if(t=u.inputs,a=u.initialState,i=u.constants,Array.isArray(t)&&(a=t.slice(1),t=t[0]),(null==a||0===a.length)&&null==i)return(0,o.Z)((0,s.Z)(n.prototype),"apply",this).call(this,t,e);var c=[],l=[];if(null!=a){var h=a.length;if(h%2>0)throw new p.nu("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e.initialState=a,c.push.apply(c,(0,r.Z)(a));var f=a.map((function(t){return new d.Zg({shape:t.shape})}));this.forwardLayer.stateSpec=f.slice(0,h/2),this.backwardLayer.stateSpec=f.slice(h/2),l.push.apply(l,(0,r.Z)(f))}if(null!=i)throw new p.nj("Support for constants in Bidirectional layers is not implemented yet.");for(var v=c[0]instanceof d.Iy,g=0,m=c;g<m.length;g++){if(m[g]instanceof d.Iy!==v)throw new p.nu("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(v){var b=[t].concat(c),w=this.inputSpec.concat(l),x=this.inputSpec;this.inputSpec=w;var k=(0,o.Z)((0,s.Z)(n.prototype),"apply",this).call(this,b,e);return this.inputSpec=x,k}return(0,o.Z)((0,s.Z)(n.prototype),"apply",this).call(this,t,e)}},{key:"call",value:function(t,e){var n=this;return(0,l.lub)((function(){var r,a,i,o,s=e.initialState;if(null==s)r=n.forwardLayer.call(t,e),a=n.backwardLayer.call(t,e);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(t,Object.assign(e,{initialState:u})),a=n.backwardLayer.call(t,Object.assign(e,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=l.GYS(a,1)),"concat"===n.mergeMode?o=h.mV([r,a]):"sum"===n.mergeMode?o=l.IHx(r,a):"ave"===n.mergeMode?o=l.dC7(.5,l.IHx(r,a)):"mul"===n.mergeMode?o=l.dC7(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(t){var e=this;(0,f.f4)(this.forwardLayer.name,(function(){e.forwardLayer.build(t)})),(0,f.f4)(this.backwardLayer.name,(function(){e.backwardLayer.build(t)})),this.built=!0}},{key:"computeMask",value:function(t,e){var n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(t){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(t){(0,o.Z)((0,s.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}},{key:"getConfig",value:function(){var t={mergeMode:this.mergeMode},e=(0,o.Z)((0,s.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(t,e),t}}],[{key:"fromConfig",value:function(t,e){var n=(0,b.v)(e.layer);if(delete e.layer,null!=e.numConstants)throw new p.nj("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=e;return r.layer=n,new t(r)}}]),n}(w);k.className="Bidirectional",l.m7h.registerClass(k)},38518:function(t,e,n){"use strict";n.d(e,{Z:function(){return o},i:function(){return u}});var r=n(74165),a=n(15861),i=n(87884);function o(t){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,o,s,u,c,l,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:for(s in n=[],a=[],o=[],e)"number"!==typeof(u=e[s])&&(c=u,n.push(c.data()),a.push(s),o.push(c));if(!(n.length>0)){t.next=12;break}return t.next=9,Promise.all(n);case 9:for(l=t.sent,h=0;h<l.length;++h)e[a[h]]=l[h][0];(0,i.B90)(o);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){if(null!=t)for(var e in t){var n=t[e];"number"!==typeof n&&n.dispose()}}},35615:function(t,e,n){"use strict";n.d(e,{Eq:function(){return s},FD:function(){return u},KM:function(){return d},Ls:function(){return g},U2:function(){return y},dr:function(){return m},fO:function(){return p},ke:function(){return c},t3:function(){return l},uq:function(){return f}});var r=n(87884),a=n(40785),i=n(55658),o=n(59593);function s(t,e){return(0,r.lub)((function(){"float32"!==t.dtype&&(t=r.pju(t,"float32"));var n=r.Smz(i.h6(t),e,!0),o=r.hlL(n.shape,(0,a.Ho)()),s=r._b3(r.gWQ(n,o));return r.hiC(t,s)}))}function u(t,e){return(0,r.lub)((function(){return r.J69(i.h6(r.luU(e,t)),-1)}))}function c(t,e){return(0,r.lub)((function(){return r.J69(r.WnP(r.luU(e,t)),-1)}))}function l(t,e){return(0,r.lub)((function(){var n=r.luU(t,e),i=r.iUl(r.WnP(t),(0,a.Ho)(),Number.MAX_VALUE),o=r.WnP(r.hiC(n,i));return r.dC7(100,r.J69(o,-1))}))}function h(t,e){return(0,r.lub)((function(){var n=r.iUl(e,(0,a.Ho)(),Number.MAX_VALUE),o=r.cM7(r.IHx(1,n)),s=r.iUl(t,(0,a.Ho)(),Number.MAX_VALUE),u=r.cM7(r.IHx(1,s));return r.J69(i.h6(r.luU(o,u)),-1)}))}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.lub)((function(){if(n)e=r.XAC(e);else{var i=r.Smz(e,e.shape.length-1,!0);e=r.hiC(e,i)}return e=r.iUl(e,(0,a.Ho)(),1-(0,a.Ho)()),r.W76(r.Smz(r.dC7(r.pju(t,"float32"),r.cM7(e)),e.shape.length-1))}))}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.lub)((function(){var o=r.pju(r.GWj(i.xH(t)),"int32"),s=(e=r.iUl(e,(0,a.Ho)(),1-(0,a.Ho)())).shape;return f(r.XLQ(r.lfX(o,s[s.length-1]),s),e,n)}))}function p(t,e){return(0,r.lub)((function(){var n;return n=r.iUl(e,(0,a.Ho)(),1-(0,a.Ho)()),n=r.cM7(r.hiC(n,r.luU(1,n))),r.J69(function(t,e){if(!r.D5U.arraysEqual(t.shape,e.shape))throw new o.nu("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(t.shape)," and ").concat(JSON.stringify(e.shape)));return(0,r.lub)((function(){var n=r.UYe(e),a=r.W76(r.WnP(e));return r.IHx(r.luU(n,r.dC7(e,t)),r.Krr(r.Qqt(a)))}))}(t,n),-1)}))}function v(t,e){return(0,r.lub)((function(){var n=r.iUl(t,(0,a.Ho)(),1),i=r.iUl(e,(0,a.Ho)(),1);return r.Smz(r.dC7(t,r.cM7(r.hiC(n,i))),-1)}))}function g(t,e){return(0,r.lub)((function(){var n=s(t,-1),a=s(e,-1),i=r.dC7(n,a);return r.W76(r.Smz(i,-1))}))}var m={meanSquaredError:u,meanAbsoluteError:c,meanAbsolutePercentageError:l,meanSquaredLogarithmicError:h,squaredHinge:function(t,e){return(0,r.lub)((function(){var n=r.gWQ(0,r.luU(1,r.dC7(t,e)));return r.J69(i.h6(n),-1)}))},hinge:function(t,e){return(0,r.lub)((function(){var n=r.gWQ(0,r.luU(1,r.dC7(t,e)));return r.J69(n,-1)}))},categoricalHinge:function(t,e){return(0,r.lub)((function(){var n=r.Smz(r.dC7(t,e),-1),a=r.Fp7(r.dC7(r.luU(1,t),e),-1);return r.gWQ(0,r.IHx(1,r.luU(a,n)))}))},logcosh:function(t,e){return(0,r.lub)((function(){var n=Math.log(2),a=r.luU(e,t),i=r.luU(r.IHx(a,r.Wvh(r.dC7(-2,a))),n);return r.J69(i,-1)}))},categoricalCrossentropy:f,sparseCategoricalCrossentropy:d,binaryCrossentropy:p,kullbackLeiblerDivergence:v,poisson:function(t,e){return(0,r.lub)((function(){var n=r.cM7(r.IHx((0,a.Ho)(),e));return r.J69(r.luU(e,r.dC7(t,n)),-1)}))},cosineProximity:g};function y(t){if("string"===typeof t){if(t in m)return m[t];var e="Unknown loss ".concat(t);throw t.toLowerCase().includes("softmaxcrossentropy")&&(e="Unknown loss ".concat(t,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new o.nu(e)}return t}},4613:function(t,e,n){"use strict";n.d(e,{G5:function(){return c},KM:function(){return x},TY:function(){return f},U2:function(){return I},_F:function(){return u},aI:function(){return S},fO:function(){return h},uq:function(){return b}});var r=n(87884),a=n(55658),i=n(59593),o=n(35615),s=n(17319);function u(t,e){return(0,r.lub)((function(){var n=r.dC7(.5,r.JpU(e)),i=a.pj(r.pjt(e,n),t.dtype);return r.J69(r.DgJ(t,i),-1)}))}function c(t,e){return(0,r.lub)((function(){return a.pj(r.DgJ(r.NqF(t,-1),r.NqF(e,-1)),"float32")}))}function l(t,e){return(0,r.lub)((function(){return r.pju(r.Smz(r.HvI(r.DgJ(t,1),r.DgJ(e,1))),"float32")}))}function h(t,e){return(0,o.fO)(t,e)}function f(t,e){return t.rank===e.rank&&(t=r.L9e(t,[t.rank-1])),(e=r.NqF(e,-1)).dtype!==t.dtype&&(e=r.pju(e,t.dtype)),r.pju(r.DgJ(t,e),"float32")}var d=o.FD,p=o.FD,v=o.ke,g=o.ke,m=o.t3,y=o.t3,b=o.uq,w=o.Ls,x=o.KM,k={binaryAccuracy:u,categoricalAccuracy:c,precision:function(t,e){return(0,r.lub)((function(){var n=l(t,e),a=function(t,e){return(0,r.lub)((function(){return r.pju(r.Smz(r.HvI(r.DgJ(t,0),r.DgJ(e,1))),"float32")}))}(t,e),i=r.IHx(n,a);return r.pju(r.arb(r.pjt(i,0),r.hiC(n,i),0),"float32")}))},categoricalCrossentropy:b,sparseCategoricalCrossentropy:x,mse:d,MSE:p,mae:v,MAE:g,mape:m,MAPE:y,cosine:w};function I(t){if("string"===typeof t&&t in k)return k[t];if("string"!==typeof t&&null!=t)return t;throw new i.nu("Unknown metric ".concat(t))}function S(t){if(s.hu(null!==t,"Unknown LossOrMetricFn ".concat(t)),"string"===typeof t)return t;for(var e,n=0,r=Object.keys(o.dr);n<r.length;n++){var a=r[n];if(o.dr[a]===t){e=a;break}}if(void 0!==e)return e;for(var i=0,u=Object.keys(k);i<u.length;i++){var c=u[i];if(k[c]===t){e=c;break}}return void 0!==e?e:t.name}},63292:function(t,e,n){"use strict";var r=n(74165),a=n(37762),i=n(15671),o=n(43144),s=n(88301),u=n(61120),c=n(60136),l=n(29388),h=n(15861),f=n(87884),d=n(70387),p=n(17777),v=n(69804),g=n(2472),m=n(59593),y=n(58505),b=n(17319),w=(n(62141),n(81111));var x=function(t){(0,c.Z)(n,t);var e=(0,l.Z)(n);function n(t){var r;if((0,i.Z)(this,n),t=t||{},(r=e.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=t.name?t.name:(0,d.s)("sequential_"),null!=t.layers){var o,s=(0,a.Z)(t.layers);try{for(s.s();!(o=s.n()).done;){var u=o.value;r.add(u)}}catch(c){s.e(c)}finally{s.f()}}return r}return(0,o.Z)(n,[{key:"checkShape",value:function(t){if(t.inboundNodes[0].outputTensors[0].shape.some((function(t){return t<0})))throw new m.nu("Negative dimension size caused by adding layer "+"".concat(t.name," with input shape [")+"".concat(t.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(t){var e,r=t instanceof n||t instanceof g.QV;if(r){if(1!==(e=t).outputs.length)throw new m.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==e.inputs.length)throw new m.nu("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new m.nu("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=(0,p.I)({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(a)}if(r)this.outputs=e.outputs,this.inputs=e.inputs;else{if(1!==t.inboundNodes.length)throw new m.nu("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(t.name," ")+"which has ".concat(t.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new m.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=(0,v.hA)(this.outputs[0])}this.inboundNodes=[],new v.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:b.JE(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(t){return t.shape})),outputShapes:this.outputs[0].shape})}else{var i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(t,e){return null==this.model&&this.build(),this.model.call(t,e)}},{key:"build",value:function(t){if((0,w.Wf)(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new g.QV({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),(0,s.Z)((0,u.Z)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),(0,s.Z)((0,u.Z)(n.prototype),"summary",this).call(this,t,e,r)}},{key:"setWeights",value:function(t){null==this.model&&this.build(),this.model.setWeights(t)}},{key:"evaluate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new m.LH("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}},{key:"evaluateDataset",value:function(){var t=(0,h.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.built){t.next=2;break}throw new m.LH("The model needs to be compiled before being used.");case 2:return t.abrupt("return",this.model.evaluateDataset(e,n));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"predict",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(t,e)}},{key:"predictOnBatch",value:function(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}},{key:"compile",value:function(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(t){this.model.optimizer=t}},{key:"fit",value:function(){var t=(0,h.Z)((0,r.Z)().mark((function t(e,n){var a,i=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:{},this.built){t.next=3;break}throw new m.LH("The model needs to be compiled before being used.");case 3:return t.abrupt("return",this.model.fit(e,n,a));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var t=(0,h.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.built){t.next=2;break}throw new m.LH("The model needs to be compiled before being used.");case 2:return t.abrupt("return",this.model.fitDataset(e,n));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var t=(0,h.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.trainOnBatch(e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new m.nu("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(t){if(null==this.model)throw new m.nu("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}},{key:"getConfig",value:function(){var t,e=[],n=(0,a.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={};i.className=r.getClassName(),i.config=r.getConfig(),e.push(i)}}catch(o){n.e(o)}finally{n.f()}return{name:this.name,layers:e}}}],[{key:"fromConfig",value:function(t,e){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0].className)throw new m.nu("Legacy serialization format not supported yet.");r=e}else f.D5U.assert(null!=e.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=e.layers,delete e.layers,o=e;var s=new t(o);if(!(s instanceof n))throw new m.nj("Sequential.fromConfig called on non-Sequential input: ".concat(s));var u,c=(0,a.Z)(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=(0,y.v)(l,undefined,i);i&&h.setFastWeightInitDuringBuild(!0),s.add(h)}}catch(d){c.e(d)}finally{c.f()}return s}}]),n}(g.QV);x.className="Sequential",f.m7h.registerClass(x)},19142:function(t,e,n){"use strict";n.d(e,{j:function(){return o}});var r=n(87884),a=n(40785),i=n(59593);function o(t){var e={Adagrad:function(){return r.p_j.adagrad(.01)},Adadelta:function(){return r.p_j.adadelta(1,.95,(0,a.Ho)())},Adam:function(){return r.p_j.adam(.001,.9,.999,(0,a.Ho)())},Adamax:function(){return r.p_j.adamax(.002,.9,.999,(0,a.Ho)(),0)},RMSProp:function(){return r.p_j.rmsprop(.001,.9,0,(0,a.Ho)())},SGD:function(){return r.p_j.sgd(.01)}};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new i.nu("Unknown Optimizer ".concat(t))}},67085:function(t,e,n){"use strict";n.d(e,{EC:function(){return g},SG:function(){return p}});var r=n(43144),a=n(15671),i=n(60136),o=n(29388),s=n(87884),u=n(55658),c=n(17319);function l(t){if(null!=t&&"object"!==typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(t))}var h=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n)}(s.m7h.Serializable),f=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this),l(t),r.l1=null==t||null==t.l1?.01:t.l1,r.l2=null==t||null==t.l2?.01:t.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,r.Z)(n,[{key:"apply",value:function(t){var e=this;return(0,s.lub)((function(){var n=(0,s.lls)([1]);return e.hasL1&&(n=(0,s.IHx)(n,(0,s.Smz)(s.dC7(e.l1,(0,s.WnP)(t))))),e.hasL2&&(n=(0,s.IHx)(n,(0,s.Smz)(s.dC7(e.l2,u.h6(t))))),s.XLQ(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(t,e){return new t({l1:e.l1,l2:e.l2})}}]),n}(h);f.className="L1L2",s.m7h.registerClass(f);var d={l1l2:"L1L2"};function p(t){return(0,c.Kj)(t)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.tU)(t,s.m7h.SerializationMap.getMap().classNameMap,e,"regularizer")}function g(t){return null==t?null:"string"===typeof t?v({className:t in d?d[t]:t,config:{}}):t instanceof h?t:v(t)}},32106:function(t,e,n){"use strict";n.d(e,{WE:function(){return i}});var r=n(37762),a=1048576;function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t||"object"!==typeof t||Object.getPrototypeOf(t)!==Object.prototype||!o(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(t);r.length>a&&console.warn('User-defined metadata of model "'.concat(e,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(a,"."))}}function o(t){if(null===t)return!0;if("object"===typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(var e=0,n=Object.keys(t);e<n.length;e++){var a=n[e];if("string"!==typeof a)return!1;if(!o(t[a]))return!1}return!0}if(Array.isArray(t)){var i,s=(0,r.Z)(t);try{for(s.s();!(i=s.n()).done;){if(!o(i.value))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}return!1}var u=typeof t;return"string"===u||"number"===u||"boolean"===u}},14913:function(t,e,n){"use strict";n.d(e,{$U:function(){return u},AF:function(){return o},kt:function(){return s}});var r=n(59593),a=n(17319),i=n(23294);function o(t,e,n){if("number"===typeof t)return(0,a.JE)(t,e);if(t.length!==e)throw new r.nu("The ".concat(n," argument must be an integer or tuple of ").concat(e," integers.")+" Received: ".concat(t.length," elements."));for(var o=0;o<e;++o){var s=t[o];if(!(0,i.U)(s))throw new r.nu("The ".concat(n," argument must be an integer or tuple of ").concat(e)+" integers. Received: ".concat(JSON.stringify(t)," including a")+" non-integer number ".concat(s))}return t}function s(t,e,n,r){var a;return null==t?t:(a="same"===n?t:t-(e+(e-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function u(t,e,n,a){if(null==t)return null;if("valid"===a)t=t*e+(0,i.Fp)([n-e,0]);else{if("same"!==a)throw new r.nu("Unsupport padding mode: ".concat(a,"."));t*=e}return t}},1258:function(t,e,n){"use strict";n.d(e,{s:function(){return i}});var r=n(15671),a=n(43144),i=function(){function t(e){(0,r.Z)(this,t),this.maxEntries=e||100,this.cache=new Map}return(0,a.Z)(t,[{key:"get",value:function(t){var e;return this.cache.has(t)&&(e=this.cache.get(t),this.cache.delete(t),this.cache.set(t,e)),e}},{key:"put",value:function(t,e){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,e)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(t){if(t<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(t,"."));if(this.maxEntries>t)for(var e=0;e<this.maxEntries-t;e++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=t}}]),t}()},17319:function(t,e,n){"use strict";n.d(e,{Bq:function(){return l},D1:function(){return f},Ds:function(){return _},JE:function(){return s},Kj:function(){return v},L7:function(){return y},Mx:function(){return k},QX:function(){return c},Tw:function(){return b},WT:function(){return C},hu:function(){return u},iQ:function(){return I},nK:function(){return w},tU:function(){return m},xn:function(){return x},zW:function(){return d},zZ:function(){return h}});var r=n(29439),a=n(37762),i=n(87884),o=n(59593);function s(t,e){if(Array.isArray(t)){for(var n=[],r=0;r<e;r++)n=n.concat(t);return n}var a=new Array(e);return a.fill(t),a}function u(t,e){if(!t)throw new o.ps(e)}function c(t,e){var n,r=0,i=(0,a.Z)(t);try{for(i.s();!(n=i.n()).done;){n.value===e&&r++}}catch(o){i.e(o)}finally{i.f()}return r}function l(t){return 1===t.length?t[0]:t}function h(t){return Array.isArray(t)?t:[t]}function f(t){var e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function d(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(function(t,e){return e.toUpperCase()}))}var p={};function v(t){if(null===t||void 0===t)return null;var e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function g(t){if(null!=t&&"object"===typeof t)if(Array.isArray(t))t.forEach((function(t){return g(t)}));else for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e],a=t[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?g(a):t[r]=a.value)}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof t){var s,u=t;if(u in n)s=n[u];else if(u in p)s=p[u];else if(null==(s=e[u]))throw new o.nu("Unknown ".concat(a,": ").concat(t,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return s}var c=t;if(null==c.className||null==c.config)throw new o.nu("".concat(a,": Improper config format: ")+"".concat(JSON.stringify(c),".\n")+"'className' and 'config' must set.");var l,h,f=c.className;if(f in n){var d=(0,r.Z)(n[f],2);l=d[0],h=d[1]}else if(f in p){var v=(0,r.Z)(p.className,2);l=v[0],h=v[1]}else if(f in e){var m=(0,r.Z)(e[f],2);l=m[0],h=m[1]}if(null==l)throw new o.nu("Unknown ".concat(a,": ").concat(f,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=h){for(var y={},b=0,w=Object.keys(p);b<w.length;b++){var x=w[b];y[x]=p[x]}for(var k=0,I=Object.keys(n);k<I.length;k++){var S=I[k];y[S]=n[S]}c.config.customObjects=y;for(var _=Object.assign({},p),C=0,E=Object.keys(n);C<E.length;C++){var A=E[C];p[A]=n[A]}g(c.config);var T=h(l,c.config,n,i);return p=Object.assign({},_),T}for(var N=Object.assign({},p),D=0,R=Object.keys(n);D<R.length;D++){var Z=R[D];p[Z]=n[Z]}var M=new l(c.config);return p=Object.assign({},N),M}function y(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function b(t){if(null==t)return t;var e,n=[],r=(0,a.Z)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;-1===n.indexOf(i)&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function w(t){if(null==t)throw new o.nu("Invalid value in obj: ".concat(JSON.stringify(t)));for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function x(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new o.nu("".concat(n," is not a valid ").concat(e,".  Valid values are ").concat(t," or null/undefined."))}function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return u(n>=0),u(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every((function(t){return typeof t===e}))}function I(t,e){Array.isArray(t)?(i.D5U.assert(t.length>0,(function(){return"".concat(e," is unexpectedly an empty array.")})),t.forEach((function(t,n){return I(t,"element ".concat(n+1," of ").concat(e))}))):i.D5U.assert(Number.isInteger(t)&&t>0,(function(){return"Expected ".concat(e," to be a positive integer, but got ")+"".concat(S(t),".")}))}function S(t){return null===t?"null":Array.isArray(t)?"["+t.map((function(t){return S(t)})).join(",")+"]":"string"===typeof t?'"'.concat(t,'"'):"".concat(t)}function _(t,e,n){var r,a=null!=n?n():i.D5U.now();return function(){var o=null!=n?n():i.D5U.now();return o-a<e?r:(a=o,r=t.apply(void 0,arguments))}}function C(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}},48201:function(t,e,n){"use strict";n.d(e,{I:function(){return o}});var r=n(37762),a=n(93433),i=n(97972);function o(t,e,n){var o,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,h=function(t){var e=!0,n=[],i=[];for(var o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(var s=0,u=n;s<u.length;s++){var c=u[s];if(c.length>1||1===c.length&&c[0].inboundLayers.length>1){e=!1;break}i.push.apply(i,(0,a.Z)(c))}if(e){var l,h=(0,r.Z)(t.layers);try{for(h.s();!(l=h.n()).done;){var f,d=l.value,p=!1,v=(0,r.Z)(d.inboundNodes);try{for(v.s();!(f=v.n()).done;){var g=f.value;if(-1!==i.indexOf(g)){if(p){e=!1;break}p=!0}}}catch(m){v.e(m)}finally{v.f()}if(!e)break}}catch(m){h.e(m)}finally{h.f()}}return e}(t),f=["Layer (type)","Input Shape","Output shape","Param #"];if(h?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(t){return Math.floor(e*t)}))),!h)for(var d in f.push("Receives inputs"),o=[],t.nodesByDepth){var p;(p=o).push.apply(p,(0,a.Z)(t.nodesByDepth[d]))}l("_".repeat(e)),s(f,n,l),l("=".repeat(e));for(var v=t.layers,g=0;g<v.length;++g)h?u(v[g],n,l):c(v[g],n,o,l),l((g===v.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();var m=function(t){var e;e=null!=t.collectedTrainableWeights?(0,i.t)(t.collectedTrainableWeights):(0,i.t)(t.trainableWeights);return e}(t),y=(0,i.t)(t.nonTrainableWeights);l("Total params: ".concat(m+y)),l("Trainable params: ".concat(m)),l("Non-trainable params: ".concat(y)),l("_".repeat(e))}function s(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<t.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[a]).slice(0,e[a]),r+=" ".repeat(e[a]-r.length);n(r)}function u(t,e,n){var r,a;try{a=t.inboundNodes.map((function(t){return JSON.stringify(t.inputShapes)})).join(",")}catch(u){a="multiple"}try{r=JSON.stringify(t.outputShape)}catch(u){r="multiple"}var i=t.name,o=t.getClassName();s(["".concat(i," (").concat(o,")"),a,r,t.countParams().toString()],e,n)}function c(t,e,n,a){var i,o;try{o=t.inboundNodes.map((function(t){return JSON.stringify(t.inputShapes)})).join(",")}catch(w){o="multiple"}try{i=JSON.stringify(t.outputShape)}catch(w){i="multiple"}var u,c=[],l=(0,r.Z)(t.inboundNodes);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(h)))for(var f=0;f<h.inboundLayers.length;++f){var d=h.inboundLayers[f].name,p=h.nodeIndices[f],v=h.tensorIndices[f];c.push("".concat(d,"[").concat(p,"][").concat(v,"]"))}}}catch(w){l.e(w)}finally{l.f()}var g=t.name,m=t.getClassName(),y=0===c.length?"":c[0];s(["".concat(g," (").concat(m,")"),o,i,t.countParams().toString(),y],e,a);for(var b=1;b<c.length;++b)s(["","","","",c[b]],e,a)}},23294:function(t,e,n){"use strict";n.d(e,{Fp:function(){return s},NS:function(){return i},U:function(){return a},VV:function(){return o},w6:function(){return u}});var r=n(59593);function a(t){return t===parseInt(t.toString(),10)}function i(t,e,n){null==e&&(e=0),null==n&&(n=t.length);for(var r=1,a=e;a<n;++a)r*=t[a];return r}function o(t){if(0===t.length)return Number.NaN;for(var e=Number.POSITIVE_INFINITY,n=0;n<t.length;n++){var r=t[n];r<e&&(e=r)}return e}function s(t){if(0===t.length)return Number.NaN;for(var e=Number.NEGATIVE_INFINITY,n=0;n<t.length;n++){var r=t[n];r>e&&(e=r)}return e}function u(t,e){if(e<t)throw new r.nu("end (".concat(e,") < begin (").concat(t,") is forbidden."));for(var n=[],a=t;a<e;++a)n.push(a);return n}},62141:function(t,e,n){"use strict";n.d(e,{a:function(){return i},q:function(){return o}});var r=n(17319);function a(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"===typeof n}function i(t,e){if(null===t)return null;if("string"===typeof t)return r.zW(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){for(var n=[],o=t.length,s=0;s<o;++s){var u=t[s];a(e,s,u)?n.push(u):n.push(i(u,e))}return n}for(var c={},l=0,h=Object.keys(t);l<h.length;l++){var f=h[l],d=t[f];if("name"===f&&"string"===typeof d)c[f]=d;else{var p=r.zW(f);c[p]=i(d,p)}}return c}function o(t,e){if(null===t||void 0===t)return null;if("string"===typeof t)return r.D1(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){for(var n=[],i=t.length,s=0;s<i;++s){var u=t[s];a(e,s,u)?n.push(u):n.push(o(u,e))}return n}for(var c={},l=0,h=Object.keys(t);l<h.length;l++){var f=h[l],d=t[f],p=r.D1(f);c[p]="name"!==f&&"className"!==f||"string"!==typeof d?o(d,f):d}return c}},81111:function(t,e,n){"use strict";n.d(e,{Wf:function(){return s},XO:function(){return a},nQ:function(){return o},x6:function(){return i}});var r=n(59593);function a(t){return Array.isArray(t)&&Array.isArray(t[0])}function i(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function o(t){var e;if(Array.isArray(t)){if(1!==t.length)throw new r.nu("Expected Tensor length to be 1; got ".concat(t.length));e=t[0]}else e=t;return e}function s(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return t[0];throw new r.nu("Expected exactly 1 Shape; got ".concat(t.length))}return t}},97972:function(t,e,n){"use strict";n.d(e,{t:function(){return a}});var r=n(37762);function a(t){var e,n=0,a=(0,r.Z)(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;0===i.shape.length?n+=1:n+=i.shape.reduce((function(t,e){return t*e}))}}catch(o){a.e(o)}finally{a.f()}return n}},92247:function(t,e,n){"use strict";n.d(e,{FQ:function(){return l},fU:function(){return c},zb:function(){return h}});var r=n(15671),a=n(43144),i=n(87884),o=n(70387),s=n(36446),u="Variable",c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,r.Z)(this,t),this.dtype=null==n?"float32":n,this.shape=e.shape,this.id=(0,o.L)(),a=null==a?u:a,this.originalName=(0,s.MU)(a),this.name=(0,s.w8)(this.originalName),this.trainable_=c,this.constraint=l,this.val=i.VD$(e,this.trainable_,this.name,this.dtype)}return(0,a.Z)(t,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(t){return this.assertNotDisposed(),function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(t){this.trainable_=t,this.val.trainable=t}}]),t}();function l(t){return t.map((function(t){return t.read()}))}function h(t){t.forEach((function(t){t[0].write(t[1])}))}},18667:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},73871:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var r="4.2.0"},95820:function(t,e,n){"use strict";function r(t,e){t=t||[],"string"===typeof(e=e||{})&&(e={type:e});try{return new Blob(t,e)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}function a(t,e,n){return"function"===typeof t.toBlob?new Promise((function(r){t.toBlob(r,e,n)})):Promise.resolve(function(t){var e=t.match(/data:([^;]+)/)[1],n=t.replace(/^[^,]+,/,"");return r([i(atob(n))],{type:e})}(t.toDataURL(e,n)))}function i(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),a=-1;++a<e;)r[a]=t.charCodeAt(a);return n}n.d(e,{_c:function(){return a}})},3049:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},a=[[-1,0,1],[-2,0,2],[-1,0,1]],i=[[-1,-2,-1],[0,0,0],[1,2,1]],o={bitDepth:32,mode:"periodic"};function s(t,e){t.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),e=Object.assign({},r,e);for(var n=t.width,s=t.height,u=t.maxValue,c={sigma:e.gaussianBlur,radius:3},l=t.gaussianFilter(c),h=l.convolution(i,o),f=l.convolution(a,o),d=f.hypotenuse(h),p=t.constructor,v=new p(n,s,{kind:"GREY",bitDepth:32}),g=new p(n,s,{kind:"GREY",bitDepth:32}),m=new p(n,s,{kind:"GREY"}),y=1;y<n-1;y++)for(var b=1;b<s-1;b++){var w=(Math.round(Math.atan2(f.getValueXY(y,b,0),h.getValueXY(y,b,0))*(5/Math.PI))+5)%5;0===w&&(d.getValueXY(y,b,0)<=d.getValueXY(y,b-1,0)||d.getValueXY(y,b,0)<=d.getValueXY(y,b+1,0))||1===w&&(d.getValueXY(y,b,0)<=d.getValueXY(y-1,b+1,0)||d.getValueXY(y,b,0)<=d.getValueXY(y+1,b-1,0))||2===w&&(d.getValueXY(y,b,0)<=d.getValueXY(y-1,b,0)||d.getValueXY(y,b,0)<=d.getValueXY(y+1,b,0))||3===w&&(d.getValueXY(y,b,0)<=d.getValueXY(y-1,b-1,0)||d.getValueXY(y,b,0)<=d.getValueXY(y+1,b+1,0))||v.setValueXY(y,b,0,d.getValueXY(y,b,0))}for(y=0;y<n*s;++y){var x=v.data[y],k=0;x>e.highThreshold&&(k++,m.data[y]=u),x>e.lowThreshold&&k++,g.data[y]=k}var I=[];for(y=1;y<n-1;++y)for(b=1;b<s-1;++b)if(1===g.getValueXY(y,b,0))t:for(var S=y-1;S<y+2;++S)for(var _=b-1;_<b+2;++_)if(2===g.getValueXY(S,_,0)){I.push([y,b]),m.setValueXY(y,b,0,u);break t}for(;I.length>0;){var C=[];for(y=0;y<I.length;++y)for(b=-1;b<2;++b)for(S=-1;S<2;++S)if(0!==b||0!==S){var E=I[y][0]+b,A=I[y][1]+S;1===g.getValueXY(E,A,0)&&0===m.getValueXY(E,A,0)&&(C.push([E,A]),m.setValueXY(E,A,0,u))}I=C}return m}},20858:function(t,e,n){var r,a,i;!function(o,s){"use strict";a=[n(44711)],void 0===(i="function"===typeof(r=function(t){var e=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(t){if("undefined"!==typeof t.stacktrace||"undefined"!==typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(n))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(t){return!!t.match(n)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;var a=this.extractLocation(r?r[1]:n),i=r&&n||void 0,o=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new t({functionName:i,fileName:o,lineNumber:a[1],columnNumber:a[2],source:e})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(t){return!t.match(r)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t({functionName:e});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=e.match(n),a=r&&r[1]?r[1]:void 0,i=this.extractLocation(e.replace(n,""));return new t({functionName:a,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})}),this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),a=[],i=2,o=r.length;i<o;i+=2){var s=n.exec(r[i]);s&&a.push(new t({fileName:s[2],lineNumber:s[1],source:r[i]}))}return a},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),a=[],i=0,o=r.length;i<o;i+=2){var s=n.exec(r[i]);s&&a.push(new t({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[i]}))}return a},parseOpera11:function(n){return n.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var n,r=e.split("@"),a=this.extractLocation(r.pop()),i=r.shift()||"",o=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(n=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t({functionName:o,args:s,fileName:a[0],lineNumber:a[1],columnNumber:a[2],source:e})}),this)}}})?r.apply(e,a):r)||(t.exports=i)}()},76297:function(t,e,n){"use strict";for(var r=n(56690).default,a=n(89728).default,i=n(61655).default,o=n(26389).default,s=n(71352).IOBuffer,u=n(17886),c=[],l=0;l<=8;l++)c.push(255<<l);var h=function(t){i(n,t);var e=o(n);function n(t){var a;if(r(this,n),1!==t.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!t.height||!t.width)throw new Error("ImageData width and height are required");return(a=e.call(this,t.data)).width=t.width,a.height=t.height,a.bitDepth=t.bitDepth,a.channels=t.channels,a.components=t.components,a}return a(n,[{key:"encode",value:function(){this.encoded=new s,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();var t=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(t),this.encoded.toArray()}},{key:"writePixelArray",value:function(){var t,e,n=this.encoded,r=4*Math.floor((this.bitDepth*this.width+31)/32),a=Math.ceil(this.bitDepth*this.width/8),i=r-a,o=this.bitDepth*this.width%8,s=0===o?0:8-o,u=r*this.height,l=0,h=0,f=8;n.mark(),e=this.readUint8();for(var d=this.height-1;d>=0;d--){var p=0===d;n.reset(),n.skip(d*r);for(var v=0;v<a;v++){var g=v===a-1;h<=s&&g?(n.writeByte(e<<h),0!==s&&s!==h||p||(t=e,e=this.readByte())):0===h?(t=e,e=this.readUint8(),n.writeByte(t)):(t=e,e=this.readUint8(),n.writeByte(t<<h&c[h]|e>>f)),g&&(l+=o||0,n.skip(i),f=8-(h=l%8))}}r>a&&(n.reset(),n.skip(u-1),n.writeUint8(0))}},{key:"writeColorTable",value:function(){this.encoded.writeUint32(0).writeUint32(16777215)}},{key:"writeBitmapFileHeader",value:function(t){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(t)}},{key:"writeBitmapV5Header",value:function(){var t=4*Math.floor((this.bitDepth*this.width+31)/32)*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(u.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(t).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(u.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(u.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}]),n}(s);t.exports=h},17886:function(t){"use strict";t.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},88545:function(t,e,n){"use strict";var r=n(76297);e.c=function(t){return new r(t).encode()}},39823:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=[],o=function(){function t(e,n){r(this,t),n=n||{},void 0===e&&(e=8192),"number"===typeof e&&(e=new ArrayBuffer(e));var a=e.byteLength,i=n.offset?n.offset>>>0:0;e.buffer&&(a=e.byteLength-i,e=e.byteLength!==e.buffer.byteLength?e.buffer.slice(e.byteOffset+i,e.byteOffset+e.byteLength):i?e.buffer.slice(i):e.buffer),this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=a||8192,this._mark=0}return a(t,[{key:"available",value:function(t){return void 0===t&&(t=1),this.offset+t<=this.length}},{key:"isLittleEndian",value:function(){return this.littleEndian}},{key:"setLittleEndian",value:function(){this.littleEndian=!0}},{key:"isBigEndian",value:function(){return!this.littleEndian}},{key:"setBigEndian",value:function(){this.littleEndian=!1}},{key:"skip",value:function(t){void 0===t&&(t=1),this.offset+=t}},{key:"seek",value:function(t){this.offset=t}},{key:"mark",value:function(){this._mark=this.offset}},{key:"reset",value:function(){this.offset=this._mark}},{key:"rewind",value:function(){this.offset=0}},{key:"ensureAvailable",value:function(t){if(void 0===t&&(t=1),!this.available(t)){var e=this._increment+this._increment;this._increment=e;var n=this.length+e,r=new Uint8Array(n);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=n,this._data=new DataView(this.buffer)}}},{key:"readBoolean",value:function(){return 0!==this.readUint8()}},{key:"readInt8",value:function(){return this._data.getInt8(this.offset++)}},{key:"readUint8",value:function(){return this._data.getUint8(this.offset++)}},{key:"readByte",value:function(){return this.readUint8()}},{key:"readBytes",value:function(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),n=0;n<t;n++)e[n]=this.readByte();return e}},{key:"readInt16",value:function(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readUint16",value:function(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readInt32",value:function(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readUint32",value:function(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat32",value:function(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat64",value:function(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readChar",value:function(){return String.fromCharCode(this.readInt8())}},{key:"readChars",value:function(t){void 0===t&&(t=1),i.length=t;for(var e=0;e<t;e++)i[e]=this.readChar();return i.join("")}},{key:"writeBoolean",value:function(t){this.writeUint8(t?255:0)}},{key:"writeInt8",value:function(t){this.ensureAvailable(1),this._data.setInt8(this.offset++,t)}},{key:"writeUint8",value:function(t){this.ensureAvailable(1),this._data.setUint8(this.offset++,t)}},{key:"writeByte",value:function(t){this.writeUint8(t)}},{key:"writeBytes",value:function(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e])}},{key:"writeInt16",value:function(t){this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2}},{key:"writeUint16",value:function(t){this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2}},{key:"writeInt32",value:function(t){this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4}},{key:"writeUint32",value:function(t){this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4}},{key:"writeFloat32",value:function(t){this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4}},{key:"writeFloat64",value:function(t){this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8}},{key:"writeChar",value:function(t){this.writeUint8(t.charCodeAt(0))}},{key:"writeChars",value:function(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e))}},{key:"toArray",value:function(){return new Uint8Array(this.buffer,0,this.offset)}}]),t}();t.exports=o},76163:function(t,e,n){"use strict";var r=n(10331);t.exports=function(t,e){return new r(t,e).decode(e)}},9440:function(t,e,n){"use strict";var r=n(74704).default,a=n(56690).default,i=n(89728).default,o={standard:n(85796),exif:n(20508),gps:n(67622)},s=function(){function t(e){if(a(this,t),!e)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=e,this._map=null}return i(t,[{key:"get",value:function(t){if("number"===typeof t)return this.fields.get(t);if("string"===typeof t)return this.fields.get(o[this.kind].tagsByName[t]);throw new Error("expected a number or string")}},{key:"map",get:function(){if(!this._map){this._map={};var t,e=o[this.kind].tagsById,n=r(this.fields.keys());try{for(n.s();!(t=n.n()).done;){var a=t.value;e[a]&&(this._map[e[a]]=this.fields.get(a))}}catch(i){n.e(i)}finally{n.f()}}return this._map}}]),t}();t.exports=s},38130:function(t,e){"use strict";var n=new Map([[1,[1,r]],[2,[1,function(t,e){for(var n=[],r="",a=0;a<e;a++){var i=String.fromCharCode(t.readUint8());"\0"===i?(n.push(r),r=""):r+=i}return 1===n.length?n[0]:n}]],[3,[2,function(t,e){if(1===e)return t.readUint16();for(var n=new Uint16Array(e),r=0;r<e;r++)n[r]=t.readUint16();return n}]],[4,[4,function(t,e){if(1===e)return t.readUint32();for(var n=new Uint32Array(e),r=0;r<e;r++)n[r]=t.readUint32();return n}]],[5,[8,function(t,e){if(1===e)return t.readUint32()/t.readUint32();for(var n=new Array(e),r=0;r<e;r++)n[r]=t.readUint32()/t.readUint32();return n}]],[6,[1,function(t,e){if(1===e)return t.readInt8();for(var n=new Int8Array(e),r=0;r<e;r++)n[r]=t.readInt8();return n}]],[7,[1,r]],[8,[2,function(t,e){if(1===e)return t.readInt16();for(var n=new Int16Array(e),r=0;r<e;r++)n[r]=t.readInt16();return n}]],[9,[4,function(t,e){if(1===e)return t.readInt32();for(var n=new Int32Array(e),r=0;r<e;r++)n[r]=t.readInt32();return n}]],[10,[8,function(t,e){if(1===e)return t.readInt32()/t.readInt32();for(var n=new Array(e),r=0;r<e;r++)n[r]=t.readInt32()/t.readInt32();return n}]],[11,[4,function(t,e){if(1===e)return t.readFloat32();for(var n=new Float32Array(e),r=0;r<e;r++)n[r]=t.readFloat32();return n}]],[12,[8,function(t,e){if(1===e)return t.readFloat64();for(var n=new Float64Array(e),r=0;r<e;r++)n[r]=t.readFloat64();return n}]]]);function r(t,e){if(1===e)return t.readUint8();for(var n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.readUint8();return n}e.getByteLength=function(t,e){return n.get(t)[0]*e},e.readData=function(t,e,r){return n.get(e)[1](t,r)}},18714:function(t,e,n){"use strict";e.decode=n(76163)},20508:function(t){"use strict";var e={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},n={};for(var r in e)n[e[r]]=r;t.exports={tagsById:e,tagsByName:n}},67622:function(t){"use strict";var e={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},n={};for(var r in e)n[e[r]]=r;t.exports={tagsById:e,tagsByName:n}},85796:function(t){"use strict";var e={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},n={};for(var r in e)n[e[r]]=r;t.exports={tagsById:e,tagsByName:n}},10331:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61655).default,o=n(26389).default,s=n(39823),u=n(9440),c=n(4027),l=n(38130),h={ignoreImageData:!1,onlyFirst:!1},f=function(t){i(n,t);var e=o(n);function n(t,a){var i;return r(this,n),(i=e.call(this,t,a))._nextIFD=0,i}return a(n,[{key:"decode",value:function(t){t=Object.assign({},h,t);var e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t)),t.onlyFirst)return e[0];return e}},{key:"decodeHeader",value:function(){var t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error("invalid byte order: 0x"+t.toString(16));this.setBigEndian()}if(42!==(t=this.readUint16()))throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}},{key:"decodeIFD",value:function(t){var e;this.seek(this._nextIFD),e=t.kind?new u(t.kind):new c;for(var n=this.readUint16(),r=0;r<n;r++)this.decodeIFDEntry(e);return t.ignoreImageData||this.decodeImageData(e),this._nextIFD=this.readUint32(),e}},{key:"decodeIFDEntry",value:function(t){var e=this.offset,n=this.readUint16(),r=this.readUint16(),a=this.readUint32();if(r<1||r>12)this.skip(4);else{l.getByteLength(r,a)>4&&this.seek(this.readUint32());var i=l.readData(this,r,a);if(t.fields.set(n,i),34665===n||34853===n){var o,s=this.offset;34665===n?o="exif":34853===n&&(o="gps"),this._nextIFD=i,t[o]=this.decodeIFD({kind:o,ignoreImageData:!0}),this.offset=s}this.seek(e),this.skip(12)}}},{key:"decodeImageData",value:function(t){var e=t.orientation;switch(e&&1!==e&&g("orientation",e),t.type){case 1:case 2:this.readStripData(t);break;default:g("image type",t.type)}}},{key:"readStripData",value:function(t){for(var e=t.width,n=t.height,r=function(t){if(t.length){var e=t;t=e[0];for(var n=0;n<e.length;n++)e[n]!==t&&g("bit depth",e)}return t}(t.bitsPerSample),a=t.sampleFormat,i=e*n,o=function(t,e,n,r){return 8===n?new Uint8Array(t*e):16===n?new Uint16Array(t*e):32===n&&3===r?new Float32Array(t*e):g("bit depth / sample format",n+" / "+r)}(i,1,r,a),s=t.compression,u=t.rowsPerStrip*e,c=t.stripOffsets,l=t.stripByteCounts,h=0,f=0;f<c.length;f++){var m=this.getStripData(s,c[f],l[f]),y=i>u?u:i;i-=y,8===r?h=d(o,m,h,y):16===r?h=p(o,m,h,y,this.isLittleEndian()):32===r&&3===a?h=v(o,m,h,y,this.isLittleEndian()):g("bitDepth",r)}t.data=o}},{key:"getStripData",value:function(t,e,n){switch(t){case 1:return new DataView(this.buffer,e,n);case 2:case 32773:return g("Compression",t);default:throw new Error("invalid compression: "+t)}}}]),n}(s);function d(t,e,n,r){for(var a=0;a<r;a++)t[n++]=e.getUint8(a);return n}function p(t,e,n,r,a){for(var i=0;i<2*r;i+=2)t[n++]=e.getUint16(i,a);return n}function v(t,e,n,r,a){for(var i=0;i<4*r;i+=4)t[n++]=e.getFloat32(i,a);return n}function g(t,e){throw new Error("Unsupported "+t+": "+e)}t.exports=f},4027:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61655).default,o=n(26389).default,s=n(9440),u=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,c=function(t){i(n,t);var e=o(n);function n(){return r(this,n),e.call(this,"standard")}return a(n,[{key:"size",get:function(){return this.width*this.height}},{key:"width",get:function(){return this.imageWidth}},{key:"height",get:function(){return this.imageLength}},{key:"components",get:function(){return this.samplesPerPixel}},{key:"date",get:function(){var t=new Date,e=u.exec(this.dateTime);return t.setFullYear(e[1],e[2]-1,e[3]),t.setHours(e[4],e[5],e[6]),t}},{key:"newSubfileType",get:function(){return this.get(254)}},{key:"imageWidth",get:function(){return this.get(256)}},{key:"imageLength",get:function(){return this.get(257)}},{key:"bitsPerSample",get:function(){return this.get(258)}},{key:"compression",get:function(){return this.get(259)||1}},{key:"type",get:function(){return this.get(262)}},{key:"fillOrder",get:function(){return this.get(266)||1}},{key:"documentName",get:function(){return this.get(269)}},{key:"imageDescription",get:function(){return this.get(270)}},{key:"stripOffsets",get:function(){return l(this.get(273))}},{key:"orientation",get:function(){return this.get(274)}},{key:"samplesPerPixel",get:function(){return this.get(277)}},{key:"rowsPerStrip",get:function(){return this.get(278)}},{key:"stripByteCounts",get:function(){return l(this.get(279))}},{key:"minSampleValue",get:function(){return this.get(280)||0}},{key:"maxSampleValue",get:function(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}},{key:"xResolution",get:function(){return this.get(282)}},{key:"yResolution",get:function(){return this.get(283)}},{key:"planarConfiguration",get:function(){return this.get(284)||1}},{key:"resolutionUnit",get:function(){return this.get(296)||2}},{key:"dateTime",get:function(){return this.get(306)}},{key:"predictor",get:function(){return this.get(317)||1}},{key:"sampleFormat",get:function(){return this.get(339)||1}},{key:"sMinSampleValue",get:function(){return this.get(340)||this.minSampleValue}},{key:"sMaxSampleValue",get:function(){return this.get(341)||this.maxSampleValue}}]),n}(s);function l(t){return"number"===typeof t?[t]:t}t.exports=c},40674:function(t,e,n){"use strict";var r=n(39823),a=n(18714);t.exports=function(t){var e=new r(t),n={};if(e.setBigEndian(),65496!==e.readUint16())throw new Error("SOI marker not found. Not a valid JPEG file");if(65505===e.readUint16()){e.readUint16();var i=e.readBytes(6);if(69===i[0]&&120===i[1]&&105===i[2]&&102===i[3]&&0===i[4]&&0===i[5]){var o=a.decode(e,{onlyFirst:!0,ignoreImageData:!0,offset:e.offset});n.exif=o}}return n}},46984:function(t,e,n){"use strict";e.decode=n(40674)},72847:function(t){!function(){function e(t,e,n){this.next=n,n&&(n.prev=this),this.prev=e,e&&(e.next=this),this.data=t}function n(){if(!(this instanceof n))return new n;this._head=null,this._tail=null,this.length=0}n.prototype={push:function(t){this._tail=new e(t,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var t=this._tail;return this._tail=t.prev,t.prev&&(t.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),t.data}},unshift:function(t){this._head=new e(t,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var t=this._head;return this._head=t.next,t.next&&(t.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),t.data}},item:function(t){t<0&&(t=this.length+t);for(var e=this._head;t-- >0&&e;)e=e.next;return e?e.data:void 0},slice:function(t,e){if(t||(t=0),e||(e=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e===t)return[];if(e<t)throw new Error("invalid offset: "+t+","+e+" (length="+this.length+")");for(var n=e-t,r=new Array(n),a=0,i=this._head;t-- >0&&i;)i=i.next;for(;a<n&&i;)r[a++]=i.data,i=i.next;return r},drop:function(){n.call(this)},forEach:function(t,e){for(var n=this._head,r=0,a=this.length;r<a&&n;)t.call(e||this,n.data,r,this),n=n.next,r++},map:function(t,e){var r=new n;return this.forEach((function(n,a,i){r.push(t.call(e||i,n,a,i))})),r},filter:function(t,e){var r=new n;return this.forEach((function(n,a,i){t.call(e||i,n,a,i)&&r.push(n)})),r},reduce:function(t,e,n){var r=0,a=this._head,i=this.length;for(e||(r=1,e=a&&a.data,a=a&&a.next);r<i&&a;)e=t.call(n||this,e,a.data,this),r++,a=a.next;return e}},t.exports=n}()},34009:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(71352),u=n(58308),c=n(80465),l=n(17441),h=new Uint8Array(0),f=new Uint16Array([255]),d=255===new Uint8Array(f.buffer)[0],p=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.Z)(this,n),a=e.call(this,t);var o=i.checkCrc,s=void 0!==o&&o;return a._checkCrc=s,a._inflator=new u.T_,a._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},a._end=!1,a._hasPalette=!1,a._palette=[],a._compressionMethod=l.lg.UNKNOWN,a._filterMethod=l.V3.UNKNOWN,a._interlaceMethod=l.FF.UNKNOWN,a._colorType=-1,a.setBigEndian(),a}return(0,a.Z)(n,[{key:"decode",value:function(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}},{key:"decodeSignature",value:function(){for(var t=0;t<c.K.length;t++)if(this.readUint8()!==c.K[t])throw new Error("wrong PNG signature. Byte at ".concat(t," should be ").concat(c.K[t],"."))}},{key:"decodeChunk",value:function(){var t=this.readUint32(),e=this.readChars(4),n=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t)}if(this.offset-n!==t)throw new Error("Length mismatch while decoding chunk ".concat(e));if(this._checkCrc){var r=this.readUint32(),a=t+4,i=(0,c.B)(new Uint8Array(this.buffer,this.byteOffset+this.offset-a-4,a),a);if(i!==r)throw new Error("CRC mismatch for chunk ".concat(e,". Expected ").concat(r,", found ").concat(i))}else this.skip(4)}},{key:"decodeIHDR",value:function(){var t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=function(t){if(1!==t&&2!==t&&4!==t&&8!==t&&16!==t)throw new Error("invalid bit depth: ".concat(t));return t}(this.readUint8());var e,n=this.readUint8();switch(this._colorType=n,n){case l.Mr.GREYSCALE:e=1;break;case l.Mr.TRUECOLOUR:e=3;break;case l.Mr.INDEXED_COLOUR:e=1;break;case l.Mr.GREYSCALE_ALPHA:e=2;break;case l.Mr.TRUECOLOUR_ALPHA:e=4;break;default:throw new Error("Unknown color type: ".concat(n))}if(this._png.channels=e,this._compressionMethod=this.readUint8(),this._compressionMethod!==l.lg.DEFLATE)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}},{key:"decodePLTE",value:function(t){if(t%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(t));var e=t/3;this._hasPalette=!0;var n=[];this._palette=n;for(var r=0;r<e;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}},{key:"decodeIDAT",value:function(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}},{key:"decodetRNS",value:function(t){if(3===this._colorType){if(t>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(t," vs ").concat(this._palette.length,")"));for(var e=0;e<t;e++){var n=this.readByte();this._palette[e].push(n)}for(;e<this._palette.length;e++)this._palette[e].push(255)}}},{key:"decodeiCCP",value:function(t){for(var e,n="";"\0"!==(e=this.readChar());)n+=e;var r=this.readUint8();if(r!==l.lg.DEFLATE)throw new Error("Unsupported iCCP compression method: ".concat(r));var a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:(0,u.rr)(a)}}},{key:"decodetEXt",value:function(t){for(var e,n="";"\0"!==(e=this.readChar());)n+=e;this._png.text[n]=this.readChars(t-n.length-1)}},{key:"decodepHYs",value:function(){var t=this.readUint32(),e=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:e,unit:n}}},{key:"decodeImage",value:function(){if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));var t=this._inflator.result;if(this._filterMethod!==l.V3.ADAPTIVE)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod!==l.FF.NO_INTERLACE)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this.decodeInterlaceNull(t)}},{key:"decodeInterlaceNull",value:function(t){for(var e,n,r,a=this._png.height,i=this._png.channels*this._png.depth/8,o=this._png.width*i,s=new Uint8Array(this._png.height*o),u=h,c=0,l=0;l<a;l++){switch(e=t.subarray(c+1,c+1+o),n=s.subarray(l*o,(l+1)*o),t[c]){case 0:v(e,n,o);break;case 1:g(e,n,o,i);break;case 2:m(e,n,u,o);break;case 3:y(e,n,u,o,i);break;case 4:b(e,n,u,o,i);break;default:throw new Error("Unsupported filter: ".concat(t[c]))}u=n,c+=o+1}if(this._hasPalette&&(this._png.palette=this._palette),16===this._png.depth){var f=new Uint16Array(s.buffer);if(d)for(var p=0;p<f.length;p++)f[p]=(255&(r=f[p]))<<8|r>>8&255;this._png.data=f}else this._png.data=s}}]),n}(s.IOBuffer);function v(t,e,n){for(var r=0;r<n;r++)e[r]=t[r]}function g(t,e,n,r){for(var a=0;a<r;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-r]&255}function m(t,e,n,r){var a=0;if(0===n.length)for(;a<r;a++)e[a]=t[a];else for(;a<r;a++)e[a]=t[a]+n[a]&255}function y(t,e,n,r,a){var i=0;if(0===n.length){for(;i<a;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+(e[i-a]>>1)&255}else{for(;i<a;i++)e[i]=t[i]+(n[i]>>1)&255;for(;i<r;i++)e[i]=t[i]+(e[i-a]+n[i]>>1)&255}}function b(t,e,n,r,a){var i=0;if(0===n.length){for(;i<a;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-a]&255}else{for(;i<a;i++)e[i]=t[i]+n[i]&255;for(;i<r;i++)e[i]=t[i]+w(e[i-a],n[i],n[i-a])&255}}function w(t,e,n){var r=t+e-n,a=Math.abs(r-t),i=Math.abs(r-e),o=Math.abs(r-n);return a<=i&&a<=o?t:i<=o?e:n}},59770:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(71352),u=n(58308),c=n(80465),l=n(17441),h={level:3},f=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.Z)(this,n),(a=e.call(this))._colorType=l.Mr.UNKNOWN,a._zlibOptions=Object.assign({},h,i.zlib),a._png=a._checkData(t),a.setBigEndian(),a}return(0,a.Z)(n,[{key:"encode",value:function(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}},{key:"encodeSignature",value:function(){this.writeBytes(c.K)}},{key:"encodeIHDR",value:function(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(l.lg.DEFLATE),this.writeByte(l.V3.ADAPTIVE),this.writeByte(l.FF.NO_INTERLACE),this.writeCrc(17)}},{key:"encodeIEND",value:function(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}},{key:"encodeIDAT",value:function(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}},{key:"encodeData",value:function(){for(var t=this._png,e=t.width,n=t.height,r=t.channels,a=t.depth,i=t.data,o=r*e,c=(new s.IOBuffer).setBigEndian(),l=0,h=0;h<n;h++)if(c.writeByte(0),8===a)l=p(i,c,o,l);else{if(16!==a)throw new Error("unreachable");l=v(i,c,o,l)}var f=c.toArray(),d=(0,u.Wt)(f,this._zlibOptions);this.encodeIDAT(d)}},{key:"_checkData",value:function(t){var e=function(t){var e=t.channels,n=void 0===e?4:e,r=t.depth,a=void 0===r?8:r;if(4!==n&&3!==n&&2!==n&&1!==n)throw new RangeError("unsupported number of channels: ".concat(n));if(8!==a&&16!==a)throw new RangeError("unsupported bit depth: ".concat(a));var i={channels:n,depth:a,colorType:l.Mr.UNKNOWN};switch(n){case 4:i.colorType=l.Mr.TRUECOLOUR_ALPHA;break;case 3:i.colorType=l.Mr.TRUECOLOUR;break;case 1:i.colorType=l.Mr.GREYSCALE;break;case 2:i.colorType=l.Mr.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return i}(t),n=e.colorType,r=e.channels,a=e.depth,i={width:d(t.width,"width"),height:d(t.height,"height"),channels:r,data:t.data,depth:a,text:{}};this._colorType=n;var o=i.width*i.height*r;if(i.data.length!==o)throw new RangeError("wrong data size. Found ".concat(i.data.length,", expected ").concat(o));return i}},{key:"writeCrc",value:function(t){this.writeUint32((0,c.B)(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}]),n}(s.IOBuffer);function d(t,e){if(Number.isInteger(t)&&t>0)return t;throw new TypeError("".concat(e," must be a positive integer"))}function p(t,e,n,r){for(var a=0;a<n;a++)e.writeByte(t[r++]);return r}function v(t,e,n,r){for(var a=0;a<n;a++)e.writeUint16(t[r++]);return r}},80465:function(t,e,n){"use strict";n.d(e,{B:function(){return c},K:function(){return r}});for(var r=[137,80,78,71,13,10,26,10],a=[],i=0;i<256;i++){for(var o=i,s=0;s<8;s++)1&o?o=3988292384^o>>>1:o>>>=1;a[i]=o}var u=4294967295;function c(t,e){return(function(t,e,n){for(var r=t,i=0;i<n;i++)r=a[255&(r^e[i])]^r>>>8;return r}(u,t,e)^u)>>>0}},91711:function(t,e,n){"use strict";n.d(e,{Jx:function(){return i},cv:function(){return o}});var r=n(34009),a=n(59770);n(95800);function i(t,e){return new r.Z(t,e).decode()}function o(t,e){return new a.Z(t,e).encode()}},17441:function(t,e,n){"use strict";var r,a,i,o;n.d(e,{FF:function(){return o},Mr:function(){return r},V3:function(){return i},lg:function(){return a}}),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.GREYSCALE=0]="GREYSCALE",t[t.TRUECOLOUR=2]="TRUECOLOUR",t[t.INDEXED_COLOUR=3]="INDEXED_COLOUR",t[t.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",t[t.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"}(r||(r={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.DEFLATE=0]="DEFLATE"}(a||(a={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.ADAPTIVE=0]="ADAPTIVE"}(i||(i={})),function(t){t[t.UNKNOWN=-1]="UNKNOWN",t[t.NO_INTERLACE=0]="NO_INTERLACE",t[t.ADAM7=1]="ADAM7"}(o||(o={}))},95800:function(t,e,n){"use strict";var r;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"}(r||(r={}))},10567:function(t){"use strict";function e(t){if(this.size=0|t,this.size<=1||0!==(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(2*this.size),n=0;n<e.length;n+=2){var r=Math.PI*n/this.size;e[n]=Math.cos(r),e[n+1]=-Math.sin(r)}this.table=e;for(var a=0,i=1;this.size>i;i<<=1)a++;this._width=a%2===0?a-1:a,this._bitrev=new Array(1<<this._width);for(var o=0;o<this._bitrev.length;o++){this._bitrev[o]=0;for(var s=0;s<this._width;s+=2){var u=this._width-s-2;this._bitrev[o]|=(o>>>s&3)<<u}}this._out=null,this._data=null,this._inv=0}t.exports=e,e.prototype.fromComplexArray=function(t,e){for(var n=e||new Array(t.length>>>1),r=0;r<t.length;r+=2)n[r>>>1]=t[r];return n},e.prototype.createComplexArray=function(){for(var t=new Array(this._csize),e=0;e<t.length;e++)t[e]=0;return t},e.prototype.toComplexArray=function(t,e){for(var n=e||this.createComplexArray(),r=0;r<n.length;r+=2)n[r]=t[r>>>1],n[r+1]=0;return n},e.prototype.completeSpectrum=function(t){for(var e=this._csize,n=e>>>1,r=2;r<n;r+=2)t[e-r]=t[r],t[e-r+1]=-t[r+1]},e.prototype.transform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=1,this._transform4();for(var n=0;n<t.length;n++)t[n]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t,e,n=this._out,r=this._csize,a=1<<this._width,i=r/a<<1,o=this._bitrev;if(4===i)for(t=0,e=0;t<r;t+=i,e++){var s=o[e];this._singleTransform2(t,s,a)}else for(t=0,e=0;t<r;t+=i,e++){var u=o[e];this._singleTransform4(t,u,a)}var c=this._inv?-1:1,l=this.table;for(a>>=2;a>=2;a>>=2){var h=(i=r/a<<1)>>>2;for(t=0;t<r;t+=i)for(var f=t+h,d=t,p=0;d<f;d+=2,p+=a){var v=d,g=v+h,m=g+h,y=m+h,b=n[v],w=n[v+1],x=n[g],k=n[g+1],I=n[m],S=n[m+1],_=n[y],C=n[y+1],E=b,A=w,T=l[p],N=c*l[p+1],D=x*T-k*N,R=x*N+k*T,Z=l[2*p],M=c*l[2*p+1],F=I*Z-S*M,O=I*M+S*Z,B=l[3*p],L=c*l[3*p+1],P=_*B-C*L,U=_*L+C*B,z=E+F,W=A+O,V=E-F,G=A-O,j=D+P,H=R+U,X=c*(D-P),q=c*(R-U),Y=z+j,K=W+H,Q=z-j,J=W-H,$=V+q,tt=G-X,et=V-q,nt=G+X;n[v]=Y,n[v+1]=K,n[g]=$,n[g+1]=tt,n[m]=Q,n[m+1]=J,n[y]=et,n[y+1]=nt}}},e.prototype._singleTransform2=function(t,e,n){var r=this._out,a=this._data,i=a[e],o=a[e+1],s=a[e+n],u=a[e+n+1],c=i+s,l=o+u,h=i-s,f=o-u;r[t]=c,r[t+1]=l,r[t+2]=h,r[t+3]=f},e.prototype._singleTransform4=function(t,e,n){var r=this._out,a=this._data,i=this._inv?-1:1,o=2*n,s=3*n,u=a[e],c=a[e+1],l=a[e+n],h=a[e+n+1],f=a[e+o],d=a[e+o+1],p=a[e+s],v=a[e+s+1],g=u+f,m=c+d,y=u-f,b=c-d,w=l+p,x=h+v,k=i*(l-p),I=i*(h-v),S=g+w,_=m+x,C=y+I,E=b-k,A=g-w,T=m-x,N=y-I,D=b+k;r[t]=S,r[t+1]=_,r[t+2]=C,r[t+3]=E,r[t+4]=A,r[t+5]=T,r[t+6]=N,r[t+7]=D},e.prototype._realTransform4=function(){var t,e,n=this._out,r=this._csize,a=1<<this._width,i=r/a<<1,o=this._bitrev;if(4===i)for(t=0,e=0;t<r;t+=i,e++){var s=o[e];this._singleRealTransform2(t,s>>>1,a>>>1)}else for(t=0,e=0;t<r;t+=i,e++){var u=o[e];this._singleRealTransform4(t,u>>>1,a>>>1)}var c=this._inv?-1:1,l=this.table;for(a>>=2;a>=2;a>>=2){var h=(i=r/a<<1)>>>1,f=h>>>1,d=f>>>1;for(t=0;t<r;t+=i)for(var p=0,v=0;p<=d;p+=2,v+=a){var g=t+p,m=g+f,y=m+f,b=y+f,w=n[g],x=n[g+1],k=n[m],I=n[m+1],S=n[y],_=n[y+1],C=n[b],E=n[b+1],A=w,T=x,N=l[v],D=c*l[v+1],R=k*N-I*D,Z=k*D+I*N,M=l[2*v],F=c*l[2*v+1],O=S*M-_*F,B=S*F+_*M,L=l[3*v],P=c*l[3*v+1],U=C*L-E*P,z=C*P+E*L,W=A+O,V=T+B,G=A-O,j=T-B,H=R+U,X=Z+z,q=c*(R-U),Y=c*(Z-z),K=W+H,Q=V+X,J=G+Y,$=j-q;if(n[g]=K,n[g+1]=Q,n[m]=J,n[m+1]=$,0!==p){if(p!==d){var tt=G+-c*Y,et=-j+-c*q,nt=W+-c*H,rt=-V- -c*X,at=t+f-p,it=t+h-p;n[at]=tt,n[at+1]=et,n[it]=nt,n[it+1]=rt}}else{var ot=W-H,st=V-X;n[y]=ot,n[y+1]=st}}}},e.prototype._singleRealTransform2=function(t,e,n){var r=this._out,a=this._data,i=a[e],o=a[e+n],s=i+o,u=i-o;r[t]=s,r[t+1]=0,r[t+2]=u,r[t+3]=0},e.prototype._singleRealTransform4=function(t,e,n){var r=this._out,a=this._data,i=this._inv?-1:1,o=2*n,s=3*n,u=a[e],c=a[e+n],l=a[e+o],h=a[e+s],f=u+l,d=u-l,p=c+h,v=i*(c-h),g=f+p,m=d,y=-v,b=f-p,w=d,x=v;r[t]=g,r[t+1]=0,r[t+2]=m,r[t+3]=y,r[t+4]=b,r[t+5]=0,r[t+6]=w,r[t+7]=x}},64802:function(t,e,n){var r,a,i;a=[],void 0===(i="function"===typeof(r=function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function r(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){u(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,e,n){var s=o.URL||o.webkitURL,u=document.createElement("a");e=e||t.name||"download",u.download=e,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?i(u):a(u.href)?r(t,e,n):i(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){i(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,o),n);else if(a(t))r(t,n,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,e,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return r(t,e,n);var i="application/octet-stream"===t.type,u=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&u||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},l.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,f=h.createObjectURL(t);a?a.location=f:location.href=f,a=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});o.saveAs=u.saveAs=u,t.exports=u})?r.apply(e,a):r)||(t.exports=i)},95323:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var _toConsumableArray=__webpack_require__(861).default,toBytes=function(t){return _toConsumableArray(t).map((function(t){return t.charCodeAt(0)}))},xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t[e],r=1,a=0;++a<8;)r*=256,n+=t[e+a]*r;return n}var fileType=function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Buffer.isBuffer(t)))throw new TypeError("Expected the `input` argument to be of type `Uint8Array` or `Buffer` or `ArrayBuffer`, got `".concat(typeof t,"`"));var e=t instanceof Uint8Array?t:new Uint8Array(t);if(!(e&&e.length>1))return null;var n=function(t,n){n=Object.assign({offset:0},n);for(var r=0;r<t.length;r++)if(n.mask){if(t[r]!==(n.mask[r]&e[r+n.offset]))return!1}else if(t[r]!==e[r+n.offset])return!1;return!0},r=function(t,e){return n(toBytes(t),e)};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(n([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(n([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((n([73,73,42,0])||n([77,77,0,42]))&&n([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(n([73,73,42,0])||n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(n([80,75,3,4])){if(n([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(n(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(r("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(r("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(r("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.findIndex((function(t,n,r){return n>=e&&80===r[n]&&75===r[n+1]&&3===r[n+2]&&4===r[n+3]}))},i=0,o=!1,s=null;do{var u=i+30;if(o||(o=n(oxmlContentTypes,{offset:u})||n(oxmlRels,{offset:u})),s||(r("word/",{offset:u})?s={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:r("ppt/",{offset:u})?s={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:r("xl/",{offset:u})&&(s={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),o&&s)return s;i=a(e,u)}while(i>=0);if(s)return s}if(n([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(n([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(n([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([51,103,112,53])||n([0,0,0])&&n([102,116,121,112],{offset:4})&&(n([109,112,52,49],{offset:8})||n([109,112,52,50],{offset:8})||n([105,115,111,109],{offset:8})||n([105,115,111,50],{offset:8})||n([109,109,112,52],{offset:8})||n([77,52,86],{offset:8})||n([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(n([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(n([26,69,223,163])){var c=e.subarray(4,4100),l=c.findIndex((function(t,e,n){return 66===n[e]&&130===n[e+1]}));if(-1!==l){var h=l+3,f=function(t){return _toConsumableArray(t).every((function(t,e){return c[h+e]===t.charCodeAt(0)}))};if(f("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(f("webm"))return{ext:"webm",mime:"video/webm"}}}if(n([0,0,0,20,102,116,121,112,113,116,32,32])||n([102,114,101,101],{offset:4})||n([102,116,121,112,113,116,32,32],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(n([48,38,178,117,142,102,207,17,166,217])){var d=30;do{var p=readUInt64LE(e,d+16);if(n([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:d})){if(n([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:d+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(n([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:d+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}d+=p}while(d+24<=e.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(var v=0;v<2&&v<e.length-16;v++){if(n([73,68,51],{offset:v})||n([255,226],{offset:v,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([255,228],{offset:v,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([255,248],{offset:v,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([255,240],{offset:v,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(n([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(n([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(n([79,103,103,83]))return n([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:n([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:n([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:n([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:n([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(n([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(n([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(n([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(n([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(n([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===e[0]||70===e[0])&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([119,79,70,70])&&(n([0,1,0,0],{offset:4})||n([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(n([119,79,70,50])&&(n([0,1,0,0],{offset:4})||n([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(n([37,33]))return{ext:"ps",mime:"application/postscript"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(n([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(n([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(n([77,83,67,70])||n([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(n([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(n([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(n([0,0,0,12,106,80,32,32,13,10,135,10])){if(n([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(n([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(n([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(n([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(n([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(r("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([102,116,121,112],{offset:4})){if(n([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(n([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(n([104,101,105,99],{offset:8})||n([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(n([104,101,118,99],{offset:8})||n([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return n([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:n([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:n([77,80,43])||n([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:n([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:n([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:n([212,195,178,161])||n([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=function(readableStream){return new Promise((function(resolve,reject){var stream=eval("require")("stream");readableStream.once("readable",(function(){var t=new stream.PassThrough,e=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{t.fileType=fileType(e)}catch(n){reject(n)}readableStream.unshift(e),stream.pipeline?resolve(stream.pipeline(readableStream,t,(function(){}))):resolve(readableStream.pipe(t))}))}))}},15357:function(t,e,n){var r=Object.prototype.hasOwnProperty;t.exports=e=function(t,e){return r.call(e,t)},e.version=n(12898).version},27773:function(t,e,n){"use strict";n.d(e,{Is:function(){return s},NC:function(){return u},RT:function(){return r},SY:function(){return a},c6:function(){return o},vL:function(){return i}});var r=self.ImageData,a=self.Image;function i(t,e){var n=self.document.createElement("canvas");return n.width=t,n.height=e,n}function o(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).withCredentials,n=void 0!==e&&e;return new Promise((function(e,r){var a=new self.XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.withCredentials=n,a.onload=function(t){200!==this.status?r(t):e(this.response)},a.onerror=r,a.send()}))}function s(){throw new Error("createWriteStream does not exist in the browser")}function u(){throw new Error("writeFile does not exist in the browser")}},23601:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(27833);function a(t){t.extendMethod("background",r.Z)}},27833:function(t,e,n){"use strict";var r=n(80712),a={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function i(t,e,n){return t.post("data",[e,n]).then((function(t){for(var e in t)t[e]=new r.Z(t[e]);return t}))}var o={run:function(t,e,n){e=Object.assign({},a,e);var r=this.manager;return Array.isArray(t)?Promise.all(t.map((function(t){var a=i(r,t,e);return"function"===typeof n&&a.then(n),a}))):i(r,t,e)},work:function(){worker.on("data",(function(t,e,n){e=new IJS(e);var r={},a=[],i=e.grey(),o=i.sobelFilter();d("sobel",o);var s=o.level().mask({threshold:n.threshold});d("mask",s);var u=o.getRoiManager();u.fromMask(s);var c=u.getMask(n.roi);d("realMask",c);var l=i.getPixelsGrid({sampling:n.sampling,mask:c}),h=e.getBackground(l.xyS,l.zS,n.regression);d("background",h);var f=e.subtract(h);function d(t,e){n.include.includes(t)&&(r[t]=e,a.push(e.data.buffer))}r.result=f,a.push(f.data.buffer),t(r,a)}))}};e.Z=o},20923:function(t,e,n){"use strict";var r=n(15671),a=n(43144),i=n(52024),o=n.n(i),s=n(23601),u=function(){function t(){(0,r.Z)(this,t),this._url=null,this._deps=[null]}return(0,a.Z)(t,[{key:"checkUrl",value:function(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}},{key:"url",get:function(){return this._url},set:function(t){if("string"!==typeof t)throw new TypeError("worker URL must be a string");this._url=t,this._deps[0]=t}}],[{key:"extendMethod",value:function(e,n){var r,a,i={};function s(){var t;r||(this.checkUrl(),a=this.url,r=new(o())(n.work,{deps:a}),i.manager=r);for(var e=arguments.length,s=new Array(e),u=0;u<e;u++)s[u]=arguments[u];return(t=n.run).call.apply(t,[i].concat(s))}s.reset=function(){r&&(r.terminate(),r=new(o())(n.work,{deps:a}),i.manager=r)},t.prototype[e]=s}}]),t}();(0,s.Z)(u);new u},80712:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(15671),a=n(43144),i=n(15095),o=n(62383),s=n(80603),u=n(74752),c=n(95024),l=n(26581),h=n(12753),f=n(32198),d=n(78497),p=n(43243),v=n(73487),g=n(58931),m=Object.prototype.toString,y=function(t){function e(t,n,a,i){if((0,r.Z)(this,e),1===arguments.length){var o=i=t;t=o.width,n=o.height,a=o.data}else if(a&&!a.length){a=(i=a).data}if(void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i={}),"object"!==typeof i||null===i)throw new TypeError("options must be an object");if(!Number.isInteger(t)||t<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new RangeError("height must be a positive integer");var s=i.kind,u=void 0===s?h.VS:s;if("string"!==typeof u)throw new TypeError("kind must be a string");var c=(0,l.ZK)(u),f=Object.assign({},i);for(var d in c)void 0===f[d]&&(f[d]=c[d]);(0,l.xx)(f);var p=f.components,v=f.bitDepth,g=f.colorModel,m=f.alpha+0,y=t*n,b=p+m,w=32===v?Number.MAX_VALUE:Math.pow(2,v)-1;if(void 0===a)a=(0,l.G)(y,p,m,b,v,w);else{var x=(0,l.ZN)(y,b,v);if(a.length!==x)throw new RangeError("incorrect data size: ".concat(a.length,". Should be ").concat(x))}this.width=t,this.height=n,this.data=a,this.size=y,this.components=p,this.alpha=m,this.bitDepth=v,this.maxValue=w,this.colorModel=g,this.channels=b,this.meta=i.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:i.parent||null}),this.position=i.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}return(0,a.Z)(e,[{key:t,get:function(){return"IJSImage"}},{key:"getRoiManager",value:function(t){return new g.Z(this,t)}},{key:"clone",value:function(){var t=this.data.slice();return new e(this.width,this.height,t,this)}},{key:"apply",value:function(t){for(var e=0;e<this.height;e++)for(var n=0;n<this.width;n++){var r=(e*this.width+n)*this.channels;t.call(this,r)}}}],[{key:"isImage",value:function(t){return"[object IJSImage]"===m.call(t)}},{key:"fromCanvas",value:function(t){var n=t.getContext("2d").getImageData(0,0,t.width,t.height);return new e(n.width,n.height,n.data)}},{key:"createFrom",value:function(t,n){var r=(0,v.Z)(t);return Object.assign(r,{parent:t,position:[0,0]},n),new e(r)}}]),e}(Symbol.toStringTag);(0,d.Z)(y),(0,i.Z)(y),(0,s.Z)(y),y.prototype.checkProcessable=o.Z,y.prototype.getRGBAData=c.Z,y.load=f.Z,y.extendMethod=u.s,y.extendProperty=u.w,(0,p.Z)(y)},38219:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(40049),a=n.n(r);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useAlpha,n=void 0===e||e,r=t.nbSlots,i=void 0===r?512:r;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var o=Math.log(i)/Math.log(8);if(o!==Math.floor(o))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");for(var s=this.bitDepth-o,u=this.data,c=a()(Math.pow(8,o),0),l=Math.pow(2,2*o),h=Math.pow(2,o),f=0;f<u.length;f+=this.channels){var d=(u[f]>>s)*l+(u[f+1]>>s)*h+(u[f+2]>>s);n&&this.alpha?c[d]+=u[f+this.channels-1]/this.maxValue:c[d]++}return c}},14490:function(t,e,n){"use strict";function r(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).alpha,e=void 0===t?1:t;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var n=0;if(void 0!==e){for(var r=this.components;r<this.data.length;r+=this.channels)this.data[r]===e&&n++;return n}return this.size}n.d(e,{Z:function(){return r}})},12694:function(t,e,n){"use strict";function r(){this.checkProcessable("extendedPoints",{bitDepth:[1]});for(var t=[],e=0;e<this.height;e++)for(var n=0;n<this.width;n++)if(1===this.getBitXY(n,e))for(t.push([n,e]),1!==this.getBitXY(n+1,e)?(t.push([n+1,e]),t.push([n+1,e+1]),1!==this.getBitXY(n,e+1)&&t.push([n,e+1])):1!==this.getBitXY(n,e+1)&&(t.push([n,e+1]),t.push([n+1,e+1]));n<this.width-2&&1===this.getBitXY(n+1,e)&&1===this.getBitXY(n+2,e);)n++;return t}n.d(e,{Z:function(){return r}})},95391:function(t,e,n){"use strict";n.d(e,{g:function(){return u},o:function(){return s}});var r=n(47390),a=n.n(r),i=n(40049),o=n.n(i);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.maxSlots,n=void 0===e?256:e,r=t.channel,a=t.useAlpha,i=void 0===a||a;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===r){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}return c.call(this,r,{useAlpha:i,maxSlots:n})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.maxSlots,n=void 0===e?256:e,r=t.useAlpha,a=void 0===r||r;this.checkProcessable("getHistograms",{bitDepth:[8,16]});for(var i=new Array(a?this.components:this.channels),o=0;o<i.length;o++)i[o]=c.call(this,o,{useAlpha:a,maxSlots:n});return i}function c(t,e){var n=e.useAlpha,r=e.maxSlots;if(1===this.bitDepth){for(var i=[0,0],s=0;s<this.height;s++)for(var u=0;u<this.width;u++){var c=this.getBitXY(s,u);0===c?i[0]+=1:1===c&&(i[1]+=1)}return i}var l=Math.log2(r);if(!a()(l))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var h=0;this.bitDepth>l&&(h=this.bitDepth-l);var f=this.data,d=o()(Math.pow(2,Math.min(this.bitDepth,l)),0);if(n&&this.alpha)for(var p=this.channels-t-1,v=t;v<f.length;v+=this.channels)d[f[v]>>h]+=f[v+p]/this.maxValue;else for(var g=t;g<f.length;g+=this.channels)d[f[g]>>h]++;return d}},45613:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mask,n=t.region,r=void 0===n?3:n,a=t.removeClosePoints,i=void 0===a?0:a,o=t.invert,s=void 0!==o&&o,u=t.maxEquals,c=void 0===u?2:u,l=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1});for(var h=s?0:1,f=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],d=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],p=(r*=4)<=8?1:2,v=[],g=p;g<l.height-p;g++)for(var m=p;m<l.width-p;m++)if(!e||e.getBitXY(m,g)===h){for(var y=0,b=0,w=l.data[m+g*l.width],x=0;x<r;x++)s?l.data[m+f[x]+(g+d[x])*l.width]>w&&y++:l.data[m+f[x]+(g+d[x])*l.width]<w&&y++,l.data[m+f[x]+(g+d[x])*l.width]===w&&b++;y+b===r&&b<=c&&v.push([m,g])}if(i>0)for(var k=0;k<v.length;k++)for(var I=k+1;I<v.length;I++)Math.sqrt(Math.pow(v[k][0]-v[I][0],2)+Math.pow(v[k][1]-v[I][1],2))<i&&(v[k][0]=v[k][0]+v[I][0]>>1,v[k][1]=v[k][1]+v[I][1]>>1,v.splice(I,1),I--);return v}n.d(e,{Z:function(){return r}})},23785:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(40049),a=n.n(r);function i(){this.checkProcessable("max",{bitDepth:[8,16,32]});for(var t=a()(this.channels,-1/0),e=0;e<this.data.length;e+=this.channels)for(var n=0;n<this.channels;n++)this.data[e+n]>t[n]&&(t[n]=this.data[e+n]);return t}},76385:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(68666);function a(){for(var t=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(t.length),n=0;n<t.length;n++){var a=t[n];e[n]=(0,r.J)(a)}return e}},13371:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(68666);function a(){for(var t=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(t.length),n=0;n<t.length;n++){var a=t[n];e[n]=(0,r.C)(a)}return e}},15467:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(40049),a=n.n(r);function i(){this.checkProcessable("min",{bitDepth:[8,16,32]});for(var t=a()(this.channels,1/0),e=0;e<this.data.length;e+=this.channels)for(var n=0;n<this.channels;n++)this.data[e+n]<t[n]&&(t[n]=this.data[e+n]);return t}},50997:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(94640),a=n(92858);function i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).originalPoints,e=void 0===t?a.Z.call(this):t;if(0===e.length)return[];if(1===e.length)return[e[0],e[0],e[0],e[0]];for(var n,i=new Array(e.length),s=1/0,u=0,c=0;c<i.length;c++){var l=o(e[c],e[(c+1)%i.length]);(0,r.U1)(-l,e,i);for(var h=i[c][0],f=i[c][1],d=i[(c+1)%i.length][0],p=i[(c+1)%i.length][1],v=!0,g=0,m=0,y=0,b=0;b<i.length;b++){var w=(i[b][0]-h)/(d-h);!0===v?(v=!1,g=w,m=w):(w<g&&(g=w),w>m&&(m=w));var x=(-(d-h)*i[b][1]+d*f-p*h)/(d-h);Math.abs(x)>Math.abs(y)&&(y=x)}var k=[h+g*(d-h),f],I=[h+m*(d-h),f],S=Math.abs(y*(g-m)*(d-h));S<s&&(u=l,s=S,n=[k,I,[I[0],I[1]-y],[k[0],k[1]-y]])}return(0,r.U1)(u,n,n),n}function o(t,e){var n=(0,r.e5)(e,t),a=(0,r.Fv)(n),i=Math.acos(a[0]);return a[1]<0?-i:i}},18455:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.checkProcessable("getMoment",{bitDepth:[1]});for(var n=0,r=0;r<this.width;r++)for(var a=0;a<this.height;a++)1===this.getBitXY(r,a)&&(n+=Math.pow(r,t)*Math.pow(a,e));return n}n.d(e,{Z:function(){return r}})},92858:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(65960);function a(){return(0,r.Z)(this.extendedPoints,{sorted:!1})}},44647:function(t,e,n){"use strict";function r(){this.checkProcessable("points",{bitDepth:[1]});for(var t=[],e=0;e<this.width;e++)for(var n=0;n<this.height;n++)1===this.getBitXY(e,n)&&t.push([e,n]);return t}n.d(e,{Z:function(){return r}})},2318:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this===t)return[0,0];for(var n=[0,0],r=this;r;){if(r===t)return n;r.position&&(n[0]+=r.position[0],n[1]+=r.position[1]),r=r.parent}return!!e.defaultFurther&&n}n.d(e,{Z:function(){return r}})},56030:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(40049),a=n.n(r);function i(){this.checkProcessable("sum",{bitDepth:[8,16]});for(var t=a()(this.channels,0),e=0;e<this.data.length;e+=this.channels)for(var n=0;n<this.channels;n++)t[n]+=this.data[e+n];return t}},15095:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r={getBit:function(t){return this.data[a(t)]&1<<i(t)?1:0},setBit:function(t){this.data[a(t)]|=1<<i(t)},clearBit:function(t){this.data[a(t)]&=~(1<<i(t))},toggleBit:function(t){this.data[a(t)]^=1<<i(t)},getBitXY:function(t,e){return t>=this.width||e>=this.height?0:this.getBit(e*this.width+t)},setBitXY:function(t,e){this.setBit(e*this.width+t)},clearBitXY:function(t,e){this.clearBit(e*this.width+t)},toggleBitXY:function(t,e){this.toggleBit(e*this.width+t)}};function a(t){return t>>3}function i(t){return 7-(7&t)}function o(t){for(var e in r)t.prototype[e]=r[e]}},62383:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bitDepth,r=e.alpha,a=e.colorModel,i=e.components,o=e.channels;if("string"!==typeof t||0===t.length)throw new TypeError("processName must be a string");if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.bitDepth)))throw new TypeError("The process: ".concat(t," can only be applied if bit depth is in: ").concat(n));if(r&&(Array.isArray(r)||(r=[r]),!r.includes(this.alpha)))throw new TypeError("The process: ".concat(t," can only be applied if alpha is in: ").concat(r));if(a&&(Array.isArray(a)||(a=[a]),!a.includes(this.colorModel)))throw new TypeError("The process: ".concat(t," can only be applied if color model is in: ").concat(a));if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.components))){var s="The process: ".concat(t," can only be applied if the number of components is in: ").concat(i);throw 1===i.length&&1===i[0]?new TypeError("".concat(s,'.\rYou should transform your image using "image.grey()" before applying the algorithm.')):new TypeError(s)}if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.channels)))throw new TypeError("The process: ".concat(t," can only be applied if the number of channels is in: ").concat(o))}n.d(e,{Z:function(){return r}})},80603:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r=n(70804),a=n(95820),i=n(88545),o=n(91711),s=n(71684),u=n(99262),c=n(27773),l=n(17410);function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={width:t.width,height:t.height,data:t.getRGBAData()};return(0,s.encode)(n,e.quality).data}function f(t,e){var n={width:t.width,height:t.height,channels:t.channels,depth:t.bitDepth,data:t.data};return 1!==n.depth&&32!==n.depth||(n.depth=8,n.channels=4,n.data=t.getRGBAData()),(0,o.cv)(n,e)}var d={save:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.useCanvas,o=void 0!==a&&a,s=n.encoder,u=void 0===s?void 0:s,l=n.format;if(!l){var d=(0,r.Z)(/\.([a-zA-Z]+)$/,{format:1}).exec(t);d&&(l=d.groups.format.toLowerCase())}if(!l)throw new Error("file format not provided");return new Promise((function(n,r){var a,s;switch(l.toLowerCase()){case"png":o?a=e.getCanvas().pngStream():s=f(e,u);break;case"jpg":case"jpeg":o?a=e.getCanvas().jpegStream():s=h(e,u);break;case"bmp":s=(0,i.c)(e,u);break;default:throw new RangeError("invalid output format: ".concat(l))}if(a){var d=(0,c.Is)(t);d.on("finish",n),d.on("error",r),a.pipe(d)}else s&&(0,c.NC)(t,s,(function(t){t?r(t):n()}))}))},toDataURL:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"===typeof t&&(e=t,t="image/png");var n=e,r=n.useCanvas,a=void 0!==r&&r,o=n.encoder,s=void 0===o?void 0:o;function c(e,n){var r=e(n,s);return(0,u.wi)(r,t)}return"image/bmp"===(t=(0,l.o)(t))?c(i.c,this):"image/png"!==t||a?"image/jpeg"!==t||a?this.getCanvas().toDataURL(t):c(h,this):c(f,this)},toBuffer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.format,n=void 0===e?"png":e,r=t.encoder,a=void 0===r?void 0:r;switch(n.toLowerCase()){case"png":return f(this,a);case"jpeg":case"jpg":return h(this,a);case"bmp":return(0,i.c)(this,a);default:throw new RangeError("invalid output format: ".concat(n))}},toBase64:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.async)return this.toDataURL(t,e).then((function(t){return t.substring(t.indexOf(",")+1)}));var n=this.toDataURL(t,e);return n.substring(n.indexOf(",")+1)},toBlob:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8;return(0,a._c)(this.getCanvas(),t,e)},getCanvas:function(){var t=new c.RT(this.getRGBAData({clamped:!0}),this.width,this.height),e=(0,c.vL)(this.width,this.height);return e.getContext("2d").putImageData(t,0,0),e}};function p(t){for(var e in d)t.prototype[e]=d[e]}},74752:function(t,e,n){"use strict";n.d(e,{s:function(){return u},w:function(){return c}});var r=n(93433),a=n(15357),i=n.n(a),o=n(80712),s={configurable:!0,enumerable:!1,get:void 0};function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.inPlace,i=void 0!==a&&a,s=n.returnThis,u=void 0===s||s,c=n.partialArgs,l=void 0===c?[]:c;return o.Z.prototype[t]=i?function(){this.computed=null;for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=e.apply(this,[].concat((0,r.Z)(l),n));return u?this:i}:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.apply(this,[].concat((0,r.Z)(l),n))},o.Z}function c(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).partialArgs,r=void 0===n?[]:n;return s.get=function(){if(null===this.computed)this.computed={};else if(i()(t,this.computed))return this.computed[t];var n=e.apply(this,r);return this.computed[t]=n,n},Object.defineProperty(o.Z.prototype,t,s),o.Z}},95024:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(93433),a=n(77171);function i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clamped;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});var e=this.width*this.height*4,n=t?new Uint8ClampedArray(e):new Uint8Array(e);return 1===this.bitDepth?function(t,e){for(var n=0;n<t.size;n++){var r=t.getBit(n);e[4*n]=255*r,e[4*n+1]=255*r,e[4*n+2]=255*r}}(this,n):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?function(t,e){for(var n=t.min[0],r=t.max[0]-n,a=0;a<t.size;a++){var i=Math.floor(255*(t.data[a]-n)/r);e[4*a]=i,e[4*a+1]=i,e[4*a+2]=i}}(this,n):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[a.RGB]}),function(t,e){for(var n=Math.min.apply(Math,(0,r.Z)(t.min)),a=Math.max.apply(Math,(0,r.Z)(t.max))-n,i=0;i<t.size;i++){var o=Math.floor(255*(t.data[3*i]-n)/a),s=Math.floor(255*(t.data[3*i+1]-n)/a),u=Math.floor(255*(t.data[3*i+2]-n)/a);e[4*i]=o,e[4*i+1]=s,e[4*i+2]=u}}(this,n))):1===this.components?function(t,e){for(var n=0;n<t.size;n++)e[4*n]=t.data[n*t.channels]>>>t.bitDepth-8,e[4*n+1]=t.data[n*t.channels]>>>t.bitDepth-8,e[4*n+2]=t.data[n*t.channels]>>>t.bitDepth-8}(this,n):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[a.RGB]}),function(t,e){for(var n=0;n<t.size;n++)e[4*n]=t.data[n*t.channels]>>>t.bitDepth-8,e[4*n+1]=t.data[n*t.channels+1]>>>t.bitDepth-8,e[4*n+2]=t.data[n*t.channels+2]>>>t.bitDepth-8}(this,n)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),function(t,e){for(var n=0;n<t.size;n++)e[4*n+3]=t.data[n*t.channels+t.components]>>t.bitDepth-8}(this,n)):function(t,e){for(var n=0;n<t.size;n++)e[4*n+3]=255}(this,n),n}},26581:function(t,e,n){"use strict";n.d(e,{G:function(){return l},ZK:function(){return o},ZN:function(){return c},xx:function(){return u}});var r=n(77171),a=n(12753),i={};function o(t){var e=i[t];if(!e)throw new RangeError("invalid image kind: ".concat(t));return e}i[a.$h]={components:1,alpha:0,bitDepth:1,colorModel:r.GREY},i[a.XE]={components:1,alpha:1,bitDepth:8,colorModel:r.GREY},i[a.s7]={components:1,alpha:0,bitDepth:8,colorModel:r.GREY},i[a.VS]={components:3,alpha:1,bitDepth:8,colorModel:r.RGB},i[a.eX]={components:3,alpha:0,bitDepth:8,colorModel:r.RGB},i[a.NC]={components:4,alpha:0,bitDepth:8,colorModel:r.CMYK},i[a.Hq]={components:4,alpha:1,bitDepth:8,colorModel:r.CMYK};var s=[1,8,16,32];function u(t){var e=t.components,n=t.alpha,a=t.bitDepth,i=t.colorModel;if(!Number.isInteger(e)||e<=0)throw new RangeError("invalid components: ".concat(e,". Must be a positive integer"));if(0!==n&&1!==n&&"boolean"!==typeof n)throw new TypeError("invalid alpha: ".concat(n,": must be a boolean, 0 or 1"));if(!s.includes(a))throw new RangeError("invalid bitDepth: ".concat(a,". Must be one of ").concat(s.join(", ")));if(!r[i])throw new RangeError("invalid colorModel: ".concat(i,". Must be one of ").concat(Object.keys(r).join(", ")))}function c(t,e,n){var r=e*t;return 1===n&&(r=Math.ceil(r/8)),r}function l(t,e,n,r,a,i){var o,s=r*t;switch(a){case 1:o=new Uint8Array(Math.ceil(s/8));break;case 8:o=new Uint8Array(s);break;case 16:o=new Uint16Array(s);break;case 32:o=new Float32Array(s);break;default:throw new Error("Cannot create pixel array for bit depth ".concat(a))}if(n)for(var u=e;u<o.length;u+=r)o[u]=i;return o}},12753:function(t,e,n){"use strict";n.d(e,{$h:function(){return r},Hq:function(){return c},NC:function(){return u},VS:function(){return s},XE:function(){return i},eX:function(){return o},s7:function(){return a}});var r="BINARY",a="GREY",i="GREYA",o="RGB",s="RGBA",u="CMYK",c="CMYKA"},32198:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(46984),a=n(91711),i=n(80946),o=n.n(i),s=n(71684),u=n(3334),c=n(27473),l=n(99262),h=n(80712),f=n(77171),d=n(27773),p=/^data:[a-z]+\/(?:[a-z]+);base64,/;function v(t,e){if("string"===typeof t)return function(t,e){var n,r=t.slice(0,64).match(p);n=null!==r?Promise.resolve((0,l.Jx)(t.slice(r[0].length))):(0,d.c6)(t,e);return n.then((function(n){return g(new Uint8Array(n),r?t:void 0,e&&e.ignorePalette)}))}(t,e);if(t instanceof ArrayBuffer)return Promise.resolve(g(new Uint8Array(t),void 0,e&&e.ignorePalette));if(t.buffer)return Promise.resolve(g(t,void 0,e&&e.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function g(t,e,n){var i=o()(t);if(i)switch(i.mime){case"image/png":return function(t){var e,n=(0,a.Jx)(t),r=n.channels,i=0;2===r||4===r?(e=r-1,i=1):e=r;if(n.palette)return function(t){for(var e=t.width*t.height,n=t.palette[0].length,r=new Uint8Array(e*n),a=8/t.depth,i=t.depth<8?a:1,o=parseInt("1".repeat(t.depth),2),s=4===n,u=0,c=0;c<e;c++){var l=Math.floor(c/i),f=t.data[l];t.depth<8&&(f=f>>>t.depth*(a-1-c%a)&o);var d=t.palette[f];r[u++]=d[0],r[u++]=d[1],r[u++]=d[2],s&&(r[u++]=d[3])}return new h.Z(t.width,t.height,r,{components:3,alpha:s,bitDepth:8})}(n);return new h.Z(n.width,n.height,n.data,{components:e,alpha:i,bitDepth:n.depth})}(t);case"image/jpeg":return function(t){var e,n=(0,r.decode)(t);n.exif&&(e=m(n.exif));var a=(0,s.decode)(t,{useTArray:!0,maxMemoryUsageInMB:1024}),i=new h.Z(a.width,a.height,a.data,{meta:e});if(e&&e.tiff.tags.Orientation){var o=e.tiff.tags.Orientation;o>2&&(i=i.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[o])),[2,4,5,7].includes(o)&&(i=i.flipX())}return i}(t);case"image/tiff":return function(t,e){var n=(0,u.Jx)(t);return 1===n.length?y(n[0],e):new c.Z(n.map((function(t){return y(t,e)})))}(t,n);default:return b(f(i.mime))}return b(f("application/octet-stream"));function f(n){return e||(0,l.wi)(t,n)}}function m(t){var e={tiff:{fields:t.fields,tags:t.map}};return t.exif&&(e.exif=t.exif),t.gps&&(e.gps=t.gps),e}function y(t,e){if(e||3!==t.type)return new h.Z(t.width,t.height,t.data,{components:2===t.type?3:1,alpha:t.alpha,colorModel:2===t.type?f.RGB:f.GREY,bitDepth:t.bitsPerSample.length?t.bitsPerSample[0]:t.bitsPerSample,meta:m(t)});for(var n=new Uint16Array(3*t.width*t.height),r=t.palette,a=0,i=0;i<t.data.length;i++){var o=r[t.data[i]];n[a++]=o[0],n[a++]=o[1],n[a++]=o[2]}return new h.Z(t.width,t.height,n,{components:3,alpha:t.alpha,colorModel:f.RGB,bitDepth:16,meta:m(t)})}function b(t,e){return e=e||{},new Promise((function(n,r){var a=new d.SY;a.onload=function(){var t=a.width,r=a.height,i=(0,d.vL)(t,r).getContext("2d");i.drawImage(a,0,0,t,r);var o=i.getImageData(0,0,t,r).data;n(new h.Z(t,r,o,e))},a.onerror=function(){r(new Error("Could not load ".concat(t)))},a.src=t}))}},17410:function(t,e,n){"use strict";function r(t){return t.includes("/")||(t="image/".concat(t)),t}n.d(e,{o:function(){return r}})},78497:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r={getValueXY:function(t,e,n){return this.data[(e*this.width+t)*this.channels+n]},setValueXY:function(t,e,n,r){return this.data[(e*this.width+t)*this.channels+n]=r,this.computed=null,this},getValue:function(t,e){return this.data[t*this.channels+e]},setValue:function(t,e,n){return this.data[t*this.channels+e]=n,this.computed=null,this},getPixelXY:function(t,e){return this.getPixel(e*this.width+t)},setPixelXY:function(t,e,n){return this.setPixel(e*this.width+t,n)},getPixel:function(t){for(var e=new Array(this.channels),n=t*this.channels,r=0;r<this.channels;r++)e[r]=this.data[n+r];return e},setPixel:function(t,e){for(var n=t*this.channels,r=0;r<e.length;r++)this.data[n+r]=e[r];return this.computed=null,this}};function a(t){for(var e in r)t.prototype[e]=r[e]}},43243:function(t,e,n){"use strict";n.d(e,{Z:function(){return Nt}});var r=n(63711),a=n(28028),i=n(25696),o=n(90477),s=n(19950),u=n(2691),c=n(87849),l=n(74192),h=n(45219),f=n(69579),d=n(76336),p=n(17790),v=n(37160),g=n(72877),m=n(93960),y=n(48901),b=n(62205),w=n(12554),x=n(76250),k=n(13001),I=n(55229),S=n(86155),_=n(80689),C=n(77221),E=n(61792),A=n(71197),T=n(19833),N=n(63465),D=n(92323),R=n(79644),Z=n(47656),M=n(44096),F=n(21040),O=n(58962),B=n(39337),L=n(77916),P=n(58329),U=n(50725),z=n(88492),W=n(31178),V=n(89604),G=n(65029),j=n(65501),H=n(71973),X=n(12203),q=n(93407),Y=n(82881),K=n(26461),Q=n(5412),J=n(63290),$=n(9223),tt=n(23455),et=n(23017),nt=n(51867),rt=n(92893),at=n(4309),it=n(52143),ot=n(85060),st=n(35622),ut=n(38721),ct=n(79114),lt=n(61186),ht=n(79355),ft=n(89563),dt=n(99595),pt=n(54490),vt=n(95391),gt=n(38219),mt=n(15467),yt=n(23785),bt=n(56030),wt=n(18455),xt=n(45613),kt=n(76385),It=n(13371),St=n(44647),_t=n(12694),Ct=n(2318),Et=n(14490),At=n(92858),Tt=n(50997);function Nt(t){var e={inPlace:!0};t.extendMethod("invert",a.Z),t.extendMethod("abs",r.Z),t.extendMethod("level",d.Z,e),t.extendMethod("add",p.Z,e),t.extendMethod("subtract",v.Z,e),t.extendMethod("subtractImage",g.Z),t.extendMethod("multiply",y.Z,e),t.extendMethod("divide",b.Z,e),t.extendMethod("hypotenuse",m.Z),t.extendMethod("background",w.Z),t.extendMethod("flipX",i.Z),t.extendMethod("flipY",o.Z),t.extendMethod("blurFilter",s.Z),t.extendMethod("medianFilter",u.Z),t.extendMethod("gaussianFilter",c.Z),t.extendMethod("sobelFilter",l.Z),t.extendMethod("gradientFilter",f.Z),t.extendMethod("scharrFilter",h.Z),t.extendMethod("dilate",x.Z),t.extendMethod("erode",k.Z),t.extendMethod("open",I.Z),t.extendMethod("close",S.Z),t.extendMethod("topHat",_.Z),t.extendMethod("blackHat",C.Z),t.extendMethod("morphologicalGradient",E.Z),t.extendMethod("warpingFourPoints",A.Z),t.extendMethod("crop",T.Z),t.extendMethod("cropAlpha",N.Z),t.extendMethod("resize",D.Z).extendMethod("scale",D.Z),t.extendMethod("hsv",R.Z),t.extendMethod("hsl",Z.Z),t.extendMethod("cmyk",M.Z),t.extendMethod("rgba8",F.Z),t.extendMethod("grey",O.Z).extendMethod("gray",O.Z),t.extendMethod("mask",B.Z),t.extendMethod("pad",L.Z),t.extendMethod("colorDepth",P.Z),t.extendMethod("setBorder",W.Z,e),t.extendMethod("rotate",U.U1),t.extendMethod("rotateLeft",U.Bg),t.extendMethod("rotateRight",U.rs),t.extendMethod("insert",z.Z),t.extendMethod("getRow",K.Z),t.extendMethod("getColumn",Q.Z),t.extendMethod("getMatrix",J.Z),t.extendMethod("setMatrix",$.Z),t.extendMethod("getPixelsArray",tt.Z),t.extendMethod("getIntersection",et.Z),t.extendMethod("getClosestCommonParent",nt.Z),t.extendMethod("getThreshold",rt.Z),t.extendMethod("split",V.Z),t.extendMethod("getChannel",G.Z),t.extendMethod("combineChannels",j.Z),t.extendMethod("setChannel",H.Z),t.extendMethod("getSimilarity",X.Z),t.extendMethod("getPixelsGrid",q.Z),t.extendMethod("getBestMatch",Y.Z),t.extendMethod("cannyEdge",at.Z),t.extendMethod("convolution",it.Z),t.extendMethod("extract",ot.Z),t.extendMethod("floodFill",st.Z),t.extendMethod("paintLabels",ut.Z,e),t.extendMethod("paintMasks",ct.Z,e),t.extendMethod("paintPoints",lt.Z,e),t.extendMethod("paintPolyline",ht.Z,e),t.extendMethod("paintPolylines",ft.Z,e),t.extendMethod("paintPolygon",dt.Z,e),t.extendMethod("paintPolygons",pt.Z,e),t.extendMethod("countAlphaPixels",Et.Z),t.extendMethod("monotoneChainConvexHull",At.Z),t.extendMethod("minimalBoundingRectangle",Tt.Z),t.extendMethod("getHistogram",vt.o).extendProperty("histogram",vt.o),t.extendMethod("getHistograms",vt.g).extendProperty("histograms",vt.g),t.extendMethod("getColorHistogram",gt.Z).extendProperty("colorHistogram",gt.Z),t.extendMethod("getMin",mt.Z).extendProperty("min",mt.Z),t.extendMethod("getMax",yt.Z).extendProperty("max",yt.Z),t.extendMethod("getSum",bt.Z).extendProperty("sum",bt.Z),t.extendMethod("getMoment",wt.Z).extendProperty("moment",wt.Z),t.extendMethod("getLocalMaxima",xt.Z),t.extendMethod("getMedian",It.Z).extendProperty("median",It.Z),t.extendMethod("getMean",kt.Z).extendProperty("mean",kt.Z),t.extendMethod("getPoints",St.Z).extendProperty("points",St.Z),t.extendMethod("getExtendedPoints",_t.Z).extendProperty("extendedPoints",_t.Z),t.extendMethod("getRelativePosition",Ct.Z)}},63711:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(58433);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkProcessable("abs",{bitDepth:[32]});var e=(0,r.b)(this,t);return function(t,e){for(var n=0;n<t.data.length;n++)e.data[n]=Math.abs(t.data[n])}(this,e),e}},17790:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(24073),a=n(4976);function i(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),e=(0,r.Q)(this,{channels:e}),t=(0,a.a)(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("add: the data size is different");for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]+t[o+i]>>0))}else for(var s=0;s<e.length;s++)for(var u=e[s],c=0;c<this.data.length;c+=this.channels)this.data[c+u]=Math.min(this.maxValue,this.data[c+u]+t>>0);return this}},12554:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(78148),a=n(80712);function i(t,e,n){for(var i=new r.f6(t,e,n),o=new Array(this.size),s=0;s<this.width;s++)for(var u=0;u<this.height;u++)o[u*this.width+s]=[s,u];for(var c=i.predict(o),l=a.Z.createFrom(this),h=0;h<this.size;h++)l.data[h]=Math.min(this.maxValue,Math.max(0,c[h][0]));return l}},19950:function(t,e,n){"use strict";function r(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).radius,e=void 0===t?1:t;if(e<1)throw new Error("radius must be greater than 1");for(var n=2*e+1,r=new Array(n),a=0;a<n;a++){r[a]=new Array(n);for(var i=0;i<n;i++)r[a][i]=1/(n*n)}return this.convolution(r)}n.d(e,{Z:function(){return r}})},62205:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(24073),a=n(4976);function i(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),e=(0,r.Q)(this,{channels:e}),t=(0,a.a)(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("divide: the: the data size is different");for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]/t[o+i]>>0))}else for(var s=0;s<e.length;s++)for(var u=e[s],c=0;c<this.data.length;c+=this.channels)this.data[c+u]=Math.min(this.maxValue,this.data[c+u]/t>>0);return this}},25696:function(t,e,n){"use strict";function r(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var t=0;t<this.height;t++)for(var e=t*this.width*this.channels,n=0;n<Math.floor(this.width/2);n++)for(var r=n*this.channels+e,a=(this.width-n-1)*this.channels+e,i=0;i<this.channels;i++){var o=this.data[r+i];this.data[r+i]=this.data[a+i],this.data[a+i]=o}return this}n.d(e,{Z:function(){return r}})},90477:function(t,e,n){"use strict";function r(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var t=0;t<Math.floor(this.height/2);t++)for(var e=0;e<this.width;e++)for(var n=e*this.channels+t*this.width*this.channels,r=e*this.channels+(this.height-1-t)*this.channels*this.width,a=0;a<this.channels;a++){var i=this.data[n+a];this.data[n+a]=this.data[r+a],this.data[r+a]=i}return this}n.d(e,{Z:function(){return r}})},87849:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.radius,n=void 0===e?1:e,r=t.sigma,a=t.channels,i=t.border,o=void 0===i?"copy":i;this.checkProcessable("gaussian",{bitDepth:[8,16]});var s=function(t,e){for(var n=2*t+1,r=new Array(n),a=e||.3*(.5*(n-1)-1)+.8,i=-.5/(a*a),o=0,s=0;s<n;s++){var u=s-t,c=Math.exp(i*u*u);r[s]=c,o+=c}for(var l=0;l<n;l++)r[l]/=o;return r}(n,r);return this.convolution([s,s],{border:o,channels:a,algorithm:"separable"})}n.d(e,{Z:function(){return r}})},69579:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(52143);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.direction,n=void 0===e?"xy":e,a=t.border,i=void 0===a?"copy":a,o=t.kernelX,s=t.kernelY,u=t.channels,c=t.bitDepth,l=void 0===c?this.bitDepth:c;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),n){case"x":if(!o)throw new Error("kernelX option is missing");return r.Z.call(this,o,{channels:u,border:i,bitDepth:l});case"y":if(!s)throw new Error("kernelY option is missing");return r.Z.call(this,s,{channels:u,border:i,bitDepth:l});case"xy":if(!o)throw new Error("kernelX option is missing");if(!s)throw new Error("kernelY option is missing");var h=r.Z.call(this,o,{channels:u,border:i,bitDepth:32}),f=r.Z.call(this,s,{channels:u,border:i,bitDepth:32});return h.hypotenuse(f,{bitDepth:l,channels:u});default:throw new Error("Unknown parameter direction: ".concat(n))}}},93960:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(24073),a=n(80712);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bitDepth,i=void 0===n?this.bitDepth:n,o=e.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==t.width||this.height!==t.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("hypotenuse: both images must have the same number of channels");var s=a.Z.createFrom(this,{bitDepth:i});o=(0,r.Q)(this,{channels:o});for(var u=s.isClamped,c=0;c<o.length;c++)for(var l=o[c];l<this.data.length;l+=this.channels){var h=Math.hypot(this.data[l],t.data[l]);s.data[l]=u?Math.min(Math.max(Math.round(h),0),s.maxValue):h}return s}},28028:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(81370),a=n(58433);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkProcessable("invert",{bitDepth:[1,8,16]});var e=(0,a.b)(this,t);return 1===this.bitDepth?function(t,e){for(var n=0;n<t.data.length;n++)e.data[n]=~t.data[n]}(this,e):(!function(t,e){for(var n=0;n<t.data.length;n+=t.channels)for(var r=0;r<t.components;r++)e.data[n+r]=t.maxValue-t.data[n+r]}(this,e),this!==e&&(0,r.Z)(this,e)),e}},76336:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(40049),a=n.n(r),i=n(24073);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.algorithm,n=void 0===e?"range":e,r=t.channels,o=t.min,s=void 0===o?this.min:o,u=t.max,c=void 0===u?this.max:u;if(this.checkProcessable("level",{bitDepth:[8,16,32]}),(r=(0,i.Q)(this,{channels:r})).length!==this.channel&&(Array.isArray(s)&&s.length===this.channels&&(s=s.filter((function(t,e){return r.includes(e)}))),Array.isArray(c)&&c.length===this.channels&&(c=c.filter((function(t,e){return r.includes(e)})))),"range"!==n)throw new Error("level: algorithm not implement: ".concat(n));return s<0&&(s=0),c>this.maxValue&&(c=this.maxValue),Array.isArray(s)||(s=a()(r.length,s)),Array.isArray(c)||(c=a()(r.length,c)),function(t,e,n,r){for(var a=1e-5,i=new Array(r.length),o=0;o<r.length;o++)0===e[o]&&n[o]===t.maxValue||n[o]===e[o]?i[o]=0:i[o]=(t.maxValue+1-a)/(n[o]-e[o]),e[o]+=(.5-a/2)/i[o];for(var s=0;s<r.length;s++){var u=r[s];if(0!==i[s])for(var c=0;c<t.data.length;c+=t.channels)t.data[c+u]=Math.min(Math.max(0,(t.data[c+u]-e[s])*i[s]+.5|0),t.maxValue)}}(this,s,c,r),this}},2691:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(66425),a=n.n(r),i=n(24073),o=n(80712);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.radius,n=void 0===e?1:e,r=t.border,s=void 0===r?"copy":r,u=t.channels;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),n<1)throw new Error("radius must be greater than 0");u=(0,i.Q)(this,u,!0);for(var c=n,l=n,h=o.Z.createFrom(this),f=new Array((2*c+1)*(2*l+1)),d=0;d<u.length;d++)for(var p=u[d],v=l;v<this.height-l;v++)for(var g=c;g<this.width-c;g++){for(var m=0,y=-l;y<=l;y++)for(var b=-c;b<=c;b++){var w=((v+y)*this.width+g+b)*this.channels+p;f[m++]=this.data[w]}var x=(v*this.width+g)*this.channels+p;h.data[x]=a()(f)}if(this.alpha&&!u.includes(this.channels))for(var k=this.components;k<this.data.length;k+=this.channels)h.data[k]=this.data[k];return h.setBorder({size:[c,l],algorithm:s}),h}},48901:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(24073),a=n(4976);function i(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),t<=0)throw new Error("multiply: the value must be greater than 0");if(e=(0,r.Q)(this,{channels:e}),t=(0,a.a)(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("multiply: the data size is different");for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]*t[o+i]>>0))}else for(var s=0;s<e.length;s++)for(var u=e[s],c=0;c<this.data.length;c+=this.channels)this.data[c+u]=Math.min(this.maxValue,this.data[c+u]*t>>0);return this}},45219:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7225),a=n(69579);function i(t){return a.Z.call(this,Object.assign({},t,{kernelX:r.cm,kernelY:r.Ac}))}},74192:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7225),a=n(69579);function i(t){return a.Z.call(this,Object.assign({},t,{kernelX:r.Ds,kernelY:r.q_}))}},37160:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(24073),a=n(4976);function i(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),e=(0,r.Q)(this,{channels:e}),t=(0,a.a)(t),isNaN(t)){if(this.data.length!==t.length)throw new Error("subtract: the data size is different");for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]-t[o+i]>>0))}else for(var s=0;s<e.length;s++)for(var u=e[s],c=0;c<this.data.length;c+=this.channels)this.data[c+u]=Math.max(0,this.data[c+u]-t>>0);return this}},72877:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(24073);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.channels,a=e.absolute,i=void 0!==a&&a;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==t.width||this.height!==t.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("subtractImage: both images must have the same number of channels");var o=this.clone();n=(0,r.Q)(this,{channels:n});for(var s=0;s<n.length;s++)for(var u=n[s];u<this.data.length;u+=this.channels){var c=this.data[u]-t.data[u];o.data[u]=i?Math.abs(c):Math.max(c,0)}return o}},4118:function(t,e,n){"use strict";function r(t,e){if(e<0||e>=t.height)throw new RangeError("row must be included between 0 and ".concat(t.height-1,". Current value: ").concat(e))}function a(t,e){if(e<0||e>=t.width)throw new RangeError("column must be included between 0 and ".concat(t.width-1,". Current value: ").concat(e))}function i(t,e){if(e<0||e>=t.channels)throw new RangeError("channel must be included between 0 and ".concat(t.channels-1,". Current value: ").concat(e))}n.d(e,{KF:function(){return r},Nw:function(){return i},W7:function(){return a},Zq:function(){return s},a8:function(){return o}});var o={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function s(t){if("string"!==typeof t)throw new TypeError("interpolation must be a string");if(t=t.toLowerCase(),!o[t])throw new RangeError("invalid interpolation algorithm: ".concat(t));return o[t]}},24228:function(t,e,n){"use strict";function r(t,e){return Math.round(Math.min(Math.max(t,0),e.maxValue))}n.d(e,{u:function(){return r}})},82817:function(t,e,n){"use strict";function r(t,e,n,r){for(var a=t.width,i=t.height,o=e.width,s=t.channels,u=0;u<a;u++)for(var c=0;c<i;c++)for(var l=0;l<s;l++){var h=(c*a+u)*s+l,f=((r+c)*o+n+u)*s+l;e.data[f]=t.data[h]}}n.d(e,{Z:function(){return r}})},81370:function(t,e,n){"use strict";function r(t,e){if(1===t.alpha&&1===e.alpha)for(var n=0;n<t.size;n++)e.data[n*e.channels+e.components]=t.data[n*t.channels+t.components]}n.d(e,{Z:function(){return r}})},73487:function(t,e,n){"use strict";function r(t){return{width:t.width,height:t.height,components:t.components,alpha:t.alpha,colorModel:t.colorModel,bitDepth:t.bitDepth}}n.d(e,{Z:function(){return r}})},58433:function(t,e,n){"use strict";n.d(e,{W:function(){return i},b:function(){return o}});var r=n(80712),a=n(73487);function i(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.out;if(void 0===o)return i.copy?t.clone():r.Z.createFrom(t,n);if(!r.Z.isImage(o))throw new TypeError("out must be an Image object");var s=Object.assign((0,a.Z)(t),n);for(var u in s)if(o[u]!==s[u])throw new RangeError("cannot use out. Its ".concat(u,' must be "').concat(s[u],'" (found "').concat(o[u],'")'));return o}function o(t,e,n){if(void 0!==e.inPlace&&"boolean"!==typeof e.inPlace)throw new TypeError("inPlace option must be a boolean");if(e.inPlace){if(void 0!==e.out)throw new TypeError("out option must not be set if inPlace option is true");return t}return i(t,e,null,n)}},77171:function(t,e,n){"use strict";n.r(e),n.d(e,{CMYK:function(){return s},GREY:function(){return r},HSL:function(){return i},HSV:function(){return o},RGB:function(){return a}});var r="GREY",a="RGB",i="HSL",o="HSV",s="CMYK"},77221:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,r=t.iterations,a=void 0===r?1:r;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");for(var i=this,o=0;o<a;o++){var s=i.close({kernel:n});i=s.subtractImage(i,{absolute:!0})}return i}n.d(e,{Z:function(){return r}})},86155:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,r=t.iterations,a=void 0===r?1:r;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");for(var i=this,o=0;o<a;o++)i=i.dilate({kernel:n}).erode({kernel:n});return i}n.d(e,{Z:function(){return r}})},76250:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(37762),a=n(80712);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,i=t.iterations,l=void 0===i?1:i;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");var h,f=!0,d=(0,r.Z)(n);try{t:for(d.s();!(h=d.n()).done;){var p,v=h.value,g=(0,r.Z)(v);try{for(g.s();!(p=g.n()).done;){if(1!==p.value){f=!1;break t}}}catch(w){g.e(w)}finally{g.f()}}}catch(w){d.e(w)}finally{d.f()}for(var m=this,y=0;y<l;y++)if(1===this.bitDepth)if(f){var b=m.clone();m=c(m,b,n.length,n[0].length)}else{m=u(m,a.Z.createFrom(m),n)}else if(f){m=s(m,a.Z.createFrom(m),n.length,n[0].length)}else{m=o(m,a.Z.createFrom(m),n)}return m}function o(t,e,n){for(var r=n.length,a=n[0].length,i=(r-1)/2,o=(a-1)/2,s=0;s<t.height;s++)for(var u=0;u<t.width;u++){for(var c=0,l=0;l<a;l++)for(var h=0;h<r;h++)if(1===n[h][l]){var f=h-i+u,d=l-o+s;if(!(f<0||d<0||f>=t.width||d>=t.height)){var p=t.getValueXY(f,d,0);p>c&&(c=p)}}e.setValueXY(u,s,0,c)}return e}function s(t,e,n,r){for(var a=(n-1)/2,i=(r-1)/2,o=[],s=0;s<t.width;s++)o.push(0);for(var u=0;u<t.height;u++){for(var c=0;c<t.width;c++){for(var l=0,h=Math.max(0,u-i);h<Math.min(t.height,u+i+1);h++){var f=t.getValueXY(c,h,0);f>l&&(l=f)}o[c]=l}for(var d=0;d<t.width;d++){for(var p=0,v=Math.max(0,d-a);v<Math.min(t.width,d+a+1);v++)o[v]>p&&(p=o[v]);e.setValueXY(d,u,0,p)}}return e}function u(t,e,n){for(var r=n.length,a=n[0].length,i=(r-1)/2,o=(a-1)/2,s=0;s<t.height;s++)for(var u=0;u<t.width;u++){var c=0;t:for(var l=0;l<a;l++)for(var h=0;h<r;h++)if(1===n[h][l]){var f=h-i+u,d=l-o+s;if(!(d<0||f<0||f>=t.width||d>=t.height))if(1===t.getBitXY(f,d)){c=1;break t}}1===c&&e.setBitXY(u,s)}return e}function c(t,e,n,r){for(var a=(n-1)/2,i=(r-1)/2,o=[],s=0;s<t.width;s++)o.push(1);for(var u=0;u<t.height;u++){for(var c=0;c<t.width;c++){o[c]=0;for(var l=Math.max(0,u-i);l<Math.min(t.height,u+i+1);l++)if(1===t.getBitXY(c,l)){o[c]=1;break}}for(var h=0;h<t.width;h++)if(1!==e.getBitXY(h,u))for(var f=Math.max(0,h-a);f<Math.min(t.width,h+a+1);f++)if(1===o[f]){e.setBitXY(h,u);break}}return e}},13001:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(37762),a=n(80712);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,i=t.iterations,l=void 0===i?1:i;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");var h,f=!0,d=(0,r.Z)(n);try{t:for(d.s();!(h=d.n()).done;){var p,v=h.value,g=(0,r.Z)(v);try{for(g.s();!(p=g.n()).done;){if(1!==p.value){f=!1;break t}}}catch(w){g.e(w)}finally{g.f()}}}catch(w){d.e(w)}finally{d.f()}for(var m=this,y=0;y<l;y++)if(1===this.bitDepth)if(f){var b=m.clone();m=c(m,b,n.length,n[0].length)}else{m=u(m,a.Z.createFrom(m),n)}else if(f){m=s(m,a.Z.createFrom(m),n.length,n[0].length)}else{m=o(m,a.Z.createFrom(m),n)}return m}function o(t,e,n){for(var r=n.length,a=n[0].length,i=(r-1)/2,o=(a-1)/2,s=0;s<t.height;s++)for(var u=0;u<t.width;u++){for(var c=t.maxValue,l=0;l<a;l++)for(var h=0;h<r;h++)if(1===n[h][l]){var f=h-i+u,d=l-o+s;if(!(f<0||d<0||f>=t.width||d>=t.height)){var p=t.getValueXY(f,d,0);p<c&&(c=p)}}e.setValueXY(u,s,0,c)}return e}function s(t,e,n,r){for(var a=(n-1)/2,i=(r-1)/2,o=[],s=0;s<t.width;s++)o.push(0);for(var u=0;u<t.height;u++){for(var c=0;c<t.width;c++){for(var l=t.maxValue,h=Math.max(0,u-i);h<Math.min(t.height,u+i+1);h++){var f=t.getValueXY(c,h,0);f<l&&(l=f)}o[c]=l}for(var d=0;d<t.width;d++){for(var p=t.maxValue,v=Math.max(0,d-a);v<Math.min(t.width,d+a+1);v++)o[v]<p&&(p=o[v]);e.setValueXY(d,u,0,p)}}return e}function u(t,e,n){for(var r=n.length,a=n[0].length,i=(r-1)/2,o=(a-1)/2,s=0;s<t.height;s++)for(var u=0;u<t.width;u++){var c=1;t:for(var l=0;l<a;l++)for(var h=0;h<r;h++)if(1===n[h][l]){var f=h-i+u,d=l-o+s;if(!(d<0||f<0||f>=t.width||d>=t.height))if(0===t.getBitXY(f,d)){c=0;break t}}1===c&&e.setBitXY(u,s)}return e}function c(t,e,n,r){for(var a=(n-1)/2,i=(r-1)/2,o=[],s=0;s<t.width;s++)o.push(0);for(var u=0;u<t.height;u++){for(var c=0;c<t.width;c++){o[c]=1;for(var l=Math.max(0,u-i);l<Math.min(t.height,u+i+1);l++)if(0===t.getBitXY(c,l)){o[c]=0;break}}for(var h=0;h<t.width;h++)if(0!==e.getBitXY(h,u))for(var f=Math.max(0,h-a);f<Math.min(t.width,h+a+1);f++)if(0===o[f]){e.clearBitXY(h,u);break}}return e}},61792:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,r=t.iterations,a=void 0===r?1:r;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");for(var i=this,o=0;o<a;o++){var s=i.dilate({kernel:n}),u=i.erode({kernel:n});i=s.subtractImage(u,{absolute:!0})}return i}n.d(e,{Z:function(){return r}})},55229:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,r=t.iterations,a=void 0===r?1:r;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),n.columns%2===0||n.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");for(var i=this,o=0;o<a;o++)i=(i=i.erode({kernel:n})).dilate({kernel:n});return i}n.d(e,{Z:function(){return r}})},80689:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.kernel,n=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,r=t.iterations,a=void 0===r?1:r;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),n.length%2===0||n[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");for(var i=this,o=0;o<a;o++){var s=i.open({kernel:n});i=s.subtractImage(i,{absolute:!0})}return i}n.d(e,{Z:function(){return r}})},4309:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(3049);function a(t){return(0,r.Z)(this,t)}},52143:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(72111),a=n(24073),i=n(57797),o=n(80712),s=n(24228),u=n(63158),c=n(71037);function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.channels,l=e.bitDepth,h=e.normalize,f=void 0!==h&&h,d=e.divisor,p=void 0===d?1:d,v=e.border,g=void 0===v?"copy":v,m=e.algorithm,y=void 0===m?"auto":m,b={};l&&(b.bitDepth=l);var w,x,k=o.Z.createFrom(this,b);if(n=(0,a.Q)(this,n,!0),"separable"!==y)t=(0,i.e)(t).kernel;else if(!Array.isArray(t)||2!==t.length)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===y){var I=(0,c.Z)(t);null!==I?(y="separable",t=I):y=(t.length>9||t[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}"separable"===y?(w=Math.floor(t[0].length/2),x=Math.floor(t[1].length/2)):(w=Math.floor(t.length/2),x=Math.floor(t[0].length/2));var S,_,C,E,A,T,N=k.isClamped,D=new Array(this.height*this.width);for(E=0;E<n.length;E++){for(A=n[E],C=0;C<this.height;C++)for(_=0;_<this.width;_++)D[S=C*this.width+_]=this.data[S*this.channels+A];if("direct"===y)T=(0,r.direct)(D,t,{rows:this.height,cols:this.width,normalize:f,divisor:p});else if("separable"===y){if(T=(0,u.Z)(D,t,this.width,this.height),f){p=0;for(var R=0;R<t[0].length;R++)for(var Z=0;Z<t[1].length;Z++)p+=t[0][R]*t[1][Z]}if(1!==p)for(var M=0;M<T.length;M++)T[M]/=p}else T=(0,r.fft)(D,t,{rows:this.height,cols:this.width,normalize:f,divisor:p});for(C=0;C<this.height;C++)for(_=0;_<this.width;_++)S=C*this.width+_,k.data[S*this.channels+A]=N?(0,s.u)(T[S],k):T[S]}if(this.alpha&&!n.includes(this.channels))for(_=this.components;_<this.data.length;_+=this.channels)k.data[_]=this.data[_];return"periodic"!==g&&k.setBorder({size:[x,w],algorithm:g}),k}},63158:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(54802);function a(t,e,n,a){var i,o,s,u,c=new Array(t.length);s=((u=e[1]).length-1)/2,o=new Array(n+u.length-1),i=new Array(n);for(var l=0;l<a;l++){for(var h=0;h<n;h++)i[h]=t[l*n+h];(0,r.j)(i,u,o);for(var f=0;f<n;f++)c[l*n+f]=o[s+f]}s=((u=e[0]).length-1)/2,o=new Array(a+u.length-1),i=new Array(a);for(var d=0;d<n;d++){for(var p=0;p<a;p++)i[p]=c[p*n+d];(0,r.j)(i,u,o);for(var v=0;v<a;v++)c[v*n+d]=o[s+v]}return c}},85060:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(80712);function a(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).position;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!e&&!(e=t.getRelativePosition(this)))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){for(var n=r.Z.createFrom(this,{width:t.width,height:t.height,alpha:1,position:e,parent:this}),a=0;a<t.width;a++)for(var i=0;i<t.height;i++){for(var o=0;o<this.channels;o++){var s=this.getValueXY(a+e[0],i+e[1],o);n.setValueXY(a,i,o,s)}t.getBitXY(a,i)||n.setValueXY(a,i,this.components,0)}return n}for(var u=r.Z.createFrom(this,{width:t.width,height:t.height,position:e,parent:this}),c=0;c<t.height;c++)for(var l=0;l<t.width;l++)t.getBitXY(l,c)&&this.getBitXY(l+e[0],c+e[1])&&u.setBitXY(l,c);return u}},35622:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(72847),a=n.n(r),i=n(80712);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,r=t.y,o=void 0===r?0:r,u=t.inPlace,c=void 0===u||u?this:i.Z.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(n,o))return c;var l=new(a());for(l.push(new s(n,o));l.length>0;){var h=l.shift();c.setBitXY(h.x,h.y);for(var f=h.x+1;f<this.width&&(!c.getBitXY(f,h.y)&&!this.getBitXY(f,h.y));f++)c.setBitXY(f,h.y),h.y+1<this.height&&!this.getBitXY(f,h.y+1)&&l.push(new s(f,h.y+1)),h.y-1>=0&&!this.getBitXY(f,h.y-1)&&l.push(new s(f,h.y-1));for(var d=h.x-1;d>=0&&(!c.getBitXY(d,h.y)&&!this.getBitXY(d,h.y));d++)c.setBitXY(d,h.y),h.y+1<this.height&&!this.getBitXY(d,h.y+1)&&l.push(new s(d,h.y+1)),h.y-1>=0&&!this.getBitXY(d,h.y-1)&&l.push(new s(d,h.y-1))}return c}function s(t,e){this.x=t,this.y=e}},71037:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(2714);function a(t){var e=new r.Z(t,{autoTranspose:!0});if(1!==e.rank)return null;var n=Math.sqrt(e.s[0]);return[e.U.to2DArray().map((function(t){return t[0]*n})),e.V.to2DArray().map((function(t){return t[0]*n}))]}},38721:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(96244),a=n(77171);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.color,o=void 0===i?"blue":i,s=n.colors,u=n.font,c=void 0===u?"12px Helvetica":u,l=n.rotate,h=void 0===l?0:l;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:a.RGB}),!Array.isArray(t))throw Error("paintLabels: labels must be an array");if(!Array.isArray(e))throw Error("paintLabels: positions must be an array");if(o&&!Array.isArray(o)&&(o=(0,r.Lg)(o)),s=s?s.map((function(t){return Array.isArray(t)?t:(0,r.Lg)(t)})):[o],t.length!==e.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(c)||(c=[c]),Array.isArray(h)||(h=[h]);for(var f=this.getCanvas().getContext("2d"),d=0;d<t.length;d++){f.save();var p=s[d%s.length];f.fillStyle="rgba(".concat(p[0],",").concat(p[1],",").concat(p[2],",").concat(p[3]/this.maxValue,")"),f.font=c[d%c.length];var v=e[d];f.translate(v[0],v[1]),f.rotate(h[d%h.length]/180*Math.PI),f.fillText(t[d],0,0),f.restore()}return this.data=Uint8Array.from(f.getImageData(0,0,this.width,this.height).data),this}},79114:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(96244),a=n(77171);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.alpha,i=void 0===n?255:n,o=e.labels,s=void 0===o?[]:o,u=e.labelsPosition,c=void 0===u?[]:u,l=e.labelColor,h=void 0===l?"blue":l,f=e.labelFont,d=void 0===f?"12px Helvetica":f;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:a.RGB});var p=(0,r.EC)(Object.assign({},e,{numberColors:t.length}));Array.isArray(t)||(t=[t]);for(var v=0;v<t.length;v++)for(var g=t[v],m=p[v%p.length],y=0;y<g.width;y++)for(var b=0;b<g.height;b++)if(g.getBitXY(y,b))for(var w=0;w<Math.min(this.components,m.length);w++)if(255===i)this.setValueXY(y+g.position[0],b+g.position[1],w,m[w]);else{var x=this.getValueXY(y+g.position[0],b+g.position[1],w);x=Math.round((x*(255-i)+m[w]*i)/255),this.setValueXY(y+g.position[0],b+g.position[1],w,x)}if(Array.isArray(s)&&s.length>0){var k=this.getCanvas().getContext("2d");k.fillStyle=h,k.font=d;for(var I=0;I<Math.min(t.length,s.length);I++){var S=c[I]?c[I]:t[I].position;k.fillText(s[I],S[0],S[1])}this.data=Uint8Array.from(k.getImageData(0,0,this.width,this.height).data)}return this}},61186:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(78335),a=n(96244);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.shape;this.checkProcessable("paintPoints",{bitDepth:[8,16]});for(var i=(0,a.EC)(Object.assign({},e,{numberColors:t.length})),o=new r.Z(n).getPoints(),s=Math.min(this.channels,i[0].length),u=0;u<t.length;u++)for(var c=i[u%i.length],l=t[u][0],h=t[u][1],f=0;f<o.length;f++){var d=o[f][0],p=o[f][1];if(l+d>=0&&h+p>=0&&l+d<this.width&&h+p<this.height)for(var v=(l+d+(h+p)*this.width)*this.channels,g=0;g<s;g++)this.data[v+g]=c[g]}return this}},99595:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.color,r=void 0===n?[this.maxValue,0,0]:n,o=e.filled,s=void 0!==o&&o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),e.closed=!0;var u=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]===t[(n+1)%t.length][0]&&t[n][1]===t[(n+1)%t.length][1]||t[n][0]===t[(n-1+t.length)%t.length][0]&&t[n][1]===t[(n-1+t.length)%t.length][1]||t[(n+1)%t.length][0]===t[(n-1+t.length)%t.length][0]&&t[(n-1+t.length)%t.length][1]===t[(n+1)%t.length][1]||e.push(t[n]);return e}(t);if(!1===s)return this.paintPolyline(t,e);for(var c=Array(this.height),l=0;l<this.height;l++){c[l]=[];for(var h=0;h<this.width;h++)c[l].push(0)}for(var f=0;f<u.length;f++)for(var d=a(u[f],u[(f+1)%u.length]),p=0;p<this.height;p++)for(var v=0;v<this.width;v++)i(v,p,d,this.height)&&(c[p][v]=0===c[p][v]?1:0);for(var g=0;g<this.height;g++)for(var m=0;m<this.width;m++)if(1===c[g][m])if(1===this.bitDepth)this.setBitXY(m,g);else for(var y=Math.min(this.channels,r.length),b=(m+g*this.width)*this.channels,w=0;w<y;w++)this.data[b+w]=r[w];return this.paintPolyline(t,e)}function a(t,e){if(t[0]===e[0])return{a:0,b:t[0],vertical:!0};var n=(e[1]-t[1])/(e[0]-t[0]);return{a:n,b:t[1]-n*t[0],vertical:!1}}function i(t,e,n,r){if(!0===n.vertical)return n.b<=t;if(0===n.a)return!1;var a=(e-n.b)/n.a;return a<t&&a>=0&&a<=r}n.d(e,{Z:function(){return r}})},54490:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(96244);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});for(var a=(0,r.EC)(Object.assign({},e,{numberColors:t.length})),i=0;i<t.length;i++)n.color=a[i%a.length],this.paintPolygon(t[i],n);return this}},79355:function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.color,r=void 0===n?[this.maxValue,0,0]:n,a=e.closed,i=void 0!==a&&a;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});for(var o=Math.min(this.channels,r.length),s=0;s<t.length-1+i;s++)for(var u=t[s],c=t[(s+1)%t.length],l=c[0]-u[0],h=c[1]-u[1],f=Math.max(Math.abs(l),Math.abs(h)),d=l/f,p=h/f,v=u[0],g=u[1],m=0;m<=f;m++){var y=Math.round(v),b=Math.round(g);if(y>=0&&b>=0&&y<this.width&&b<this.height)if(1===this.bitDepth)this.setBitXY(y,b);else for(var w=(y+b*this.width)*this.channels,x=0;x<o;x++)this.data[w+x]=r[x];v+=d,g+=p}return this}n.d(e,{Z:function(){return r}})},89563:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(96244);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});for(var a=(0,r.EC)(Object.assign({},e,{numberColors:t.length})),i=0;i<t.length;i++)n.color=a[i%a.length],this.paintPolyline(t[i],n);return this}},8591:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r=n(15671),a=n(43144),i=n(65960),o=n(49689),s=n.n(o),u=n(78335),c=n(94640),l=n(80712),h=n(50997),f=n(12753),d=n(27261),p=function(){function t(e,n){(0,r.Z)(this,t),this.map=e,this.id=n,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}return(0,a.Z)(t,[{key:"getMask",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scale,r=void 0===n?1:n,a=e.kind;switch(void 0===a?"":a){case"contour":t=this.contourMask;break;case"box":t=this.boxMask;break;case"filled":t=this.filledMask;break;case"center":t=this.centerMask;break;case"mbr":t=this.mbrFilledMask;break;case"hull":t=this.convexHullFilledMask;break;case"hullContour":t=this.convexHullMask;break;case"mbrContour":t=this.mbrMask;break;case"feret":t=this.feretMask;break;default:t=this.mask}return r<1&&((t=t.resize({factor:r})).parent=this.mask.parent,t.position[0]+=this.minX,t.position[1]+=this.minY),t}},{key:"mean",get:function(){throw new Error("Roi mean not implemented yet")}},{key:"center",get:function(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}},{key:"ratio",get:function(){return this.width/this.height}},{key:"width",get:function(){return this.maxX-this.minX+1}},{key:"height",get:function(){return this.maxY-this.minY+1}},{key:"_computExternalIDs",value:function(){var t=this.borderIDs,e=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];for(var n=this.internalIDs,r=0;r<t.length;r++)n.includes(t[r])||(this.computed.externalIDs.push(t[r]),this.computed.externalLengths.push(e[r]))}},{key:"externalIDs",get:function(){return this.computed.externalIDs||this._computExternalIDs(),this.computed.externalIDs}},{key:"externalLengths",get:function(){return this.computed.externalLengths||this._computExternalIDs(),this.computed.externalLengths}},{key:"_computeBorderIDs",value:function(){var t=function(t){for(var e=t.map,n=e.data,r=new Set,a=new Map,i=new Set,o=[1,0,-1,0],s=[0,1,0,-1],u=t.minX;u<=t.maxX;u++)for(var c=t.minY;c<=t.maxY;c++){if(n[u+c*e.width]===t.id)for(var l=0;l<4;l++){var h=u+o[l],f=c+s[l];if(h>=0&&f>=0&&h<e.width&&f<e.height){var d=h+f*e.width;if(n[d]!==t.id&&!i.has(d)){i.add(d),r.add(n[d]);var p=a.get(n[d]);p?a.set(n[d],++p):a.set(n[d],1)}}}}var v=Array.from(r),g=v.map((function(t){return a.get(t)}));return{ids:v,lengths:g}}(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}},{key:"borderIDs",get:function(){return this.computed.borderIDs||this._computeBorderIDs(),this.computed.borderIDs}},{key:"borderLengths",get:function(){return this.computed.borderLengths||this._computeBorderIDs(),this.computed.borderLengths}},{key:"boxIDs",get:function(){return this.computed.boxIDs||(this.computed.boxIDs=function(t){for(var e=new Set,n=t.map,r=n.data,a=0,i=[0,t.height-1];a<i.length;a++)for(var o=i[a],s=0;s<t.width;s++){var u=(o+t.minY)*n.width+s+t.minX;if(s-t.minX>0&&r[u]===t.id&&r[u-1]!==t.id){var c=r[u-1];e.add(c)}if(n.width-s-t.minX>1&&r[u]===t.id&&r[u+1]!==t.id){var l=r[u+1];e.add(l)}}for(var h=0,f=[0,t.width-1];h<f.length;h++)for(var d=f[h],p=0;p<t.height;p++){var v=(p+t.minY)*n.width+d+t.minX;if(p-t.minY>0&&r[v]===t.id&&r[v-n.width]!==t.id){var g=r[v-n.width];e.add(g)}if(n.height-p-t.minY>1&&r[v]===t.id&&r[v+n.width]!==t.id){var m=r[v+n.width];e.add(m)}}return Array.from(e)}(this)),this.computed.boxIDs}},{key:"internalIDs",get:function(){return this.computed.internalIDs||(this.computed.internalIDs=function(t){var e=[t.id],n=t.map,r=n.data;if(t.height>2)for(var a=0;a<t.width;a++){var i=t.minY*n.width+a+t.minX;if(e.includes(r[i])){var o=r[i+n.width];e.includes(o)||t.boxIDs.includes(o)||e.push(o)}}for(var s=new Array(4),u=1;u<t.width-1;u++)for(var c=1;c<t.height-1;c++){var l=(c+t.minY)*n.width+u+t.minX;if(e.includes(r[l])){s[0]=r[l-1],s[1]=r[l+1],s[2]=r[l-n.width],s[3]=r[l+n.width];for(var h=0;h<4;h++){var f=s[h];e.includes(f)||t.boxIDs.includes(f)||e.push(f)}}}return e}(this)),this.computed.internalIDs}},{key:"box",get:function(){return this.computed.box||(this.computed.box=function(t){var e=0,n=t.map,r=n.data,a=[0];t.height>1&&(a[1]=t.height-1);for(var i=0,o=a;i<o.length;i++)for(var s=o[i],u=1;u<t.width-1;u++){r[(s+t.minY)*n.width+u+t.minX]===t.id&&e++}var c=[0];t.width>1&&(c[1]=t.width-1);for(var l=0,h=c;l<h.length;l++)for(var f=h[l],d=0;d<t.height;d++){r[(d+t.minY)*n.width+f+t.minX]===t.id&&e++}return e}(this)),this.computed.box}},{key:"external",get:function(){return this.computed.external||(this.computed.external=function(t){for(var e=0,n=t.map,r=n.data,a=1;a<t.width-1;a++)for(var i=1;i<t.height-1;i++){var o=(i+t.minY)*n.width+a+t.minX;r[o]===t.id&&(t.externalIDs.includes(r[o-1])||t.externalIDs.includes(r[o+1])||t.externalIDs.includes(r[o-n.width])||t.externalIDs.includes(r[o+n.width]))&&e++}return e+t.box}(this)),this.computed.external}},{key:"holesInfo",get:function(){return this.computed.holesInfo||(this.computed.holesInfo=function(t){for(var e=0,n=t.map.width,r=t.map.data,a=1;a<t.width-1;a++)for(var i=1;i<t.height-1;i++){var o=(i+t.minY)*n+a+t.minX;t.internalIDs.includes(r[o])&&r[o]!==t.id&&e++}return{number:t.internalIDs.length-1,surface:e}}(this)),this.computed.holesInfo}},{key:"border",get:function(){return this.computed.border||(this.computed.border=function(t){for(var e=0,n=t.map,r=n.data,a=1;a<t.width-1;a++)for(var i=1;i<t.height-1;i++){var o=(i+t.minY)*n.width+a+t.minX;r[o]===t.id&&(r[o-1]===t.id&&r[o+1]===t.id&&r[o-n.width]===t.id&&r[o+n.width]===t.id||e++)}return e+t.box}(this)),this.computed.border}},{key:"contourMask",get:function(){if(!this.computed.contourMask){for(var t=new l.Z(this.width,this.height,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent}),e=0;e<this.width;e++)for(var n=0;n<this.height;n++)this.map.data[e+this.minX+(n+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&n>0&&n<this.height-1&&this.map.data[e-1+this.minX+(n+this.minY)*this.map.width]===this.id&&this.map.data[e+1+this.minX+(n+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(n-1+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(n+1+this.minY)*this.map.width]===this.id||t.setBitXY(e,n));this.computed.contourMask=t}return this.computed.contourMask}},{key:"boxMask",get:function(){if(!this.computed.boxMask){for(var t=new l.Z(this.width,this.height,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent}),e=0;e<this.width;e++)t.setBitXY(e,0),t.setBitXY(e,this.height-1);for(var n=0;n<this.height;n++)t.setBitXY(0,n),t.setBitXY(this.width-1,n);this.computed.boxMask=t}return this.computed.boxMask}},{key:"mask",get:function(){if(!this.computed.mask){for(var t=new l.Z(this.width,this.height,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent}),e=0;e<this.width;e++)for(var n=0;n<this.height;n++)this.map.data[e+this.minX+(n+this.minY)*this.map.width]===this.id&&t.setBitXY(e,n);this.computed.mask=t}return this.computed.mask}},{key:"filledMask",get:function(){if(!this.computed.filledMask){for(var t=new l.Z(this.width,this.height,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent}),e=0;e<this.width;e++)for(var n=0;n<this.height;n++){var r=e+this.minX+(n+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[r])&&t.setBitXY(e,n)}this.computed.filledMask=t}return this.computed.filledMask}},{key:"centerMask",get:function(){if(!this.computed.centerMask){var t=new u.Z({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}},{key:"convexHull",get:function(){if(!this.computed.convexHull){for(var t=[],e=0;e<this.width;e++)for(var n=0;n<this.height;n++)this.map.data[e+this.minX+(n+this.minY)*this.map.width]===this.id&&(e>0&&e<this.width-1&&n>0&&n<this.height-1&&this.map.data[e-1+this.minX+(n+this.minY)*this.map.width]===this.id&&this.map.data[e+1+this.minX+(n+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(n-1+this.minY)*this.map.width]===this.id&&this.map.data[e+this.minX+(n+1+this.minY)*this.map.width]===this.id||(t.push([e,n]),t.push([e+1,n]),t.push([e,n+1]),t.push([e+1,n+1])));var r=(0,i.Z)(t);this.computed.convexHull={polyline:r,surface:(0,c.gJ)(r),perimeter:(0,c.w$)(r)}}return this.computed.convexHull}},{key:"convexHullMask",get:function(){if(!this.computed.convexHullMask){var t=this.convexHull,e=new l.Z(this.width+1,this.height+1,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent});e.paintPolyline(t.polyline,{closed:!0}),this.computed.convexHullMask=e}return this.computed.convexHullMask}},{key:"convexHullFilledMask",get:function(){if(!this.computed.convexHullFilledMask){for(var t=this.convexHull,e=new l.Z(this.width,this.height,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent}),n=0;n<this.width;n++)for(var r=0;r<this.height;r++)1!==s()(t.polyline,[n,r])&&e.setBitXY(n,r);this.computed.convexHullFilledMask=e}return this.computed.convexHullFilledMask}},{key:"mbr",get:function(){if(!this.computed.mbr){var t=(0,h.Z)({originalPoints:this.convexHull.polyline});if(0===t.length)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:t};else{var e=t[0],n=t[1],r=t[2],a=Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)),i=Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2));this.computed.mbr={width:a,height:i,elongation:1-a/i,aspectRatio:a/i,surface:a*i,perimeter:2*(a+i),rectangle:t}}}return this.computed.mbr}},{key:"fillRatio",get:function(){return this.surface/(this.surface+this.holesInfo.surface)}},{key:"feretDiameters",get:function(){return this.computed.feretDiameters||(this.computed.feretDiameters=(0,d.Z)({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}},{key:"eqpc",get:function(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}},{key:"perimeterInfo",get:function(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=function(t){for(var e=t.map,n=e.data,r=0,a=0,i=0,o=0,s=0;s<t.width;s++)for(var u=0;u<t.height;u++){var c=(u+t.minY)*e.width+s+t.minX;if(n[c]===t.id){var l=0;switch((0===s||t.externalIDs.includes(n[c-1]))&&l++,(s===t.width-1||t.externalIDs.includes(n[c+1]))&&l++,(0===u||t.externalIDs.includes(n[c-e.width]))&&l++,(u===t.height-1||t.externalIDs.includes(n[c+e.width]))&&l++,l){case 1:r++;break;case 2:a++;break;case 3:i++;break;case 4:o++}}}return{one:r,two:a,three:i,four:o}}(this)),this.computed.perimeterInfo}},{key:"perimeter",get:function(){var t=this.perimeterInfo,e=2-Math.sqrt(2);return t.one+2*t.two+3*t.three+4*t.four-e*(t.two+2*t.three+t.four)}},{key:"ped",get:function(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}},{key:"feretMask",get:function(){if(!this.computed.feretMask){var t=new l.Z(this.width+1,this.height+1,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(this.feretDiameters.minLine),t.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=t}return this.computed.feretMask}},{key:"mbrMask",get:function(){if(!this.computed.mbrMask){var t=(0,c.NM)(this.mbr.rectangle);if(t.length>0){var e=(0,c._z)(t),n=new l.Z(e[1][0]-e[0][0]+1,e[1][1]-e[0][1]+1,{kind:f.$h,position:[this.minX+e[0][0],this.minY+e[0][1]],parent:this.map.parent});t=(0,c.XC)(t),n.paintPolyline(t,{closed:!0}),this.computed.mbrMask=n}else this.computed.mbrMask=new l.Z(1,1,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}},{key:"mbrFilledMask",get:function(){if(!this.computed.mbrFilledMask){for(var t=new l.Z(this.width,this.height,{kind:f.$h,position:[this.minX,this.minY],parent:this.map.parent}),e=this.mask.minimalBoundingRectangle(),n=0;n<this.width;n++)for(var r=0;r<this.height;r++)1!==s()(e,[n,r])&&t.setBitXY(n,r);this.computed.mbrFilledMask=t}return this.computed.mbrFilledMask}},{key:"points",get:function(){if(!this.computed.points){for(var t=[],e=0;e<this.height;e++)for(var n=0;n<this.width;n++){var r=(e+this.minY)*this.map.width+n+this.minX;this.map.data[r]===this.id&&t.push([n,e])}this.computed.points=t}return this.computed.points}},{key:"maxLengthPoints",get:function(){if(!this.computed.maxLengthPoints){for(var t,e=0,n=this.points,r=0;r<n.length;r++)for(var a=r+1;a<n.length;a++){var i=Math.pow(n[r][0]-n[a][0],2)+Math.pow(n[r][1]-n[a][1],2);i>=e&&(e=i,t=[n[r],n[a]])}this.computed.maxLengthPoints=t}return this.computed.maxLengthPoints}},{key:"maxLength",get:function(){if(!this.computed.maxLength){var t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}},{key:"roundness",get:function(){return 4*this.surface/(Math.PI*Math.pow(this.feretDiameters.max,2))}},{key:"sphericity",get:function(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}},{key:"solidity",get:function(){return this.surface/this.convexHull.surface}},{key:"angle",get:function(){if(!this.computed.angle){var t=this.maxLengthPoints,e=180*-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])/Math.PI;this.computed.angle=e}return this.computed.angle}},{key:"toJSON",value:function(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}]),t}()},80274:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(15671),a=n(43144),i=n(8591),o=function(){function t(e,n){(0,r.Z)(this,t),this.roiMap=e,this.options=n,this.roi=this.createRoi()}return(0,a.Z)(t,[{key:"createRoi",value:function(){var t=this.roiMap.data,e={};this.roiMap.positive=0,this.roiMap.negative=0;for(var n=0;n<t.length;n++)t[n]&&!e[t[n]]&&(e[t[n]]=!0,t[n]>0?this.roiMap.positive++:this.roiMap.negative++);var r={};for(var a in e)r[a]=new i.Z(this.roiMap,1*a);for(var o=this.roiMap.width,s=this.roiMap.height,u=0;u<s;u++)for(var c=0;c<o;c++){var l=u*o+c;if(0!==t[l]){var h=r[t[l]];c<h.minX&&(h.minX=c),c>h.maxX&&(h.maxX=c),u<h.minY&&(h.minY=u),u>h.maxY&&(h.maxY=u),h.meanX+=c,h.meanY+=u,h.surface++}}var f=[];for(var d in e)r[d].meanX/=r[d].surface,r[d].meanY/=r[d].surface,f.push(r[d]);return f}}]),t}()},78799:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(15671),a=n(43144),i=n(76963),o=n(75498),s=function(){function t(e,n){(0,r.Z)(this,t),this.parent=e,this.width=e.width,this.height=e.height,this.data=n,this.negative=0,this.positive=0}return(0,a.Z)(t,[{key:"total",get:function(){return this.negative+this.positive}},{key:"minMax",get:function(){for(var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER,n=0;n<this.data.length;n++)this.data[n]<t&&(t=this.data[n]),this.data[n]>e&&(e=this.data[n]);return{min:t,max:e}}},{key:"commonBorderLength",get:function(){return(0,i.Z)(this)}},{key:"mergeRoi",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.Z.call(this,t)}},{key:"mergeRois",value:function(t){for(var e=t[0],n=t.slice(1),r=0;r<this.data.length;r++)n.includes(this.data[r])&&(this.data[r]=e)}},{key:"rowsInfo",value:function(){for(var t=new Array(this.height),e=0,n=0;n<this.data.length;n+=this.width){var r={row:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[e++]=r;for(var a={},i={},o=[],s=this.data[n],u=0,c=n;c<n+this.width;c++){var l=this.data[c];s!==l&&(s=l,o.push(u),u=0),u++,l>0?(r.positivePixel++,a[l]||(a[l]=!0)):l<0?(r.negativePixel++,i[l]||(i[l]=!0)):r.zeroPixel++}o.push(u),r.medianChange=o.sort((function(t,e){return t-e}))[Math.floor(o.length/2)],r.positiveRoiIDs=Object.keys(a),r.negativeRoiIDs=Object.keys(i),r.positiveRoi=r.positiveRoiIDs.length,r.negativeRoi=r.negativeRoiIDs.length}return t}},{key:"colsInfo",value:function(){for(var t=new Array(this.width),e=0,n=0;n<this.width;n++){var r={col:e,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[e++]=r;for(var a={},i={},o=[],s=this.data[n],u=0,c=n;c<n+this.data.length;c+=this.width){var l=this.data[c];s!==l&&(s=l,o.push(u),u=0),u++,l>0?(r.positivePixel++,a[l]||(a[l]=!0)):l<0?(r.negativePixel++,i[l]||(i[l]=!0)):r.zeroPixel++}o.push(u),r.medianChange=o.sort((function(t,e){return t-e}))[Math.floor(o.length/2)],r.positiveRoiIDs=Object.keys(a),r.negativeRoiIDs=Object.keys(i),r.positiveRoi=r.positiveRoiIDs.length,r.negativeRoi=r.negativeRoiIDs.length}return t}}]),t}()},3:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(78799);function a(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowCorners,n=void 0!==e&&e,a=65535,i=new Int16Array(t.size),o=0,s=0,u=new Uint16Array(65536),c=new Uint16Array(65536),l=0;l<t.width;l++)for(var h=0;h<t.height;h++)0===i[h*t.width+l]&&f(l,h);function f(e,r){var l=0,h=0,f=t.getBitXY(e,r),d=f?++o:--s;if(o>32767||s<-32768)throw new Error("Too many regions of interest");for(u[0]=e,c[0]=r;l<=h;){var p=u[l&a],v=c[l&a];if(i[v*t.width+p]=d,p>0&&0===i[v*t.width+p-1]&&t.getBitXY(p-1,v)===f&&(h++,u[h&a]=p-1,c[h&a]=v,i[v*t.width+p-1]=-32768),v>0&&0===i[(v-1)*t.width+p]&&t.getBitXY(p,v-1)===f&&(h++,u[h&a]=p,c[h&a]=v-1,i[(v-1)*t.width+p]=-32768),p<t.width-1&&0===i[v*t.width+p+1]&&t.getBitXY(p+1,v)===f&&(h++,u[h&a]=p+1,c[h&a]=v,i[v*t.width+p+1]=-32768),v<t.height-1&&0===i[(v+1)*t.width+p]&&t.getBitXY(p,v+1)===f&&(h++,u[h&a]=p,c[h&a]=v+1,i[(v+1)*t.width+p]=-32768),n&&(p>0&&v>0&&0===i[(v-1)*t.width+p-1]&&t.getBitXY(p-1,v-1)===f&&(h++,u[h&a]=p-1,c[h&a]=v-1,i[(v-1)*t.width+p-1]=-32768),p<t.width-1&&v>0&&0===i[(v-1)*t.width+p+1]&&t.getBitXY(p+1,v-1)===f&&(h++,u[h&a]=p+1,c[h&a]=v-1,i[(v-1)*t.width+p+1]=-32768),p>0&&v<t.height-1&&0===i[(v+1)*t.width+p-1]&&t.getBitXY(p-1,v+1)===f&&(h++,u[h&a]=p-1,c[h&a]=v+1,i[(v+1)*t.width+p-1]=-32768),p<t.width-1&&v<t.height-1&&0===i[(v+1)*t.width+p+1]&&t.getBitXY(p+1,v+1)===f&&(h++,u[h&a]=p+1,c[h&a]=v+1,i[(v+1)*t.width+p+1]=-32768)),h-++l>a)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new r.Z(t,i)}},48484:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(46755),a=n.n(r),i=n(78799),o=[-1,0],s=[0,-1],u=[null,null],c=[-1,-1,0,1],l=[0,-1,-1,-1],h=[null,null,null,null];function f(t){var e,n,r,f=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowCorners,d=4;if(void 0!==f&&f&&(d=8),8===d)e=c,n=l,r=h;else{if(4!==d)throw new RangeError("unsupported neighbours count: ".concat(d));e=o,n=s,r=u}for(var p=t.size,v=t.width,g=t.height,m=new Array(p),y=new Uint32Array(p),b=new(a()),w=1,x=0;x<g;x++)for(var k=0;k<v;k++){var I=k+x*v;if(t.getBit(I)){for(var S=null,_=0;_<r.length;_++){var C=k+e[_],E=x+n[_];if(C>=0&&E>=0&&C<v&&E<g){var A=m[C+E*v];A?(r[_]=A,(!S||r[_].value<S.value)&&(S=r[_])):r[_]=null}}if(S){m[I]=S;for(var T=0;T<r.length;T++)r[T]&&r[T]!==S&&b.union(S,r[T])}else m[I]=b.add(w++)}}for(var N=0;N<g;N++)for(var D=0;D<v;D++){var R=D+N*v;t.getBit(R)&&(y[R]=b.find(m[R]).value)}return new i.Z(t,y)}},33347:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(78799);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.allowCorner,n=void 0===e||e,a=t.onlyTop,i=void 0!==a&&a,o=(t.invert,this);o.checkProcessable("fromMaxima",{components:[1]});var s=1,u=2,c=0,l=0,h=new Int16Array(o.size),f=new Int8Array(o.size),d=new Float32Array(o.size),p=1048575,v=new Uint16Array(p+1),g=new Uint16Array(p+1),m=0,y=0,b=new Uint16Array(p+1),w=new Uint16Array(p+1),x=0,k=0;for(!function(t){for(var e=t.maxima,r=void 0===e||e,a=1;a<o.height-1;a++)for(var i=1;i<o.width-1;i++){var s=i+a*o.width;if(0===f[s]){var u=r?o.data[s]:-o.data[i+a*o.width];if(o.data[a*o.width+i-1]>u)continue;if(o.data[a*o.width+i+1]>u)continue;if(o.data[(a-1)*o.width+i]>u)continue;if(o.data[(a+1)*o.width+i]>u)continue;if(n){if(o.data[(a-1)*o.width+i-1]>u)continue;if(o.data[(a-1)*o.width+i+1]>u)continue;if(o.data[(a+1)*o.width+i-1]>u)continue;if(o.data[(a+1)*o.width+i+1]>u)continue}h[s]=r?++c:--l,I(i,a)||(r?--c:++l)}}}(o);m<y;){S(v[m&p],g[m&p],u),m++}return new r.Z(o,h);function I(t,e){var n=y;x=0,k=1,b[0]=t,w[0]=e;for(var r=!0;x<k;){r&=S(b[x&p],w[x&p],s),x++}if(!r){for(var a=0;a<k;a++){var i=b[a&p],u=w[a&p]*o.width+i;h[u]=0}y=n}return r}function S(t,e,n){for(var r=h[e*o.width+t],a=o.data[e*o.width+t],c=e-1;c<=e+1;c++)for(var l=t-1;l<=t+1;l++){var m=c*o.width+l;if(0===f[m])switch(f[m]=1,d[m]=o.data[m]-a,n){case s:if(0===d[m]){if(0===l||0===c||l===o.width-1||c===o.height-1)return!1;h[m]=r,b[k&p]=l,w[k&p]=c,k++}else{if(d[m]>0)return!1;i||(h[m]=r,v[y&p]=l,g[y&p]=c,y++)}break;case u:d[m]<=0&&(h[m]=r,v[y&p]=l,g[y&p]=c,y++);break;default:throw new Error("unreachable")}}return!0}}},12487:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(78335),a=n(78799);function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new r.Z(e),i=new Int16Array(this.size),o=0,s=n.getPoints(),u=0;u<t.length;u++){o++;for(var c=t[u][0],l=t[u][1],h=0;h<s.length;h++){var f=s[h][0],d=s[h][1];c+f>=0&&l+d>=0&&c+f<this.width&&l+d<this.height&&(i[c+f+(l+d)*this.width]=o)}}return new a.Z(this,i)}},89189:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(30028),a=n.n(r),i=n(12889),o=n(78799);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.points,n=t.mask,r=t.image,s=t.fillMaxValue,u=void 0===s?this.maxValue:s,c=t.invert,l=void 0!==c&&c,h=r||this;h.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),l=!l,e||(e=h.getLocalMaxima({invert:l,mask:n}));for(var f=l?0:1,d=new Int16Array(h.size),p=h.width,v=h.height,g=new(a())({comparator:function(t,e){return t[2]-e[2]},strategy:a().BinaryHeapStrategy}),m=0;m<e.length;m++){var y=e[m][0]+e[m][1]*p;d[y]=m+1;var b=h.data[y];(l&&b<=u||!l&&b>=u)&&g.queue([e[m][0],e[m][1],b])}for(;g.length>0;)for(var w=g.dequeue(),x=w[0]+w[1]*p,k=0;k<4;k++){var I=w[0]+i.H[k],S=w[1]+i.e[k];if(I>=0&&S>=0&&I<p&&S<v){var _=I+S*p;if(!n||n.getBit(_)===f){var C=h.data[_];(l&&C<=u||!l&&C>=u)&&0===d[_]&&(d[_]=d[x],g.queue([w[0]+i.H[k],w[1]+i.e[k],C]))}}}return new o.Z(h,d)}},27261:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(94640),a=n(92858);function i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).originalPoints,e=void 0===t?a.Z.call(this):t;if(0===e.length)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(1===e.length)return{min:1,max:1,minLine:[e[0],e[0]],maxLine:[e[0],e[0]],aspectRatio:1};for(var n=new Array(e.length),i=1/0,s=0,u=[],c=0;c<e.length;c++){var l=o(e[c],e[(c+1)%e.length]);(0,r.U1)(-l,e,n);for(var h=0,f=[],d=0;d<e.length;d++){var p=Math.abs(n[c][1]-n[d][1]);p>h&&(h=p,(f=[]).push([n[d][0],n[c][1]],[n[d][0],n[d][1]]))}h<i&&(i=h,s=l,u=f)}(0,r.U1)(s,u,u);for(var v=0,g=[],m=0,y=0;y<e.length-1;y++)for(var b=y+1;b<e.length;b++){var w=Math.pow(e[y][0]-e[b][0],2)+Math.pow(e[y][1]-e[b][1],2);w>m&&(m=w,v=Math.sqrt(w),g=[e[y],e[b]])}return{min:i,minLine:u,max:v,maxLine:g,aspectRatio:i/v}}function o(t,e){var n=(0,r.e5)(e,t),a=(0,r.Fv)(n),i=Math.acos(a[0]);return a[1]<0?-i:i}},58931:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(93433),a=n(37762),i=n(15671),o=n(43144),s=n(52428),u=n.n(s),c=n(88048),l=n(80712),h=n(80274),f=n(78799),d=n(3),p=n(48484),v=n(33347),g=n(12487),m=n(89189),y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Z)(this,t),this._image=e,this._options=n,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}return(0,o.Z)(t,[{key:"fromMaxima",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},this._options,t),n=v.Z.call(this._image,t);this._layers[e.label]=new h.Z(n,e)}},{key:"fromPoints",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this._options,e),r=g.Z.call(this._image,t,e);return this._layers[n.label]=new h.Z(r,n),this}},{key:"putMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new f.Z(this._image,t),r=Object.assign({},this._options,e);return this._layers[r.label]=new h.Z(n,r),this}},{key:"fromWaterShed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},this._options,t),n=m.Z.call(this._image,t);this._layers[e.label]=new h.Z(n,e)}},{key:"fromMask",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this._options,e),r=d.Z.call(this._image,t,e);return this._layers[n.label]=new h.Z(r,n),this}},{key:"fromMaskConnectedComponentLabelingAlgorithm",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this._options,e),r=p.Z.call(this._image,t,e);return this._layers[n.label]=new h.Z(r,n),this}},{key:"getMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},this._options,t);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap}},{key:"rowsInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getMap(t).rowsInfo()}},{key:"colsInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getMap(t).rowsInfo()}},{key:"getRoiIds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getRois(t);if(e){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].id;return n}throw new Error("ROIs not found")}},{key:"getRois",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?this._options.label:e,r=t.positive,i=void 0===r||r,o=t.negative,s=void 0===o||o,u=t.minSurface,c=void 0===u?0:u,l=t.maxSurface,h=void 0===l?Number.POSITIVE_INFINITY:l,f=t.minWidth,d=void 0===f?0:f,p=t.maxWidth,v=void 0===p?Number.POSITIVE_INFINITY:p,g=t.minHeight,m=void 0===g?0:g,y=t.maxHeight,b=void 0===y?Number.POSITIVE_INFINITY:y,w=t.minRatio,x=void 0===w?0:w,k=t.maxRatio,I=void 0===k?Number.POSITIVE_INFINITY:k;if(!this._layers[n])throw new Error("this Roi layer (".concat(n,") does not exist"));var S,_=this._layers[n].roi,C=[],E=(0,a.Z)(_);try{for(E.s();!(S=E.n()).done;){var A=S.value;(A.id<0&&s||A.id>0&&i)&&A.surface>=c&&A.surface<=h&&A.width>=d&&A.width<=v&&A.height>=m&&A.height<=b&&A.ratio>=x&&A.ratio<=I&&C.push(A)}}catch(T){E.e(T)}finally{E.f()}return C}},{key:"getRoi",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).label,n=void 0===e?this._options.label:e;if(!this._layers[n])throw new Error("this Roi layer (".concat(n,") does not exist"));var r=this._layers[n].roi.find((function(e){return e.id===t}));if(!r)throw new Error("found no Roi with id ".concat(t));return r}},{key:"getMasks",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getRois(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].getMask(t);return n}},{key:"getAnalysisMasks",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.analysisProperty,n="".concat(e,"Mask"),r=this.getRois(t);return 0!==r.length&&r[0][n]?r.map((function(t){return t[n]})):[]}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},this._options,t);return this._assertLayerWithLabel(e.label),this._layers[e.label].roiMap.data}},{key:"paint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.labelProperty,n=t.analysisProperty;this._painted||(this._painted=this._image.rgba8());var a=this.getMasks(t);if(e){var i=this.getRois(t);t.labels=i.map((function(t){return(0,c.Z)(t,e)}));var o=Math.max.apply(Math,(0,r.Z)(t.labels)),s=!1,l=!1;if(e.includes("surface")?s=!0:/(?:perimeter|min|max|external|width|height|length)/.test(e)&&(l=!0),isFinite(o)){var h="";if("pixel"!==t.unit&&t.pixelSize&&(l||s)){h=s?"".concat(t.unit,"^2"):t.unit;var f=s?"m^2":"m",d=s?Math.pow(t.pixelSize,2):t.pixelSize,p=u().swiftConverter(f,h);t.labels=t.labels.map((function(t){return p(d*t)}))}t.labels=o>50?t.labels.map((function(t){return Math.round(t)+h})):o>10?t.labels.map((function(t){return t.toFixed(1)+h})):t.labels.map((function(t){return t.toFixed(2)+h}))}t.labelsPosition=i.map((function(t){return[t.meanX,t.meanY]}))}if(this._painted.paintMasks(a,t),n){var v=this.getAnalysisMasks(t);this._painted.paintMasks(v,{color:t.analysisColor,alpha:t.analysisAlpha})}return this._painted}},{key:"getMask",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new l.Z(this._image.width,this._image.height,{kind:"BINARY"}),n=this.getMasks(t),r=0;r<n.length;r++)for(var a=n[r],i=0;i<a.width;i++)for(var o=0;o<a.height;o++)a.getBitXY(i,o)&&e.setBitXY(i+a.position[0],o+a.position[1]);return e}},{key:"resetPainted",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).image;this._painted=t?this.image.rgba8():this._image.rgba8()}},{key:"mergeRoi",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getMap(t);return e.mergeRoi(t),this.putMap(e.data,t),this}},{key:"mergeRois",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(t)||t.some((function(t){return!Number.isInteger(t)})))throw new Error("Roi ids must be an array of integers");if(t.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(t).size!==t.length)throw new Error("Roi ids must be all different");t.forEach((function(t){return e.getRoi(t)}));var r=this.getMap(n);return r.mergeRois(t),this.putMap(r.data,n),this}},{key:"findCorrespondingRoi",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRois(e),r=[],a=0;a<n.length;a++){var i=n[a],o=b(i.minX,i.minY,i.points,t,Math.sign(i.id));r.push(o)}return r}},{key:"_assertLayerWithLabel",value:function(t){if(!this._layers[t])throw new Error("no layer with label ".concat(t))}}]),t}();function b(t,e,n,r,a){for(var i={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0},o=0;o<n.length;o++){var s=n[o],u=s[0]+t+(s[1]+e)*r.width,c=r.data[u];(c>0||c<0)&&(i.id.includes(c)?i.surface[i.id.indexOf(c)]+=1:(i.id.push(c),i.surface.push(1)))}for(var l=0;l<i.id.length;l++){Math.sign(i.id[l])===a?i.same+=i.surface[l]:i.opposite+=i.surface[l],i.roiSurfaceCovered[l]=i.surface[l]/n.length}return i.total=i.opposite+i.same,i}},76963:function(t,e,n){"use strict";function r(t){for(var e=t.data,n=[1,0,-1,0],r=[0,1,0,-1],a=t.minMax,i=-a.min,o=a.max+i,s=[],u=0;u<=o;u++)s.push(Object.create(null));for(var c=0;c<t.width;c++)for(var l=0;l<t.height;l++){var h=e[c+l*t.width];if(0!==h){for(var f=Object.create(null),d=!1,p=0;p<4;p++){var v=c+n[p],g=l+r[p];if(v>=0&&g>=0&&v<t.width&&g<t.height){var m=e[v+g*t.width];h!==m&&(d=!0,0!==m&&void 0===f[m]&&(f[m]=!0,s[m+i][h]?s[m+i][h]++:s[m+i][h]=1))}else d=!0}d&&(s[h+i][h]?s[h+i][h]++:s[h+i][h]=1)}}for(var y={},b=0;b<s.length;b++)Object.keys(s[b]).length>0&&(y[b-i]=s[b]);return y}n.d(e,{Z:function(){return r}})},75498:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.algorithm,n=void 0===e?"commonBorderLength":e,r=t.minCommonBorderLength,a=void 0===r?5:r,i=t.maxCommonBorderLength,o=void 0===i?100:i,s=t.minCommonBorderRatio,u=void 0===s?.3:s,c=t.maxCommonBorderRatio,l=void 0===c?1:c,h=function(t,e,n){return t[n]>=a&&t[n]<=o};"function"===typeof n&&(h=n),"commonborderratio"===n.toLowerCase()&&(h=function(t,e,n){var r=Math.min(t[n]/t[e],1);return r>=u&&r<=l});for(var f=this,d=f.commonBorderLength,p={},v={},g=0,m=Object.keys(d);g<m.length;g++)for(var y=m[g],b=d[y],w=0,x=Object.keys(b);w<x.length;w++){var k=x[w];if(k!==y&&h(b,y,k)){var I=k;v[k]&&(I=v[k]);var S=y;if(v[y]&&(S=v[y]),Number(I)!==S){var _=Math.min(I,S),C=Math.max(I,S);if(p[_]||(p[_]={}),p[_][C]=!0,v[C]=_,p[C]){for(var E=0,A=Object.keys(p[C]);E<A.length;E++){var T=A[E];p[_][T]=!0,v[T]=_}delete p[C]}}}}for(var N=f.minMax,D=-N.min,R=N.max+D,Z=new Array(R+1).fill(0),M=0,F=Object.keys(v);M<F.length;M++){var O=F[M];Z[Number(O)+D]=v[O]}for(var B=f.data,L=0;L<B.length;L++){var P=B[L];if(0!==P){var U=Z[P+D];0!==U&&(B[L]=U)}}return f.computed={},f}n.d(e,{Z:function(){return r}})},44096:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(80712),a=n(77171);function i(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[a.RGB]});for(var t=r.Z.createFrom(this,{components:4,colorModel:a.CMYK}),e=0,n=this.data,i=0;i<n.length;i+=this.channels){var o=n[i],s=n[i+1],u=n[i+2],c=Math.min(this.maxValue-o,this.maxValue-s,this.maxValue-u),l=(this.maxValue-o-c)/(1-c/this.maxValue),h=(this.maxValue-s-c)/(1-c/this.maxValue),f=(this.maxValue-u-c)/(1-c/this.maxValue);t.data[e++]=Math.round(l),t.data[e++]=Math.round(h),t.data[e++]=Math.round(f),t.data[e++]=Math.round(c),this.alpha&&(t.data[e++]=n[i+3])}return t}},58329:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(80712);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(t))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===t)return this.clone();var e=r.Z.createFrom(this,{bitDepth:t});switch(t){case 8:if(1===this.bitDepth)for(var n=0;n<this.size;n++)this.getBit(n)&&(e.data[n]=255);else for(var a=0;a<this.data.length;a++)e.data[a]=this.data[a]>>8;break;case 16:if(1===this.bitDepth)for(var i=0;i<this.size;i++)this.getBit(i)&&(e.data[i]=65535);else for(var o=0;o<this.data.length;o++)e.data[o]=this.data[o]<<8|this.data[o];break;default:throw new Error("colorDepth conversion unexpected case")}return e}},19833:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(80712);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,a=t.y,i=void 0===a?0:a,o=t.width,s=void 0===o?this.width-n:o,u=t.height,c=void 0===u?this.height-i:u;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),n=Math.round(n),i=Math.round(i),s=Math.round(s),c=Math.round(c),n>this.width-1||i>this.height-1)throw new RangeError("crop: origin (x:".concat(n,", y:").concat(i,") out of range (").concat(this.width-1,"; ").concat(this.height-1,")"));if(s<=0||c<=0)throw new RangeError("crop: width and height (width:".concat(s,"; height:").concat(c,") must be positive numbers"));if(n<0||i<0)throw new RangeError("crop: x and y (x:".concat(n,", y:").concat(i,") must be positive numbers"));if(s>this.width-n||c>this.height-i)throw new RangeError("crop: (x: ".concat(n,", y:").concat(i,", width:").concat(s,", height:").concat(c,") size is out of range"));var l=this;1===this.bitDepth?l=function(t,e,n,r,a,i){for(var o=a*t.channels,s=r+i,u=0,c=n*t.channels,l=r;l<s;l++)for(var h=l*t.width*t.channels+c,f=h+o;h<f;h++)t.getBit(h)&&e.setBit(u),++u;return e}(this,new r.Z(s,c,{kind:"BINARY",parent:this}),n,i,s,c):l=function(t,e,n,r,a,i){for(var o=a*t.channels,s=r+i,u=0,c=n*t.channels,l=r;l<s;l++)for(var h=l*t.width*t.channels+c,f=h+o;h<f;h++)e.data[u++]=t.data[h];return e}(this,r.Z.createFrom(this,{width:s,height:c,position:[n,i]}),n,i,s,c);return l}},63465:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkProcessable("cropAlpha",{alpha:1});var e=t.threshold,n=void 0===e?this.maxValue:e,r=function(t,e,n){for(var r=0;r<t.width;r++)for(var a=0;a<t.height;a++)if(t.getValueXY(r,a,n)>=e)return r;return-1}(this,n,this.components);if(-1===r)throw new Error("Could not find new dimensions. Threshold may be too high.");var a=function(t,e,n,r){for(var a=0;a<t.height;a++)for(var i=r;i<t.width;i++)if(t.getValueXY(i,a,n)>=e)return a;return-1}(this,n,this.components,r),i=function(t,e,n,r){for(var a=t.height-1;a>=0;a--)for(var i=r;i<t.width;i++)if(t.getValueXY(i,a,n)>=e)return a;return-1}(this,n,this.components,r),o=function(t,e,n,r,a,i){for(var o=t.width-1;o>=r;o--)for(var s=a;s<=i;s++)if(t.getValueXY(o,s,n)>=e)return o;return-1}(this,n,this.components,r,a,i);return this.crop({x:r,y:a,width:o-r+1,height:i-a+1})}n.d(e,{Z:function(){return r}})},58962:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(24228),a=n(58433),i=n(77171),o=n(25);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.algorithm,n=void 0===e?"luma709":e,s=t.keepAlpha,u=void 0!==s&&s,c=t.mergeAlpha,l=void 0===c||c;if("string"!==typeof n&&"function"!==typeof n)throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(n="red"),u&=this.alpha,l&=this.alpha,u&&(l=!1);var h,f=(0,a.W)(this,t,{components:1,alpha:u,colorModel:i.GREY});if("function"===typeof n)h=n;else if(!(h=o.x[n.toLowerCase()]))throw new Error("unsupported grey algorithm: ".concat(n));for(var d=0,p=0;p<this.data.length;p+=this.channels)l?f.data[d++]=(0,r.u)(h(this.data[p],this.data[p+1],this.data[p+2],this)*this.data[p+this.components]/this.maxValue,this):(f.data[d++]=(0,r.u)(h(this.data[p],this.data[p+1],this.data[p+2],this),this),f.alpha&&(f.data[d++]=this.data[p+this.components]));return f}},25:function(t,e,n){"use strict";n.d(e,{R:function(){return a},x:function(){return r}});var r={luma709:function(t,e,n){return 6966*t+23436*e+2366*n>>15},luma601:function(t,e,n){return 9798*t+19235*e+3735*n>>15},maximum:function(t,e,n){return Math.max(t,e,n)},minimum:function(t,e,n){return Math.min(t,e,n)},average:function(t,e,n){return(t+e+n)/3>>0},minmax:function(t,e,n){return(Math.max(t,e,n)+Math.min(t,e,n))/2},red:function(t){return t},green:function(t,e){return e},blue:function(t,e,n){return n},cyan:function(t,e,n,a){var i=r.black(t,e,n,a);return(a.maxValue-t-i)/(1-i/a.maxValue)>>0},magenta:function(t,e,n,a){var i=r.black(t,e,n,a);return(a.maxValue-e-i)/(1-i/a.maxValue)>>0},yellow:function(t,e,n,a){var i=r.black(t,e,n,a);return(a.maxValue-n-i)/(1-i/a.maxValue)>>0},black:function(t,e,n,r){return Math.min(r.maxValue-t,r.maxValue-e,r.maxValue-n)},hue:function(t,e,n,a){var i=r.min(t,e,n),o=r.max(t,e,n);if(o===i)return 0;var s=0,u=o-i;switch(o){case t:s=(e-n)/u+(e<n?6:0);break;case e:s=(n-t)/u+2;break;case n:s=(t-e)/u+4;break;default:throw new Error("unreachable")}return s/6*a.maxValue>>0},saturation:function(t,e,n,a){var i=r.min(t,e,n),o=r.max(t,e,n);return 0===o?0:(o-i)/o*a.maxValue},lightness:function(t,e,n){var a=r.min(t,e,n);return(r.max(t,e,n)+a)/2}};Object.defineProperty(r,"luminosity",{enumerable:!1,value:r.lightness}),Object.defineProperty(r,"luminance",{enumerable:!1,value:r.lightness}),Object.defineProperty(r,"min",{enumerable:!1,value:r.minimum}),Object.defineProperty(r,"max",{enumerable:!1,value:r.maximum}),Object.defineProperty(r,"brightness",{enumerable:!1,value:r.maximum});var a={};Object.keys(r).forEach((function(t){a[t]=t}))},47656:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(80712),a=n(77171);function i(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[a.RGB]});for(var t=r.Z.createFrom(this,{colorModel:a.HSL}),e=Math.floor(this.maxValue/2),n=0,i=this.data,o=0;o<i.length;o+=this.channels){var s=i[o],u=i[o+1],c=i[o+2],l=Math.max(s,u,c),h=Math.min(s,u,c),f=0,d=0,p=(l+h)/2;if(l!==h){var v=l-h;switch(d=p>e?v/(2-l-h):v/(l+h),l){case s:f=(u-c)/v+(u<c?6:0);break;case u:f=(c-s)/v+2;break;case c:f=(s-u)/v+4;break;default:throw new Error("unreachable")}f/=6}t.data[n++]=f*this.maxValue,t.data[n++]=d*this.maxValue,t.data[n++]=p,this.alpha&&(t.data[n++]=i[o+3])}return t}},79644:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(80712),a=n(77171);function i(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[a.RGB]});for(var t=r.Z.createFrom(this,{colorModel:a.HSV}),e=0,n=this.data,i=0;i<n.length;i+=this.channels){var o=n[i],s=n[i+1],u=n[i+2],c=Math.min(o,s,u),l=Math.max(o,s,u),h=l-c,f=0,d=0===l?0:h/l,p=l;if(l!==c){switch(l){case o:f=(s-u)/h+(s<u?6:0);break;case s:f=(u-o)/h+2;break;case u:f=(o-s)/h+4;break;default:throw new Error("unreachable")}f/=6}t.data[e++]=f*this.maxValue,t.data[e++]=d*this.maxValue,t.data[e++]=p,this.alpha&&(t.data[e++]=n[i+3])}return t}},88492:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(73487),a=n(58433);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r.Z)(t);this.checkProcessable("insert",n);var i=e.x,o=void 0===i?0:i,s=e.y,u=void 0===s?0:s,c=(0,a.b)(this,e,{copy:!0}),l=Math.min(c.height,u+t.height),h=Math.min(c.width,o+t.width);if(1===c.bitDepth)for(var f=u;f<l;f++)for(var d=o;d<h;d++){t.getBitXY(d-o,f-u)?c.setBitXY(d,f):c.clearBitXY(d,f)}else for(var p=u;p<l;p++)for(var v=o;v<h;v++)c.setPixelXY(v,p,t.getPixelXY(v-o,p-u));return c}},55947:function(t,e,n){"use strict";function r(t){for(var e=0,n=0;n<t.length;n++)if(0!==t[n]){e=n;break}for(var r=t.length-1,a=t.length-1;a>=e;a--)if(0!==t[a]){r=a;break}for(var i=1/(r-e),o=new Array(t.length),s=0,u=0,c=e;c<t.length;c++)s+=c*t[c],u+=t[c],o[c]=s/u;var l=new Array(t.length);s=u=0;for(var h=r;h>0;h--)s+=h*t[h],u+=t[h],l[h-1]=s/u;for(var f=-1,d=Number.MAX_VALUE,p=0;p<t.length;p++){for(var v=0,g=void 0,m=0;m<=p;m++)(g=1/(1+i*Math.abs(m-o[p])))<1e-6||g>.999999||(v+=t[m]*(-g*Math.log(g)-(1-g)*Math.log(1-g)));for(var y=p+1;y<t.length;y++)(g=1/(1+i*Math.abs(y-l[p])))<1e-6||g>.999999||(v+=t[y]*(-g*Math.log(g)-(1-g)*Math.log(1-g)));v<d&&(d=v,f=p)}return f}n.d(e,{Z:function(){return r}})},5905:function(t,e,n){"use strict";function r(t){for(var e=t.slice(),n=0;!a(e);){for(var r=0,i=0,o=e[0],s=0;s<t.length-1;s++)r=i,i=o,o=e[s+1],e[s]=(r+i+o)/3;if(e[t.length-1]=(i+o)/3,++n>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}for(var u=0,c=1;c<t.length-1;c++)e[c-1]<e[c]&&e[c+1]<e[c]&&(u+=c);return Math.floor(u/2)}function a(t){for(var e=!1,n=0,r=1;r<t.length-1;r++)if(t[r-1]<t[r]&&t[r+1]<t[r]&&++n>2)return!1;return 2===n&&(e=!0),e}n.d(e,{Z:function(){return r}})},99922:function(t,e,n){"use strict";function r(t){for(var e,n,r,a,i=0,o=1;o<t.length;o++)if(t[o]>0){i=o+1;break}for(;;){e=0,r=0;for(var s=0;s<i;s++)r+=t[s],e+=t[s]*s;a=0,n=0;for(var u=i+1;u<t.length;u++)n+=t[u],a+=t[u]*u;if(r>0&&n>0&&(e/=r,a/=n,i===Math.round((e+a)/2)))break;if(++i>t.length-2)throw new Error("Threshold not found")}return i}n.d(e,{Z:function(){return r}})},13631:function(t,e,n){"use strict";function r(t,e){var n,r,a,i,o,s,u,c,l,h,f;h=0;for(var d=0;d<t.length;d++)h+=d*t[d];u=h/=e;do{n=(s=u)+.5|0,r=0,i=0;for(var p=0;p<=n;p++)r+=p*t[p],i+=t[p];c=0===i?0:r/i,a=0,o=0;for(var v=n+1;v<t.length;v++)a+=v*t[v],o+=t[v];u=(f=(c-(l=0===o?0:a/o))/(Math.log(c)-Math.log(l)))<-Number.EPSILON?f-.5|0:f+.5|0}while(Math.abs(u-s)>.5);return n}n.d(e,{Z:function(){return r}})},39337:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(78926),a=n(80712),i=n(92893),o="threshold";function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.algorithm,n=void 0===e?o:e,s=t.threshold,u=void 0===s?.5:s,c=t.useAlpha,l=void 0===c||c,h=t.invert,f=void 0!==h&&h;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),u=n===o?(0,r.zQ)(u,this.maxValue):i.Z.call(this,t);var d=new a.Z(this.width,this.height,{kind:"BINARY",parent:this}),p=0;if(this.alpha&&l)for(var v=0;v<this.data.length;v+=this.channels){var g=this.data[v]+(this.maxValue-this.data[v])*(this.maxValue-this.data[v+1])/this.maxValue;(f&&g<=u||!f&&g>=u)&&d.setBit(p),p++}else for(var m=0;m<this.data.length;m+=this.channels)(f&&this.data[m]<=u||!f&&this.data[m]>=u)&&d.setBit(p),p++;return d}},78036:function(t,e,n){"use strict";function r(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r]/e;var a=new Array(t.length),i=new Array(t.length);a[0]=n[0],i[0]=1-a[0];for(var o=1;o<t.length;o++)a[o]=a[o-1]+n[o],i[o]=1-a[o];for(var s=0,u=0;u<t.length;u++)if(Math.abs(a[u])>=Number.EPSILON){s=u;break}for(var c=t.length-1,l=t.length-1;l>=s;l--)if(Math.abs(i[l])>=Number.EPSILON){c=l;break}for(var h,f,d,p=-1,v=Number.MIN_VALUE,g=s;g<=c;g++){f=0;for(var m=0;m<=g;m++)0!==t[m]&&(f-=n[m]/a[g]*Math.log(n[m]/a[g]));d=0;for(var y=g+1;y<t.length;y++)0!==t[y]&&(d-=n[y]/i[g]*Math.log(n[y]/i[g]));v<(h=f+d)&&(v=h,p=g)}return p}n.d(e,{Z:function(){return r}})},87034:function(t,e,n){"use strict";function r(t,e){for(var n=0,r=0;r<t.length;r++)n+=r*t[r];return Math.floor(n/e)}n.d(e,{Z:function(){return r}})},67320:function(t,e,n){"use strict";function r(t,e){for(var n,r,s,u,c,l,h,f,d,p,v,g=-2,m=0,y=0;y<t.length;y++)m+=y*t[y];for(n=m/=e;n!==g;){var b=a(t,n),w=a(t,t.length-1),x=i(t,n),k=i(t,t.length-1),I=o(t,n);if(u=b/w,c=(w-b)/w,(p=(d=(r=x/b)/(l=I/b-r*r)-(s=(k-x)/(w-b))/(h=(o(t,t.length-1)-I)/(w-b)-s*s))*d-(f=1/l-1/h)*(r*r/l-s*s/h+Math.log10(l*(c*c)/(h*(u*u)))))<0)return n;g=n,v=(d+Math.sqrt(p))/f,n=isNaN(v)?g:Math.floor(v)}return n}function a(t,e){for(var n=0,r=0;r<=e;r++)n+=t[r];return n}function i(t,e){for(var n=0,r=0;r<=e;r++)n+=r*t[r];return n}function o(t,e){for(var n=0,r=0;r<=e;r++)n+=r*r*t[r];return n}n.d(e,{Z:function(){return r}})},4894:function(t,e,n){"use strict";function r(t){if(t.length<2)return 0;for(var e=0,n=-1,r=-1,o=new Array(t.length),s=0;s<t.length;s++)o[s]=t[s],t[s]>0&&(r=s);for(;!i(o);)if(o=a(o),++e>1e4)return n;return n=function(t,e){for(var n,r=1;r<e;r++)if(t[r-1]>t[r]&&t[r+1]>=t[r]){n=r;break}return n}(o,r),n}function a(t){for(var e=new Array(t.length),n=1;n<t.length-1;n++)e[n]=(t[n-1]+t[n]+t[n+1])/3;return e[0]=(t[0]+t[1])/3,e[t.length-1]=(t[t.length-2]+t[t.length-1])/3,e}function i(t){for(var e=t.length,n=!1,r=0,a=1;a<e-1;a++)if(t[a-1]<t[a]&&t[a+1]<t[a]&&++r>2)return!1;return 2===r&&(n=!0),n}n.d(e,{Z:function(){return r}})},31610:function(t,e,n){"use strict";function r(t,e){for(var n,r,a,i,o,s,u=0,c=0,l=0,h=0,f=-1,d=t.length,p=new Array(d),v=0;v<d;v++)p[v]=t[v]/e;for(var g=0;g<d;g++)u+=g*p[g],c+=g*g*p[g],l+=g*g*g*p[g];a=(-c*c+u*l)/(r=1*c-u*u),o=.5*(-(i=(1*-l+c*u)/r)-Math.sqrt(i*i-4*a)),n=((s=.5*(-i+Math.sqrt(i*i-4*a)))-u)/(s-o);for(var m=0;m<d;m++)if((h+=p[m])>n){f=m;break}return f}n.d(e,{Z:function(){return r}})},31629:function(t,e,n){"use strict";function r(t,e){for(var n=0,r=0,a=0,i=0,o=0,s=0;s<t.length;s++)o+=s*t[s];for(var u=0;u<t.length;u++){var c=e-(r+=t[u]);if(0!==r&&0!==c){var l=(o-(n+=u*t[u]))/c,h=r*c*(n/r-l)*(n/r-l);h>=a&&(i=u,a=h)}}return i}n.d(e,{Z:function(){return r}})},40621:function(t,e,n){"use strict";function r(t){for(var e=-1,n=new Array(t.length),r=a(t,t.length-1),i=1,o=0;o<t.length;o++)n[o]=Math.abs(a(t,o)/r-.5),n[o]<i&&(i=n[o],e=o);return e}function a(t,e){for(var n=0,r=0;r<=e;r++)n+=t[r];return n}n.d(e,{Z:function(){return r}})},88866:function(t,e,n){"use strict";function r(t,e){for(var n,r,a=new Array(t.length),i=new Array(t.length),o=new Array(t.length),s=0,u=0,c=0,l=0,h=0,f=0,d=0;d<t.length;d++)a[d]=t[d]/e;i[0]=a[0],o[0]=1-i[0];for(var p=1;p<t.length;p++)i[p]=i[p-1]+a[p],o[p]=1-i[p];n=0;for(var v=0;v<t.length;v++)if(Math.abs(i[v])>=Number.EPSILON){n=v;break}r=t.length-1;for(var g=t.length-1;g>=n;g--)if(Math.abs(o[g])>=Number.EPSILON){r=g;break}for(var m=n;m<=r;m++){for(var y=0,b=0,w=0,x=0;x<=m;x++)0!==t[x]&&(y-=a[x]/i[m]*Math.log(a[x]/i[m])),b+=Math.sqrt(a[x]/i[m]),w+=a[x]*a[x]/(i[m]*i[m]);for(var k=0,I=0,S=0,_=m+1;_<t.length;_++)0!==t[_]&&(k-=a[_]/o[m]*Math.log(a[_]/o[m])),I+=Math.sqrt(a[_]/o[m]),S+=a[_]*a[_]/(o[m]*o[m]);var C=y+k,E=2*(b*I>0?Math.log(b*I):0),A=-1*(w*S>0?Math.log(w*S):0);C>l&&(l=C,s=m),E>h&&(h=E,u=m),A>f&&(f=A,c=m)}var T,N=[s,u,c];N.sort((function(t,e){return t-e})),T=Math.abs(N[0]-N[1])<=5?Math.abs(N[1]-N[2])<=5?[1,2,1]:[0,1,3]:Math.abs(N[1]-N[2])<=5?[3,1,0]:[1,2,1];var D=i[N[2]]-i[N[0]];return Math.round(N[0]*(i[N[0]]+.25*D*T[0])+.25*N[1]*D*T[1]+N[2]*(o[N[2]]+.25*D*T[2]))}n.d(e,{Z:function(){return r}})},49030:function(t,e,n){"use strict";function r(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r]/e;var a=new Array(t.length),i=new Array(t.length);a[0]=n[0],i[0]=1-a[0];for(var o=1;o<t.length;o++)a[o]=a[o-1]+n[o],i[o]=1-a[o];for(var s=0,u=0;u<t.length;u++)if(Math.abs(a[u])>=Number.EPSILON){s=u;break}for(var c=t.length-1,l=t.length-1;l>=s;l--)if(Math.abs(i[l])>=Number.EPSILON){c=l;break}for(var h,f,d,p,v=-1,g=Number.MAX_VALUE,m=s;m<=c;m++){d=0,h=.5/a[m];for(var y=1;y<=m;y++)d-=n[y]*Math.log(1-h*a[y-1]);d*=h,p=0,h=.5/i[m];for(var b=m+1;b<t.length;b++)p-=n[b]*Math.log(1-h*i[b]);p*=h,(f=Math.abs(d-p))<g&&(g=f,v=m)}return v}n.d(e,{Z:function(){return r}})},7881:function(t,e,n){"use strict";n.d(e,{R:function(){return b},x:function(){return y}});var r=n(55947),a=n(5905),i=n(99922),o=n(13631),s=n(78036),u=n(87034),c=n(67320),l=n(4894),h=n(31610),f=n(31629),d=n(40621),p=n(88866),v=n(49030),g=n(45609),m=n(73964),y={huang:r.Z,intermodes:a.Z,isodata:i.Z,li:o.Z,maxentropy:s.Z,mean:u.Z,minerror:c.Z,minimum:l.Z,moments:h.Z,otsu:f.Z,percentile:d.Z,renyientropy:p.Z,shanbhag:v.Z,triangle:g.Z,yen:m.Z},b={};Object.keys(y).forEach((function(t){b[t]=t}))},45609:function(t,e,n){"use strict";function r(t){for(var e=0,n=0,r=0,a=0,i=0;i<t.length;i++)if(t[i]>0){e=i;break}e>0&&e--;for(var o=t.length-1;o>0;o--)if(t[o]>0){a=o;break}a<t.length-1&&a++;for(var s=0;s<t.length;s++)t[s]>n&&(r=s,n=t[s]);var u,c,l,h=!1;if(r-e<a-r){h=!0;for(var f=0,d=t.length-1;f<d;){var p=t[f];t[f]=t[d],t[d]=p,f++,d--}e=t.length-1-a,r=t.length-1-r}if(e===r)return e;u=t[r],c=e-r,l=(u/=l=Math.sqrt(u*u+c*c))*e+(c/=l)*t[e];for(var v=e,g=0,m=e+1;m<=r;m++){var y=u*m+c*t[m]-l;y>g&&(v=m,g=y)}if(v--,h){for(var b=0,w=t.length-1;b<w;){var x=t[b];t[b]=t[w],t[w]=x,b++,w--}return t.length-1-v}return v}n.d(e,{Z:function(){return r}})},73964:function(t,e,n){"use strict";function r(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r]/e;var a=new Array(t.length);a[0]=n[0];for(var i=1;i<t.length;i++)a[i]=a[i-1]+n[i];var o=new Array(t.length);o[0]=n[0]*n[0];for(var s=1;s<t.length;s++)o[s]=o[s-1]+n[s]*n[s];var u=new Array(t.length);u[t.length-1]=0;for(var c=t.length-2;c>=0;c--)u[c]=u[c+1]+n[c+1]*n[c+1];for(var l,h=-1,f=Number.MIN_VALUE,d=0;d<t.length;d++)(l=-1*(o[d]*u[d]>0?Math.log(o[d]*u[d]):0)+2*(a[d]*(1-a[d])>0?Math.log(a[d]*(1-a[d])):0))>f&&(f=l,h=d);return h}n.d(e,{Z:function(){return r}})},77916:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(40049),a=n.n(r),i=n(80712),o=n(82817);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.size,n=void 0===e?0:e,r=t.algorithm,s=void 0===r?"copy":r,u=t.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===s){if(u.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: ".concat(this.channels));for(var c=0;c<u.length;c++)0===u[c]&&(u[c]=.001)}else u=a()(this.channels,null);Array.isArray(n)||(n=[n,n]);var l=this.width+2*n[0],h=this.height+2*n[1],f=this.channels,d=i.Z.createFrom(this,{width:l,height:h});(0,o.Z)(this,d,n[0],n[1]);for(var p=n[0];p<l-n[0];p++)for(var v=0;v<f;v++){for(var g=u[v]||d.data[(n[1]*l+p)*f+v],m=0;m<n[1];m++)d.data[(m*l+p)*f+v]=g;g=u[v]||d.data[((h-n[1]-1)*l+p)*f+v];for(var y=h-n[1];y<h;y++)d.data[(y*l+p)*f+v]=g}for(var b=0;b<h;b++)for(var w=0;w<f;w++){for(var x=u[w]||d.data[(b*l+n[0])*f+w],k=0;k<n[0];k++)d.data[(b*l+k)*f+w]=x;x=u[w]||d.data[(b*l+l-n[0]-1)*f+w];for(var I=l-n[0];I<l;I++)d.data[(b*l+I)*f+w]=x}return d}},40291:function(t,e,n){"use strict";function r(t,e,n){var r=this.width/e,a=this.height/n;if(this.bitDepth>1)for(var i=0;i<e;i++)for(var o=Math.floor((i+.5)*r),s=0;s<n;s++)for(var u=Math.floor((s+.5)*a),c=0;c<this.channels;c++)t.setValueXY(i,s,c,this.getValueXY(o,u,c));else for(var l=0;l<e;l++)for(var h=Math.floor((l+.5)*r),f=0;f<n;f++){var d=Math.floor((f+.5)*a);this.getBitXY(h,d)&&t.setBitXY(l,f)}}n.d(e,{Z:function(){return r}})},92323:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(78926),a=n(80712),i=n(4118),o=n(40291);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.factor,n=void 0===e?1:e,s=t.interpolation,u=void 0===s?i.a8.nearestneighbor:s,c=t.preserveAspectRatio,l=void 0===c||c,h=(0,i.Zq)(u),f=t.width,d=t.height;f||(f=d&&l?Math.round(d*(this.width/this.height)):this.width),d||(d=l?Math.round(f*(this.height/this.width)):this.height);var p=(0,r.AC)(n,f,d);if(f=p.width,d=p.height,f===this.width&&d===this.height){var v=this.clone();return v.position=[0,0],v}var g=Math.round((this.width-f)/2),m=Math.round((this.height-d)/2),y=a.Z.createFrom(this,{width:f,height:d,position:[g,m]});if(h!==i.a8.nearestneighbor)throw new Error("unsupported resize interpolation: ".concat(h));return o.Z.call(this,y,f,d),y}},21040:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(80712);function a(){return new r.Z(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}},50725:function(t,e,n){"use strict";n.d(e,{Bg:function(){return o},U1:function(){return i},rs:function(){return s}});var r=n(80712),a=n(14276);function i(t,e){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),"number"!==typeof t)throw new TypeError("angle must be a number");switch(t<0&&(t=360*Math.ceil(-t/360)+t),t%360){case 0:return this.clone();case 90:return s.call(this);case 180:return u.call(this);case 270:return o.call(this);default:return a.Z.call(this,t,e)}}function o(){if(1===this.bitDepth){for(var t=new r.Z(this.height,this.width,{kind:"BINARY",parent:this}),e=t.height-1,n=0;n<this.height;n++)for(var a=0;a<this.width;a++)this.getBitXY(a,n)&&t.setBitXY(n,e-a);return t}for(var i=r.Z.createFrom(this,{width:this.height,height:this.width}),o=i.height-1,s=0;s<this.height;s++)for(var u=0;u<this.width;u++)for(var c=0;c<this.channels;c++)i.setValueXY(s,o-u,c,this.getValueXY(u,s,c));return i}function s(){if(1===this.bitDepth){for(var t=new r.Z(this.height,this.width,{kind:"BINARY",parent:this}),e=t.width-1,n=0;n<this.height;n++)for(var a=0;a<this.width;a++)this.getBitXY(a,n)&&t.setBitXY(e-n,a);return t}for(var i=r.Z.createFrom(this,{width:this.height,height:this.width}),o=i.width-1,s=0;s<this.height;s++)for(var u=0;u<this.width;u++)for(var c=0;c<this.channels;c++)i.setValueXY(o-s,u,c,this.getValueXY(u,s,c));return i}function u(){if(1===this.bitDepth){for(var t=new r.Z(this.width,this.height,{kind:"BINARY",parent:this}),e=t.width-1,n=t.height-1,a=0;a<this.height;a++)for(var i=0;i<this.width;i++)this.getBitXY(i,a)&&t.setBitXY(e-i,n-a);return t}for(var o=r.Z.createFrom(this),s=o.width-1,u=o.height-1,c=0;c<this.height;c++)for(var l=0;l<this.width;l++)for(var h=0;h<this.channels;h++)o.setValueXY(s-l,u-c,h,this.getValueXY(l,c,h));return o}},14276:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(80712),a=n(4118);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.interpolation,i=void 0===n?a.a8.nearestneighbor:n,o=e.width,s=void 0===o?this.width:o,u=e.height,c=void 0===u?this.height:u;if("number"!==typeof t)throw new TypeError("degrees must be a number");var l=(0,a.Zq)(i),h=t*Math.PI/180,f=Math.floor(Math.abs(s*Math.cos(h))+Math.abs(c*Math.sin(h))),d=Math.floor(Math.abs(c*Math.cos(h))+Math.abs(s*Math.sin(h))),p=Math.cos(-h),v=Math.sin(-h),g=f/2,m=d/2;f%2===0?(g-=.5,d%2===0?m-=.5:m=Math.floor(m)):(g=Math.floor(g),d%2===0?m-=.5:m=Math.floor(m));var y=Math.floor(s/2-g),b=Math.floor(c/2-m);if(1===this.bitDepth){var w=new r.Z(f,d,{kind:"BINARY",parent:this});switch(l){case a.a8.nearestneighbor:return function(t,e,n,r,a,i,o,s){for(var u=0;u<e.width;u+=1)for(var c=0;c<e.height;c+=1){var l=Math.round((u-a)*o-(c-i)*s+a)+n,h=Math.round((c-i)*o+(u-a)*s+i)+r;(l<0||l>=t.width||h<0||h>=t.height||t.getBitXY(l,h))&&e.setBitXY(u,c)}return e}(this,w,y,b,g,m,p,v);case a.a8.bilinear:return function(t,e,n,r,a,i,o,s){for(var u=t.width,c=0;c<e.height;c++)for(var l=0;l<e.width;l++){var h=(l-a)*o-(c-i)*s+a+n,f=(c-i)*o+(l-a)*s+i+r,d=0|h,p=0|f,v=h-d,g=f-p;if(h<0||h>=t.width||f<0||f>=t.height)e.setBitXY(l,c);else{var m=p*t.width+d,y=t.getBit(m),b=t.getBit(m+1),w=t.getBit(m+u);(y|v&b-y|g&w-y|v&g&y-b-w+t.getBit(m+1+u))>0&&e.setBitXY(l,c)}}return e}(this,w,y,b,g,m,p,v);default:throw new Error("unsupported rotate interpolation: ".concat(l))}}else{var x=r.Z.createFrom(this,{width:f,height:d});switch(l){case a.a8.nearestneighbor:return function(t,e,n,r,a,i,o,s){for(var u=0;u<e.width;u+=1)for(var c=0;c<e.height;c+=1)for(var l=0;l<t.channels;l++){var h=Math.round((u-a)*o-(c-i)*s+a)+n,f=Math.round((c-i)*o+(u-a)*s+i)+r;h<0||h>=t.width||f<0||f>=t.height?1===t.alpha&&l===t.channels-1?e.setValueXY(u,c,l,0):e.setValueXY(u,c,l,t.maxValue):e.setValueXY(u,c,l,t.getValueXY(h,f,l))}return e}(this,x,y,b,g,m,p,v);case a.a8.bilinear:return function(t,e,n,r,a,i,o,s){for(var u=t.width*t.channels,c=0;c<e.height;c++)for(var l=0;l<e.width;l++)for(var h=(l-a)*o-(c-i)*s+a+n,f=(c-i)*o+(l-a)*s+i+r,d=0|h,p=0|f,v=h-d,g=f-p,m=0;m<t.channels;m++)if(h<0||h>=t.width||f<0||f>=t.height)1===t.alpha&&m===t.channels-1?e.setValueXY(l,c,m,0):e.setValueXY(l,c,m,t.maxValue);else{var y=(p*t.width+d)*t.channels+m,b=t.data[y],w=t.data[y+t.channels],x=t.data[y+u],k=b+v*(w-b)+g*(x-b)+v*g*(b-w-x+t.data[y+u+t.channels])|0;e.setValueXY(l,c,m,k)}return e}(this,x,y,b,g,m,p,v);default:throw new Error("unsupported rotate interpolation: ".concat(l))}}}},71197:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(29439),a=n(61730),i=n(59222),o=n(2714),s=n(80712);function u(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function c(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function l(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function h(t,e,n,r,a,i,o,s,u,c,l,h){var f=(n*t+r*e+a)/(u*t+c*e+1),d=(i*t+o*e+s)/(u*t+c*e+1);return l.getValueXY(Math.floor(f),Math.floor(d),h)}function f(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).calculateRatio,n=void 0===e||e;if(4!==t.length)throw new Error("The array pts must have four elements, which are the four corners. Currently, pts have ".concat(t.length," elements"));var f,d,p=(0,r.Z)(t,4),v=function(t){for(var e=0,n=0,r=0,a=0,i=t[0][0],o=0,s=1;s<t.length;s++)t[s][0]<i&&(i=t[s][0],o=s);for(var u=t[(o+1)%t.length][0],c=(o+1)%t.length,l=1;l<t.length;l++)t[l][0]<u&&l!==o&&(u=t[l][0],c=l);return t[c][1]<t[o][1]?(e=t[c],a=t[o],o!==(c+1)%4?(n=t[(c+1)%4],r=t[(c+2)%4]):(n=t[(c+2)%4],r=t[(c+3)%4])):(a=t[c],e=t[o],c!==(o+1)%4?(n=t[(o+1)%4],r=t[(o+2)%4]):(n=t[(o+2)%4],r=t[(o+3)%4])),[e,n,r,a]}([p[0],p[1],p[2],p[3]]),g=(0,r.Z)(v,4),m=g[0],y=g[1],b=g[2],w=g[3];if(n){var x=function(t,e,n,r,o,s){var h=Math.max(u(t,e),u(r,n)),f=Math.max(u(t,r),u(e,n)),d=0,p=0,v=Math.ceil(o/2),g=Math.ceil(s/2),m=h/f,y=[t[0],t[1],1],b=[e[0],e[1],1],w=[r[0],r[1],1],x=[n[0],n[1],1],k=l(c(y,x),w)/l(c(b,x),w),I=l(c(y,x),b)/l(c(w,x),b),S=[k*b[0]-y[0],k*b[1]-y[1],k*b[2]-y[2]],_=[I*w[0]-y[0],I*w[1]-y[1],I*w[2]-y[2]],C=S[0],E=S[1],A=S[2],T=_[0],N=_[1],D=_[2],R=1/(A*D)*(C*T-(C*D+A*T)*v+A*D*v*v+(E*N-(E*D+A*N)*g+A*D*g*g));R=R>=0?Math.sqrt(R):Math.sqrt(-R);var Z=new a.Z([[R,0,v],[0,R,g],[0,0,1]]),M=Z.transpose(),F=(0,i.S)(M),O=(0,i.S)(Z),B=a.Z.rowVector(S),L=a.Z.rowVector(_),P=Math.sqrt(l(B.mmul(F).mmul(O).to1DArray(),S)/l(L.mmul(F).mmul(O).to1DArray(),_));return 0===P||0===m?(d=Math.ceil(h),p=Math.ceil(f)):P<m?(d=Math.ceil(h),p=Math.ceil(d/P)):(p=Math.ceil(f),d=Math.ceil(P*p)),[d,p]}(m,y,b,w,this.width,this.height),k=(0,r.Z)(x,2);f=k[0],d=k[1]}else f=Math.ceil(Math.max(u(m,y),u(w,b))),d=Math.ceil(Math.max(u(m,w),u(y,b)));for(var I=s.Z.createFrom(this,{width:f,height:d}),S=(0,r.Z)(m,2),_=S[0],C=S[1],E=(0,r.Z)(y,2),A=E[0],T=E[1],N=(0,r.Z)(b,2),D=N[0],R=N[1],Z=(0,r.Z)(w,2),M=Z[0],F=Z[1],O=f-1,B=d-1,L=f-1,P=d-1,U=new a.Z([[0,0,1,0,0,0,-0*_,-0*_],[0,O,1,0,0,0,-0*A,-O*A],[B,L,1,0,0,0,-B*D,-0*D],[P,0,1,0,0,0,-P*M,-0*M],[0,0,0,0,0,1,-0*C,-0*C],[0,0,0,0,O,1,-0*T,-O*T],[0,0,0,B,L,1,-B*R,-L*R],[0,0,0,P,0,1,-P*F,-0*F]]),z=a.Z.columnVector([_,A,D,M,C,T,R,F]),W=new o.Z(U).solve(z).to1DArray(),V=(0,r.Z)(W,8),G=V[0],j=V[1],H=V[2],X=V[3],q=V[4],Y=V[5],K=V[6],Q=V[7],J=new a.Z(d,f),$=0;$<this.channels;$++){for(var tt=0;tt<d;tt++)for(var et=0;et<f;et++)J.set(tt,et,h(tt,et,G,j,H,X,q,Y,K,Q,this,$));I.setMatrix(J,{channel:$})}return I}},65501:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(80712),a=n(77171);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.mergeAlpha,i=void 0!==n&&n,s=e.keepAlpha,u=void 0!==s&&s;i&=this.alpha,u&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});for(var c=r.Z.createFrom(this,{components:1,alpha:u,colorModel:a.GREY}),l=0,h=0;h<this.size;h++){var f=t(this.getPixel(h));i?c.data[l++]=f*this.data[h*this.channels+this.components]/this.maxValue:(c.data[l++]=f,u&&(c.data[l++]=this.data[h*this.channels+this.components]))}return c}function o(t){return(t[0]+t[1]+t[2])/3}},82881:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(77714);function a(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");for(var n=new r.Z(t.width,t.height,-1/0),a=Math.floor(t.width/2),i=Math.floor(t.height/2),o=a,s=i,u=!1;!u;){for(var c=n.localSearch(a,i,-1/0),l=0;l<c.length;l++){var h=c[l],f=this.getSimilarity(t,{border:e,shift:[o-h[0],s-h[1]]});n[h[0]][h[1]]=f}var d=n.localMax(a,i);d.position[0]!==a||d.position[1]!==i?(a=d.position[0],i=d.position[1]):u=!0}return[a-o,i-s]}},65029:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(24073),a=n(80712),i=n(77171);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keepAlpha,o=void 0!==n&&n,s=e.mergeAlpha,u=void 0!==s&&s;o&=this.alpha,u&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),t=(0,r.h)(this,t);for(var c=a.Z.createFrom(this,{components:1,alpha:o,colorModel:i.GREY}),l=0,h=0;h<this.data.length;h+=this.channels)u?c.data[l++]=this.data[h+t]*this.data[h+this.components]/this.maxValue:(c.data[l++]=this.data[h+t],o&&(c.data[l++]=this.data[h+this.components]));return c}},51867:function(t,e,n){"use strict";function r(t){var e,n=a(this),r=a(t);if(e=n>=r?i(this,n):i(t,r),0===n||0===r)return e;for(var o=this,s=t;n!==r;)if(n>r){if(null===(o=o.parent))return e;n-=1}else{if(null===(s=s.parent))return e;r-=1}for(;o!==s&&null!==o&&null!==s;)if(o=o.parent,s=s.parent,null===o||null===s)return e;return o!==s?e:o}function a(t){for(var e=0,n=t;null!=n.parent;)n=n.parent,e++;return e}function i(t,e){for(var n=t;e>0;)n=n.parent,e-=1;return n}n.d(e,{Z:function(){return r}})},5412:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(4118);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.checkProcessable("getColumn",{bitDepth:[8,16]}),(0,r.W7)(this,t),(0,r.Nw)(this,e);for(var n=new Array(this.height),a=0,i=this.width*this.channels,o=e+t*this.channels;o<this.data.length;o+=i)n[a++]=this.data[o];return n}},23017:function(t,e,n){"use strict";function r(t){for(var e=this,n=e.getClosestCommonParent(t),r=e.getRelativePosition(n,{defaultFurther:!0}),i=a(e,r),o=t.getRelativePosition(n,{defaultFurther:!0}),s=a(t,o),u=function(t,e){var n=0,r=0,a=[];for(;n<t.length&&r<e.length;)t[n][0]===e[r][0]&&t[n][1]===e[r][1]?(a.push(t[n]),n++,r++):t[n][0]<e[r][0]||t[n][0]===e[r][0]&&t[n][1]<e[r][1]?n++:r++;return a}(i,s),c={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]},l=0;l<u.length;l++){var h=u[l],f=[h[0]-r[0],h[1]-r[1]],d=[h[0]-o[0],h[1]-o[1]],p=e.getBitXY(f[0],f[1]),v=t.getBitXY(d[0],d[1]);1===p&&1===v&&c.commonWhitePixels.push(h)}for(var g=0;g<i.length;g++){var m=void 0,y=void 0;0!==g&&(m=Math.floor(g/e.width),y=g%e.width),1===e.getBitXY(m,y)&&c.whitePixelsMask1.push(i[g])}for(var b=0;b<s.length;b++){var w=0,x=0;0!==b&&(w=Math.floor(b/t.width),x=b%t.width),1===t.getBitXY(w,x)&&c.whitePixelsMask2.push(s[b])}return c}function a(t,e){for(var n=[],r=0;r<t.height;r++)for(var a=0;a<t.width;a++){var i=[r,a];n.push([i[0]+e[0],i[1]+e[1]])}return n}n.d(e,{Z:function(){return r}})},63290:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(61730);function a(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===t){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}for(var e=new r.Z(this.height,this.width),n=0;n<this.height;n++)for(var a=0;a<this.width;a++)e.set(n,a,this.getValueXY(a,n,t));return e}},23455:function(t,e,n){"use strict";function r(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});for(var t=new Array(this.size),e=0,n=0;n<this.data.length;n+=this.channels){for(var r=new Array(this.components),a=0;a<this.components;a++)r[a]=this.data[n+a];t[e++]=r}return t}n.d(e,{Z:function(){return r}})},93407:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sampling,n=void 0===e?[10,10]:e,r=t.painted,a=void 0!==r&&r,i=t.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(n)||(n=[n,n]);for(var o=n[0],s=n[1],u=[],c=[],l=this.width/o,h=this.height/s,f=Math.floor(l/2),d=0;d<o;d++){for(var p=Math.floor(h/2),v=0;v<s;v++){var g=Math.round(f),m=Math.round(p);i&&!i.getBitXY(g,m)||(u.push([g,m]),c.push(this.getPixelXY(g,m))),p+=h}f+=l}var y={xyS:u,zS:c};return a&&(y.painted=this.rgba8().paintPoints(u)),y}n.d(e,{Z:function(){return r}})},26461:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(4118);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.checkProcessable("getRow",{bitDepth:[8,16]}),(0,r.KF)(this,t),(0,r.Nw)(this,e);for(var n=new Array(this.width),a=0,i=t*this.width*this.channels+e,o=i+this.width*this.channels,s=i;s<o;s+=this.channels)n[a++]=this.data[s];return n}},12203:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(40049),a=n.n(r),i=n(24073);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.shift,r=void 0===n?[0,0]:n,o=e.average,s=e.channels,u=e.defaultAlpha,c=e.normalize,l=e.border,h=void 0===l?[0,0]:l;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(h)||(h=[h,h]),s=(0,i.Q)(this,{channels:s,defaultAlpha:u}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");"undefined"===typeof o&&(o=!0);for(var f=Math.max(h[0],-r[0]),d=Math.min(this.width-h[0],this.width-r[0]),p=Math.max(h[1],-r[1]),v=Math.min(this.height-h[1],this.height-r[1]),g=a()(s.length,0),m=0;m<s.length;m++){var y=s[m],b=c?this.sum[y]:Math.max(this.sum[y],t.sum[y]),w=c?t.sum[y]:Math.max(this.sum[y],t.sum[y]);if(0!==b&&0!==w)for(var x=f;x<d;x++)for(var k=p;k<v;k++){var I=x*this.multiplierX+k*this.multiplierY+y,S=I+r[0]*this.multiplierX+r[1]*this.multiplierY;g[m]+=Math.min(this.data[I]/b,t.data[S]/w)}}return o?g.reduce((function(t,e){return t+e}))/g.length:g}},92893:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(7881);function a(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).algorithm,e=void 0===t?r.R.otsu:t;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});var n=r.x[e.toLowerCase()];if(n)return n(this.getHistogram(),this.size);throw new Error("unknown thresholding algorithm: ".concat(e))}},31178:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(40049),a=n.n(r);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.size,n=void 0===e?0:e,r=t.algorithm,i=void 0===r?"copy":r,o=t.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===i){if(o.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: ".concat(this.channels));for(var s=0;s<o.length;s++)0===o[s]&&(o[s]=.001)}else o=a()(this.channels,null);Array.isArray(n)||(n=[n,n]);for(var u=n[0],c=n[1],l=this.channels,h=u;h<this.width-u;h++)for(var f=0;f<l;f++){for(var d=o[f]||this.data[(h+this.width*c)*l+f],p=0;p<c;p++)this.data[(p*this.width+h)*l+f]=d;d=o[f]||this.data[(h+this.width*(this.height-c-1))*l+f];for(var v=this.height-c;v<this.height;v++)this.data[(v*this.width+h)*l+f]=d}for(var g=0;g<this.height;g++)for(var m=0;m<l;m++){for(var y=o[m]||this.data[(g*this.width+u)*l+m],b=0;b<u;b++)this.data[(g*this.width+b)*l+m]=y;y=o[m]||this.data[(g*this.width+this.width-u-1)*l+m];for(var w=this.width-u;w<this.width;w++)this.data[(g*this.width+w)*l+m]=y}return this}},71973:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(24073);function a(t,e){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),e.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),e.width!==this.width||e.height!==this.height)throw new Error("Images must have exactly the same width and height");for(var n=t=(0,r.h)(this,t),a=0;a<e.data.length;a++)this.data[n]=e.data[a],n+=this.channels;return this}},9223:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(61730);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=new r.Z(t);var n=e.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===n){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}if(this.width!==t.columns||this.height!==t.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var a=0;a<this.height;a++)for(var i=0;i<this.width;i++)this.setValueXY(i,a,n,t.get(a,i))}},89604:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(27473),a=n(80712),i=n(77171);function o(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preserveAlpha,e=void 0===t||t;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new r.Z([this.clone()]);var n=new r.Z,o=this.data;if(this.alpha&&e)for(var s=0;s<this.components;s++){for(var u=a.Z.createFrom(this,{components:1,alpha:!0,colorModel:i.GREY}),c=0,l=0;l<o.length;l+=this.channels)u.data[c++]=o[l+s],u.data[c++]=o[l+this.components];n.push(u)}else for(var h=0;h<this.channels;h++){for(var f=a.Z.createFrom(this,{components:1,alpha:!1,colorModel:i.GREY}),d=0,p=0;p<o.length;p+=this.channels)f.data[d++]=o[p+h];n.push(f)}return n}},3915:function(t,e,n){"use strict";n(80712);var r=n(25),a=n(7881);n(27473),n(78335),n(20923),r.R,a.R},27473:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(93433),a=n(15671),i=n(43144),o=n(82963),s=n(60136),u=n(29388),c=n(7112),l=n(15357),h=n.n(l),f=n(80712),d=n(35588),p={configurable:!0,enumerable:!1,get:void 0},v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;if((0,a.Z)(this,n),Array.isArray(t)){r=e.call(this,t.length);for(var i=0;i<t.length;i++)r[i]=t[i]}else r="number"===typeof t?e.call(this,t):e.call(this);return r.computed=null,(0,o.Z)(r)}return(0,i.Z)(n,[{key:"checkProcessable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: ".concat(t," can not be applied on an empty stack"));this[0].checkProcessable(t,e);for(var n=1;n<this.length;n++){if((void 0===e.sameSize||e.sameSize)&&this[0].width!==this[n].width)throw new TypeError("The process: ".concat(t," can not be applied if width is not identical in all images"));if((void 0===e.sameSize||e.sameSize)&&this[0].height!==this[n].height)throw new TypeError("The process: ".concat(t," can not be applied if height is not identical in all images"));if((void 0===e.sameAlpha||e.sameAlpha)&&this[0].alpha!==this[n].alpha)throw new TypeError("The process: ".concat(t," can not be applied if alpha is not identical in all images"));if((void 0===e.sameBitDepth||e.sameBitDepth)&&this[0].bitDepth!==this[n].bitDepth)throw new TypeError("The process: ".concat(t," can not be applied if bitDepth is not identical in all images"));if((void 0===e.sameColorModel||e.sameColorModel)&&this[0].colorModel!==this[n].colorModel)throw new TypeError("The process: ".concat(t," can not be applied if colorModel is not identical in all images"));if((void 0===e.sameNumberChannels||e.sameNumberChannels)&&this[0].channels!==this[n].channels)throw new TypeError("The process: ".concat(t," can not be applied if channels is not identical in all images"))}}}],[{key:"load",value:function(t){return Promise.all(t.map(f.Z.load)).then((function(t){return new n(t)}))}},{key:"extendMethod",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.inPlace,o=void 0!==i&&i,s=a.returnThis,u=void 0===s||s,c=a.partialArgs,l=void 0===c?[]:c;return n.prototype[t]=o?function(){this.computed=null;for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=e.apply(this,[].concat((0,r.Z)(l),n));return u?this:i}:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.apply(this,[].concat((0,r.Z)(l),n))},n}},{key:"extendProperty",value:function(t,e){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).partialArgs,a=void 0===r?[]:r;return p.get=function(){if(null===this.computed)this.computed={};else if(h()(t,this.computed))return this.computed[t];var n=e.apply(this,a);return this.computed[t]=n,n},Object.defineProperty(n.prototype,t,p),n}}]),n}((0,c.Z)(Array));Array[Symbol.species]||(v.prototype.map=function(t,e){if("function"!==typeof t)throw new TypeError("".concat(t," is not a function"));for(var n=new v(this.length),r=0;r<this.length;r++)n[r]=t.call(e,this[r],r,this);return n}),(0,d.Z)(v)},39931:function(t,e,n){"use strict";function r(t){this.checkProcessable("min",{bitDepth:[8,16]});for(var e=this[0].getHistogram(t),n=1;n<this.length;n++)for(var r=this[n].getHistogram(t),a=0;a<e.length;a++)e[a]+=r[a];return e}n.d(e,{Z:function(){return r}})},59005:function(t,e,n){"use strict";function r(t){this.checkProcessable("min",{bitDepth:[8,16]});for(var e=this[0].getHistograms(t),n=e[0].length,r=1;r<this.length;r++)for(var a=this[r].getHistograms(t),i=0;i<e.length;i++)for(var o=0;o<n;o++)e[i][o]+=a[i][o];return e}n.d(e,{Z:function(){return r}})},46175:function(t,e,n){"use strict";function r(){this.checkProcessable("min",{bitDepth:[8,16]});for(var t=this[0].max,e=1;e<this.length;e++)for(var n=0;n<t.length;n++)t[n]=Math.max(t[n],this[e].max[n]);return t}n.d(e,{Z:function(){return r}})},73057:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(68666);function a(){this.checkProcessable("median",{bitDepth:[8,16]});for(var t=this.getHistograms({maxSlots:this[0].maxValue+1}),e=new Array(t.length),n=0;n<t.length;n++){var a=t[n];e[n]=(0,r.C)(a)}return e}},4800:function(t,e,n){"use strict";function r(){this.checkProcessable("min",{bitDepth:[8,16]});for(var t=this[0].min,e=1;e<this.length;e++)for(var n=0;n<t.length;n++)t[n]=Math.min(t[n],this[e].min[n]);return t}n.d(e,{Z:function(){return r}})},35588:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(31672),a=n(4800),i=n(46175),o=n(73057),s=n(39931),u=n(59005),c=n(47064),l=n(89191),h=n(17073);function f(t){t.extendMethod("matchAndCrop",r.Z),t.extendMethod("getMin",a.Z),t.extendMethod("getMax",i.Z),t.extendMethod("getMedian",o.Z),t.extendMethod("getHistogram",s.Z),t.extendMethod("getHistograms",u.Z),t.extendMethod("getAverage",c.Z),t.extendMethod("getAverageImage",c.Z),t.extendMethod("getMaxImage",l.Z),t.extendMethod("getMinImage",h.Z)}},31672:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(27473);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.algorithm,n=void 0===e?"matchToPrevious":e,a=t.ignoreBorder,i=void 0===a?[0,0]:a;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var o="matchToPrevious"===n,s=this[0],u=[];u[0]={position:[0,0],image:this[0]};for(var c=[0,0],l=1;l<this.length;l++){var h=s.getBestMatch(this[l],{border:i});u[l]={position:[h[0]+c[0],h[1]+c[1]],image:this[l]},o&&(c[0]+=h[0],c[1]+=h[1],s=this[l])}for(var f=0,d=0,p=0,v=0,g=0;g<u.length;g++){var m=u[g];m.position[0]>f&&(f=m.position[0]),m.position[0]<d&&(d=m.position[0]),m.position[1]>p&&(p=m.position[1]),m.position[1]<v&&(v=m.position[1])}d=0-d,v=0-v;for(var y=0;y<u.length;y++){var b=u[y];b.crop=b.image.crop({x:f-b.position[0],y:p-b.position[1],width:s.width-d-f,height:s.height-v-p})}for(var w=[],x=0;x<u.length;x++)w[x]=u[x].crop;return new r.Z(w)}},47064:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(80712);function a(){this.checkProcessable("averageImage",{bitDepth:[8,16]});for(var t=new Uint32Array(this[0].data.length),e=0;e<this.length;e++)for(var n=this[e],a=0;a<this[0].data.length;a++)t[a]+=n.data[a];for(var i=r.Z.createFrom(this[0]),o=i.data,s=0;s<this[0].data.length;s++)o[s]=t[s]/this.length;return i}},89191:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(37762),a=n(80712);function i(){this.checkProcessable("max",{bitDepth:[8,16]});var t=a.Z.createFrom(this[0]);t.data.fill(0);var e,n=(0,r.Z)(this);try{for(n.s();!(e=n.n()).done;)for(var i=e.value,o=0;o<t.data.length;o++)t.data[o]=Math.max(i.data[o],t.data[o])}catch(s){n.e(s)}finally{n.f()}return t}},17073:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(37762),a=n(80712);function i(){this.checkProcessable("max",{bitDepth:[8,16]});var t=a.Z.createFrom(this[0]);t.data.fill(t.maxValue);var e,n=(0,r.Z)(this);try{for(n.s();!(e=n.n()).done;)for(var i=e.value,o=0;o<t.data.length;o++)t.data[o]=Math.min(i.data[o],t.data[o])}catch(s){n.e(s)}finally{n.f()}return t}},78335:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(15671),a=n(43144),i=n(80712),o=n(12753),s=n(31539),u=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],c=[[0,1,0],[1,1,1],[0,1,0]],l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,t);var n=e.kind,a=void 0===n?"cross":n,i=e.shape,o=e.size,l=e.width,h=e.height,f=e.filled,d=void 0===f||f;if(o&&(l=o,h=o),i)switch(i.toLowerCase()){case"square":case"rectangle":this.matrix=function(t,e,n){var r=(0,s.Z)(e,t);if(n.filled)for(var a=0;a<e;a++)for(var i=0;i<t;i++)r[a][i]=1;else{for(var o=0,u=[0,e-1];o<u.length;o++)for(var c=u[o],l=0;l<t;l++)r[c][l]=1;for(var h=0;h<e;h++)for(var f=0,d=[0,t-1];f<d.length;f++){var p=d[f];r[h][p]=1}}return r}(l,h,{filled:d});break;case"circle":case"ellipse":this.matrix=function(t,e,n){var r=(0,s.Z)(e,t,n),a=1-e%2,i=1-t%2,o=Math.floor((t-1)/2),u=Math.floor((e-1)/2),c=o*o,l=u*u;if(n.filled)for(var h=0;h<=u;h++)for(var f=o-Math.floor(Math.sqrt(c-c*h*h/l));f<=o;f++)r[u-h][f]=1,r[u+h+a][f]=1,r[u-h][t-f-1]=1,r[u+h+a][t-f-1]=1;else{for(var d=0;d<=u;d++){var p=o-Math.floor(Math.sqrt(c-c*d*d/l));r[u-d][p]=1,r[u+d+a][p]=1,r[u-d][t-p-1]=1,r[u+d+a][t-p-1]=1}for(var v=0;v<=o;v++){var g=u-Math.floor(Math.sqrt(l-l*v*v/c));r[g][o-v]=1,r[g][o+v+i]=1,r[e-g-1][o-v]=1,r[e-g-1][o+v+i]=1}}return r}(l,h,{filled:d});break;case"triangle":this.matrix=function(t,e,n){if(!n.filled)throw new Error("Non filled triangle is not implemented");for(var r=(0,s.Z)(e,t,n),a=0;a<e;a++)for(var i=Math.floor((1-a/e)*t/2),o=i;o<t-i;o++)r[a][o]=1;return r}(l,h,{filled:d});break;default:throw new Error("Shape: unexpected shape: ".concat(i))}else{if(!a)throw new Error("Shape: expected a kind or a shape option");switch(a.toLowerCase()){case"cross":this.matrix=u;break;case"smallcross":this.matrix=c;break;default:throw new Error("Shape: unexpected kind: ".concat(a))}}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}return(0,a.Z)(t,[{key:"getPoints",value:function(){for(var t=this.matrix,e=[],n=0;n<t.length;n++)for(var r=0;r<t[0].length;r++)t[n][r]&&e.push([r-this.halfWidth,n-this.halfHeight]);return e}},{key:"getMask",value:function(){for(var t=new i.Z(this.width,this.height,{kind:o.$h}),e=0;e<this.matrix.length;e++)for(var n=0;n<this.matrix[0].length;n++)this.matrix[e][n]&&t.setBitXY(n,e);return t}}]),t}()},99262:function(t,e,n){"use strict";n.d(e,{Jx:function(){return o},wi:function(){return s}});for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(256),i=0;i<r.length;i++)a[r.charCodeAt(i)]=i;function o(t){var e,n,r,i,o=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);for(var c=new Uint8Array(o),l=0;l<s;l+=4)e=a[t.charCodeAt(l)],n=a[t.charCodeAt(l+1)],r=a[t.charCodeAt(l+2)],i=a[t.charCodeAt(l+3)],c[u++]=e<<2|n>>4,c[u++]=(15&n)<<4|r>>2,c[u++]=(3&r)<<6|63&i;return c}function s(t,e){var n=function(t){var e,n=t.length,a="";for(e=0;e<n;e+=3)a+=r[t[e]>>2],a+=r[(3&t[e])<<4|t[e+1]>>4],a+=r[(15&t[e+1])<<2|t[e+2]>>6],a+=r[63&t[e+2]];return n%3===2?a="".concat(a.substring(0,a.length-1),"="):n%3===1&&(a="".concat(a.substring(0,a.length-2),"==")),a}(t);return"data:".concat(e,";base64,").concat(n)}},24073:function(t,e,n){"use strict";n.d(e,{Q:function(){return a},h:function(){return i}});var r=n(77171);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.channels,r=e.allowAlpha,a=e.defaultAlpha;return"boolean"!==typeof r&&(r=!0),"undefined"===typeof n?function(t,e){for(var n=e?t.channels:t.components,r=new Array(n),a=0;a<n;a++)r[a]=a;return r}(t,a):function(t,e,n){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)e[r]=i(t,e[r],n);return e}(t,n,r)}function i(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e)throw new RangeError("validateChannel : the channel has to be >=0 and <".concat(t.channels));if("string"===typeof e){switch(t.colorModel){case r.GREY:break;case r.RGB:if("rgb".includes(e))switch(e){case"r":e=0;break;case"g":e=1;break;case"b":e=2}break;case r.HSL:if("hsl".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"l":e=2}break;case r.HSV:if("hsv".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"v":e=2}break;case r.CMYK:if("cmyk".includes(e))switch(e){case"c":e=0;break;case"m":e=1;break;case"y":e=2;break;case"k":e=3}break;default:throw new Error("Unexpected color model: ".concat(t.colorModel))}if("a"===e){if(!t.alpha)throw new Error("validateChannel : the image does not contain alpha channel");e=t.components}if("string"===typeof e)throw new Error("validateChannel : undefined channel: ".concat(e))}if(e>=t.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <".concat(t.channels));if(!n&&e>=t.components)throw new RangeError("validateChannel : alpha channel may not be selected");return e}},96244:function(t,e,n){"use strict";n.d(e,{EC:function(){return s},Lg:function(){return a}});var r=n(7405);function a(t){var e=(0,r.ro)(t);return[e.r,e.g,e.b,Math.round(255*e.a/100)]}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function o(t,e,n){var r,a,o,s,u,c;return n/=100,0===(e/=100)?s=u=c=255*n:(s=i(r=2*n-(a=n<=.5?n*(e+1):n+e-n*e),a,(o=t/360)+1/3),u=i(r,a,o),c=i(r,a,o-1/3)),{r:s,g:u,b:c}}function s(t){var e=t.color,n=t.colors,r=t.randomColors,i=t.numberColors,s=void 0===i?50:i;if(e&&!Array.isArray(e)&&(e=a(e)),e)return[e];if(n)return n=n.map((function(t){return Array.isArray(t)?t:a(t)})),n;if(r){n=new Array(s);for(var u=0;u<s;u++)n[u]=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}return function(t){for(var e=new Array(t),n=0,r=0;r<360;r+=360/t){var a=o(r,100,30+ ++n%4*15);e[n-1]=[Math.round(255*a.r),Math.round(255*a.g),Math.round(255*a.b)]}return e}(s)}},78926:function(t,e,n){"use strict";function r(t,e){if(!e)throw Error("getThreshold : the maxValue should be specified");if("string"===typeof t){if("%"!==t[t.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(t)/100*e}if("number"===typeof t)return t<1?t*e:t;throw Error("getThreshold : the value is not valid")}function a(t,e,n){t=function(t){if("string"===typeof t){var e=t[t.length-1];t=parseFloat(t),"%"===e&&(t/=100)}return t}(t);var r=Math.round(t*e),a=Math.round(t*n);return r<=0&&(r=1),a<=0&&(a=1),{width:r,height:a}}n.d(e,{AC:function(){return a},zQ:function(){return r}})},88048:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(37762);function a(t){var e,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split("."),a=(0,r.Z)(n);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(void 0===t[i])return;t=t[i]}}catch(o){a.e(o)}finally{a.f()}return t}},12889:function(t,e,n){"use strict";n.d(e,{H:function(){return r},e:function(){return a}});var r=[1,0,-1,0,1,1,-1,-1],a=[0,1,0,-1,1,-1,1,-1]},68666:function(t,e,n){"use strict";function r(t){var e=t.reduce((function(t,e){return t+e}));if(0===e)throw new Error("unreachable");for(var n,r=0,a=0,i=e/2;;){if(t[r]>0){if(void 0!==n)return(n+r)/2;if((a+=t[r])>i)return r;a===i&&(n=r)}r++}}function a(t){for(var e=0,n=0,r=0;r<t.length;r++)e+=t[r],n+=t[r]*r;return 0===e?0:n/e}n.d(e,{C:function(){return r},J:function(){return a}})},57797:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});var r=n(47390),a=n.n(r);function i(t){var e,n;if(!Array.isArray(t))throw new Error("validateKernel: Invalid Kernel: ".concat(t));if(Array.isArray(t[0])){if(0===(1&t.length)||0===(1&t[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");e=Math.floor(t.length/2),n=Math.floor(t[0].length/2)}else{var r=Math.sqrt(t.length);if(!a()(r))throw new RangeError("validateKernel: Kernel array should be a square");n=e=Math.floor(Math.sqrt(t.length)/2);for(var i=new Array(r),o=0;o<r;o++){i[o]=new Array(r);for(var s=0;s<r;s++)i[o][s]=t[o*r+s]}t=i}return{kernel:t,kWidth:n,kHeight:e}}},7225:function(t,e,n){"use strict";n.d(e,{Ac:function(){return o},Ds:function(){return r},cm:function(){return i},q_:function(){return a}});var r=[[-1,0,1],[-2,0,2],[-1,0,1]],a=[[-1,-2,-1],[0,0,0],[1,2,1]],i=[[3,0,-3],[10,0,-10],[3,0,-3]],o=[[3,10,3],[0,0,0],[-3,-10,-3]]},77714:function(t,e,n){"use strict";function r(t,e,n){for(var a=new Array(t),i=0;i<t;i++)a[i]=new Array(e);if(n)for(var o=0;o<t;o++)for(var s=0;s<e;s++)a[o][s]=n;return a.width=t,a.height=e,Object.setPrototypeOf(a,r.prototype),a}n.d(e,{Z:function(){return r}}),r.prototype.localMin=function(t,e){for(var n=this[t][e],r=[t,e],a=Math.max(0,t-1);a<Math.min(this.length,t+2);a++)for(var i=Math.max(0,e-1);i<Math.min(this[0].length,e+2);i++)this[a][i]<n&&(n=this[a][i],r=[a,i]);return{position:r,value:n}},r.prototype.localMax=function(t,e){for(var n=this[t][e],r=[t,e],a=Math.max(0,t-1);a<Math.min(this.length,t+2);a++)for(var i=Math.max(0,e-1);i<Math.min(this[0].length,e+2);i++)this[a][i]>n&&(n=this[a][i],r=[a,i]);return{position:r,value:n}},r.prototype.localSearch=function(t,e,n){for(var r=[],a=Math.max(0,t-1);a<Math.min(this.length,t+2);a++)for(var i=Math.max(0,e-1);i<Math.min(this[0].length,e+2);i++)this[a][i]===n&&r.push([a,i]);return r}},94640:function(t,e,n){"use strict";function r(t){for(var e=0;e<t.length;e++)t[e][0]=Math.round(t[e][0]),t[e][1]=Math.round(t[e][1]);return t}function a(t,e){return[t[0]-e[0],t[1]-e[1]]}function i(t){var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function o(t,e,n){void 0===n&&(n=new Array(e.length));for(var r=Math.cos(t),a=Math.sin(t),i=0;i<n.length;++i)n[i]=[r*e[i][0]-a*e[i][1],a*e[i][0]+r*e[i][1]];return n}function s(t){for(var e=0,n=0;n<t.length;n++){var r=t[n][0],a=t[n][1],i=t[n===t.length-1?0:n+1][0],o=t[n===t.length-1?0:n+1][1];e+=Math.sqrt(Math.pow(i-r,2)+Math.pow(o-a,2))}return e}function u(t){for(var e=0,n=0;n<t.length;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return Math.abs(e)}function c(t){for(var e=1/0,n=1/0,r=-1/0,a=-1/0,i=0;i<t.length;i++)t[i][0]<e&&(e=t[i][0]),t[i][0]>r&&(r=t[i][0]),t[i][1]<n&&(n=t[i][1]),t[i][1]>a&&(a=t[i][1]);return[[e,n],[r,a]]}function l(t,e){void 0===e&&(e=new Array(t.length).fill(0).map((function(){return[]})));for(var n=c(t),r=n[0][0],a=n[0][1],i=0;i<t.length;i++)e[i][0]=t[i][0]-r,e[i][1]=t[i][1]-a;return e}n.d(e,{Fv:function(){return i},NM:function(){return r},U1:function(){return o},XC:function(){return l},_z:function(){return c},e5:function(){return a},gJ:function(){return u},w$:function(){return s}})},4976:function(t,e,n){"use strict";n.d(e,{a:function(){return o}});var r=n(76990),a=n.n(r),i=n(80712);function o(t){if(isNaN(t)){if(t instanceof i.Z)return t.data;if(!a()(t))throw new Error("checkNumberArray: the value should be either a number, array or Image");return t}if(t<=0)throw new Error("checkNumberArray: the value must be greater than 0");return t}},31539:function(t,e,n){"use strict";function r(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=new Array(e).fill(0);return n}n.d(e,{Z:function(){return r}})},80946:function(t,e,n){"use strict";var r=n(95323),a=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),i=function(t){var e=r(t);return a.has(e&&e.ext)?e:null};t.exports=i,t.exports.default=i,Object.defineProperty(i,"minimumBytes",{value:r.minimumBytes})},71352:function(t,e,n){"use strict";n.r(e),n.d(e,{IOBuffer:function(){return c}});var r=n(15671),a=n(43144);n(34017);function i(t){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(t)}var o=new TextEncoder;var s=function(){var t=new Uint8Array(4);return!((new Uint32Array(t.buffer)[0]=1)&t[0])}(),u={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.Z)(this,t);var a=!1;"number"===typeof e?e=new ArrayBuffer(e):(a=!0,this.lastWrittenByte=e.byteLength);var i=n.offset?n.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof t)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),this.lastWrittenByte=a?o:0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}return(0,a.Z)(t,[{key:"available",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+t<=this.length}},{key:"isLittleEndian",value:function(){return this.littleEndian}},{key:"setLittleEndian",value:function(){return this.littleEndian=!0,this}},{key:"isBigEndian",value:function(){return!this.littleEndian}},{key:"setBigEndian",value:function(){return this.littleEndian=!1,this}},{key:"skip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=t,this}},{key:"back",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=t,this}},{key:"seek",value:function(t){return this.offset=t,this}},{key:"mark",value:function(){return this._mark=this.offset,this}},{key:"reset",value:function(){return this.offset=this._mark,this}},{key:"pushMark",value:function(){return this._marks.push(this.offset),this}},{key:"popMark",value:function(){var t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}},{key:"rewind",value:function(){return this.offset=0,this}},{key:"ensureAvailable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(t)){var e=2*(this.offset+t),n=new Uint8Array(e);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}},{key:"readBoolean",value:function(){return 0!==this.readUint8()}},{key:"readInt8",value:function(){return this._data.getInt8(this.offset++)}},{key:"readUint8",value:function(){return this._data.getUint8(this.offset++)}},{key:"readByte",value:function(){return this.readUint8()}},{key:"readBytes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(t,"uint8")}},{key:"readArray",value:function(t,e){var n=u[e].BYTES_PER_ELEMENT*t,r=this.byteOffset+this.offset,a=this.buffer.slice(r,r+n);if(this.littleEndian===s&&"uint8"!==e&&"int8"!==e){var i=new Uint8Array(this.buffer.slice(r,r+n));i.reverse();var o=new u[e](i.buffer);return this.offset+=n,o.reverse(),o}var c=new u[e](a);return this.offset+=n,c}},{key:"readInt16",value:function(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readUint16",value:function(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readInt32",value:function(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readUint32",value:function(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat32",value:function(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat64",value:function(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readBigInt64",value:function(){var t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readBigUint64",value:function(){var t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readChar",value:function(){return String.fromCharCode(this.readInt8())}},{key:"readChars",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="",n=0;n<t;n++)e+=this.readChar();return e}},{key:"readUtf8",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i(this.readBytes(t))}},{key:"decodeText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return i(this.readBytes(t),e)}},{key:"writeBoolean",value:function(t){return this.writeUint8(t?255:0),this}},{key:"writeInt8",value:function(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}},{key:"writeUint8",value:function(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}},{key:"writeByte",value:function(t){return this.writeUint8(t)}},{key:"writeBytes",value:function(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}},{key:"writeInt16",value:function(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:"writeUint16",value:function(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:"writeInt32",value:function(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeUint32",value:function(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeFloat32",value:function(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeFloat64",value:function(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeBigInt64",value:function(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeBigUint64",value:function(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeChar",value:function(t){return this.writeUint8(t.charCodeAt(0))}},{key:"writeChars",value:function(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}},{key:"writeUtf8",value:function(t){return this.writeBytes(function(t){return o.encode(t)}(t))}},{key:"toArray",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}},{key:"_updateLastWrittenByte",value:function(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}]),t}()},34017:function(){"use strict";!function(t){if(t.TextEncoder&&t.TextDecoder)return!1;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf-8";if("utf-8"!==t)throw new RangeError("Failed to construct 'TextEncoder': The encoding label provided ('".concat(t,"') is invalid."))}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf-8",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fatal:!1};if("utf-8"!==t)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('".concat(t,"') is invalid."));if(e.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stream:!1}).stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");for(var e=0,n=t.length,r=0,a=Math.max(32,n+(n>>1)+7),i=new Uint8Array(a>>3<<3);e<n;){var o=t.charCodeAt(e++);if(o>=55296&&o<=56319){if(e<n){var s=t.charCodeAt(e);56320===(64512&s)&&(++e,o=((1023&o)<<10)+(1023&s)+65536)}if(o>=55296&&o<=56319)continue}if(r+4>i.length){a+=8,a=(a*=1+e/t.length*2)>>3<<3;var u=new Uint8Array(a);u.set(i),i=u}if(0!==(4294967168&o)){if(0===(4294965248&o))i[r++]=o>>6&31|192;else if(0===(4294901760&o))i[r++]=o>>12&15|224,i[r++]=o>>6&63|128;else{if(0!==(4292870144&o))continue;i[r++]=o>>18&7|240,i[r++]=o>>12&63|128,i[r++]=o>>6&63|128}i[r++]=63&o|128}else i[r++]=o}return i.slice(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1}),n.prototype.decode=function(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stream:!1}).stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");for(var e=new Uint8Array(t),n=0,r=e.length,a=[];n<r;){var i=e[n++];if(0===i)break;if(0===(128&i))a.push(i);else if(192===(224&i)){var o=63&e[n++];a.push((31&i)<<6|o)}else if(224===(240&i)){var s=63&e[n++],u=63&e[n++];a.push((31&i)<<12|s<<6|u)}else if(240===(248&i)){var c=(7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++];c>65535&&(c-=65536,a.push(c>>>10&1023|55296),c=56320|1023&c),a.push(c)}}return String.fromCharCode.apply(null,a)},t.TextEncoder=e,t.TextDecoder=n}("undefined"!==typeof window?window:"undefined"!==typeof self?self:this)},78061:function(t,e,n){"use strict";n.d(e,{N:function(){return a}});var r=Object.prototype.toString;function a(t){var e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},76990:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){return"Array"===e.call(t).substr(-6,5)}},65821:function(t){"use strict";t.exports=Number.isFinite||function(t){return!("number"!==typeof t||t!==t||t===1/0||t===-1/0)}},47390:function(t,e,n){var r=n(65821);t.exports=Number.isInteger||function(t){return"number"===typeof t&&r(t)&&Math.floor(t)===t}},71684:function(t,e,n){var r=n(95998),a=n(24720);t.exports={encode:r,decode:a}},24720:function(t,e,n){var r=n(42122).default,a=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,n=799,r=3406,a=2276,i=1567,o=3784,s=5793,u=2896;function c(){}function l(t,e){for(var n,r,a=0,i=[],o=16;o>0&&!t[o-1];)o--;i.push({children:[],index:0});var s,u=i[0];for(n=0;n<o;n++){for(r=0;r<t[n];r++){for((u=i.pop()).children[u.index]=e[a];u.index>0;){if(0===i.length)throw new Error("Could not recreate Huffman Table");u=i.pop()}for(u.index++,i.push(u);i.length<=n;)i.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s;a++}n+1<o&&(i.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s)}return i[0].children}function h(e,n,r,a,i,o,s,u,c,l){r.precision,r.samplesPerLine,r.scanLines;var h=r.mcusPerLine,f=r.progressive,d=(r.maxH,r.maxV,n),p=0,v=0;function g(){if(v>0)return v--,p>>v&1;if(255==(p=e[n++])){var t=e[n++];if(t)throw new Error("unexpected marker: "+(p<<8|t).toString(16))}return v=7,p>>>7}function m(t){for(var e,n=t;null!==(e=g());){if("number"===typeof(n=n[e]))return n;if("object"!==typeof n)throw new Error("invalid huffman sequence")}return null}function y(t){for(var e=0;t>0;){var n=g();if(null===n)return;e=e<<1|n,t--}return e}function b(t){var e=y(t);return e>=1<<t-1?e:e+(-1<<t)+1}var w=0;var x,k=0;function I(t,e,n,r,a){var i=n%h,o=(n/h|0)*t.v+r,s=i*t.h+a;void 0===t.blocks[o]&&l.tolerantDecoding||e(t,t.blocks[o][s])}function S(t,e,n){var r=n/t.blocksPerLine|0,a=n%t.blocksPerLine;void 0===t.blocks[r]&&l.tolerantDecoding||e(t,t.blocks[r][a])}var _,C,E,A,T,N,D=a.length;N=f?0===o?0===u?function(t,e){var n=m(t.huffmanTableDC),r=0===n?0:b(n)<<c;e[0]=t.pred+=r}:function(t,e){e[0]|=g()<<c}:0===u?function(e,n){if(w>0)w--;else for(var r=o,a=s;r<=a;){var i=m(e.huffmanTableAC),u=15&i,l=i>>4;if(0!==u)n[t[r+=l]]=b(u)*(1<<c),r++;else{if(l<15){w=y(l)+(1<<l)-1;break}r+=16}}}:function(e,n){for(var r=o,a=s,i=0;r<=a;){var u=t[r],l=n[u]<0?-1:1;switch(k){case 0:var h=m(e.huffmanTableAC),f=15&h;if(i=h>>4,0===f)i<15?(w=y(i)+(1<<i),k=4):(i=16,k=1);else{if(1!==f)throw new Error("invalid ACn encoding");x=b(f),k=i?2:3}continue;case 1:case 2:n[u]?n[u]+=(g()<<c)*l:0===--i&&(k=2==k?3:0);break;case 3:n[u]?n[u]+=(g()<<c)*l:(n[u]=x<<c,k=0);break;case 4:n[u]&&(n[u]+=(g()<<c)*l)}r++}4===k&&0===--w&&(k=0)}:function(e,n){var r=m(e.huffmanTableDC),a=0===r?0:b(r);n[0]=e.pred+=a;for(var i=1;i<64;){var o=m(e.huffmanTableAC),s=15&o,u=o>>4;if(0!==s)n[t[i+=u]]=b(s),i++;else{if(u<15)break;i+=16}}};var R,Z,M,F,O=0;for(Z=1==D?a[0].blocksPerLine*a[0].blocksPerColumn:h*r.mcusPerColumn,i||(i=Z);O<Z;){for(C=0;C<D;C++)a[C].pred=0;if(w=0,1==D)for(_=a[0],T=0;T<i;T++)S(_,N,O),O++;else for(T=0;T<i;T++){for(C=0;C<D;C++)for(M=(_=a[C]).h,F=_.v,E=0;E<F;E++)for(A=0;A<M;A++)I(_,N,O,E,A);if(++O===Z)break}if(O===Z)do{if(255===e[n]&&0!==e[n+1])break;n+=1}while(n<e.length-2);if(v=0,(R=e[n]<<8|e[n+1])<65280)throw new Error("marker was not found");if(!(R>=65488&&R<=65495))break;n+=2}return n-d}function f(t,c){var l,h,f=[],d=c.blocksPerLine,p=c.blocksPerColumn,v=d<<3,m=new Int32Array(64),y=new Uint8Array(64);function b(t,l,h){var f,d,p,v,g,m,y,b,w,x,k=c.quantizationTable,I=h;for(x=0;x<64;x++)I[x]=t[x]*k[x];for(x=0;x<8;++x){var S=8*x;0!=I[1+S]||0!=I[2+S]||0!=I[3+S]||0!=I[4+S]||0!=I[5+S]||0!=I[6+S]||0!=I[7+S]?(f=s*I[0+S]+128>>8,d=s*I[4+S]+128>>8,p=I[2+S],v=I[6+S],g=u*(I[1+S]-I[7+S])+128>>8,b=u*(I[1+S]+I[7+S])+128>>8,m=I[3+S]<<4,y=I[5+S]<<4,w=f-d+1>>1,f=f+d+1>>1,d=w,w=p*o+v*i+128>>8,p=p*i-v*o+128>>8,v=w,w=g-y+1>>1,g=g+y+1>>1,y=w,w=b+m+1>>1,m=b-m+1>>1,b=w,w=f-v+1>>1,f=f+v+1>>1,v=w,w=d-p+1>>1,d=d+p+1>>1,p=w,w=g*a+b*r+2048>>12,g=g*r-b*a+2048>>12,b=w,w=m*n+y*e+2048>>12,m=m*e-y*n+2048>>12,y=w,I[0+S]=f+b,I[7+S]=f-b,I[1+S]=d+y,I[6+S]=d-y,I[2+S]=p+m,I[5+S]=p-m,I[3+S]=v+g,I[4+S]=v-g):(w=s*I[0+S]+512>>10,I[0+S]=w,I[1+S]=w,I[2+S]=w,I[3+S]=w,I[4+S]=w,I[5+S]=w,I[6+S]=w,I[7+S]=w)}for(x=0;x<8;++x){var _=x;0!=I[8+_]||0!=I[16+_]||0!=I[24+_]||0!=I[32+_]||0!=I[40+_]||0!=I[48+_]||0!=I[56+_]?(f=s*I[0+_]+2048>>12,d=s*I[32+_]+2048>>12,p=I[16+_],v=I[48+_],g=u*(I[8+_]-I[56+_])+2048>>12,b=u*(I[8+_]+I[56+_])+2048>>12,m=I[24+_],y=I[40+_],w=f-d+1>>1,f=f+d+1>>1,d=w,w=p*o+v*i+2048>>12,p=p*i-v*o+2048>>12,v=w,w=g-y+1>>1,g=g+y+1>>1,y=w,w=b+m+1>>1,m=b-m+1>>1,b=w,w=f-v+1>>1,f=f+v+1>>1,v=w,w=d-p+1>>1,d=d+p+1>>1,p=w,w=g*a+b*r+2048>>12,g=g*r-b*a+2048>>12,b=w,w=m*n+y*e+2048>>12,m=m*e-y*n+2048>>12,y=w,I[0+_]=f+b,I[56+_]=f-b,I[8+_]=d+y,I[48+_]=d-y,I[16+_]=p+m,I[40+_]=p-m,I[24+_]=v+g,I[32+_]=v-g):(w=s*h[x+0]+8192>>14,I[0+_]=w,I[8+_]=w,I[16+_]=w,I[24+_]=w,I[32+_]=w,I[40+_]=w,I[48+_]=w,I[56+_]=w)}for(x=0;x<64;++x){var C=128+(I[x]+8>>4);l[x]=C<0?0:C>255?255:C}}g(v*p*8);for(var w=0;w<p;w++){var x=w<<3;for(l=0;l<8;l++)f.push(new Uint8Array(v));for(var k=0;k<d;k++){b(c.blocks[w][k],y,m);var I=0,S=k<<3;for(h=0;h<8;h++){var _=f[x+h];for(l=0;l<8;l++)_[S+l]=y[I++]}}}return f}function d(t){return t<0?0:t>255?255:t}c.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(e){var n=1e3*this.opts.maxResolutionInMP*1e3,r=0;e.length;function a(){var t=e[r]<<8|e[r+1];return r+=2,t}function i(){var t=a(),n=e.subarray(r,r+t-2);return r+=n.length,n}function o(t){var e,n,r=1,a=1;for(n in t.components)t.components.hasOwnProperty(n)&&(r<(e=t.components[n]).h&&(r=e.h),a<e.v&&(a=e.v));var i=Math.ceil(t.samplesPerLine/8/r),o=Math.ceil(t.scanLines/8/a);for(n in t.components)if(t.components.hasOwnProperty(n)){e=t.components[n];var s=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/r),u=Math.ceil(Math.ceil(t.scanLines/8)*e.v/a),c=i*e.h,l=o*e.v,h=[];g(256*(l*c));for(var f=0;f<l;f++){for(var d=[],p=0;p<c;p++)d.push(new Int32Array(64));h.push(d)}e.blocksPerLine=s,e.blocksPerColumn=u,e.blocks=h}t.maxH=r,t.maxV=a,t.mcusPerLine=i,t.mcusPerColumn=o}var s,u,c=null,d=null,p=[],v=[],m=[],y=[],b=a(),w=-1;if(this.comments=[],65496!=b)throw new Error("SOI not found");for(b=a();65497!=b;){switch(b){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var x=i();if(65534===b){var k=String.fromCharCode.apply(null,x);this.comments.push(k)}65504===b&&74===x[0]&&70===x[1]&&73===x[2]&&70===x[3]&&0===x[4]&&(c={version:{major:x[5],minor:x[6]},densityUnits:x[7],xDensity:x[8]<<8|x[9],yDensity:x[10]<<8|x[11],thumbWidth:x[12],thumbHeight:x[13],thumbData:x.subarray(14,14+3*x[12]*x[13])}),65505===b&&69===x[0]&&120===x[1]&&105===x[2]&&102===x[3]&&0===x[4]&&(this.exifBuffer=x.subarray(5,x.length)),65518===b&&65===x[0]&&100===x[1]&&111===x[2]&&98===x[3]&&101===x[4]&&0===x[5]&&(d={version:x[6],flags0:x[7]<<8|x[8],flags1:x[9]<<8|x[10],transformCode:x[11]});break;case 65499:for(var I=a()+r-2;r<I;){var S=e[r++];g(256);var _=new Int32Array(64);if(S>>4===0)for(q=0;q<64;q++){_[t[q]]=e[r++]}else{if(S>>4!==1)throw new Error("DQT: invalid table spec");for(q=0;q<64;q++){_[t[q]]=a()}}p[15&S]=_}break;case 65472:case 65473:case 65474:a(),(s={}).extended=65473===b,s.progressive=65474===b,s.precision=e[r++],s.scanLines=a(),s.samplesPerLine=a(),s.components={},s.componentsOrder=[];var C=s.scanLines*s.samplesPerLine;if(C>n){var E=Math.ceil((C-n)/1e6);throw new Error("maxResolutionInMP limit exceeded by ".concat(E,"MP"))}var A,T=e[r++];for(H=0;H<T;H++){A=e[r];var N=e[r+1]>>4,D=15&e[r+1],R=e[r+2];if(N<=0||D<=0)throw new Error("Invalid sampling factor, expected values above 0");s.componentsOrder.push(A),s.components[A]={h:N,v:D,quantizationIdx:R},r+=3}o(s),v.push(s);break;case 65476:var Z=a();for(H=2;H<Z;){var M=e[r++],F=new Uint8Array(16),O=0;for(q=0;q<16;q++,r++)O+=F[q]=e[r];g(16+O);var B=new Uint8Array(O);for(q=0;q<O;q++,r++)B[q]=e[r];H+=17+O,(M>>4===0?y:m)[15&M]=l(F,B)}break;case 65501:a(),u=a();break;case 65500:a(),a();break;case 65498:a();var L=e[r++],P=[];for(H=0;H<L;H++){Y=s.components[e[r++]];var U=e[r++];Y.huffmanTableDC=y[U>>4],Y.huffmanTableAC=m[15&U],P.push(Y)}var z=e[r++],W=e[r++],V=e[r++],G=h(e,r,s,P,u,z,W,V>>4,15&V,this.opts);r+=G;break;case 65535:255!==e[r]&&r--;break;default:if(255==e[r-3]&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}if(224===b||225==b){if(-1!==w)throw new Error("first unknown JPEG marker at offset ".concat(w.toString(16),", second unknown JPEG marker ").concat(b.toString(16)," at offset ").concat((r-1).toString(16)));w=r-1;var j=a();if(255===e[r+j-2]){r+=j-2;break}}throw new Error("unknown JPEG marker "+b.toString(16))}b=a()}if(1!=v.length)throw new Error("only single frame JPEGs supported");for(var H=0;H<v.length;H++){var X=v[H].components;for(var q in X)X[q].quantizationTable=p[X[q].quantizationIdx],delete X[q].quantizationIdx}this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=c,this.adobe=d,this.components=[];for(H=0;H<s.componentsOrder.length;H++){var Y=s.components[s.componentsOrder[H]];this.components.push({lines:f(0,Y),scaleX:Y.h/s.maxH,scaleY:Y.v/s.maxV})}},getData:function(t,e){var n,r,a,i,o,s,u,c,l,h,f,p,v,m,y,b,w,x,k,I,S,_=this.width/t,C=this.height/e,E=0,A=t*e*this.components.length;g(A);var T=new Uint8Array(A);switch(this.components.length){case 1:for(n=this.components[0],h=0;h<e;h++)for(o=n.lines[0|h*n.scaleY*C],l=0;l<t;l++)f=o[0|l*n.scaleX*_],T[E++]=f;break;case 2:for(n=this.components[0],r=this.components[1],h=0;h<e;h++)for(o=n.lines[0|h*n.scaleY*C],s=r.lines[0|h*r.scaleY*C],l=0;l<t;l++)f=o[0|l*n.scaleX*_],T[E++]=f,f=s[0|l*r.scaleX*_],T[E++]=f;break;case 3:for(S=!0,this.adobe&&this.adobe.transformCode?S=!0:"undefined"!==typeof this.opts.colorTransform&&(S=!!this.opts.colorTransform),n=this.components[0],r=this.components[1],a=this.components[2],h=0;h<e;h++)for(o=n.lines[0|h*n.scaleY*C],s=r.lines[0|h*r.scaleY*C],u=a.lines[0|h*a.scaleY*C],l=0;l<t;l++)S?(f=o[0|l*n.scaleX*_],p=s[0|l*r.scaleX*_],x=d(f+1.402*((v=u[0|l*a.scaleX*_])-128)),k=d(f-.3441363*(p-128)-.71413636*(v-128)),I=d(f+1.772*(p-128))):(x=o[0|l*n.scaleX*_],k=s[0|l*r.scaleX*_],I=u[0|l*a.scaleX*_]),T[E++]=x,T[E++]=k,T[E++]=I;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(S=!1,this.adobe&&this.adobe.transformCode?S=!0:"undefined"!==typeof this.opts.colorTransform&&(S=!!this.opts.colorTransform),n=this.components[0],r=this.components[1],a=this.components[2],i=this.components[3],h=0;h<e;h++)for(o=n.lines[0|h*n.scaleY*C],s=r.lines[0|h*r.scaleY*C],u=a.lines[0|h*a.scaleY*C],c=i.lines[0|h*i.scaleY*C],l=0;l<t;l++)S?(f=o[0|l*n.scaleX*_],p=s[0|l*r.scaleX*_],v=u[0|l*a.scaleX*_],m=c[0|l*i.scaleX*_],y=255-d(f+1.402*(v-128)),b=255-d(f-.3441363*(p-128)-.71413636*(v-128)),w=255-d(f+1.772*(p-128))):(y=o[0|l*n.scaleX*_],b=s[0|l*r.scaleX*_],w=u[0|l*a.scaleX*_],m=c[0|l*i.scaleX*_]),T[E++]=255-y,T[E++]=255-b,T[E++]=255-w,T[E++]=255-m;break;default:throw new Error("Unsupported color mode")}return T},copyToImageData:function(t,e){var n,r,a,i,o,s,u,c,l,h=t.width,f=t.height,p=t.data,v=this.getData(h,f),g=0,m=0;switch(this.components.length){case 1:for(r=0;r<f;r++)for(n=0;n<h;n++)a=v[g++],p[m++]=a,p[m++]=a,p[m++]=a,e&&(p[m++]=255);break;case 3:for(r=0;r<f;r++)for(n=0;n<h;n++)u=v[g++],c=v[g++],l=v[g++],p[m++]=u,p[m++]=c,p[m++]=l,e&&(p[m++]=255);break;case 4:for(r=0;r<f;r++)for(n=0;n<h;n++)o=v[g++],s=v[g++],a=v[g++],u=255-d(o*(1-(i=v[g++])/255)+i),c=255-d(s*(1-i/255)+i),l=255-d(a*(1-i/255)+i),p[m++]=u,p[m++]=c,p[m++]=l,e&&(p[m++]=255);break;default:throw new Error("Unsupported color mode")}}};var p=0,v=0;function g(){var t=p+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);if(t>v){var e=Math.ceil((t-v)/1024/1024);throw new Error("maxMemoryUsageInMB limit exceeded by at least ".concat(e,"MB"))}p=t}return c.resetMaxMemoryUsage=function(t){p=0,v=t},c.getBytesAllocated=function(){return p},c.requestMemoryAllocation=g,c}();t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},i=r(r({},n),e),o=new Uint8Array(t),s=new a;s.opts=i,a.resetMaxMemoryUsage(1024*i.maxMemoryUsageInMB*1024),s.parse(o);var u=i.formatAsRGBA?4:3,c=s.width*s.height*u;try{a.requestMemoryAllocation(c);var l={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:i.useTArray?new Uint8Array(c):Buffer.alloc(c)};s.comments.length>0&&(l.comments=s.comments)}catch(h){if(h instanceof RangeError)throw new Error("Could not allocate enough memory for the image. Required: "+c);if(h instanceof ReferenceError&&"Buffer is not defined"===h.message)throw new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true");throw h}return s.copyToImageData(l,i.formatAsRGBA),l}},95998:function(t){function e(t){Math.round;var e,n,r,a,i,o=Math.floor,s=new Array(64),u=new Array(64),c=new Array(64),l=new Array(64),h=new Array(65535),f=new Array(65535),d=new Array(64),p=new Array(64),v=[],g=0,m=7,y=new Array(64),b=new Array(64),w=new Array(64),x=new Array(256),k=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(t,e){for(var n=0,r=0,a=new Array,i=1;i<=16;i++){for(var o=1;o<=t[i];o++)a[e[r]]=[],a[e[r]][0]=n,a[e[r]][1]=i,r++,n++;n*=2}return a}function Z(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(g|=1<<m),n--,--m<0&&(255==g?(M(255),M(0)):M(g),m=7,g=0)}function M(t){v.push(t)}function F(t){M(t>>8&255),M(255&t)}function O(t,e,n,r,a){for(var i,o=a[0],s=a[240],u=function(t,e){var n,r,a,i,o,s,u,c,l,h,f=0;for(l=0;l<8;++l){n=t[f],r=t[f+1],a=t[f+2],i=t[f+3],o=t[f+4],s=t[f+5],u=t[f+6];var p=n+(c=t[f+7]),v=n-c,g=r+u,m=r-u,y=a+s,b=a-s,w=i+o,x=i-o,k=p+w,I=p-w,S=g+y,_=g-y;t[f]=k+S,t[f+4]=k-S;var C=.707106781*(_+I);t[f+2]=I+C,t[f+6]=I-C;var E=.382683433*((k=x+b)-(_=m+v)),A=.5411961*k+E,T=1.306562965*_+E,N=.707106781*(S=b+m),D=v+N,R=v-N;t[f+5]=R+A,t[f+3]=R-A,t[f+1]=D+T,t[f+7]=D-T,f+=8}for(f=0,l=0;l<8;++l){n=t[f],r=t[f+8],a=t[f+16],i=t[f+24],o=t[f+32],s=t[f+40],u=t[f+48];var Z=n+(c=t[f+56]),M=n-c,F=r+u,O=r-u,B=a+s,L=a-s,P=i+o,U=i-o,z=Z+P,W=Z-P,V=F+B,G=F-B;t[f]=z+V,t[f+32]=z-V;var j=.707106781*(G+W);t[f+16]=W+j,t[f+48]=W-j;var H=.382683433*((z=U+L)-(G=O+M)),X=.5411961*z+H,q=1.306562965*G+H,Y=.707106781*(V=L+O),K=M+Y,Q=M-Y;t[f+40]=Q+X,t[f+24]=Q-X,t[f+8]=K+q,t[f+56]=K-q,f++}for(l=0;l<64;++l)h=t[l]*e[l],d[l]=h>0?h+.5|0:h-.5|0;return d}(t,e),c=0;c<64;++c)p[I[c]]=u[c];var l=p[0]-n;n=p[0],0==l?Z(r[0]):(Z(r[f[i=32767+l]]),Z(h[i]));for(var v=63;v>0&&0==p[v];v--);if(0==v)return Z(o),n;for(var g,m=1;m<=v;){for(var y=m;0==p[m]&&m<=v;++m);var b=m-y;if(b>=16){g=b>>4;for(var w=1;w<=g;++w)Z(s);b&=15}i=32767+p[m],Z(a[(b<<4)+f[i]]),Z(h[i]),m++}return 63!=v&&Z(o),n}function B(t){if(t<=0&&(t=1),t>100&&(t=100),i!=t){(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=o((e[n]*t+50)/100);r<1?r=1:r>255&&(r=255),s[I[n]]=r}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var h=o((a[i]*t+50)/100);h<1?h=1:h>255&&(h=255),u[I[i]]=h}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var v=0;v<8;v++)c[d]=1/(s[I[d]]*f[p]*f[v]*8),l[d]=1/(u[I[d]]*f[p]*f[v]*8),d++})(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),i=t}}this.encode=function(t,i){var o;(new Date).getTime();i&&B(i),v=new Array,g=0,m=7,F(65496),F(65504),F(16),M(74),M(70),M(73),M(70),M(0),M(1),M(1),M(0),F(1),F(1),M(0),M(0),"undefined"!==typeof(o=t.comments)&&o.constructor===Array&&o.forEach((function(t){if("string"===typeof t){F(65534);var e,n=t.length;for(F(n+2),e=0;e<n;e++)M(t.charCodeAt(e))}})),function(t){if(t){F(65505),69===t[0]&&120===t[1]&&105===t[2]&&102===t[3]?F(t.length+2):(F(t.length+5+2),M(69),M(120),M(105),M(102),M(0));for(var e=0;e<t.length;e++)M(t[e])}}(t.exifBuffer),function(){F(65499),F(132),M(0);for(var t=0;t<64;t++)M(s[t]);M(1);for(var e=0;e<64;e++)M(u[e])}(),function(t,e){F(65472),F(17),M(8),F(e),F(t),M(3),M(1),M(17),M(0),M(2),M(17),M(1),M(3),M(17),M(1)}(t.width,t.height),function(){F(65476),F(418),M(0);for(var t=0;t<16;t++)M(S[t+1]);for(var e=0;e<=11;e++)M(_[e]);M(16);for(var n=0;n<16;n++)M(C[n+1]);for(var r=0;r<=161;r++)M(E[r]);M(1);for(var a=0;a<16;a++)M(A[a+1]);for(var i=0;i<=11;i++)M(T[i]);M(17);for(var o=0;o<16;o++)M(N[o+1]);for(var s=0;s<=161;s++)M(D[s])}(),F(65498),F(12),M(3),M(1),M(0),M(2),M(17),M(3),M(17),M(0),M(63),M(0);var h=0,f=0,d=0;g=0,m=7,this.encode.displayName="_encode_";for(var p,x,I,R,L,P,U,z,W,V=t.data,G=t.width,j=t.height,H=4*G,X=0;X<j;){for(p=0;p<H;){for(P=L=H*X+p,U=-1,z=0,W=0;W<64;W++)P=L+(z=W>>3)*H+(U=4*(7&W)),X+z>=j&&(P-=H*(X+1+z-j)),p+U>=H&&(P-=p+U-H+4),x=V[P++],I=V[P++],R=V[P++],y[W]=(k[x]+k[I+256>>0]+k[R+512>>0]>>16)-128,b[W]=(k[x+768>>0]+k[I+1024>>0]+k[R+1280>>0]>>16)-128,w[W]=(k[x+1280>>0]+k[I+1536>>0]+k[R+1792>>0]>>16)-128;h=O(y,c,h,e,r),f=O(b,l,f,n,a),d=O(w,l,d,n,a),p+=32}X+=8}if(m>=0){var q=[];q[1]=m+1,q[0]=(1<<m+1)-1,Z(q)}return F(65497),Buffer.from(v)},function(){(new Date).getTime();t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)x[e]=t(e)}(),e=R(S,_),n=R(A,T),r=R(C,E),a=R(N,D),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)f[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var a=-(e-1);a<=-t;a++)f[32767+a]=n,h[32767+a]=[],h[32767+a][1]=n,h[32767+a][0]=e-1+a;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)k[t]=19595*t,k[t+256>>0]=38470*t,k[t+512>>0]=7471*t+32768,k[t+768>>0]=-11059*t,k[t+1024>>0]=-21709*t,k[t+1280>>0]=32768*t+8421375,k[t+1536>>0]=-27439*t,k[t+1792>>0]=-5329*t}(),B(t),(new Date).getTime()}()}t.exports=function(t,n){"undefined"===typeof n&&(n=50);return{data:new e(n).encode(t,n),width:t.width,height:t.height}}},30028:function(t){t.exports=function t(e,n,r){function a(o,s){if(!n[o]){if(!e[o]){if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,(function(t){var n=e[o][1][t];return a(n||t)}),c,c.exports,t,e,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e,n){var r,a,i,o,s,u=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=t("./PriorityQueue/AbstractPriorityQueue"),a=t("./PriorityQueue/ArrayStrategy"),o=t("./PriorityQueue/BinaryHeapStrategy"),i=t("./PriorityQueue/BHeapStrategy"),(s=function(t){function e(t){t||(t={}),t.strategy||(t.strategy=o),t.comparator||(t.comparator=function(t,e){return(t||0)-(e||0)}),e.__super__.constructor.call(this,t)}return u(e,t),e}(r)).ArrayStrategy=a,s.BinaryHeapStrategy=o,s.BHeapStrategy=i,e.exports=s},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(t,e,n){e.exports=function(){function t(t){var e;if(null==(null!=t?t.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=t?t.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new t.strategy(t),this.length=(null!=t&&null!=(e=t.initialValues)?e.length:void 0)||0}return t.prototype.queue=function(t){this.length++,this.priv.queue(t)},t.prototype.dequeue=function(t){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},t.prototype.peek=function(t){if(!this.length)throw"Empty queue";return this.priv.peek()},t.prototype.clear=function(){return this.length=0,this.priv.clear()},t}()},{}],3:[function(t,e,n){var r;r=function(t,e,n){var r,a,i;for(a=0,r=t.length;a<r;)n(t[i=a+r>>>1],e)>=0?a=i+1:r=i;return a},e.exports=function(){function t(t){var e;this.options=t,this.comparator=this.options.comparator,this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return t.prototype.queue=function(t){var e;e=r(this.data,t,this.comparator),this.data.splice(e,0,t)},t.prototype.dequeue=function(){return this.data.pop()},t.prototype.peek=function(){return this.data[this.data.length-1]},t.prototype.clear=function(){this.data.length=0},t}()},{}],4:[function(t,e,n){e.exports=function(){function t(t){var e,n,r,a,i,o,s,u;for(this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.pageSize=(null!=t?t.pageSize:void 0)||512,this.length=0,s=0;1<<s<this.pageSize;)s+=1;if(1<<s!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=s,this._emptyMemoryPageTemplate=e=[],n=0,i=this.pageSize;0<=i?n<i:n>i;0<=i?++n:--n)e.push(null);if(this._memory=[],this._mask=this.pageSize-1,t.initialValues)for(r=0,a=(o=t.initialValues).length;r<a;r++)u=o[r],this.queue(u)}return t.prototype.queue=function(t){this.length+=1,this._write(this.length,t),this._bubbleUp(this.length,t)},t.prototype.dequeue=function(){var t,e;return t=this._read(1),e=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,e),this._bubbleDown(1,e)),t},t.prototype.peek=function(){return this._read(1)},t.prototype.clear=function(){this.length=0,this._memory.length=0},t.prototype._write=function(t,e){var n;for(n=t>>this._shift;n>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[n][t&this._mask]=e},t.prototype._read=function(t){return this._memory[t>>this._shift][t&this._mask]},t.prototype._bubbleUp=function(t,e){var n,r,a,i;for(n=this.comparator;t>1&&(r=t&this._mask,t<this.pageSize||r>3?a=t&~this._mask|r>>1:r<2?(a=t-this.pageSize>>this._shift,a+=a&~(this._mask>>1),a|=this.pageSize>>1):a=t-2,!(n(i=this._read(a),e)<0));)this._write(a,e),this._write(t,i),t=a},t.prototype._bubbleDown=function(t,e){var n,r,a,i,o;for(o=this.comparator;t<this.length;)if(t>this._mask&&!(t&this._mask-1)?n=r=t+2:t&this.pageSize>>1?(n=(t&~this._mask)>>1,r=1+(n=1+(n|=t&this._mask>>1)<<this._shift)):r=(n=t+(t&this._mask))+1,n!==r&&r<=this.length)if(a=this._read(n),i=this._read(r),o(a,e)<0&&o(a,i)<=0)this._write(n,e),this._write(t,a),t=n;else{if(!(o(i,e)<0))break;this._write(r,e),this._write(t,i),t=r}else{if(!(n<=this.length))break;if(!(o(a=this._read(n),e)<0))break;this._write(n,e),this._write(t,a),t=n}},t}()},{}],5:[function(t,e,n){e.exports=function(){function t(t){var e;this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.length=0,this.data=(null!=(e=t.initialValues)?e.slice(0):void 0)||[],this._heapify()}return t.prototype._heapify=function(){var t,e,n;if(this.data.length>0)for(t=e=1,n=this.data.length;1<=n?e<n:e>n;t=1<=n?++e:--e)this._bubbleUp(t)},t.prototype.queue=function(t){this.data.push(t),this._bubbleUp(this.data.length-1)},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this._bubbleDown(0)),e},t.prototype.peek=function(){return this.data[0]},t.prototype.clear=function(){this.length=0,this.data.length=0},t.prototype._bubbleUp=function(t){for(var e,n;t>0&&(e=t-1>>>1,this.comparator(this.data[t],this.data[e])<0);)n=this.data[e],this.data[e]=this.data[t],this.data[t]=n,t=e},t.prototype._bubbleDown=function(t){var e,n,r,a,i;for(e=this.data.length-1;a=1+(n=1+(t<<1)),r=t,n<=e&&this.comparator(this.data[n],this.data[r])<0&&(r=n),a<=e&&this.comparator(this.data[a],this.data[r])<0&&(r=a),r!==t;)i=this.data[r],this.data[r]=this.data[t],this.data[t]=i,t=r},t}()},{}]},{},[1])(1)},52428:function(t){t.exports=function(){"use strict";function t(t){return"string"===typeof t||t instanceof String}var e=Number.isFinite||window.isFinite;function n(t){return e(t)}function r(t){return t}function a(t){var e={};return t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}))}function i(t,e){if(e.length!==t.length)return!1;for(var n=0;n<t.length;n++){if(e[n].compareArray&&!e[n].compareArray(t[n]))return!1;if(e[n]!==t[n])return!1}return!0}function o(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))}function s(){for(var t=1,e=0,n=0;n<arguments.length;n++){var r=arguments[n];e+=l(r),t*=r}return 0!==e?c(t,e):t}function u(t,e){if(0===e)throw new Error("Divide by zero");var n=Math.pow(10,l(e));return s(t,n/(n*e))}function c(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function l(t){if(!isFinite(t))return 0;for(var e=0;t%1!==0;)t*=10,e++;return e}function h(){var t;if(!this)return t=Object.create(h.prototype),h.apply(t,arguments),t;t=Error.apply(this,arguments),this.name="QtyError",this.message=t.message,this.stack=t.stack}function f(t,e){throw new h("Incompatible units: "+t+" and "+e)}h.prototype=Object.create(Error.prototype,{constructor:{value:h}});var d={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","\u03bc","\xb5","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","\u03a9","\u2126"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},p=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],v="<1>",g=[v];function m(t,e){var r=e[1],a=e[3]||[],i=e[4]||[];if(!n(r))throw new h(t+": Invalid unit definition. 'scalar' must be a number");a.forEach((function(e){if(void 0===d[e])throw new h(t+": Invalid unit definition. Unit "+e+" in 'numerator' is not recognized")})),i.forEach((function(e){if(void 0===d[e])throw new h(t+": Invalid unit definition. Unit "+e+" in 'denominator' is not recognized")}))}var y={},b={},w={},x={},k={};for(var I in d)if(d.hasOwnProperty(I)){var S=d[I];if("prefix"===S[2]){y[I]=S[1];for(var _=0;_<S[0].length;_++)b[S[0][_]]=I}else{m(I,S),w[I]={scalar:S[1],numerator:S[3],denominator:S[4]};for(var C=0;C<S[0].length;C++)x[S[0][C]]=I}k[I]=S[0][0]}function E(t){var e,n=[],r=Object.keys(d);if("undefined"===typeof t)for(e=0;e<r.length;e++)-1===["","prefix"].indexOf(d[r[e]][2])&&n.push(r[e].substr(1,r[e].length-2));else{if(-1===this.getKinds().indexOf(t))throw new h("Kind not recognized");for(e=0;e<r.length;e++)d[r[e]][2]===t&&n.push(r[e].substr(1,r[e].length-2))}return n.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}))}function A(t){if(!x[t])throw new h("Unit not recognized");return d[x[t]][0]}var T=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function N(){if(this.signature)return this.signature;for(var t=D.call(this),e=0;e<t.length;e++)t[e]*=Math.pow(20,e);return t.reduce((function(t,e){return t+e}),0)}function D(){if(!this.isBase())return D.call(this.toBase());for(var t,e,n=new Array(T.length),r=0;r<n.length;r++)n[r]=0;for(var a=0;a<this.numerator.length;a++)(t=d[this.numerator[a]])&&(e=T.indexOf(t[2]))>=0&&(n[e]=n[e]+1);for(var i=0;i<this.denominator.length;i++)(t=d[this.denominator[i]])&&(e=T.indexOf(t[2]))>=0&&(n[e]=n[e]-1);return n}var R="[+-]",Z="\\d+",M="\\."+Z,F=new RegExp("^("+R+"?\\s*(?:(?:"+Z+"(?:"+M+")?)|(?:"+M+"))(?:[Ee]"+R+"?"+Z+")?)?\\s*([^/]*)(?:/(.+))?$"),O="\\^|\\*{2}",B="[01234]",L=new RegExp("([^ \\*\\d]+?)(?:"+O+")?(-?"+B+"(?![a-zA-Z]))"),P=new RegExp("([^ \\*\\d]+?)(?:"+O+")?("+B+"(?![a-zA-Z]))");function U(e){t(e)||(e=e.toString()),e=e.trim();var n=F.exec(e);if(!n)throw new h(e+": Quantity not recognized");var r=n[1];r?(r=r.replace(/\s/g,""),this.scalar=parseFloat(r)):this.scalar=1;for(var a,i,o,s=n[2],u=n[3];n=L.exec(s);){if(a=parseFloat(n[2]),isNaN(a))throw new h("Unit exponent is not a number");if(0===a&&!G.test(n[1]))throw new h("Unit not recognized");i=n[1]+" ",o="";for(var c=0;c<Math.abs(a);c++)o+=i;a>=0?s=s.replace(n[0],o):(u=u?u+o:o,s=s.replace(n[0],""))}for(;n=P.exec(u);){if(a=parseFloat(n[2]),isNaN(a))throw new h("Unit exponent is not a number");if(0===a&&!G.test(n[1]))throw new h("Unit not recognized");i=n[1]+" ",o="";for(var l=0;l<a;l++)o+=i;u=u.replace(n[0],o)}s&&(this.numerator=X(s.trim())),u&&(this.denominator=X(u.trim()))}var z=Object.keys(b).sort((function(t,e){return e.length-t.length})).join("|"),W=Object.keys(x).sort((function(t,e){return e.length-t.length})).join("|"),V="("+z+")??("+W+")(?:\\b|$)",G=new RegExp("^\\s*("+V+"[\\s\\*]*)+$"),j=new RegExp(V,"g"),H={};function X(t){var e=H[t];if(e)return e;var n,r=[];if(!G.test(t))throw new h("Unit not recognized");for(;n=j.exec(t);)r.push(n.slice(1));return r=(r=(r=r.map((function(t){return b[t[0]]?[b[t[0]],x[t[1]]]:[x[t[1]]]}))).reduce((function(t,e){return t.concat(e)}),[])).filter((function(t){return t})),H[t]=r,r}function q(e){if(!t(e))throw new h("Argument should be a string");try{return this(e)}catch(n){return null}}function Y(t){return t instanceof K}function K(t,e){if(Q.apply(null,arguments),!Y(this))return new K(t,e);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=g,this.denominator=g,J(t)?(this.scalar=t.scalar,this.numerator=t.numerator&&0!==t.numerator.length?t.numerator:g,this.denominator=t.denominator&&0!==t.denominator.length?t.denominator:g):e?(U.call(this,e),this.scalar=t):U.call(this,t),this.denominator.join("*").indexOf("temp")>=0)throw new h("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new h("Cannot multiply by temperatures");if(!i(this.denominator,g))throw new h("Cannot divide with temperatures")}if(this.initValue=t,$.call(this),this.isTemperature()&&this.baseScalar<0)throw new h("Temperatures must not be less than absolute zero")}function Q(e,r){if(r){if(!n(e)||!t(r))throw new h("Only number accepted as initialization value when units are explicitly provided")}else if(!(t(e)||n(e)||Y(e)||J(e)))throw new h("Only string, number or quantity accepted as single initialization value")}function J(t){return t&&"object"===typeof t&&t.hasOwnProperty("scalar")}function $(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=N.call(this);else{var t=this.toBase();this.baseScalar=t.scalar,this.signature=t.signature}}K.prototype={constructor:K};var tt={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency",25599999980:"information_rate",256e8:"information",511999999980:"angular_velocity",512e9:"angle"};function et(){return a(Object.keys(tt).map((function(t){return tt[t]})))}function nt(t,e){var n=t.units(),r=e.to(n),a=K(it(n));return K({scalar:t.scalar-r.scalar,numerator:a.numerator,denominator:a.denominator})}function rt(t,e){var n=e.to(it(t.units()));return K({scalar:t.scalar-n.scalar,numerator:t.numerator,denominator:t.denominator})}function at(t,e){var n=e.to(it(t.units()));return K({scalar:t.scalar+n.scalar,numerator:t.numerator,denominator:t.denominator})}function it(t){if("tempK"===t)return"degK";if("tempC"===t)return"degC";if("tempF"===t)return"degF";if("tempR"===t)return"degR";throw new h("Unknown type for temp conversion from: "+t)}function ot(t,e){var n,r=st(t),a=e.units();if("degK"===a)n=r.scalar;else if("degC"===a)n=r.scalar;else if("degF"===a)n=9*r.scalar/5;else{if("degR"!==a)throw new h("Unknown type for degree conversion to: "+a);n=9*r.scalar/5}return K({scalar:n,numerator:e.numerator,denominator:e.denominator})}function st(t){var e,n=t.units();if(n.match(/(deg)[CFRK]/))e=t.baseScalar;else if("tempK"===n)e=t.scalar;else if("tempC"===n)e=t.scalar;else if("tempF"===n)e=5*t.scalar/9;else{if("tempR"!==n)throw new h("Unknown type for temp conversion from: "+n);e=5*t.scalar/9}return K({scalar:e,numerator:["<kelvin>"],denominator:g})}function ut(t,e){var n,r=e.units();if("tempK"===r)n=t.baseScalar;else if("tempC"===r)n=t.baseScalar-273.15;else if("tempF"===r)n=9*t.baseScalar/5-459.67;else{if("tempR"!==r)throw new h("Unknown type for temp conversion to: "+r);n=9*t.baseScalar/5}return K({scalar:n,numerator:e.numerator,denominator:e.denominator})}function ct(t){var e,n=t.units();if(n.match(/(deg)[CFRK]/))e=t.baseScalar;else if("tempK"===n)e=t.scalar;else if("tempC"===n)e=t.scalar+273.15;else if("tempF"===n)e=5*(t.scalar+459.67)/9;else{if("tempR"!==n)throw new h("Unknown type for temp conversion from: "+n);e=5*t.scalar/9}return K({scalar:e,numerator:["<temp-K>"],denominator:g})}function lt(t,e){var n,a=K(t),i=K(e);return a.eq(i)?r:(n=a.isTemperature()?function(t){return a.mul(t).to(i).scalar}:function(t){return t*a.baseScalar/i.baseScalar},function(t){var e,r,a;if(Array.isArray(t)){for(r=t.length,a=[],e=0;e<r;e++)a.push(n(t[e]));return a}return n(t)})}K.prototype.kind=function(){return tt[this.signature.toString()]},o(K.prototype,{isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&i(this.denominator,g)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}}),o(K.prototype,{to:function(e){var n,r;return void 0===e||null===e?this:t(e)?(n=this._conversionCache[e])?n:(r=K(e)).units()===this.units()?this:(this.isCompatible(r)?r=r.isTemperature()?ut(this,r):r.isDegrees()?ot(this,r):K({scalar:u(this.baseScalar,r.baseScalar),numerator:r.numerator,denominator:r.denominator}):this.isInverse(r)?r=this.inverse().to(e):f(this.units(),r.units()),this._conversionCache[e]=r,r):this.to(e.units())},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return ct(this);var t=ht[this.units()];return t||(t=ft(this.numerator,this.denominator),ht[this.units()]=t),t.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new h("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(e){if(t(e)&&(e=K(e)),n(e)&&(e=K(e+" "+this.units())),this.isUnitless()?e.isUnitless()||f(this.units(),e.units()):e=e.to(this.units()),0===e.scalar)throw new h("Divide by zero");return K(s(Math.round(this.scalar/e.scalar),e.scalar)+this.units())}});var ht={};function ft(t,e){for(var n,r=[],a=[],i=1,o=0;o<t.length;o++)n=t[o],y[n]?i=s(i,y[n]):w[n]&&(i*=w[n].scalar,w[n].numerator&&r.push(w[n].numerator),w[n].denominator&&a.push(w[n].denominator));for(var u=0;u<e.length;u++)n=e[u],y[n]?i/=y[n]:w[n]&&(i/=w[n].scalar,w[n].numerator&&a.push(w[n].numerator),w[n].denominator&&r.push(w[n].denominator));return K({scalar:i,numerator:r=r.reduce((function(t,e){return t.concat(e)}),[]),denominator:a=a.reduce((function(t,e){return t.concat(e)}),[])})}function dt(t,e,n,r){function a(t){return t!==v}t=t.filter(a),n=n.filter(a),e=e.filter(a),r=r.filter(a);var i={};function o(t,e){for(var n,r,a,o=0;o<t.length;o++)if(y[t[o]]?(n=t[o+1],r=t[o],a=y[r],o++):(n=t[o],r=null,a=1),n&&n!==v)if(i[n]){i[n][0]+=e;var s=i[n][2]?y[i[n][2]]:1;i[n][1===e?3:4]*=u(a,s)}else i[n]=[e,n,r,1,1]}o(t,1),o(e,-1),o(n,1),o(r,-1);var s=[],c=[],l=1;for(var h in i)if(i.hasOwnProperty(h)){var f,d=i[h];if(d[0]>0)for(f=0;f<d[0];f++)s.push(null===d[2]?d[1]:[d[2],d[1]]);else if(d[0]<0)for(f=0;f<-d[0];f++)c.push(null===d[2]?d[1]:[d[2],d[1]]);l*=u(d[3],d[4])}return 0===s.length&&(s=g),0===c.length&&(c=g),[s=s.reduce((function(t,e){return t.concat(e)}),[]),c=c.reduce((function(t,e){return t.concat(e)}),[]),l]}function pt(){}function vt(t,e){return(t+" "+e).trim()}K.parse=q,K.getUnits=E,K.getAliases=A,K.mulSafe=s,K.divSafe=u,K.getKinds=et,K.swiftConverter=lt,K.Error=h,o(K.prototype,{add:function(e){if(t(e)&&(e=K(e)),this.isCompatible(e)||f(this.units(),e.units()),this.isTemperature()&&e.isTemperature())throw new h("Cannot add two temperatures");return this.isTemperature()?at(this,e):e.isTemperature()?at(e,this):K({scalar:this.scalar+e.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(e){if(t(e)&&(e=K(e)),this.isCompatible(e)||f(this.units(),e.units()),this.isTemperature()&&e.isTemperature())return nt(this,e);if(this.isTemperature())return rt(this,e);if(e.isTemperature())throw new h("Cannot subtract a temperature from a differential degree unit");return K({scalar:this.scalar-e.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(e){if(n(e))return K({scalar:s(this.scalar,e),numerator:this.numerator,denominator:this.denominator});if(t(e)&&(e=K(e)),(this.isTemperature()||e.isTemperature())&&!this.isUnitless()&&!e.isUnitless())throw new h("Cannot multiply by temperatures");var r=this,a=e;r.isCompatible(a)&&400!==r.signature&&(a=a.to(r));var i=dt(r.numerator,r.denominator,a.numerator,a.denominator);return K({scalar:s(r.scalar,a.scalar,i[2]),numerator:i[0],denominator:i[1]})},div:function(e){if(n(e)){if(0===e)throw new h("Divide by zero");return K({scalar:this.scalar/e,numerator:this.numerator,denominator:this.denominator})}if(t(e)&&(e=K(e)),0===e.scalar)throw new h("Divide by zero");if(e.isTemperature())throw new h("Cannot divide with temperatures");if(this.isTemperature()&&!e.isUnitless())throw new h("Cannot divide with temperatures");var r=this,a=e;r.isCompatible(a)&&400!==r.signature&&(a=a.to(r));var i=dt(r.numerator,r.denominator,a.denominator,a.numerator);return K({scalar:s(r.scalar,i[2])/a.scalar,numerator:i[0],denominator:i[1]})},inverse:function(){if(this.isTemperature())throw new h("Cannot divide with temperatures");if(0===this.scalar)throw new h("Divide by zero");return K({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}}),o(K.prototype,{eq:function(t){return 0===this.compareTo(t)},lt:function(t){return-1===this.compareTo(t)},lte:function(t){return this.eq(t)||this.lt(t)},gt:function(t){return 1===this.compareTo(t)},gte:function(t){return this.eq(t)||this.gt(t)},compareTo:function(e){return t(e)?this.compareTo(K(e)):(this.isCompatible(e)||f(this.units(),e.units()),this.baseScalar<e.baseScalar?-1:this.baseScalar===e.baseScalar?0:this.baseScalar>e.baseScalar?1:void 0)},same:function(t){return this.scalar===t.scalar&&this.units()===t.units()}}),o(K.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every((function(t){return i(t,g)}))},isCompatible:function(e){return t(e)?this.isCompatible(K(e)):!!Y(e)&&void 0!==e.signature&&this.signature===e.signature},isInverse:function(t){return this.inverse().isCompatible(t)},isBase:function(){return void 0!==this._isBase?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach((function(t){t!==v&&-1===p.indexOf(t)&&(this._isBase=!1)}),this),!1===this._isBase||(this._isBase=!0),this._isBase)}}),pt.prototype.get=function(t){return arguments.length>1&&(t=Array.apply(null,arguments)),t.reduce((function(e,n,r){if(e){var a=e[n];return r===t.length-1?a?a.data:void 0:a}}),this)},pt.prototype.set=function(t,e){return arguments.length>2&&(t=Array.prototype.slice.call(arguments,0,-1),e=arguments[arguments.length-1]),t.reduce((function(n,r,a){var i=n[r];return void 0===i&&(i=n[r]={}),a===t.length-1?(i.data=e,e):i}),this)},K.formatter=vt,o(K.prototype,{units:function(){if(void 0!==this._units)return this._units;var t=i(this.numerator,g),e=i(this.denominator,g);if(t&&e)return this._units="",this._units;var n=mt(this.numerator),r=mt(this.denominator);return this._units=n+(e?"":"/"+r),this._units},toString:function(e,r){var a;if(n(e))a=this.units(),r=e;else if(t(e))a=e;else if(Y(e))return this.toPrec(e).toString(r);var i=this.to(a);return i=((void 0!==r?c(i.scalar,r):i.scalar)+" "+i.units()).trim()},format:function(t,e){1===arguments.length&&"function"===typeof t&&(e=t,t=void 0),e=e||K.formatter;var n=this.to(t);return e.call(this,n.scalar,n.units())}});var gt=new pt;function mt(t){var e=gt.get(t);return e||(e=i(t,g)?"1":bt(yt(t)).join("*"),gt.set(t,e),e)}function yt(t){for(var e,n,r=[],a=0;a<t.length;a++)e=t[a],n=t[a+1],y[e]?(r.push(k[e]+k[n]),a++):r.push(k[e]);return r}function bt(t){return t.reduce((function(t,e){var n=t[e];return n||t.push(n=t[e]=[e,0]),n[1]++,t}),[]).map((function(t){return t[0]+(t[1]>1?t[1]:"")}))}return K.version="1.7.6",K}()},763:function(t,e,n){var r;t=n.nmd(t),function(){var a,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,h=128,f=256,d=1/0,p=9007199254740991,v=NaN,g=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",f]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",x="[object Date]",k="[object Error]",I="[object Function]",S="[object GeneratorFunction]",_="[object Map]",C="[object Number]",E="[object Object]",A="[object Promise]",T="[object RegExp]",N="[object Set]",D="[object String]",R="[object Symbol]",Z="[object WeakMap]",M="[object ArrayBuffer]",F="[object DataView]",O="[object Float32Array]",B="[object Float64Array]",L="[object Int8Array]",P="[object Int16Array]",U="[object Int32Array]",z="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",G="[object Uint32Array]",j=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(q.source),Q=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/[\\^$.*+?()[\]{}|]/g,it=RegExp(at.source),ot=/^\s+/,st=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kt=/($^)/,It=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ct="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",Nt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dt="['\u2019]",Rt="["+St+"]",Zt="["+Nt+"]",Mt="["+_t+"]",Ft="\\d+",Ot="["+Ct+"]",Bt="["+Et+"]",Lt="[^"+St+Nt+Ft+Ct+Et+At+"]",Pt="\\ud83c[\\udffb-\\udfff]",Ut="[^"+St+"]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+At+"]",Gt="\\u200d",jt="(?:"+Bt+"|"+Lt+")",Ht="(?:"+Vt+"|"+Lt+")",Xt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Mt+"|"+Pt+")"+"?",Kt="["+Tt+"]?",Qt=Kt+Yt+("(?:"+Gt+"(?:"+[Ut,zt,Wt].join("|")+")"+Kt+Yt+")*"),Jt="(?:"+[Ot,zt,Wt].join("|")+")"+Qt,$t="(?:"+[Ut+Mt+"?",Mt,zt,Wt,Rt].join("|")+")",te=RegExp(Dt,"g"),ee=RegExp(Mt,"g"),ne=RegExp(Pt+"(?="+Pt+")|"+$t+Qt,"g"),re=RegExp([Vt+"?"+Bt+"+"+Xt+"(?="+[Zt,Vt,"$"].join("|")+")",Ht+"+"+qt+"(?="+[Zt,Vt+jt,"$"].join("|")+")",Vt+"?"+jt+"+"+Xt,Vt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ft,Jt].join("|"),"g"),ae=RegExp("["+Gt+St+_t+Tt+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,ue={};ue[O]=ue[B]=ue[L]=ue[P]=ue[U]=ue[z]=ue[W]=ue[V]=ue[G]=!0,ue[y]=ue[b]=ue[M]=ue[w]=ue[F]=ue[x]=ue[k]=ue[I]=ue[_]=ue[C]=ue[E]=ue[T]=ue[N]=ue[D]=ue[Z]=!1;var ce={};ce[y]=ce[b]=ce[M]=ce[F]=ce[w]=ce[x]=ce[O]=ce[B]=ce[L]=ce[P]=ce[U]=ce[_]=ce[C]=ce[E]=ce[T]=ce[N]=ce[D]=ce[R]=ce[z]=ce[W]=ce[V]=ce[G]=!0,ce[k]=ce[I]=ce[Z]=!1;var le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,fe=parseInt,de="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pe="object"==typeof self&&self&&self.Object===Object&&self,ve=de||pe||Function("return this")(),ge=e&&!e.nodeType&&e,me=ge&&t&&!t.nodeType&&t,ye=me&&me.exports===ge,be=ye&&de.process,we=function(){try{var t=me&&me.require&&me.require("util").types;return t||be&&be.binding&&be.binding("util")}catch(e){}}(),xe=we&&we.isArrayBuffer,ke=we&&we.isDate,Ie=we&&we.isMap,Se=we&&we.isRegExp,_e=we&&we.isSet,Ce=we&&we.isTypedArray;function Ee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ae(t,e,n,r){for(var a=-1,i=null==t?0:t.length;++a<i;){var o=t[a];e(r,o,n(o),t)}return r}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ne(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function De(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Re(t,e){for(var n=-1,r=null==t?0:t.length,a=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[a++]=o)}return i}function Ze(t,e){return!!(null==t?0:t.length)&&Ve(t,e,0)>-1}function Me(t,e,n){for(var r=-1,a=null==t?0:t.length;++r<a;)if(n(e,t[r]))return!0;return!1}function Fe(t,e){for(var n=-1,r=null==t?0:t.length,a=Array(r);++n<r;)a[n]=e(t[n],n,t);return a}function Oe(t,e){for(var n=-1,r=e.length,a=t.length;++n<r;)t[a+n]=e[n];return t}function Be(t,e,n,r){var a=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++a]);++a<i;)n=e(n,t[a],a,t);return n}function Le(t,e,n,r){var a=null==t?0:t.length;for(r&&a&&(n=t[--a]);a--;)n=e(n,t[a],a,t);return n}function Pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ue=Xe("length");function ze(t,e,n){var r;return n(t,(function(t,n,a){if(e(t,n,a))return r=n,!1})),r}function We(t,e,n,r){for(var a=t.length,i=n+(r?1:-1);r?i--:++i<a;)if(e(t[i],i,t))return i;return-1}function Ve(t,e,n){return e===e?function(t,e,n){var r=n-1,a=t.length;for(;++r<a;)if(t[r]===e)return r;return-1}(t,e,n):We(t,je,n)}function Ge(t,e,n,r){for(var a=n-1,i=t.length;++a<i;)if(r(t[a],e))return a;return-1}function je(t){return t!==t}function He(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:v}function Xe(t){return function(e){return null==e?a:e[t]}}function qe(t){return function(e){return null==t?a:t[e]}}function Ye(t,e,n,r,a){return a(t,(function(t,a,i){n=r?(r=!1,t):e(n,t,a,i)})),n}function Ke(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==a&&(n=n===a?o:n+o)}return n}function Qe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,gn(t)+1).replace(ot,""):t}function $e(t){return function(e){return t(e)}}function tn(t,e){return Fe(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var an=qe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+le[t]}function un(t){return ae.test(t)}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ln(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,r=t.length,a=0,i=[];++n<r;){var o=t[n];o!==e&&o!==s||(t[n]=s,i[a++]=n)}return i}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return un(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):Ue(t)}function vn(t){return un(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function gn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var mn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function t(e){var n=(e=null==e?ve:yn.defaults(ve.Object(),e,yn.pick(ve,oe))).Array,r=e.Date,st=e.Error,St=e.Function,_t=e.Math,Ct=e.Object,Et=e.RegExp,At=e.String,Tt=e.TypeError,Nt=n.prototype,Dt=St.prototype,Rt=Ct.prototype,Zt=e["__core-js_shared__"],Mt=Dt.toString,Ft=Rt.hasOwnProperty,Ot=0,Bt=function(){var t=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Lt=Rt.toString,Pt=Mt.call(Ct),Ut=ve._,zt=Et("^"+Mt.call(Ft).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=ye?e.Buffer:a,Vt=e.Symbol,Gt=e.Uint8Array,jt=Wt?Wt.allocUnsafe:a,Ht=ln(Ct.getPrototypeOf,Ct),Xt=Ct.create,qt=Rt.propertyIsEnumerable,Yt=Nt.splice,Kt=Vt?Vt.isConcatSpreadable:a,Qt=Vt?Vt.iterator:a,Jt=Vt?Vt.toStringTag:a,$t=function(){try{var t=hi(Ct,"defineProperty");return t({},"",{}),t}catch(e){}}(),ne=e.clearTimeout!==ve.clearTimeout&&e.clearTimeout,ae=r&&r.now!==ve.Date.now&&r.now,le=e.setTimeout!==ve.setTimeout&&e.setTimeout,de=_t.ceil,pe=_t.floor,ge=Ct.getOwnPropertySymbols,me=Wt?Wt.isBuffer:a,be=e.isFinite,we=Nt.join,Ue=ln(Ct.keys,Ct),qe=_t.max,bn=_t.min,wn=r.now,xn=e.parseInt,kn=_t.random,In=Nt.reverse,Sn=hi(e,"DataView"),_n=hi(e,"Map"),Cn=hi(e,"Promise"),En=hi(e,"Set"),An=hi(e,"WeakMap"),Tn=hi(Ct,"create"),Nn=An&&new An,Dn={},Rn=Bi(Sn),Zn=Bi(_n),Mn=Bi(Cn),Fn=Bi(En),On=Bi(An),Bn=Vt?Vt.prototype:a,Ln=Bn?Bn.valueOf:a,Pn=Bn?Bn.toString:a;function Un(t){if(es(t)&&!Go(t)&&!(t instanceof Gn)){if(t instanceof Vn)return t;if(Ft.call(t,"__wrapped__"))return Li(t)}return new Vn(t)}var zn=function(){function t(){}return function(e){if(!ts(e))return{};if(Xt)return Xt(e);t.prototype=e;var n=new t;return t.prototype=a,n}}();function Wn(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Yn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Kn(t,e){var n=Go(t),r=!n&&Vo(t),a=!n&&!r&&qo(t),i=!n&&!r&&!a&&cs(t),o=n||r||a||i,s=o?Qe(t.length,At):[],u=s.length;for(var c in t)!e&&!Ft.call(t,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yi(c,u))||s.push(c);return s}function Qn(t){var e=t.length;return e?t[qr(0,e-1)]:a}function Jn(t,e){return Mi(Ta(t),sr(e,0,t.length))}function $n(t){return Mi(Ta(t))}function tr(t,e,n){(n!==a&&!Uo(t[e],n)||n===a&&!(e in t))&&ir(t,e,n)}function er(t,e,n){var r=t[e];Ft.call(t,e)&&Uo(r,n)&&(n!==a||e in t)||ir(t,e,n)}function nr(t,e){for(var n=t.length;n--;)if(Uo(t[n][0],e))return n;return-1}function rr(t,e,n,r){return fr(t,(function(t,a,i){e(r,t,n(t),i)})),r}function ar(t,e){return t&&Na(e,Ds(e),t)}function ir(t,e,n){"__proto__"==e&&$t?$t(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var r=-1,i=e.length,o=n(i),s=null==t;++r<i;)o[r]=s?a:Cs(t,e[r]);return o}function sr(t,e,n){return t===t&&(n!==a&&(t=t<=n?t:n),e!==a&&(t=t>=e?t:e)),t}function ur(t,e,n,r,i,o){var s,u=1&e,c=2&e,l=4&e;if(n&&(s=i?n(t,r,i,o):n(t)),s!==a)return s;if(!ts(t))return t;var h=Go(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Ft.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return Ta(t,s)}else{var f=pi(t),d=f==I||f==S;if(qo(t))return Ia(t,u);if(f==E||f==y||d&&!i){if(s=c||d?{}:gi(t),!u)return c?function(t,e){return Na(t,di(t),e)}(t,function(t,e){return t&&Na(e,Rs(e),t)}(s,t)):function(t,e){return Na(t,fi(t),e)}(t,ar(s,t))}else{if(!ce[f])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case M:return Sa(t);case w:case x:return new r(+t);case F:return function(t,e){var n=e?Sa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case B:case L:case P:case U:case z:case W:case V:case G:return _a(t,n);case _:return new r;case C:case D:return new r(t);case T:return function(t){var e=new t.constructor(t.source,vt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case N:return new r;case R:return a=t,Ln?Ct(Ln.call(a)):{}}var a}(t,f,u)}}o||(o=new Yn);var p=o.get(t);if(p)return p;o.set(t,s),os(t)?t.forEach((function(r){s.add(ur(r,e,n,r,t,o))})):ns(t)&&t.forEach((function(r,a){s.set(a,ur(r,e,n,a,t,o))}));var v=h?a:(l?c?ai:ri:c?Rs:Ds)(t);return Te(v||t,(function(r,a){v&&(r=t[a=r]),er(s,a,ur(r,e,n,a,t,o))})),s}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Ct(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new Tt(i);return Ni((function(){t.apply(a,n)}),e)}function hr(t,e,n,r){var a=-1,i=Ze,o=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=Fe(e,$e(n))),r?(i=Me,o=!1):e.length>=200&&(i=en,o=!1,e=new qn(e));t:for(;++a<s;){var l=t[a],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else i(e,h,r)||u.push(l)}return u}Un.templateSettings={escape:J,evaluate:$,interpolate:tt,variable:"",imports:{_:Un}},Un.prototype=Wn.prototype,Un.prototype.constructor=Un,Vn.prototype=zn(Wn.prototype),Vn.prototype.constructor=Vn,Gn.prototype=zn(Wn.prototype),Gn.prototype.constructor=Gn,jn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},jn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jn.prototype.get=function(t){var e=this.__data__;if(Tn){var n=e[t];return n===o?a:n}return Ft.call(e,t)?e[t]:a},jn.prototype.has=function(t){var e=this.__data__;return Tn?e[t]!==a:Ft.call(e,t)},jn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tn&&e===a?o:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=nr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,!0)},Hn.prototype.get=function(t){var e=this.__data__,n=nr(e,t);return n<0?a:e[n][1]},Hn.prototype.has=function(t){return nr(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=nr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new jn,map:new(_n||Hn),string:new jn}},Xn.prototype.delete=function(t){var e=ci(this,t).delete(t);return this.size-=e?1:0,e},Xn.prototype.get=function(t){return ci(this,t).get(t)},Xn.prototype.has=function(t){return ci(this,t).has(t)},Xn.prototype.set=function(t,e){var n=ci(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,o),this},qn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Yn.prototype.get=function(t){return this.__data__.get(t)},Yn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!_n||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(t,e),this.size=n.size,this};var fr=Za(wr),dr=Za(xr,!0);function pr(t,e){var n=!0;return fr(t,(function(t,r,a){return n=!!e(t,r,a)})),n}function vr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(u===a?s===s&&!us(s):n(s,u)))var u=s,c=o}return c}function gr(t,e){var n=[];return fr(t,(function(t,r,a){e(t,r,a)&&n.push(t)})),n}function mr(t,e,n,r,a){var i=-1,o=t.length;for(n||(n=mi),a||(a=[]);++i<o;){var s=t[i];e>0&&n(s)?e>1?mr(s,e-1,n,r,a):Oe(a,s):r||(a[a.length]=s)}return a}var yr=Ma(),br=Ma(!0);function wr(t,e){return t&&yr(t,e,Ds)}function xr(t,e){return t&&br(t,e,Ds)}function kr(t,e){return Re(e,(function(e){return Qo(t[e])}))}function Ir(t,e){for(var n=0,r=(e=ba(e,t)).length;null!=t&&n<r;)t=t[Oi(e[n++])];return n&&n==r?t:a}function Sr(t,e,n){var r=e(t);return Go(t)?r:Oe(r,n(t))}function _r(t){return null==t?t===a?"[object Undefined]":"[object Null]":Jt&&Jt in Ct(t)?function(t){var e=Ft.call(t,Jt),n=t[Jt];try{t[Jt]=a;var r=!0}catch(o){}var i=Lt.call(t);r&&(e?t[Jt]=n:delete t[Jt]);return i}(t):function(t){return Lt.call(t)}(t)}function Cr(t,e){return t>e}function Er(t,e){return null!=t&&Ft.call(t,e)}function Ar(t,e){return null!=t&&e in Ct(t)}function Tr(t,e,r){for(var i=r?Me:Ze,o=t[0].length,s=t.length,u=s,c=n(s),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Fe(f,$e(e))),l=bn(f.length,l),c[u]=!r&&(e||o>=120&&f.length>=120)?new qn(u&&f):a}f=t[0];var d=-1,p=c[0];t:for(;++d<o&&h.length<l;){var v=f[d],g=e?e(v):v;if(v=r||0!==v?v:0,!(p?en(p,g):i(h,g,r))){for(u=s;--u;){var m=c[u];if(!(m?en(m,g):i(t[u],g,r)))continue t}p&&p.push(g),h.push(v)}}return h}function Nr(t,e,n){var r=null==(t=Ei(t,e=ba(e,t)))?t:t[Oi(Yi(e))];return null==r?a:Ee(r,t,n)}function Dr(t){return es(t)&&_r(t)==y}function Rr(t,e,n,r,i){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!==t&&e!==e:function(t,e,n,r,i,o){var s=Go(t),u=Go(e),c=s?b:pi(t),l=u?b:pi(e),h=(c=c==y?E:c)==E,f=(l=l==y?E:l)==E,d=c==l;if(d&&qo(t)){if(!qo(e))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Yn),s||cs(t)?ei(t,e,n,r,i,o):function(t,e,n,r,a,i,o){switch(n){case F:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!i(new Gt(t),new Gt(e)));case w:case x:case C:return Uo(+t,+e);case k:return t.name==e.name&&t.message==e.message;case T:case D:return t==e+"";case _:var s=cn;case N:var u=1&r;if(s||(s=fn),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;r|=2,o.set(t,e);var l=ei(s(t),s(e),r,a,i,o);return o.delete(t),l;case R:if(Ln)return Ln.call(t)==Ln.call(e)}return!1}(t,e,c,n,r,i,o);if(!(1&n)){var p=h&&Ft.call(t,"__wrapped__"),v=f&&Ft.call(e,"__wrapped__");if(p||v){var g=p?t.value():t,m=v?e.value():e;return o||(o=new Yn),i(g,m,n,r,o)}}if(!d)return!1;return o||(o=new Yn),function(t,e,n,r,i,o){var s=1&n,u=ri(t),c=u.length,l=ri(e),h=l.length;if(c!=h&&!s)return!1;var f=c;for(;f--;){var d=u[f];if(!(s?d in e:Ft.call(e,d)))return!1}var p=o.get(t),v=o.get(e);if(p&&v)return p==e&&v==t;var g=!0;o.set(t,e),o.set(e,t);var m=s;for(;++f<c;){var y=t[d=u[f]],b=e[d];if(r)var w=s?r(b,y,d,e,t,o):r(y,b,d,t,e,o);if(!(w===a?y===b||i(y,b,n,r,o):w)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var x=t.constructor,k=e.constructor;x==k||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof k&&k instanceof k||(g=!1)}return o.delete(t),o.delete(e),g}(t,e,n,r,i,o)}(t,e,n,r,Rr,i))}function Zr(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Ct(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var c=(u=n[i])[0],l=t[c],h=u[1];if(s&&u[2]){if(l===a&&!(c in t))return!1}else{var f=new Yn;if(r)var d=r(l,h,c,t,e,f);if(!(d===a?Rr(h,l,3,r,f):d))return!1}}return!0}function Mr(t){return!(!ts(t)||(e=t,Bt&&Bt in e))&&(Qo(t)?zt:yt).test(Bi(t));var e}function Fr(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Go(t)?zr(t[0],t[1]):Ur(t):fu(t)}function Or(t){if(!Ii(t))return Ue(t);var e=[];for(var n in Ct(t))Ft.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Br(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=Ii(t),n=[];for(var r in t)("constructor"!=r||!e&&Ft.call(t,r))&&n.push(r);return n}function Lr(t,e){return t<e}function Pr(t,e){var r=-1,a=Ho(t)?n(t.length):[];return fr(t,(function(t,n,i){a[++r]=e(t,n,i)})),a}function Ur(t){var e=li(t);return 1==e.length&&e[0][2]?_i(e[0][0],e[0][1]):function(n){return n===t||Zr(n,t,e)}}function zr(t,e){return wi(t)&&Si(e)?_i(Oi(t),e):function(n){var r=Cs(n,t);return r===a&&r===e?Es(n,t):Rr(e,r,3)}}function Wr(t,e,n,r,i){t!==e&&yr(e,(function(o,s){if(i||(i=new Yn),ts(o))!function(t,e,n,r,i,o,s){var u=Ai(t,n),c=Ai(e,n),l=s.get(c);if(l)return void tr(t,n,l);var h=o?o(u,c,n+"",t,e,s):a,f=h===a;if(f){var d=Go(c),p=!d&&qo(c),v=!d&&!p&&cs(c);h=c,d||p||v?Go(u)?h=u:Xo(u)?h=Ta(u):p?(f=!1,h=Ia(c,!0)):v?(f=!1,h=_a(c,!0)):h=[]:as(c)||Vo(c)?(h=u,Vo(u)?h=ms(u):ts(u)&&!Qo(u)||(h=gi(c))):f=!1}f&&(s.set(c,h),i(h,c,r,o,s),s.delete(c));tr(t,n,h)}(t,e,s,n,Wr,r,i);else{var u=r?r(Ai(t,s),o,s+"",t,e,i):a;u===a&&(u=o),tr(t,s,u)}}),Rs)}function Vr(t,e){var n=t.length;if(n)return yi(e+=e<0?n:0,n)?t[e]:a}function Gr(t,e,n){e=e.length?Fe(e,(function(t){return Go(t)?function(e){return Ir(e,1===t.length?t[0]:t)}:t})):[ru];var r=-1;e=Fe(e,$e(ui()));var a=Pr(t,(function(t,n,a){var i=Fe(e,(function(e){return e(t)}));return{criteria:i,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(a,(function(t,e){return function(t,e,n){var r=-1,a=t.criteria,i=e.criteria,o=a.length,s=n.length;for(;++r<o;){var u=Ca(a[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function jr(t,e,n){for(var r=-1,a=e.length,i={};++r<a;){var o=e[r],s=Ir(t,o);n(s,o)&&$r(i,ba(o,t),s)}return i}function Hr(t,e,n,r){var a=r?Ge:Ve,i=-1,o=e.length,s=t;for(t===e&&(e=Ta(e)),n&&(s=Fe(t,$e(n)));++i<o;)for(var u=0,c=e[i],l=n?n(c):c;(u=a(s,l,u,r))>-1;)s!==t&&Yt.call(s,u,1),Yt.call(t,u,1);return t}function Xr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var a=e[n];if(n==r||a!==i){var i=a;yi(a)?Yt.call(t,a,1):ha(t,a)}}return t}function qr(t,e){return t+pe(kn()*(e-t+1))}function Yr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=pe(e/2))&&(t+=t)}while(e);return n}function Kr(t,e){return Di(Ci(t,e,ru),t+"")}function Qr(t){return Qn(Us(t))}function Jr(t,e){var n=Us(t);return Mi(n,sr(e,0,n.length))}function $r(t,e,n,r){if(!ts(t))return t;for(var i=-1,o=(e=ba(e,t)).length,s=o-1,u=t;null!=u&&++i<o;){var c=Oi(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var h=u[c];(l=r?r(h,c,u):a)===a&&(l=ts(h)?h:yi(e[i+1])?[]:{})}er(u,c,l),u=u[c]}return t}var ta=Nn?function(t,e){return Nn.set(t,e),t}:ru,ea=$t?function(t,e){return $t(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:ru;function na(t){return Mi(Us(t))}function ra(t,e,r){var a=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=n(i);++a<i;)o[a]=t[a+e];return o}function aa(t,e){var n;return fr(t,(function(t,r,a){return!(n=e(t,r,a))})),!!n}function ia(t,e,n){var r=0,a=null==t?r:t.length;if("number"==typeof e&&e===e&&a<=2147483647){for(;r<a;){var i=r+a>>>1,o=t[i];null!==o&&!us(o)&&(n?o<=e:o<e)?r=i+1:a=i}return a}return oa(t,e,ru,n)}function oa(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!==e,u=null===e,c=us(e),l=e===a;i<o;){var h=pe((i+o)/2),f=n(t[h]),d=f!==a,p=null===f,v=f===f,g=us(f);if(s)var m=r||v;else m=l?v&&(r||d):u?v&&d&&(r||!p):c?v&&d&&!p&&(r||!g):!p&&!g&&(r?f<=e:f<e);m?i=h+1:o=h}return bn(o,4294967294)}function sa(t,e){for(var n=-1,r=t.length,a=0,i=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!Uo(s,u)){var u=s;i[a++]=0===o?0:o}}return i}function ua(t){return"number"==typeof t?t:us(t)?v:+t}function ca(t){if("string"==typeof t)return t;if(Go(t))return Fe(t,ca)+"";if(us(t))return Pn?Pn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function la(t,e,n){var r=-1,a=Ze,i=t.length,o=!0,s=[],u=s;if(n)o=!1,a=Me;else if(i>=200){var c=e?null:Ya(t);if(c)return fn(c);o=!1,a=en,u=new qn}else u=e?[]:s;t:for(;++r<i;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(l)}else a(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function ha(t,e){return null==(t=Ei(t,e=ba(e,t)))||delete t[Oi(Yi(e))]}function fa(t,e,n,r){return $r(t,e,n(Ir(t,e)),r)}function da(t,e,n,r){for(var a=t.length,i=r?a:-1;(r?i--:++i<a)&&e(t[i],i,t););return n?ra(t,r?0:i,r?i+1:a):ra(t,r?i+1:0,r?a:i)}function pa(t,e){var n=t;return n instanceof Gn&&(n=n.value()),Be(e,(function(t,e){return e.func.apply(e.thisArg,Oe([t],e.args))}),n)}function va(t,e,r){var a=t.length;if(a<2)return a?la(t[0]):[];for(var i=-1,o=n(a);++i<a;)for(var s=t[i],u=-1;++u<a;)u!=i&&(o[i]=hr(o[i]||s,t[u],e,r));return la(mr(o,1),e,r)}function ga(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var u=r<o?e[r]:a;n(s,t[r],u)}return s}function ma(t){return Xo(t)?t:[]}function ya(t){return"function"==typeof t?t:ru}function ba(t,e){return Go(t)?t:wi(t,e)?[t]:Fi(ys(t))}var wa=Kr;function xa(t,e,n){var r=t.length;return n=n===a?r:n,!e&&n>=r?t:ra(t,e,n)}var ka=ne||function(t){return ve.clearTimeout(t)};function Ia(t,e){if(e)return t.slice();var n=t.length,r=jt?jt(n):new t.constructor(n);return t.copy(r),r}function Sa(t){var e=new t.constructor(t.byteLength);return new Gt(e).set(new Gt(t)),e}function _a(t,e){var n=e?Sa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ca(t,e){if(t!==e){var n=t!==a,r=null===t,i=t===t,o=us(t),s=e!==a,u=null===e,c=e===e,l=us(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!c)return-1}return 0}function Ea(t,e,r,a){for(var i=-1,o=t.length,s=r.length,u=-1,c=e.length,l=qe(o-s,0),h=n(c+l),f=!a;++u<c;)h[u]=e[u];for(;++i<s;)(f||i<o)&&(h[r[i]]=t[i]);for(;l--;)h[u++]=t[i++];return h}function Aa(t,e,r,a){for(var i=-1,o=t.length,s=-1,u=r.length,c=-1,l=e.length,h=qe(o-u,0),f=n(h+l),d=!a;++i<h;)f[i]=t[i];for(var p=i;++c<l;)f[p+c]=e[c];for(;++s<u;)(d||i<o)&&(f[p+r[s]]=t[i++]);return f}function Ta(t,e){var r=-1,a=t.length;for(e||(e=n(a));++r<a;)e[r]=t[r];return e}function Na(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],c=r?r(n[u],t[u],u,n,t):a;c===a&&(c=t[u]),i?ir(n,u,c):er(n,u,c)}return n}function Da(t,e){return function(n,r){var a=Go(n)?Ae:rr,i=e?e():{};return a(n,t,ui(r,2),i)}}function Ra(t){return Kr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=t.length>3&&"function"==typeof o?(i--,o):a,s&&bi(n[0],n[1],s)&&(o=i<3?a:o,i=1),e=Ct(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e}))}function Za(t,e){return function(n,r){if(null==n)return n;if(!Ho(n))return t(n,r);for(var a=n.length,i=e?a:-1,o=Ct(n);(e?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function Ma(t){return function(e,n,r){for(var a=-1,i=Ct(e),o=r(e),s=o.length;s--;){var u=o[t?s:++a];if(!1===n(i[u],u,i))break}return e}}function Fa(t){return function(e){var n=un(e=ys(e))?vn(e):a,r=n?n[0]:e.charAt(0),i=n?xa(n,1).join(""):e.slice(1);return r[t]()+i}}function Oa(t){return function(e){return Be(Qs(Vs(e).replace(te,"")),t,"")}}function Ba(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zn(t.prototype),r=t.apply(n,e);return ts(r)?r:n}}function La(t){return function(e,n,r){var i=Ct(e);if(!Ho(e)){var o=ui(n,3);e=Ds(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:a}}function Pa(t){return ni((function(e){var n=e.length,r=n,o=Vn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Tt(i);if(o&&!u&&"wrapper"==oi(s))var u=new Vn([],!0)}for(r=u?r:n;++r<n;){var c=oi(s=e[r]),l="wrapper"==c?ii(s):a;u=l&&xi(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[oi(l[0])].apply(u,l[3]):1==s.length&&xi(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Go(r))return u.plant(r).value();for(var a=0,i=n?e[a].apply(this,t):r;++a<n;)i=e[a].call(this,i);return i}}))}function Ua(t,e,r,i,o,s,u,c,l,f){var d=e&h,p=1&e,v=2&e,g=24&e,m=512&e,y=v?a:Ba(t);return function h(){for(var b=arguments.length,w=n(b),x=b;x--;)w[x]=arguments[x];if(g)var k=si(h),I=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,k);if(i&&(w=Ea(w,i,o,g)),s&&(w=Aa(w,s,u,g)),b-=I,g&&b<f){var S=hn(w,k);return Xa(t,e,Ua,h.placeholder,r,w,S,c,l,f-b)}var _=p?r:this,C=v?_[t]:t;return b=w.length,c?w=function(t,e){var n=t.length,r=bn(e.length,n),i=Ta(t);for(;r--;){var o=e[r];t[r]=yi(o,n)?i[o]:a}return t}(w,c):m&&b>1&&w.reverse(),d&&l<b&&(w.length=l),this&&this!==ve&&this instanceof h&&(C=y||Ba(C)),C.apply(_,w)}}function za(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,a,i){e(r,n(t),a,i)})),r}(n,t,e(r),{})}}function Wa(t,e){return function(n,r){var i;if(n===a&&r===a)return e;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=ca(n),r=ca(r)):(n=ua(n),r=ua(r)),i=t(n,r)}return i}}function Va(t){return ni((function(e){return e=Fe(e,$e(ui())),Kr((function(n){var r=this;return t(e,(function(t){return Ee(t,r,n)}))}))}))}function Ga(t,e){var n=(e=e===a?" ":ca(e)).length;if(n<2)return n?Yr(e,t):e;var r=Yr(e,de(t/pn(e)));return un(e)?xa(vn(r),0,t).join(""):r.slice(0,t)}function ja(t){return function(e,r,i){return i&&"number"!=typeof i&&bi(e,r,i)&&(r=i=a),e=ds(e),r===a?(r=e,e=0):r=ds(r),function(t,e,r,a){for(var i=-1,o=qe(de((e-t)/(r||1)),0),s=n(o);o--;)s[a?o:++i]=t,t+=r;return s}(e,r,i=i===a?e<r?1:-1:ds(i),t)}}function Ha(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function Xa(t,e,n,r,i,o,s,u,h,f){var d=8&e;e|=d?c:l,4&(e&=~(d?l:c))||(e&=-4);var p=[t,e,i,d?o:a,d?s:a,d?a:o,d?a:s,u,h,f],v=n.apply(a,p);return xi(t)&&Ti(v,p),v.placeholder=r,Ri(v,t,e)}function qa(t){var e=_t[t];return function(t,n){if(t=gs(t),(n=null==n?0:bn(ps(n),292))&&be(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ya=En&&1/fn(new En([,-0]))[1]==d?function(t){return new En(t)}:uu;function Ka(t){return function(e){var n=pi(e);return n==_?cn(e):n==N?dn(e):function(t,e){return Fe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qa(t,e,r,o,d,p,v,g){var m=2&e;if(!m&&"function"!=typeof t)throw new Tt(i);var y=o?o.length:0;if(y||(e&=-97,o=d=a),v=v===a?v:qe(ps(v),0),g=g===a?g:ps(g),y-=d?d.length:0,e&l){var b=o,w=d;o=d=a}var x=m?a:ii(t),k=[t,e,r,o,d,b,w,p,v,g];if(x&&function(t,e){var n=t[1],r=e[1],a=n|r,i=a<131,o=r==h&&8==n||r==h&&n==f&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!o)return t;1&r&&(t[2]=e[2],a|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Ea(c,u,e[4]):u,t[4]=c?hn(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Aa(c,u,e[6]):u,t[6]=c?hn(t[5],s):e[6]);(u=e[7])&&(t[7]=u);r&h&&(t[8]=null==t[8]?e[8]:bn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=a}(k,x),t=k[0],e=k[1],r=k[2],o=k[3],d=k[4],!(g=k[9]=k[9]===a?m?0:t.length:qe(k[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)I=8==e||e==u?function(t,e,r){var i=Ba(t);return function o(){for(var s=arguments.length,u=n(s),c=s,l=si(o);c--;)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:hn(u,l);return(s-=h.length)<r?Xa(t,e,Ua,o.placeholder,a,u,h,a,a,r-s):Ee(this&&this!==ve&&this instanceof o?i:t,this,u)}}(t,e,g):e!=c&&33!=e||d.length?Ua.apply(a,k):function(t,e,r,a){var i=1&e,o=Ba(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=a.length,h=n(l+u),f=this&&this!==ve&&this instanceof e?o:t;++c<l;)h[c]=a[c];for(;u--;)h[c++]=arguments[++s];return Ee(f,i?r:this,h)}}(t,e,r,o);else var I=function(t,e,n){var r=1&e,a=Ba(t);return function e(){return(this&&this!==ve&&this instanceof e?a:t).apply(r?n:this,arguments)}}(t,e,r);return Ri((x?ta:Ti)(I,k),t,e)}function Ja(t,e,n,r){return t===a||Uo(t,Rt[n])&&!Ft.call(r,n)?e:t}function $a(t,e,n,r,i,o){return ts(t)&&ts(e)&&(o.set(e,t),Wr(t,e,a,$a,o),o.delete(e)),t}function ti(t){return as(t)?a:t}function ei(t,e,n,r,i,o){var s=1&n,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(t),h=o.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new qn:a;for(o.set(t,e),o.set(e,t);++f<u;){var v=t[f],g=e[f];if(r)var m=s?r(g,v,f,e,t,o):r(v,g,f,t,e,o);if(m!==a){if(m)continue;d=!1;break}if(p){if(!Pe(e,(function(t,e){if(!en(p,e)&&(v===t||i(v,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(v!==g&&!i(v,g,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function ni(t){return Di(Ci(t,a,Gi),t+"")}function ri(t){return Sr(t,Ds,fi)}function ai(t){return Sr(t,Rs,di)}var ii=Nn?function(t){return Nn.get(t)}:uu;function oi(t){for(var e=t.name+"",n=Dn[e],r=Ft.call(Dn,e)?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==t)return a.name}return e}function si(t){return(Ft.call(Un,"placeholder")?Un:t).placeholder}function ui(){var t=Un.iteratee||au;return t=t===au?Fr:t,arguments.length?t(arguments[0],arguments[1]):t}function ci(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function li(t){for(var e=Ds(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,Si(a)]}return e}function hi(t,e){var n=function(t,e){return null==t?a:t[e]}(t,e);return Mr(n)?n:a}var fi=ge?function(t){return null==t?[]:(t=Ct(t),Re(ge(t),(function(e){return qt.call(t,e)})))}:vu,di=ge?function(t){for(var e=[];t;)Oe(e,fi(t)),t=Ht(t);return e}:vu,pi=_r;function vi(t,e,n){for(var r=-1,a=(e=ba(e,t)).length,i=!1;++r<a;){var o=Oi(e[r]);if(!(i=null!=t&&n(t,o)))break;t=t[o]}return i||++r!=a?i:!!(a=null==t?0:t.length)&&$o(a)&&yi(o,a)&&(Go(t)||Vo(t))}function gi(t){return"function"!=typeof t.constructor||Ii(t)?{}:zn(Ht(t))}function mi(t){return Go(t)||Vo(t)||!!(Kt&&t&&t[Kt])}function yi(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function bi(t,e,n){if(!ts(n))return!1;var r=typeof e;return!!("number"==r?Ho(n)&&yi(e,n.length):"string"==r&&e in n)&&Uo(n[e],t)}function wi(t,e){if(Go(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Ct(e))}function xi(t){var e=oi(t),n=Un[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=ii(n);return!!r&&t===r[0]}(Sn&&pi(new Sn(new ArrayBuffer(1)))!=F||_n&&pi(new _n)!=_||Cn&&pi(Cn.resolve())!=A||En&&pi(new En)!=N||An&&pi(new An)!=Z)&&(pi=function(t){var e=_r(t),n=e==E?t.constructor:a,r=n?Bi(n):"";if(r)switch(r){case Rn:return F;case Zn:return _;case Mn:return A;case Fn:return N;case On:return Z}return e});var ki=Zt?Qo:gu;function Ii(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function Si(t){return t===t&&!ts(t)}function _i(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==a||t in Ct(n)))}}function Ci(t,e,r){return e=qe(e===a?t.length-1:e,0),function(){for(var a=arguments,i=-1,o=qe(a.length-e,0),s=n(o);++i<o;)s[i]=a[e+i];i=-1;for(var u=n(e+1);++i<e;)u[i]=a[i];return u[e]=r(s),Ee(t,this,u)}}function Ei(t,e){return e.length<2?t:Ir(t,ra(e,0,-1))}function Ai(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ti=Zi(ta),Ni=le||function(t,e){return ve.setTimeout(t,e)},Di=Zi(ea);function Ri(t,e,n){var r=e+"";return Di(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Te(m,(function(n){var r="_."+n[0];e&n[1]&&!Ze(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(lt):[]}(r),n)))}function Zi(t){var e=0,n=0;return function(){var r=wn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Mi(t,e){var n=-1,r=t.length,i=r-1;for(e=e===a?r:e;++n<e;){var o=qr(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var Fi=function(t){var e=Mo(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,a){e.push(r?a.replace(dt,"$1"):n||t)})),e}));function Oi(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bi(t){if(null!=t){try{return Mt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Li(t){if(t instanceof Gn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Ta(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Pi=Kr((function(t,e){return Xo(t)?hr(t,mr(e,1,Xo,!0)):[]})),Ui=Kr((function(t,e){var n=Yi(e);return Xo(n)&&(n=a),Xo(t)?hr(t,mr(e,1,Xo,!0),ui(n,2)):[]})),zi=Kr((function(t,e){var n=Yi(e);return Xo(n)&&(n=a),Xo(t)?hr(t,mr(e,1,Xo,!0),a,n):[]}));function Wi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=null==n?0:ps(n);return a<0&&(a=qe(r+a,0)),We(t,ui(e,3),a)}function Vi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==a&&(i=ps(n),i=n<0?qe(r+i,0):bn(i,r-1)),We(t,ui(e,3),i,!0)}function Gi(t){return(null==t?0:t.length)?mr(t,1):[]}function ji(t){return t&&t.length?t[0]:a}var Hi=Kr((function(t){var e=Fe(t,ma);return e.length&&e[0]===t[0]?Tr(e):[]})),Xi=Kr((function(t){var e=Yi(t),n=Fe(t,ma);return e===Yi(n)?e=a:n.pop(),n.length&&n[0]===t[0]?Tr(n,ui(e,2)):[]})),qi=Kr((function(t){var e=Yi(t),n=Fe(t,ma);return(e="function"==typeof e?e:a)&&n.pop(),n.length&&n[0]===t[0]?Tr(n,a,e):[]}));function Yi(t){var e=null==t?0:t.length;return e?t[e-1]:a}var Ki=Kr(Qi);function Qi(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var Ji=ni((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Xr(t,Fe(e,(function(t){return yi(t,n)?+t:t})).sort(Ca)),r}));function $i(t){return null==t?t:In.call(t)}var to=Kr((function(t){return la(mr(t,1,Xo,!0))})),eo=Kr((function(t){var e=Yi(t);return Xo(e)&&(e=a),la(mr(t,1,Xo,!0),ui(e,2))})),no=Kr((function(t){var e=Yi(t);return e="function"==typeof e?e:a,la(mr(t,1,Xo,!0),a,e)}));function ro(t){if(!t||!t.length)return[];var e=0;return t=Re(t,(function(t){if(Xo(t))return e=qe(t.length,e),!0})),Qe(e,(function(e){return Fe(t,Xe(e))}))}function ao(t,e){if(!t||!t.length)return[];var n=ro(t);return null==e?n:Fe(n,(function(t){return Ee(e,a,t)}))}var io=Kr((function(t,e){return Xo(t)?hr(t,e):[]})),oo=Kr((function(t){return va(Re(t,Xo))})),so=Kr((function(t){var e=Yi(t);return Xo(e)&&(e=a),va(Re(t,Xo),ui(e,2))})),uo=Kr((function(t){var e=Yi(t);return e="function"==typeof e?e:a,va(Re(t,Xo),a,e)})),co=Kr(ro);var lo=Kr((function(t){var e=t.length,n=e>1?t[e-1]:a;return n="function"==typeof n?(t.pop(),n):a,ao(t,n)}));function ho(t){var e=Un(t);return e.__chain__=!0,e}function fo(t,e){return e(t)}var po=ni((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&yi(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fo,args:[i],thisArg:a}),new Vn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(a),t}))):this.thru(i)}));var vo=Da((function(t,e,n){Ft.call(t,n)?++t[n]:ir(t,n,1)}));var go=La(Wi),mo=La(Vi);function yo(t,e){return(Go(t)?Te:fr)(t,ui(e,3))}function bo(t,e){return(Go(t)?Ne:dr)(t,ui(e,3))}var wo=Da((function(t,e,n){Ft.call(t,n)?t[n].push(e):ir(t,n,[e])}));var xo=Kr((function(t,e,r){var a=-1,i="function"==typeof e,o=Ho(t)?n(t.length):[];return fr(t,(function(t){o[++a]=i?Ee(e,t,r):Nr(t,e,r)})),o})),ko=Da((function(t,e,n){ir(t,n,e)}));function Io(t,e){return(Go(t)?Fe:Pr)(t,ui(e,3))}var So=Da((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var _o=Kr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&bi(t,e[0],e[1])?e=[]:n>2&&bi(e[0],e[1],e[2])&&(e=[e[0]]),Gr(t,mr(e,1),[])})),Co=ae||function(){return ve.Date.now()};function Eo(t,e,n){return e=n?a:e,e=t&&null==e?t.length:e,Qa(t,h,a,a,a,a,e)}function Ao(t,e){var n;if("function"!=typeof e)throw new Tt(i);return t=ps(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=a),n}}var To=Kr((function(t,e,n){var r=1;if(n.length){var a=hn(n,si(To));r|=c}return Qa(t,r,e,n,a)})),No=Kr((function(t,e,n){var r=3;if(n.length){var a=hn(n,si(No));r|=c}return Qa(e,r,t,n,a)}));function Do(t,e,n){var r,o,s,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Tt(i);function v(e){var n=r,i=o;return r=o=a,h=e,u=t.apply(i,n)}function g(t){var n=t-l;return l===a||n>=e||n<0||d&&t-h>=s}function m(){var t=Co();if(g(t))return y(t);c=Ni(m,function(t){var n=e-(t-l);return d?bn(n,s-(t-h)):n}(t))}function y(t){return c=a,p&&r?v(t):(r=o=a,u)}function b(){var t=Co(),n=g(t);if(r=arguments,o=this,l=t,n){if(c===a)return function(t){return h=t,c=Ni(m,e),f?v(t):u}(l);if(d)return ka(c),c=Ni(m,e),v(l)}return c===a&&(c=Ni(m,e)),u}return e=gs(e)||0,ts(n)&&(f=!!n.leading,s=(d="maxWait"in n)?qe(gs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==a&&ka(c),h=0,r=l=o=c=a},b.flush=function(){return c===a?u:y(Co())},b}var Ro=Kr((function(t,e){return lr(t,1,e)})),Zo=Kr((function(t,e,n){return lr(t,gs(e)||0,n)}));function Mo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(i);var n=function n(){var r=arguments,a=e?e.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=t.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Mo.Cache||Xn),n}function Fo(t){if("function"!=typeof t)throw new Tt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Mo.Cache=Xn;var Oo=wa((function(t,e){var n=(e=1==e.length&&Go(e[0])?Fe(e[0],$e(ui())):Fe(mr(e,1),$e(ui()))).length;return Kr((function(r){for(var a=-1,i=bn(r.length,n);++a<i;)r[a]=e[a].call(this,r[a]);return Ee(t,this,r)}))})),Bo=Kr((function(t,e){var n=hn(e,si(Bo));return Qa(t,c,a,e,n)})),Lo=Kr((function(t,e){var n=hn(e,si(Lo));return Qa(t,l,a,e,n)})),Po=ni((function(t,e){return Qa(t,f,a,a,a,e)}));function Uo(t,e){return t===e||t!==t&&e!==e}var zo=Ha(Cr),Wo=Ha((function(t,e){return t>=e})),Vo=Dr(function(){return arguments}())?Dr:function(t){return es(t)&&Ft.call(t,"callee")&&!qt.call(t,"callee")},Go=n.isArray,jo=xe?$e(xe):function(t){return es(t)&&_r(t)==M};function Ho(t){return null!=t&&$o(t.length)&&!Qo(t)}function Xo(t){return es(t)&&Ho(t)}var qo=me||gu,Yo=ke?$e(ke):function(t){return es(t)&&_r(t)==x};function Ko(t){if(!es(t))return!1;var e=_r(t);return e==k||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function Qo(t){if(!ts(t))return!1;var e=_r(t);return e==I||e==S||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Jo(t){return"number"==typeof t&&t==ps(t)}function $o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=Ie?$e(Ie):function(t){return es(t)&&pi(t)==_};function rs(t){return"number"==typeof t||es(t)&&_r(t)==C}function as(t){if(!es(t)||_r(t)!=E)return!1;var e=Ht(t);if(null===e)return!0;var n=Ft.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mt.call(n)==Pt}var is=Se?$e(Se):function(t){return es(t)&&_r(t)==T};var os=_e?$e(_e):function(t){return es(t)&&pi(t)==N};function ss(t){return"string"==typeof t||!Go(t)&&es(t)&&_r(t)==D}function us(t){return"symbol"==typeof t||es(t)&&_r(t)==R}var cs=Ce?$e(Ce):function(t){return es(t)&&$o(t.length)&&!!ue[_r(t)]};var ls=Ha(Lr),hs=Ha((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(Ho(t))return ss(t)?vn(t):Ta(t);if(Qt&&t[Qt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Qt]());var e=pi(t);return(e==_?cn:e==N?fn:Us)(t)}function ds(t){return t?(t=gs(t))===d||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function ps(t){var e=ds(t),n=e%1;return e===e?n?e-n:e:0}function vs(t){return t?sr(ps(t),0,g):0}function gs(t){if("number"==typeof t)return t;if(us(t))return v;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=mt.test(t);return n||bt.test(t)?fe(t.slice(2),n?2:8):gt.test(t)?v:+t}function ms(t){return Na(t,Rs(t))}function ys(t){return null==t?"":ca(t)}var bs=Ra((function(t,e){if(Ii(e)||Ho(e))Na(e,Ds(e),t);else for(var n in e)Ft.call(e,n)&&er(t,n,e[n])})),ws=Ra((function(t,e){Na(e,Rs(e),t)})),xs=Ra((function(t,e,n,r){Na(e,Rs(e),t,r)})),ks=Ra((function(t,e,n,r){Na(e,Ds(e),t,r)})),Is=ni(or);var Ss=Kr((function(t,e){t=Ct(t);var n=-1,r=e.length,i=r>2?e[2]:a;for(i&&bi(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=Rs(o),u=-1,c=s.length;++u<c;){var l=s[u],h=t[l];(h===a||Uo(h,Rt[l])&&!Ft.call(t,l))&&(t[l]=o[l])}return t})),_s=Kr((function(t){return t.push(a,$a),Ee(Ms,a,t)}));function Cs(t,e,n){var r=null==t?a:Ir(t,e);return r===a?n:r}function Es(t,e){return null!=t&&vi(t,e,Ar)}var As=za((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),t[e]=n}),tu(ru)),Ts=za((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),Ft.call(t,e)?t[e].push(n):t[e]=[n]}),ui),Ns=Kr(Nr);function Ds(t){return Ho(t)?Kn(t):Or(t)}function Rs(t){return Ho(t)?Kn(t,!0):Br(t)}var Zs=Ra((function(t,e,n){Wr(t,e,n)})),Ms=Ra((function(t,e,n,r){Wr(t,e,n,r)})),Fs=ni((function(t,e){var n={};if(null==t)return n;var r=!1;e=Fe(e,(function(e){return e=ba(e,t),r||(r=e.length>1),e})),Na(t,ai(t),n),r&&(n=ur(n,7,ti));for(var a=e.length;a--;)ha(n,e[a]);return n}));var Os=ni((function(t,e){return null==t?{}:function(t,e){return jr(t,e,(function(e,n){return Es(t,n)}))}(t,e)}));function Bs(t,e){if(null==t)return{};var n=Fe(ai(t),(function(t){return[t]}));return e=ui(e),jr(t,n,(function(t,n){return e(t,n[0])}))}var Ls=Ka(Ds),Ps=Ka(Rs);function Us(t){return null==t?[]:tn(t,Ds(t))}var zs=Oa((function(t,e,n){return e=e.toLowerCase(),t+(n?Ws(e):e)}));function Ws(t){return Ks(ys(t).toLowerCase())}function Vs(t){return(t=ys(t))&&t.replace(xt,an).replace(ee,"")}var Gs=Oa((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),js=Oa((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Hs=Fa("toLowerCase");var Xs=Oa((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var qs=Oa((function(t,e,n){return t+(n?" ":"")+Ks(e)}));var Ys=Oa((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Fa("toUpperCase");function Qs(t,e,n){return t=ys(t),(e=n?a:e)===a?function(t){return ie.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Js=Kr((function(t,e){try{return Ee(t,a,e)}catch(n){return Ko(n)?n:new st(n)}})),$s=ni((function(t,e){return Te(e,(function(e){e=Oi(e),ir(t,e,To(t[e],t))})),t}));function tu(t){return function(){return t}}var eu=Pa(),nu=Pa(!0);function ru(t){return t}function au(t){return Fr("function"==typeof t?t:ur(t,1))}var iu=Kr((function(t,e){return function(n){return Nr(n,t,e)}})),ou=Kr((function(t,e){return function(n){return Nr(t,n,e)}}));function su(t,e,n){var r=Ds(e),a=kr(e,r);null!=n||ts(e)&&(a.length||!r.length)||(n=e,e=t,t=this,a=kr(e,Ds(e)));var i=!(ts(n)&&"chain"in n)||!!n.chain,o=Qo(t);return Te(a,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__);return(n.__actions__=Ta(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Oe([this.value()],arguments))})})),t}function uu(){}var cu=Va(Fe),lu=Va(De),hu=Va(Pe);function fu(t){return wi(t)?Xe(Oi(t)):function(t){return function(e){return Ir(e,t)}}(t)}var du=ja(),pu=ja(!0);function vu(){return[]}function gu(){return!1}var mu=Wa((function(t,e){return t+e}),0),yu=qa("ceil"),bu=Wa((function(t,e){return t/e}),1),wu=qa("floor");var xu=Wa((function(t,e){return t*e}),1),ku=qa("round"),Iu=Wa((function(t,e){return t-e}),0);return Un.after=function(t,e){if("function"!=typeof e)throw new Tt(i);return t=ps(t),function(){if(--t<1)return e.apply(this,arguments)}},Un.ary=Eo,Un.assign=bs,Un.assignIn=ws,Un.assignInWith=xs,Un.assignWith=ks,Un.at=Is,Un.before=Ao,Un.bind=To,Un.bindAll=$s,Un.bindKey=No,Un.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Go(t)?t:[t]},Un.chain=ho,Un.chunk=function(t,e,r){e=(r?bi(t,e,r):e===a)?1:qe(ps(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=n(de(i/e));o<i;)u[s++]=ra(t,o,o+=e);return u},Un.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,a=[];++e<n;){var i=t[e];i&&(a[r++]=i)}return a},Un.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],a=t;a--;)e[a-1]=arguments[a];return Oe(Go(r)?Ta(r):[r],mr(e,1))},Un.cond=function(t){var e=null==t?0:t.length,n=ui();return t=e?Fe(t,(function(t){if("function"!=typeof t[1])throw new Tt(i);return[n(t[0]),t[1]]})):[],Kr((function(n){for(var r=-1;++r<e;){var a=t[r];if(Ee(a[0],this,n))return Ee(a[1],this,n)}}))},Un.conforms=function(t){return function(t){var e=Ds(t);return function(n){return cr(n,t,e)}}(ur(t,1))},Un.constant=tu,Un.countBy=vo,Un.create=function(t,e){var n=zn(t);return null==e?n:ar(n,e)},Un.curry=function t(e,n,r){var i=Qa(e,8,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},Un.curryRight=function t(e,n,r){var i=Qa(e,u,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},Un.debounce=Do,Un.defaults=Ss,Un.defaultsDeep=_s,Un.defer=Ro,Un.delay=Zo,Un.difference=Pi,Un.differenceBy=Ui,Un.differenceWith=zi,Un.drop=function(t,e,n){var r=null==t?0:t.length;return r?ra(t,(e=n||e===a?1:ps(e))<0?0:e,r):[]},Un.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ra(t,0,(e=r-(e=n||e===a?1:ps(e)))<0?0:e):[]},Un.dropRightWhile=function(t,e){return t&&t.length?da(t,ui(e,3),!0,!0):[]},Un.dropWhile=function(t,e){return t&&t.length?da(t,ui(e,3),!0):[]},Un.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&bi(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ps(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:ps(r))<0&&(r+=i),r=n>r?0:vs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Un.filter=function(t,e){return(Go(t)?Re:gr)(t,ui(e,3))},Un.flatMap=function(t,e){return mr(Io(t,e),1)},Un.flatMapDeep=function(t,e){return mr(Io(t,e),d)},Un.flatMapDepth=function(t,e,n){return n=n===a?1:ps(n),mr(Io(t,e),n)},Un.flatten=Gi,Un.flattenDeep=function(t){return(null==t?0:t.length)?mr(t,d):[]},Un.flattenDepth=function(t,e){return(null==t?0:t.length)?mr(t,e=e===a?1:ps(e)):[]},Un.flip=function(t){return Qa(t,512)},Un.flow=eu,Un.flowRight=nu,Un.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var a=t[e];r[a[0]]=a[1]}return r},Un.functions=function(t){return null==t?[]:kr(t,Ds(t))},Un.functionsIn=function(t){return null==t?[]:kr(t,Rs(t))},Un.groupBy=wo,Un.initial=function(t){return(null==t?0:t.length)?ra(t,0,-1):[]},Un.intersection=Hi,Un.intersectionBy=Xi,Un.intersectionWith=qi,Un.invert=As,Un.invertBy=Ts,Un.invokeMap=xo,Un.iteratee=au,Un.keyBy=ko,Un.keys=Ds,Un.keysIn=Rs,Un.map=Io,Un.mapKeys=function(t,e){var n={};return e=ui(e,3),wr(t,(function(t,r,a){ir(n,e(t,r,a),t)})),n},Un.mapValues=function(t,e){var n={};return e=ui(e,3),wr(t,(function(t,r,a){ir(n,r,e(t,r,a))})),n},Un.matches=function(t){return Ur(ur(t,1))},Un.matchesProperty=function(t,e){return zr(t,ur(e,1))},Un.memoize=Mo,Un.merge=Zs,Un.mergeWith=Ms,Un.method=iu,Un.methodOf=ou,Un.mixin=su,Un.negate=Fo,Un.nthArg=function(t){return t=ps(t),Kr((function(e){return Vr(e,t)}))},Un.omit=Fs,Un.omitBy=function(t,e){return Bs(t,Fo(ui(e)))},Un.once=function(t){return Ao(2,t)},Un.orderBy=function(t,e,n,r){return null==t?[]:(Go(e)||(e=null==e?[]:[e]),Go(n=r?a:n)||(n=null==n?[]:[n]),Gr(t,e,n))},Un.over=cu,Un.overArgs=Oo,Un.overEvery=lu,Un.overSome=hu,Un.partial=Bo,Un.partialRight=Lo,Un.partition=So,Un.pick=Os,Un.pickBy=Bs,Un.property=fu,Un.propertyOf=function(t){return function(e){return null==t?a:Ir(t,e)}},Un.pull=Ki,Un.pullAll=Qi,Un.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,ui(n,2)):t},Un.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,a,n):t},Un.pullAt=Ji,Un.range=du,Un.rangeRight=pu,Un.rearg=Po,Un.reject=function(t,e){return(Go(t)?Re:gr)(t,Fo(ui(e,3)))},Un.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,a=[],i=t.length;for(e=ui(e,3);++r<i;){var o=t[r];e(o,r,t)&&(n.push(o),a.push(r))}return Xr(t,a),n},Un.rest=function(t,e){if("function"!=typeof t)throw new Tt(i);return Kr(t,e=e===a?e:ps(e))},Un.reverse=$i,Un.sampleSize=function(t,e,n){return e=(n?bi(t,e,n):e===a)?1:ps(e),(Go(t)?Jn:Jr)(t,e)},Un.set=function(t,e,n){return null==t?t:$r(t,e,n)},Un.setWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:$r(t,e,n,r)},Un.shuffle=function(t){return(Go(t)?$n:na)(t)},Un.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&bi(t,e,n)?(e=0,n=r):(e=null==e?0:ps(e),n=n===a?r:ps(n)),ra(t,e,n)):[]},Un.sortBy=_o,Un.sortedUniq=function(t){return t&&t.length?sa(t):[]},Un.sortedUniqBy=function(t,e){return t&&t.length?sa(t,ui(e,2)):[]},Un.split=function(t,e,n){return n&&"number"!=typeof n&&bi(t,e,n)&&(e=n=a),(n=n===a?g:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=ca(e))&&un(t)?xa(vn(t),0,n):t.split(e,n):[]},Un.spread=function(t,e){if("function"!=typeof t)throw new Tt(i);return e=null==e?0:qe(ps(e),0),Kr((function(n){var r=n[e],a=xa(n,0,e);return r&&Oe(a,r),Ee(t,this,a)}))},Un.tail=function(t){var e=null==t?0:t.length;return e?ra(t,1,e):[]},Un.take=function(t,e,n){return t&&t.length?ra(t,0,(e=n||e===a?1:ps(e))<0?0:e):[]},Un.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ra(t,(e=r-(e=n||e===a?1:ps(e)))<0?0:e,r):[]},Un.takeRightWhile=function(t,e){return t&&t.length?da(t,ui(e,3),!1,!0):[]},Un.takeWhile=function(t,e){return t&&t.length?da(t,ui(e,3)):[]},Un.tap=function(t,e){return e(t),t},Un.throttle=function(t,e,n){var r=!0,a=!0;if("function"!=typeof t)throw new Tt(i);return ts(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Do(t,e,{leading:r,maxWait:e,trailing:a})},Un.thru=fo,Un.toArray=fs,Un.toPairs=Ls,Un.toPairsIn=Ps,Un.toPath=function(t){return Go(t)?Fe(t,Oi):us(t)?[t]:Ta(Fi(ys(t)))},Un.toPlainObject=ms,Un.transform=function(t,e,n){var r=Go(t),a=r||qo(t)||cs(t);if(e=ui(e,4),null==n){var i=t&&t.constructor;n=a?r?new i:[]:ts(t)&&Qo(i)?zn(Ht(t)):{}}return(a?Te:wr)(t,(function(t,r,a){return e(n,t,r,a)})),n},Un.unary=function(t){return Eo(t,1)},Un.union=to,Un.unionBy=eo,Un.unionWith=no,Un.uniq=function(t){return t&&t.length?la(t):[]},Un.uniqBy=function(t,e){return t&&t.length?la(t,ui(e,2)):[]},Un.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?la(t,a,e):[]},Un.unset=function(t,e){return null==t||ha(t,e)},Un.unzip=ro,Un.unzipWith=ao,Un.update=function(t,e,n){return null==t?t:fa(t,e,ya(n))},Un.updateWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:fa(t,e,ya(n),r)},Un.values=Us,Un.valuesIn=function(t){return null==t?[]:tn(t,Rs(t))},Un.without=io,Un.words=Qs,Un.wrap=function(t,e){return Bo(ya(e),t)},Un.xor=oo,Un.xorBy=so,Un.xorWith=uo,Un.zip=co,Un.zipObject=function(t,e){return ga(t||[],e||[],er)},Un.zipObjectDeep=function(t,e){return ga(t||[],e||[],$r)},Un.zipWith=lo,Un.entries=Ls,Un.entriesIn=Ps,Un.extend=ws,Un.extendWith=xs,su(Un,Un),Un.add=mu,Un.attempt=Js,Un.camelCase=zs,Un.capitalize=Ws,Un.ceil=yu,Un.clamp=function(t,e,n){return n===a&&(n=e,e=a),n!==a&&(n=(n=gs(n))===n?n:0),e!==a&&(e=(e=gs(e))===e?e:0),sr(gs(t),e,n)},Un.clone=function(t){return ur(t,4)},Un.cloneDeep=function(t){return ur(t,5)},Un.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:a)},Un.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:a)},Un.conformsTo=function(t,e){return null==e||cr(t,e,Ds(e))},Un.deburr=Vs,Un.defaultTo=function(t,e){return null==t||t!==t?e:t},Un.divide=bu,Un.endsWith=function(t,e,n){t=ys(t),e=ca(e);var r=t.length,i=n=n===a?r:sr(ps(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Un.eq=Uo,Un.escape=function(t){return(t=ys(t))&&Q.test(t)?t.replace(Y,on):t},Un.escapeRegExp=function(t){return(t=ys(t))&&it.test(t)?t.replace(at,"\\$&"):t},Un.every=function(t,e,n){var r=Go(t)?De:pr;return n&&bi(t,e,n)&&(e=a),r(t,ui(e,3))},Un.find=go,Un.findIndex=Wi,Un.findKey=function(t,e){return ze(t,ui(e,3),wr)},Un.findLast=mo,Un.findLastIndex=Vi,Un.findLastKey=function(t,e){return ze(t,ui(e,3),xr)},Un.floor=wu,Un.forEach=yo,Un.forEachRight=bo,Un.forIn=function(t,e){return null==t?t:yr(t,ui(e,3),Rs)},Un.forInRight=function(t,e){return null==t?t:br(t,ui(e,3),Rs)},Un.forOwn=function(t,e){return t&&wr(t,ui(e,3))},Un.forOwnRight=function(t,e){return t&&xr(t,ui(e,3))},Un.get=Cs,Un.gt=zo,Un.gte=Wo,Un.has=function(t,e){return null!=t&&vi(t,e,Er)},Un.hasIn=Es,Un.head=ji,Un.identity=ru,Un.includes=function(t,e,n,r){t=Ho(t)?t:Us(t),n=n&&!r?ps(n):0;var a=t.length;return n<0&&(n=qe(a+n,0)),ss(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Ve(t,e,n)>-1},Un.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=null==n?0:ps(n);return a<0&&(a=qe(r+a,0)),Ve(t,e,a)},Un.inRange=function(t,e,n){return e=ds(e),n===a?(n=e,e=0):n=ds(n),function(t,e,n){return t>=bn(e,n)&&t<qe(e,n)}(t=gs(t),e,n)},Un.invoke=Ns,Un.isArguments=Vo,Un.isArray=Go,Un.isArrayBuffer=jo,Un.isArrayLike=Ho,Un.isArrayLikeObject=Xo,Un.isBoolean=function(t){return!0===t||!1===t||es(t)&&_r(t)==w},Un.isBuffer=qo,Un.isDate=Yo,Un.isElement=function(t){return es(t)&&1===t.nodeType&&!as(t)},Un.isEmpty=function(t){if(null==t)return!0;if(Ho(t)&&(Go(t)||"string"==typeof t||"function"==typeof t.splice||qo(t)||cs(t)||Vo(t)))return!t.length;var e=pi(t);if(e==_||e==N)return!t.size;if(Ii(t))return!Or(t).length;for(var n in t)if(Ft.call(t,n))return!1;return!0},Un.isEqual=function(t,e){return Rr(t,e)},Un.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:a)?n(t,e):a;return r===a?Rr(t,e,a,n):!!r},Un.isError=Ko,Un.isFinite=function(t){return"number"==typeof t&&be(t)},Un.isFunction=Qo,Un.isInteger=Jo,Un.isLength=$o,Un.isMap=ns,Un.isMatch=function(t,e){return t===e||Zr(t,e,li(e))},Un.isMatchWith=function(t,e,n){return n="function"==typeof n?n:a,Zr(t,e,li(e),n)},Un.isNaN=function(t){return rs(t)&&t!=+t},Un.isNative=function(t){if(ki(t))throw new st("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},Un.isNil=function(t){return null==t},Un.isNull=function(t){return null===t},Un.isNumber=rs,Un.isObject=ts,Un.isObjectLike=es,Un.isPlainObject=as,Un.isRegExp=is,Un.isSafeInteger=function(t){return Jo(t)&&t>=-9007199254740991&&t<=p},Un.isSet=os,Un.isString=ss,Un.isSymbol=us,Un.isTypedArray=cs,Un.isUndefined=function(t){return t===a},Un.isWeakMap=function(t){return es(t)&&pi(t)==Z},Un.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==_r(t)},Un.join=function(t,e){return null==t?"":we.call(t,e)},Un.kebabCase=Gs,Un.last=Yi,Un.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=ps(n))<0?qe(r+i,0):bn(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):We(t,je,i,!0)},Un.lowerCase=js,Un.lowerFirst=Hs,Un.lt=ls,Un.lte=hs,Un.max=function(t){return t&&t.length?vr(t,ru,Cr):a},Un.maxBy=function(t,e){return t&&t.length?vr(t,ui(e,2),Cr):a},Un.mean=function(t){return He(t,ru)},Un.meanBy=function(t,e){return He(t,ui(e,2))},Un.min=function(t){return t&&t.length?vr(t,ru,Lr):a},Un.minBy=function(t,e){return t&&t.length?vr(t,ui(e,2),Lr):a},Un.stubArray=vu,Un.stubFalse=gu,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=xu,Un.nth=function(t,e){return t&&t.length?Vr(t,ps(e)):a},Un.noConflict=function(){return ve._===this&&(ve._=Ut),this},Un.noop=uu,Un.now=Co,Un.pad=function(t,e,n){t=ys(t);var r=(e=ps(e))?pn(t):0;if(!e||r>=e)return t;var a=(e-r)/2;return Ga(pe(a),n)+t+Ga(de(a),n)},Un.padEnd=function(t,e,n){t=ys(t);var r=(e=ps(e))?pn(t):0;return e&&r<e?t+Ga(e-r,n):t},Un.padStart=function(t,e,n){t=ys(t);var r=(e=ps(e))?pn(t):0;return e&&r<e?Ga(e-r,n)+t:t},Un.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(ys(t).replace(ot,""),e||0)},Un.random=function(t,e,n){if(n&&"boolean"!=typeof n&&bi(t,e,n)&&(e=n=a),n===a&&("boolean"==typeof e?(n=e,e=a):"boolean"==typeof t&&(n=t,t=a)),t===a&&e===a?(t=0,e=1):(t=ds(t),e===a?(e=t,t=0):e=ds(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=kn();return bn(t+i*(e-t+he("1e-"+((i+"").length-1))),e)}return qr(t,e)},Un.reduce=function(t,e,n){var r=Go(t)?Be:Ye,a=arguments.length<3;return r(t,ui(e,4),n,a,fr)},Un.reduceRight=function(t,e,n){var r=Go(t)?Le:Ye,a=arguments.length<3;return r(t,ui(e,4),n,a,dr)},Un.repeat=function(t,e,n){return e=(n?bi(t,e,n):e===a)?1:ps(e),Yr(ys(t),e)},Un.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Un.result=function(t,e,n){var r=-1,i=(e=ba(e,t)).length;for(i||(i=1,t=a);++r<i;){var o=null==t?a:t[Oi(e[r])];o===a&&(r=i,o=n),t=Qo(o)?o.call(t):o}return t},Un.round=ku,Un.runInContext=t,Un.sample=function(t){return(Go(t)?Qn:Qr)(t)},Un.size=function(t){if(null==t)return 0;if(Ho(t))return ss(t)?pn(t):t.length;var e=pi(t);return e==_||e==N?t.size:Or(t).length},Un.snakeCase=Xs,Un.some=function(t,e,n){var r=Go(t)?Pe:aa;return n&&bi(t,e,n)&&(e=a),r(t,ui(e,3))},Un.sortedIndex=function(t,e){return ia(t,e)},Un.sortedIndexBy=function(t,e,n){return oa(t,e,ui(n,2))},Un.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ia(t,e);if(r<n&&Uo(t[r],e))return r}return-1},Un.sortedLastIndex=function(t,e){return ia(t,e,!0)},Un.sortedLastIndexBy=function(t,e,n){return oa(t,e,ui(n,2),!0)},Un.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ia(t,e,!0)-1;if(Uo(t[n],e))return n}return-1},Un.startCase=qs,Un.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:sr(ps(n),0,t.length),e=ca(e),t.slice(n,n+e.length)==e},Un.subtract=Iu,Un.sum=function(t){return t&&t.length?Ke(t,ru):0},Un.sumBy=function(t,e){return t&&t.length?Ke(t,ui(e,2)):0},Un.template=function(t,e,n){var r=Un.templateSettings;n&&bi(t,e,n)&&(e=a),t=ys(t),e=xs({},e,r,Ja);var i,o,s=xs({},e.imports,r.imports,Ja),u=Ds(s),c=tn(s,u),l=0,h=e.interpolate||kt,f="__p += '",d=Et((e.escape||kt).source+"|"+h.source+"|"+(h===tt?pt:kt).source+"|"+(e.evaluate||kt).source+"|$","g"),p="//# sourceURL="+(Ft.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(d,(function(e,n,r,a,s,u){return r||(r=a),f+=t.slice(l,u).replace(It,sn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var v=Ft.call(e,"variable")&&e.variable;if(v){if(ft.test(v))throw new st("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(j,""):f).replace(H,"$1").replace(X,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Js((function(){return St(u,p+"return "+f).apply(a,c)}));if(g.source=f,Ko(g))throw g;return g},Un.times=function(t,e){if((t=ps(t))<1||t>p)return[];var n=g,r=bn(t,g);e=ui(e),t-=g;for(var a=Qe(r,e);++n<t;)e(n);return a},Un.toFinite=ds,Un.toInteger=ps,Un.toLength=vs,Un.toLower=function(t){return ys(t).toLowerCase()},Un.toNumber=gs,Un.toSafeInteger=function(t){return t?sr(ps(t),-9007199254740991,p):0===t?t:0},Un.toString=ys,Un.toUpper=function(t){return ys(t).toUpperCase()},Un.trim=function(t,e,n){if((t=ys(t))&&(n||e===a))return Je(t);if(!t||!(e=ca(e)))return t;var r=vn(t),i=vn(e);return xa(r,nn(r,i),rn(r,i)+1).join("")},Un.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===a))return t.slice(0,gn(t)+1);if(!t||!(e=ca(e)))return t;var r=vn(t);return xa(r,0,rn(r,vn(e))+1).join("")},Un.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===a))return t.replace(ot,"");if(!t||!(e=ca(e)))return t;var r=vn(t);return xa(r,nn(r,vn(e))).join("")},Un.truncate=function(t,e){var n=30,r="...";if(ts(e)){var i="separator"in e?e.separator:i;n="length"in e?ps(e.length):n,r="omission"in e?ca(e.omission):r}var o=(t=ys(t)).length;if(un(t)){var s=vn(t);o=s.length}if(n>=o)return t;var u=n-pn(r);if(u<1)return r;var c=s?xa(s,0,u).join(""):t.slice(0,u);if(i===a)return c+r;if(s&&(u+=c.length-u),is(i)){if(t.slice(u).search(i)){var l,h=c;for(i.global||(i=Et(i.source,ys(vt.exec(i))+"g")),i.lastIndex=0;l=i.exec(h);)var f=l.index;c=c.slice(0,f===a?u:f)}}else if(t.indexOf(ca(i),u)!=u){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+r},Un.unescape=function(t){return(t=ys(t))&&K.test(t)?t.replace(q,mn):t},Un.uniqueId=function(t){var e=++Ot;return ys(t)+e},Un.upperCase=Ys,Un.upperFirst=Ks,Un.each=yo,Un.eachRight=bo,Un.first=ji,su(Un,function(){var t={};return wr(Un,(function(e,n){Ft.call(Un.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Un.VERSION="4.17.21",Te(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Un[t].placeholder=Un})),Te(["drop","take"],(function(t,e){Gn.prototype[t]=function(n){n=n===a?1:qe(ps(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Te(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ui(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Te(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),Te(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(ru)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Kr((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return Nr(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(Fo(ui(t)))},Gn.prototype.slice=function(t,e){t=ps(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==a&&(n=(e=ps(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(g)},wr(Gn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Un[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Un.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Gn,c=s[0],l=u||Go(e),h=function(t){var e=i.apply(Un,Oe([t],s));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,v=u&&!d;if(!o&&l){e=v?e:new Gn(this);var g=t.apply(e,s);return g.__actions__.push({func:fo,args:[h],thisArg:a}),new Vn(g,f)}return p&&v?t.apply(this,s):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),Te(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Un.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var a=this.value();return e.apply(Go(a)?a:[],t)}return this[n]((function(n){return e.apply(Go(n)?n:[],t)}))}})),wr(Gn.prototype,(function(t,e){var n=Un[e];if(n){var r=n.name+"";Ft.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:e,func:n})}})),Dn[Ua(a,2).name]=[{name:"wrapper",func:a}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=Ta(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ta(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ta(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Go(t),r=e<0,a=n?t.length:0,i=function(t,e,n){var r=-1,a=n.length;for(;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=bn(e,t+o);break;case"takeRight":t=qe(t,e-o)}}return{start:t,end:e}}(0,a,this.__views__),o=i.start,s=i.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,h=l.length,f=0,d=bn(u,this.__takeCount__);if(!n||!r&&a==u&&d==u)return pa(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var v=-1,g=t[c+=e];++v<h;){var m=l[v],y=m.iteratee,b=m.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue t;break t}}p[f++]=g}return p},Un.prototype.at=po,Un.prototype.chain=function(){return ho(this)},Un.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===a&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},Un.prototype.plant=function(t){for(var e,n=this;n instanceof Wn;){var r=Li(n);r.__index__=0,r.__values__=a,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Un.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:fo,args:[$i],thisArg:a}),new Vn(e,this.__chain__)}return this.thru($i)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return pa(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Qt&&(Un.prototype[Qt]=function(){return this}),Un}();ve._=yn,(r=function(){return yn}.call(e,n,e,t))===a||(t.exports=r)}.call(this)},18987:function(t){t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(_){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(t,e){var n,r,o;return e?(o=0<=(t>>>=0)&&t<256)&&(r=i[t])?r:(n=u(t,(0|t)<0?-1:0,!0),o&&(i[t]=n),n):(o=-128<=(t|=0)&&t<128)&&(r=a[t])?r:(n=u(t,t<0?-1:0,!1),o&&(a[t]=n),n)}function s(t,e){if(isNaN(t))return e?m:g;if(e){if(t<0)return m;if(t>=d)return k}else{if(t<=-p)return I;if(t+1>=p)return x}return t<0?s(-t,e).neg():u(t%f|0,t/f|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"===typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(t.substring(1),e,n).neg();for(var a=s(c(n,8)),i=g,o=0;o<t.length;o+=8){var u=Math.min(8,t.length-o),h=parseInt(t.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(h))}else i=(i=i.mul(a)).add(s(h))}return i.unsigned=e,i}function h(t,e){return"number"===typeof t?s(t,e):"string"===typeof t?l(t,e):u(t.low,t.high,"boolean"===typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=h;var f=4294967296,d=f*f,p=d/2,v=o(1<<24),g=o(0);n.ZERO=g;var m=o(0,!0);n.UZERO=m;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var w=o(-1);n.NEG_ONE=w;var x=u(-1,2147483647,!1);n.MAX_VALUE=x;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var I=u(0,-2147483648,!1);n.MIN_VALUE=I;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var a=s(c(t,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(t);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(t){return r(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(r(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(y)},S.neg=S.negate,S.add=function(t){r(t)||(t=h(t));var e=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=t.high>>>16,s=65535&t.high,c=t.low>>>16,l=0,f=0,d=0,p=0;return d+=(p+=i+(65535&t.low))>>>16,f+=(d+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=e+o,u((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},S.subtract=function(t){return r(t)||(t=h(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return g;if(r(t)||(t=h(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(I))return t.isOdd()?I:g;if(t.eq(I))return this.isOdd()?I:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(v)&&t.lt(v))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=t.high>>>16,l=65535&t.high,f=t.low>>>16,d=65535&t.low,p=0,m=0,y=0,b=0;return y+=(b+=o*d)>>>16,m+=(y+=i*d)>>>16,y&=65535,m+=(y+=o*f)>>>16,p+=(m+=a*d)>>>16,m&=65535,p+=(m+=i*f)>>>16,m&=65535,p+=(m+=o*l)>>>16,p+=n*d+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(r(t)||(t=h(t)),t.isZero())throw Error("division by zero");var n,a,i;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return m;if(t.gt(this.shru(1)))return b;i=m}else{if(this.eq(I))return t.eq(y)||t.eq(w)?I:t.eq(I)?y:(n=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?y:w:(a=this.sub(t.mul(n)),i=n.add(a.div(t)));if(t.eq(I))return this.unsigned?m:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=g}for(a=this;a.gte(t);){n=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),d=f.mul(t);d.isNegative()||d.gt(a);)d=(f=s(n-=l,this.unsigned)).mul(t);f.isZero()&&(f=y),i=i.add(f),a=a.sub(d)}return i},S.div=S.divide,S.modulo=function(t){return r(t)||(t=h(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(t){return r(t)||(t=h(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return r(t)||(t=h(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return r(t)||(t=h(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return r(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},66425:function(t){!function(){function e(t){for(var e=0,a=t.length-1,i=void 0,o=void 0,s=void 0,u=r(e,a);;){if(a<=e)return t[u];if(a==e+1)return t[e]>t[a]&&n(t,e,a),t[u];for(t[i=r(e,a)]>t[a]&&n(t,i,a),t[e]>t[a]&&n(t,e,a),t[i]>t[e]&&n(t,i,e),n(t,i,e+1),o=e+1,s=a;;){do{o++}while(t[e]>t[o]);do{s--}while(t[s]>t[e]);if(s<o)break;n(t,o,s)}n(t,e,s),s<=u&&(e=o),s>=u&&(a=s-1)}}var n=function(t,e,n){var r;return r=[t[n],t[e]],t[e]=r[0],t[n]=r[1],r},r=function(t,e){return~~((t+e)/2)};t.exports?t.exports=e:window.median=e}()},22334:function(t,e,n){"use strict";n(78061),n(66425)},3711:function(t,e,n){"use strict";function r(t,e,n){if(void 0===n){var r=t.length+e.length-1;n=new Array(r)}!function(t){for(var e=0;e<t.length;e++)t[e]=0}(n);for(var a=0;a<t.length;a++)for(var i=0;i<e.length;i++)n[a+i]+=t[a]*e[i];return n}n.d(e,{Z:function(){return r}})},26009:function(t,e,n){"use strict";n(10567),n(21257)},54802:function(t,e,n){"use strict";n.d(e,{j:function(){return r.Z}});var r=n(3711);n(26009)},46755:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=function(){function t(){r(this,t),this.nodes=new Map}return a(t,[{key:"add",value:function(t){var e=this.nodes.get(t);return e||(e=new o(t),this.nodes.set(t,e)),e}},{key:"union",value:function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n,n.rank++))}},{key:"find",value:function(t){for(var e=t;null!==e.parent;)e=e.parent;for(var n=t;null!==n.parent;){var r=n;n=n.parent,r.parent=e}return e}},{key:"connected",value:function(t,e){return this.find(t)===this.find(e)}}]),t}();function o(t){this.value=t,this.parent=null,this.rank=0}t.exports=i},61118:function(t,e,n){"use strict";function r(t,e){for(var n=0,r=0;r<t.length;r++)n+=(t[r]-e[r])*(t[r]-e[r]);return n}function a(t,e){return Math.sqrt(r(t,e))}n.r(e),n.d(e,{euclidean:function(){return a},squaredEuclidean:function(){return r}})},27316:function(t,e,n){"use strict";var r=n(33323),a={DEBUG:!1,ifft2DArray:function(t,e,n){var a=new Array(e*n),i=e/2,o=2*(n-1);r.init(i);for(var s={re:new Array(i),im:new Array(i)},u=0;u<n;u++){for(var c=i-1;c>=0;c--)s.re[c]=t[2*c*n+u],s.im[c]=t[(2*c+1)*n+u];r.bt(s.re,s.im);for(c=i-1;c>=0;c--)a[2*c*n+u]=s.re[c],a[(2*c+1)*n+u]=s.im[c]}var l=new Array(i*o);r.init(o);var h={re:new Array(o),im:new Array(o)},f=o*i;for(c=0;c<e;c+=2){h.re[0]=a[c*n],h.im[0]=a[(c+1)*n];for(u=1;u<n;u++)h.re[u]=a[c*n+u],h.im[u]=a[(c+1)*n+u],h.re[o-u]=a[c*n+u],h.im[o-u]=-a[(c+1)*n+u];r.bt(h.re,h.im);var d=c/2*o;for(u=o-1;u>=0;u--)l[d+u]=h.re[u]/f}return l},fft2DArray:function(t,e,n,a){Object.assign({},{inplace:!0});var i=n/2+1,o=2*e,s=new Array(o*i);r.init(n);for(var u,c,l,h,f,d={re:new Array(n),im:new Array(n)},p={re:new Array(n),im:new Array(n)},v={re:new Array(n),im:new Array(n)},g=0;g<e/2;g++){u=2*g*n,d.re=t.slice(u,u+n),u=(2*g+1)*n,d.im=t.slice(u,u+n),r.fft1d(d.re,d.im),this.reconstructTwoRealFFT(d,p,v),c=4*g*i,l=(4*g+1)*i,h=(4*g+2)*i,f=(4*g+3)*i;for(var m=i-1;m>=0;m--)s[c+m]=p.re[m],s[l+m]=p.im[m],s[h+m]=v.re[m],s[f+m]=v.im[m]}p=null,v=null;var y=new Array(o*i);r.init(e);for(var b={re:new Array(e),im:new Array(e)},w=i-1;w>=0;w--){for(g=e-1;g>=0;g--)b.re[g]=s[2*g*i+w],b.im[g]=s[(2*g+1)*i+w],isNaN(b.re[g])&&(b.re[g]=0),isNaN(b.im[g])&&(b.im[g]=0);r.fft1d(b.re,b.im);for(g=e-1;g>=0;g--)y[2*g*i+w]=b.re[g],y[(2*g+1)*i+w]=b.im[g]}return y},reconstructTwoRealFFT:function(t,e,n){var r,a,i,o,s,u=t.re.length;e.re[0]=t.re[0],e.im[0]=0,n.re[0]=t.im[0],n.im[0]=0;for(var c=u/2;c>0;c--)s=u-c,r=.5*(t.re[c]-t.re[s]),a=.5*(t.re[c]+t.re[s]),i=.5*(t.im[c]-t.im[s]),o=.5*(t.im[c]+t.im[s]),e.re[c]=a,e.im[c]=i,e.re[s]=a,e.im[s]=-i,n.re[c]=o,n.im[c]=-r,n.re[s]=o,n.im[s]=r},convolute2DI:function(t,e,n,r){for(var a,i,o=0;o<n/2;o++)for(var s=0;s<r;s++)a=t[2*o*r+s]*e[2*o*r+s]-t[(2*o+1)*r+s]*e[(2*o+1)*r+s],i=t[2*o*r+s]*e[(2*o+1)*r+s]+t[(2*o+1)*r+s]*e[2*o*r+s],t[2*o*r+s]=a,t[(2*o+1)*r+s]=i},convolute:function(t,e,n,r,a){for(var i=new Array(r*n),o=0;o<n*r;o++)i[o]=t[o];i=this.fft2DArray(i,n,r);var s,u=e.length,c=e[0].length,l=new Array(r*n);for(o=0;o<r*n;o++)l[o]=0;for(var h=Math.floor((u-1)/2),f=Math.floor((c-1)/2),d=0;d<u;d++){s=(d-h+n)%n;for(var p=0;p<c;p++)l[s*r+(p-f+r)%r]=e[d][p]}l=this.fft2DArray(l,n,r);var v=2*n,g=r/2+1;return this.convolute2DI(i,l,v,g),this.ifft2DArray(i,v,g)},toRadix2:function(t,e,n){var r,a,i,o,s=n,u=e;if(0===n||0!==(n&n-1)){for(s=0;n>>++s!=0;);(s=1<<s)-n}if(0===e||0!==(e&e-1)){for(u=0;e>>++u!=0;);((u=1<<u)-e)*s}if(u==e&&s==n)return{data:t,rows:e,cols:n};var c=new Array(u*s),l=Math.floor((u-e)/2)-e,h=Math.floor((s-n)/2)-n;for(r=0;r<u;r++)for(i=r*s,o=(r-l)%e*n,a=0;a<s;a++)c[i+a]=t[o+(a-h)%n];return{data:c,rows:u,cols:s}},crop:function(t,e,n,r,a,i){if(e==r&&n==a)return t;Object.assign({},i);var o,s,u,c,l=new Array(a*r),h=Math.floor((e-r)/2),f=Math.floor((n-a)/2);for(u=0;u<r;u++)for(o=u*a,s=(u+h)*n,c=0;c<a;c++)l[o+c]=t[s+(c+f)];return l}};t.exports=a},33323:function(t,e){(function(){var t,n="0.3.0",r="2013-03";(t=e).toString=function(){return"version "+n+", released "+r};for(var a=0,i=null,o=null,s={init:function(t){if(0===t||0!==(t&t-1))throw new Error("init: radix-2 required");a=t,s._initArray(),s._makeBitReversalTable(),s._makeCosSinTable()},fft1d:function(t,e){s.fft(t,e,1)},ifft1d:function(t,e){var n=1/a;s.fft(t,e,-1);for(var r=0;r<a;r++)t[r]*=n,e[r]*=n},bt1d:function(t,e){s.fft(t,e,-1)},fft2d:function(t,e){for(var n=[],r=[],i=0,o=0;o<a;o++){i=o*a;for(var u=0;u<a;u++)n[u]=t[u+i],r[u]=e[u+i];s.fft1d(n,r);for(var c=0;c<a;c++)t[c+i]=n[c],e[c+i]=r[c]}for(var l=0;l<a;l++){for(var h=0;h<a;h++)i=l+h*a,n[h]=t[i],r[h]=e[i];s.fft1d(n,r);for(var f=0;f<a;f++)t[i=l+f*a]=n[f],e[i]=r[f]}},ifft2d:function(t,e){for(var n=[],r=[],i=0,o=0;o<a;o++){i=o*a;for(var u=0;u<a;u++)n[u]=t[u+i],r[u]=e[u+i];s.ifft1d(n,r);for(var c=0;c<a;c++)t[c+i]=n[c],e[c+i]=r[c]}for(var l=0;l<a;l++){for(var h=0;h<a;h++)i=l+h*a,n[h]=t[i],r[h]=e[i];s.ifft1d(n,r);for(var f=0;f<a;f++)t[i=l+f*a]=n[f],e[i]=r[f]}},fft:function(t,e,n){for(var r,s,u,c,l,h,f,d,p,v=a>>2,g=0;g<a;g++)g<(c=i[g])&&(l=t[g],t[g]=t[c],t[c]=l,l=e[g],e[g]=e[c],e[c]=l);for(var m=1;m<a;m<<=1){s=0,r=a/(m<<1);for(var y=0;y<m;y++){h=o[s+v],f=n*o[s];for(var b=y;b<a;b+=m<<1)d=h*t[u=b+m]+f*e[u],p=h*e[u]-f*t[u],t[u]=t[b]-d,t[b]+=d,e[u]=e[b]-p,e[b]+=p;s+=r}}},_initArray:function(){i="undefined"!==typeof Uint32Array?new Uint32Array(a):[],o="undefined"!==typeof Float64Array?new Float64Array(1.25*a):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var t=0,e=0,n=0;for(i[0]=0;++t<a;){for(n=a>>1;n<=e;)e-=n,n>>=1;e+=n,i[t]=e}},_makeCosSinTable:function(){var t=a>>1,e=a>>2,n=a>>3,r=t+e,i=Math.sin(Math.PI/a),s=2*i*i,u=Math.sqrt(s*(2-s)),c=o[e]=1,l=o[0]=0;i=2*s;for(var h=1;h<n;h++)s+=i*(c-=s),u-=i*(l+=u),o[h]=l,o[e-h]=c;0!==n&&(o[n]=Math.sqrt(.5));for(var f=0;f<e;f++)o[t-f]=o[f];for(var d=0;d<r;d++)o[d+t]=-o[d]}},u=["init","fft1d","ifft1d","fft2d","ifft2d"],c=0;c<u.length;c++)t[u[c]]=s[u[c]];return t.bt=s.bt1d,t.fft=s.fft1d,t.ifft=s.ifft1d,t}).call(this)},51319:function(t,e,n){"use strict";e.FFTUtils=n(27316),n(33323)},90734:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61118).squaredEuclidean,o={sigma:1},s=function(){function t(e){r(this,t),e=Object.assign({},o,e),this.sigma=e.sigma,this.divisor=2*e.sigma*e.sigma}return a(t,[{key:"compute",value:function(t,e){var n=i(t,e);return Math.exp(-n/this.divisor)}}]),t}();t.exports=s},9952:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i={degree:1,constant:1,scale:1},o=function(){function t(e){r(this,t),e=Object.assign({},i,e),this.degree=e.degree,this.constant=e.constant,this.scale=e.scale}return a(t,[{key:"compute",value:function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return Math.pow(this.scale*n+this.constant,this.degree)}}]),t}();t.exports=o},65139:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i={alpha:.01,constant:-Math.E},o=function(){function t(e){r(this,t),e=Object.assign({},i,e),this.alpha=e.alpha,this.constant=e.constant}return a(t,[{key:"compute",value:function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return Math.tanh(this.alpha*n+this.constant)}}]),t}();t.exports=o},61533:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(44160),o=i.Matrix,s=i.MatrixTransposeView,u=n(90734),c=n(9952),l=n(65139),h=n(52147),f=n(88410),d=n(75908),p=n(78207),v={gaussian:u,rbf:u,polynomial:c,poly:c,anova:h,cauchy:f,exponential:d,histogram:p,min:p,laplacian:n(80227),multiquadratic:n(59513),rational:n(47853),sigmoid:l,mlp:l},g=function(){function t(e,n){if(r(this,t),this.kernelType=e,"linear"!==e)if("string"===typeof e){e=e.toLowerCase();var a=v[e];if(!a)throw new Error("unsupported kernel type: ".concat(e));this.kernelFunction=new a(n)}else{if("object"!==typeof e||"function"!==typeof e.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=e}}return a(t,[{key:"compute",value:function(t,e){if(t=o.checkMatrix(t),e=void 0===e?t:o.checkMatrix(e),"linear"===this.kernelType)return t.mmul(new s(e));var n=new o(t.rows,e.rows);if(t===e)for(var r=0;r<t.rows;r++)for(var a=r;a<t.rows;a++){var i=this.kernelFunction.compute(t.getRow(r),t.getRow(a));n.set(r,a,i),n.set(a,r,i)}else for(var u=0;u<t.rows;u++)for(var c=0;c<e.rows;c++)n.set(u,c,this.kernelFunction.compute(t.getRow(u),e.getRow(c)));return n}}]),t}();t.exports=g},52147:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i={sigma:1,degree:1},o=function(){function t(e){r(this,t),e=Object.assign({},i,e),this.sigma=e.sigma,this.degree=e.degree}return a(t,[{key:"compute",value:function(t,e){for(var n=0,r=Math.min(t.length,e.length),a=1;a<=r;++a)n+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(t[a-1],a)-Math.pow(e[a-1],a),2)),this.degree);return n}}]),t}();t.exports=o},88410:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61118).squaredEuclidean,o={sigma:1},s=function(){function t(e){r(this,t),e=Object.assign({},o,e),this.sigma=e.sigma}return a(t,[{key:"compute",value:function(t,e){return 1/(1+i(t,e)/(this.sigma*this.sigma))}}]),t}();t.exports=s},75908:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61118).euclidean,o={sigma:1},s=function(){function t(e){r(this,t),e=Object.assign({},o,e),this.sigma=e.sigma,this.divisor=2*e.sigma*e.sigma}return a(t,[{key:"compute",value:function(t,e){var n=i(t,e);return Math.exp(-n/this.divisor)}}]),t}();t.exports=s},78207:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=function(){function t(){r(this,t)}return a(t,[{key:"compute",value:function(t,e){for(var n=Math.min(t.length,e.length),r=0,a=0;a<n;++a)r+=Math.min(t[a],e[a]);return r}}]),t}();t.exports=i},80227:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61118).euclidean,o={sigma:1},s=function(){function t(e){r(this,t),e=Object.assign({},o,e),this.sigma=e.sigma}return a(t,[{key:"compute",value:function(t,e){var n=i(t,e);return Math.exp(-n/this.sigma)}}]),t}();t.exports=s},59513:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61118).squaredEuclidean,o={constant:1},s=function(){function t(e){r(this,t),e=Object.assign({},o,e),this.constant=e.constant}return a(t,[{key:"compute",value:function(t,e){return Math.sqrt(i(t,e)+this.constant*this.constant)}}]),t}();t.exports=s},47853:function(t,e,n){"use strict";var r=n(56690).default,a=n(89728).default,i=n(61118).squaredEuclidean,o={constant:1},s=function(){function t(e){r(this,t),e=Object.assign({},o,e),this.constant=e.constant}return a(t,[{key:"compute",value:function(t,e){var n=i(t,e);return 1-n/(n+this.constant)}}]),t}();t.exports=s},72111:function(t,e,n){var r=n(51319).FFTUtils;function a(t){var e,n,r=t;if("number"!=typeof t[0]){e=t.length,n=t[0].length,r=new Array(e*n);for(var a=0;a<e;a++)for(var i=0;i<n;i++)r[a*n+i]=t[a][i]}else{var o=Math.sqrt(t.length);Number.isInteger(o)&&(e=o,n=o)}return{data:r,rows:e,cols:n}}t.exports={fft:function(t,e,n){var i,o,s=a(t),u=s.data,c=Object.assign({normalize:!1,divisor:1,rows:s.rows,cols:s.cols},n);if(!c.rows||!c.cols)throw new Error("Invalid number of rows or columns "+i+" "+o);i=c.rows,o=c.cols;var l,h,f=c.divisor,d=e.length,p=e[0].length;if(c.normalize)for(f=0,l=0;l<d;l++)for(h=0;h<p;h++)f+=e[l][h];if(0===f)throw new RangeError("convolution: The divisor is equal to zero");var v=r.toRadix2(u,i,o),g=r.convolute(v.data,e,v.rows,v.cols);if(g=r.crop(g,v.rows,v.cols,i,o),0!=f&&1!=f)for(l=0;l<g.length;l++)g[l]/=f;return g},direct:function(t,e,n){var r,i,o=a(t),s=o.data,u=Object.assign({normalize:!1,divisor:1,rows:o.rows,cols:o.cols},n);if(!u.rows||!u.cols)throw new Error("Invalid number of rows or columns "+r+" "+i);r=u.rows,i=u.cols;var c,l,h,f,d,p,v=u.divisor,g=e.length,m=e[0].length;if(u.normalize)for(v=0,c=0;c<g;c++)for(l=0;l<m;l++)v+=e[c][l];if(0===v)throw new RangeError("convolution: The divisor is equal to zero");var y=new Array(r*i),b=Math.floor(g/2),w=Math.floor(m/2);for(f=0;f<r;f++)for(h=0;h<i;h++){for(d=0,l=0;l<g;l++)for(c=0;c<m;c++)p=e[g-l-1][m-c-1],d+=s[(f+l-b+r)%r*i+(h+c-w+i)%i]*p;y[f*i+h]=d/v}return y},kernelFactory:{LoG:function(t,e,n){var r=1e3;n&&n.factor&&(r=n.factor);var a,i,o,s,u=new Array(e);r*=-1;var c=(e-1)/2,l=2*t*t;for(a=0;a<e;a++)for(u[a]=new Array(e),s=(a-c)*(a-c),i=0;i<e;i++)o=-((i-c)*(i-c)+s)/l,u[a][i]=Math.round(r*(1+o)*Math.exp(o));return u}},matrix2Array:a}},66866:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(15671),a=n(43144),i=n(61730),o=n(70378),s=function(){function t(e){(0,r.Z)(this,t);var n,a,i,s,u,c,l,h,f,d=(e=o.Z.checkMatrix(e)).clone(),p=d.rows,v=d.columns,g=new Float64Array(p),m=1;for(n=0;n<p;n++)g[n]=n;for(h=new Float64Array(p),a=0;a<v;a++){for(n=0;n<p;n++)h[n]=d.get(n,a);for(n=0;n<p;n++){for(f=Math.min(n,a),u=0,i=0;i<f;i++)u+=d.get(n,i)*h[i];h[n]-=u,d.set(n,a,h[n])}for(s=a,n=a+1;n<p;n++)Math.abs(h[n])>Math.abs(h[s])&&(s=n);if(s!==a){for(i=0;i<v;i++)c=d.get(s,i),d.set(s,i,d.get(a,i)),d.set(a,i,c);l=g[s],g[s]=g[a],g[a]=l,m=-m}if(a<p&&0!==d.get(a,a))for(n=a+1;n<p;n++)d.set(n,a,d.get(n,a)/d.get(a,a))}this.LU=d,this.pivotVector=g,this.pivotSign=m}return(0,a.Z)(t,[{key:"isSingular",value:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}},{key:"solve",value:function(t){t=i.Z.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,a,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),u=e.columns;for(a=0;a<u;a++)for(n=a+1;n<u;n++)for(r=0;r<o;r++)s.set(n,r,s.get(n,r)-s.get(a,r)*e.get(n,a));for(a=u-1;a>=0;a--){for(r=0;r<o;r++)s.set(a,r,s.get(a,r)/e.get(a,a));for(n=0;n<a;n++)for(r=0;r<o;r++)s.set(n,r,s.get(n,r)-s.get(a,r)*e.get(n,a))}return s}},{key:"determinant",get:function(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t.get(r,r);return e}},{key:"lowerTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Z(e,n),a=0;a<e;a++)for(var o=0;o<n;o++)a>o?r.set(a,o,t.get(a,o)):a===o?r.set(a,o,1):r.set(a,o,0);return r}},{key:"upperTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,n=t.columns,r=new i.Z(e,n),a=0;a<e;a++)for(var o=0;o<n;o++)a<=o?r.set(a,o,t.get(a,o)):r.set(a,o,0);return r}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),t}()},22080:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(15671),a=n(43144),i=n(61730),o=n(70378),s=n(20555),u=function(){function t(e){(0,r.Z)(this,t);var n,a,i,u,c=(e=o.Z.checkMatrix(e)).clone(),l=e.rows,h=e.columns,f=new Float64Array(h);for(i=0;i<h;i++){var d=0;for(n=i;n<l;n++)d=(0,s.G)(d,c.get(n,i));if(0!==d){for(c.get(i,i)<0&&(d=-d),n=i;n<l;n++)c.set(n,i,c.get(n,i)/d);for(c.set(i,i,c.get(i,i)+1),a=i+1;a<h;a++){for(u=0,n=i;n<l;n++)u+=c.get(n,i)*c.get(n,a);for(u=-u/c.get(i,i),n=i;n<l;n++)c.set(n,a,c.get(n,a)+u*c.get(n,i))}}f[i]=-d}this.QR=c,this.Rdiag=f}return(0,a.Z)(t,[{key:"solve",value:function(t){t=i.Z.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,a,o,s,u=t.columns,c=t.clone(),l=e.columns;for(o=0;o<l;o++)for(a=0;a<u;a++){for(s=0,r=o;r<n;r++)s+=e.get(r,o)*c.get(r,a);for(s=-s/e.get(o,o),r=o;r<n;r++)c.set(r,a,c.get(r,a)+s*e.get(r,o))}for(o=l-1;o>=0;o--){for(a=0;a<u;a++)c.set(o,a,c.get(o,a)/this.Rdiag[o]);for(r=0;r<o;r++)for(a=0;a<u;a++)c.set(r,a,c.get(r,a)-c.get(o,a)*e.get(r,o))}return c.subMatrix(0,l-1,0,u-1)}},{key:"isFullRank",value:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var t,e,n=this.QR,r=n.columns,a=new i.Z(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?a.set(t,e,n.get(t,e)):t===e?a.set(t,e,this.Rdiag[t]):a.set(t,e,0);return a}},{key:"orthogonalMatrix",get:function(){var t,e,n,r,a=this.QR,o=a.rows,s=a.columns,u=new i.Z(o,s);for(n=s-1;n>=0;n--){for(t=0;t<o;t++)u.set(t,n,0);for(u.set(n,n,1),e=n;e<s;e++)if(0!==a.get(n,n)){for(r=0,t=n;t<o;t++)r+=a.get(t,n)*u.get(t,e);for(r=-r/a.get(n,n),t=n;t<o;t++)u.set(t,e,u.get(t,e)+r*a.get(t,n))}}return u}}]),t}()},2714:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(15671),a=n(43144),i=n(61730),o=n(70378),s=n(20555),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,r.Z)(this,t),(e=o.Z.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var a,u=e.rows,c=e.columns,l=n.computeLeftSingularVectors,h=void 0===l||l,f=n.computeRightSingularVectors,d=void 0===f||f,p=n.autoTranspose,v=void 0!==p&&p,g=Boolean(h),m=Boolean(d),y=!1;if(u<c)if(v){u=(a=e.transpose()).rows,c=a.columns,y=!0;var b=g;g=m,m=b}else a=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=e.clone();for(var w=Math.min(u,c),x=Math.min(u+1,c),k=new Float64Array(x),I=new i.Z(u,w),S=new i.Z(c,c),_=new Float64Array(c),C=new Float64Array(u),E=new Float64Array(x),A=0;A<x;A++)E[A]=A;for(var T=Math.min(u-1,c),N=Math.max(0,Math.min(c-2,u)),D=Math.max(T,N),R=0;R<D;R++){if(R<T){k[R]=0;for(var Z=R;Z<u;Z++)k[R]=(0,s.G)(k[R],a.get(Z,R));if(0!==k[R]){a.get(R,R)<0&&(k[R]=-k[R]);for(var M=R;M<u;M++)a.set(M,R,a.get(M,R)/k[R]);a.set(R,R,a.get(R,R)+1)}k[R]=-k[R]}for(var F=R+1;F<c;F++){if(R<T&&0!==k[R]){for(var O=0,B=R;B<u;B++)O+=a.get(B,R)*a.get(B,F);O=-O/a.get(R,R);for(var L=R;L<u;L++)a.set(L,F,a.get(L,F)+O*a.get(L,R))}_[F]=a.get(R,F)}if(g&&R<T)for(var P=R;P<u;P++)I.set(P,R,a.get(P,R));if(R<N){_[R]=0;for(var U=R+1;U<c;U++)_[R]=(0,s.G)(_[R],_[U]);if(0!==_[R]){_[R+1]<0&&(_[R]=0-_[R]);for(var z=R+1;z<c;z++)_[z]/=_[R];_[R+1]+=1}if(_[R]=-_[R],R+1<u&&0!==_[R]){for(var W=R+1;W<u;W++)C[W]=0;for(var V=R+1;V<u;V++)for(var G=R+1;G<c;G++)C[V]+=_[G]*a.get(V,G);for(var j=R+1;j<c;j++)for(var H=-_[j]/_[R+1],X=R+1;X<u;X++)a.set(X,j,a.get(X,j)+H*C[X])}if(m)for(var q=R+1;q<c;q++)S.set(q,R,_[q])}}var Y=Math.min(c,u+1);if(T<c&&(k[T]=a.get(T,T)),u<Y&&(k[Y-1]=0),N+1<Y&&(_[N]=a.get(N,Y-1)),_[Y-1]=0,g){for(var K=T;K<w;K++){for(var Q=0;Q<u;Q++)I.set(Q,K,0);I.set(K,K,1)}for(var J=T-1;J>=0;J--)if(0!==k[J]){for(var $=J+1;$<w;$++){for(var tt=0,et=J;et<u;et++)tt+=I.get(et,J)*I.get(et,$);tt=-tt/I.get(J,J);for(var nt=J;nt<u;nt++)I.set(nt,$,I.get(nt,$)+tt*I.get(nt,J))}for(var rt=J;rt<u;rt++)I.set(rt,J,-I.get(rt,J));I.set(J,J,1+I.get(J,J));for(var at=0;at<J-1;at++)I.set(at,J,0)}else{for(var it=0;it<u;it++)I.set(it,J,0);I.set(J,J,1)}}if(m)for(var ot=c-1;ot>=0;ot--){if(ot<N&&0!==_[ot])for(var st=ot+1;st<c;st++){for(var ut=0,ct=ot+1;ct<c;ct++)ut+=S.get(ct,ot)*S.get(ct,st);ut=-ut/S.get(ot+1,ot);for(var lt=ot+1;lt<c;lt++)S.set(lt,st,S.get(lt,st)+ut*S.get(lt,ot))}for(var ht=0;ht<c;ht++)S.set(ht,ot,0);S.set(ot,ot,1)}for(var ft=Y-1,dt=Number.EPSILON;Y>0;){var pt=void 0,vt=void 0;for(pt=Y-2;pt>=-1&&-1!==pt;pt--){var gt=Number.MIN_VALUE+dt*Math.abs(k[pt]+Math.abs(k[pt+1]));if(Math.abs(_[pt])<=gt||Number.isNaN(_[pt])){_[pt]=0;break}}if(pt===Y-2)vt=4;else{var mt=void 0;for(mt=Y-1;mt>=pt&&mt!==pt;mt--){var yt=(mt!==Y?Math.abs(_[mt]):0)+(mt!==pt+1?Math.abs(_[mt-1]):0);if(Math.abs(k[mt])<=dt*yt){k[mt]=0;break}}mt===pt?vt=3:mt===Y-1?vt=1:(vt=2,pt=mt)}switch(pt++,vt){case 1:var bt=_[Y-2];_[Y-2]=0;for(var wt=Y-2;wt>=pt;wt--){var xt=(0,s.G)(k[wt],bt),kt=k[wt]/xt,It=bt/xt;if(k[wt]=xt,wt!==pt&&(bt=-It*_[wt-1],_[wt-1]=kt*_[wt-1]),m)for(var St=0;St<c;St++)xt=kt*S.get(St,wt)+It*S.get(St,Y-1),S.set(St,Y-1,-It*S.get(St,wt)+kt*S.get(St,Y-1)),S.set(St,wt,xt)}break;case 2:var _t=_[pt-1];_[pt-1]=0;for(var Ct=pt;Ct<Y;Ct++){var Et=(0,s.G)(k[Ct],_t),At=k[Ct]/Et,Tt=_t/Et;if(k[Ct]=Et,_t=-Tt*_[Ct],_[Ct]=At*_[Ct],g)for(var Nt=0;Nt<u;Nt++)Et=At*I.get(Nt,Ct)+Tt*I.get(Nt,pt-1),I.set(Nt,pt-1,-Tt*I.get(Nt,Ct)+At*I.get(Nt,pt-1)),I.set(Nt,Ct,Et)}break;case 3:var Dt=Math.max(Math.abs(k[Y-1]),Math.abs(k[Y-2]),Math.abs(_[Y-2]),Math.abs(k[pt]),Math.abs(_[pt])),Rt=k[Y-1]/Dt,Zt=k[Y-2]/Dt,Mt=_[Y-2]/Dt,Ft=k[pt]/Dt,Ot=_[pt]/Dt,Bt=((Zt+Rt)*(Zt-Rt)+Mt*Mt)/2,Lt=Rt*Mt*(Rt*Mt),Pt=0;0===Bt&&0===Lt||(Pt=Lt/(Bt+(Pt=Bt<0?0-Math.sqrt(Bt*Bt+Lt):Math.sqrt(Bt*Bt+Lt))));for(var Ut=(Ft+Rt)*(Ft-Rt)+Pt,zt=Ft*Ot,Wt=pt;Wt<Y-1;Wt++){var Vt=(0,s.G)(Ut,zt);0===Vt&&(Vt=Number.MIN_VALUE);var Gt=Ut/Vt,jt=zt/Vt;if(Wt!==pt&&(_[Wt-1]=Vt),Ut=Gt*k[Wt]+jt*_[Wt],_[Wt]=Gt*_[Wt]-jt*k[Wt],zt=jt*k[Wt+1],k[Wt+1]=Gt*k[Wt+1],m)for(var Ht=0;Ht<c;Ht++)Vt=Gt*S.get(Ht,Wt)+jt*S.get(Ht,Wt+1),S.set(Ht,Wt+1,-jt*S.get(Ht,Wt)+Gt*S.get(Ht,Wt+1)),S.set(Ht,Wt,Vt);if(0===(Vt=(0,s.G)(Ut,zt))&&(Vt=Number.MIN_VALUE),Gt=Ut/Vt,jt=zt/Vt,k[Wt]=Vt,Ut=Gt*_[Wt]+jt*k[Wt+1],k[Wt+1]=-jt*_[Wt]+Gt*k[Wt+1],zt=jt*_[Wt+1],_[Wt+1]=Gt*_[Wt+1],g&&Wt<u-1)for(var Xt=0;Xt<u;Xt++)Vt=Gt*I.get(Xt,Wt)+jt*I.get(Xt,Wt+1),I.set(Xt,Wt+1,-jt*I.get(Xt,Wt)+Gt*I.get(Xt,Wt+1)),I.set(Xt,Wt,Vt)}_[Y-2]=Ut,1;break;case 4:if(k[pt]<=0&&(k[pt]=k[pt]<0?-k[pt]:0,m))for(var qt=0;qt<=ft;qt++)S.set(qt,pt,-S.get(qt,pt));for(;pt<ft&&!(k[pt]>=k[pt+1]);){var Yt=k[pt];if(k[pt]=k[pt+1],k[pt+1]=Yt,m&&pt<c-1)for(var Kt=0;Kt<c;Kt++)Yt=S.get(Kt,pt+1),S.set(Kt,pt+1,S.get(Kt,pt)),S.set(Kt,pt,Yt);if(g&&pt<u-1)for(var Qt=0;Qt<u;Qt++)Yt=I.get(Qt,pt+1),I.set(Qt,pt+1,I.get(Qt,pt)),I.set(Qt,pt,Yt);pt++}0,Y--}}if(y){var Jt=S;S=I,I=Jt}this.m=u,this.n=c,this.s=k,this.U=I,this.V=S}return(0,a.Z)(t,[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,a=i.Z.zeros(r,r),o=0;o<r;o++)Math.abs(this.s[o])<=n?a.set(o,o,0):a.set(o,o,1/this.s[o]);for(var s=this.U,u=this.rightSingularVectors,c=u.mmul(a),l=u.rows,h=s.rows,f=i.Z.zeros(l,h),d=0;d<l;d++)for(var p=0;p<h;p++){for(var v=0,g=0;g<r;g++)v+=c.get(d,g)*s.get(p,g);f.set(d,p,v)}return f.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(i.Z.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,a=new i.Z(n,this.s.length),o=0;o<n;o++)for(var s=0;s<r;s++)Math.abs(this.s[s])>e&&a.set(o,s,t.get(o,s)/this.s[s]);for(var u=this.U,c=u.rows,l=u.columns,h=new i.Z(n,c),f=0;f<n;f++)for(var d=0;d<c;d++){for(var p=0,v=0;v<l;v++)p+=a.get(f,v)*u.get(d,v);h.set(f,d,p)}return h}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,a=n.length;r<a;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return i.Z.diag(this.s)}}]),t}()},20555:function(t,e,n){"use strict";function r(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}n.d(e,{G:function(){return r}})},59222:function(t,e,n){"use strict";n.d(e,{F:function(){return c},S:function(){return u}});var r=n(66866),a=n(22080),i=n(2714),o=n(61730),s=n(70378);function u(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=s.Z.checkMatrix(t),e?new i.Z(t).inverse():c(t,o.Z.eye(t.rows))}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=s.Z.checkMatrix(t),e=s.Z.checkMatrix(e),n?new i.Z(t).solve(e):t.isSquare()?new r.Z(t).solve(e):new a.Z(t).solve(e)}},44160:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractMatrix:function(){return r.X},CHO:function(){return O},CholeskyDecomposition:function(){return O},EVD:function(){return M},EigenvalueDecomposition:function(){return M},LU:function(){return S.Z},LuDecomposition:function(){return S.Z},Matrix:function(){return r.Z},MatrixColumnSelectionView:function(){return h},MatrixColumnView:function(){return l},MatrixFlipColumnView:function(){return f},MatrixFlipRowView:function(){return d},MatrixRowSelectionView:function(){return v},MatrixRowView:function(){return p},MatrixSelectionView:function(){return g},MatrixSubView:function(){return m},MatrixTransposeView:function(){return y.Z},NIPALS:function(){return L},Nipals:function(){return L},QR:function(){return B.Z},QrDecomposition:function(){return B.Z},SVD:function(){return C.Z},SingularValueDecomposition:function(){return C.Z},WrapperMatrix1D:function(){return w},WrapperMatrix2D:function(){return x.Z},correlation:function(){return R},covariance:function(){return D},default:function(){return r.Z},determinant:function(){return _},inverse:function(){return I.S},linearDependencies:function(){return T},pseudoInverse:function(){return N},solve:function(){return I.F},wrap:function(){return k}});var r=n(61730),a=n(15671),i=n(43144),o=n(60136),s=n(29388),u=n(24020),c=n(17690),l=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(0,u.bp)(t,r),(i=e.call(this,t,t.rows,1)).column=r,i}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.column,n),this}},{key:"get",value:function(t){return this.matrix.get(t,this.column)}}]),n}(c.Z),h=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(0,u.g)(t,r),(i=e.call(this,t,t.rows,r.length)).columnIndices=r,i}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columnIndices[e])}}]),n}(c.Z),f=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){return(0,a.Z)(this,n),e.call(this,t,t.rows,t.columns)}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columns-e-1)}}]),n}(c.Z),d=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){return(0,a.Z)(this,n),e.call(this,t,t.rows,t.columns)}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rows-t-1,e)}}]),n}(c.Z),p=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(0,u.zb)(t,r),(i=e.call(this,t,1,t.columns)).row=r,i}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(this.row,e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.row,e)}}]),n}(c.Z),v=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(0,u.ZR)(t,r),(i=e.call(this,t,r.length,t.columns)).rowIndices=r,i}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],e)}}]),n}(c.Z),g=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r,i){var o;return(0,a.Z)(this,n),(0,u.ZR)(t,r),(0,u.g)(t,i),(o=e.call(this,t,r.length,i.length)).rowIndices=r,o.columnIndices=i,o}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}]),n}(c.Z),m=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,r,i,o,s){var c;return(0,a.Z)(this,n),(0,u.J5)(t,r,i,o,s),(c=e.call(this,t,i-r+1,s-o+1)).startRow=r,c.startColumn=o,c}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}]),n}(c.Z),y=n(45861),b=n(78061),w=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.Z)(this,n);var o=i.rows,s=void 0===o?1:o;if(t.length%s!==0)throw new Error("the data length is not divisible by the number of rows");return(r=e.call(this)).rows=s,r.columns=t.length/s,r.data=t,r}return(0,i.Z)(n,[{key:"set",value:function(t,e,n){var r=this._calculateIndex(t,e);return this.data[r]=n,this}},{key:"get",value:function(t,e){var n=this._calculateIndex(t,e);return this.data[n]}},{key:"_calculateIndex",value:function(t,e){return t*this.columns+e}}]),n}(r.X),x=n(70378);function k(t,e){if((0,b.N)(t))return t[0]&&(0,b.N)(t[0])?new x.Z(t):new w(t,e);throw new Error("the argument is not an array")}var I=n(59222),S=n(66866);function _(t){var e,n,a,i,o,s;if((t=r.Z.checkMatrix(t)).isSquare())return 0===t.columns?1:2===t.columns?(e=t.get(0,0),n=t.get(0,1),a=t.get(1,0),e*t.get(1,1)-n*a):3===t.columns?(i=new g(t,[1,2],[1,2]),o=new g(t,[1,2],[0,2]),s=new g(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),a=t.get(0,2),e*_(i)-n*_(o)+a*_(s)):new S.Z(t).determinant;throw Error("determinant can only be calculated for a square matrix")}var C=n(2714);function E(t,e){for(var n=[],r=0;r<t;r++)r!==e&&n.push(r);return n}function A(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(t>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(e.rows+1).fill(0);for(var a=e.addRow(n,[0]),i=0;i<a.rows;i++)Math.abs(a.get(i,0))<r&&a.set(i,0,0);return a.to1DArray()}function T(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.thresholdValue,a=void 0===n?1e-9:n,i=e.thresholdError,o=void 0===i?1e-9:i,s=(t=r.Z.checkMatrix(t)).rows,u=new r.Z(s,s),c=0;c<s;c++){var l=r.Z.columnVector(t.getRow(c)),h=t.subMatrixRow(E(s,c)).transpose(),f=new C.Z(h).solve(l),d=r.Z.sub(l,h.mmul(f)).abs().max();u.setRow(c,A(d,f,c,a,o))}return u}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((t=r.Z.checkMatrix(t)).isEmpty())return t.transpose();for(var n=new C.Z(t,{autoTranspose:!0}),a=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal,s=0;s<o.length;s++)Math.abs(o[s])>e?o[s]=1/o[s]:o[s]=0;return i.mmul(r.Z.diag(o).mmul(a.transpose()))}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new r.Z(t);var a=!1;if("object"!==typeof e||r.Z.isMatrix(e)||(0,b.N)(e)?e=new r.Z(e):(n=e,e=t,a=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n.center;(void 0===i||i)&&(t=t.center("column"),a||(e=e.center("column")));for(var o=t.transpose().mmul(e),s=0;s<o.rows;s++)for(var u=0;u<o.columns;u++)o.set(s,u,o.get(s,u)*(1/(t.rows-1)));return o}function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new r.Z(t);var a=!1;if("object"!==typeof e||r.Z.isMatrix(e)||(0,b.N)(e)?e=new r.Z(e):(n=e,e=t,a=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n,o=i.center,s=void 0===o||o,u=i.scale,c=void 0===u||u;s&&(t.center("column"),a||e.center("column")),c&&(t.scale("column"),a||e.scale("column"));for(var l=t.standardDeviation("column",{unbiased:!0}),h=a?l:e.standardDeviation("column",{unbiased:!0}),f=t.transpose().mmul(e),d=0;d<f.rows;d++)for(var p=0;p<f.columns;p++)f.set(d,p,f.get(d,p)*(1/(l[d]*h[p]))*(1/(t.rows-1)));return f}var Z=n(20555),M=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.Z)(this,t);var i=n.assumeSymmetric,o=void 0!==i&&i;if(!(e=x.Z.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");var s,u,c=e.columns,l=new r.Z(c,c),h=new Float64Array(c),f=new Float64Array(c),d=e;if(!!o||e.isSymmetric()){for(s=0;s<c;s++)for(u=0;u<c;u++)l.set(s,u,d.get(s,u));!function(t,e,n,r){var a,i,o,s,u,c,l,h;for(u=0;u<t;u++)n[u]=r.get(t-1,u);for(s=t-1;s>0;s--){for(h=0,o=0,c=0;c<s;c++)h+=Math.abs(n[c]);if(0===h)for(e[s]=n[s-1],u=0;u<s;u++)n[u]=r.get(s-1,u),r.set(s,u,0),r.set(u,s,0);else{for(c=0;c<s;c++)n[c]/=h,o+=n[c]*n[c];for(a=n[s-1],i=Math.sqrt(o),a>0&&(i=-i),e[s]=h*i,o-=a*i,n[s-1]=a-i,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(a=n[u],r.set(u,s,a),i=e[u]+r.get(u,u)*a,c=u+1;c<=s-1;c++)i+=r.get(c,u)*n[c],e[c]+=r.get(c,u)*a;e[u]=i}for(a=0,u=0;u<s;u++)e[u]/=o,a+=e[u]*n[u];for(l=a/(o+o),u=0;u<s;u++)e[u]-=l*n[u];for(u=0;u<s;u++){for(a=n[u],i=e[u],c=u;c<=s-1;c++)r.set(c,u,r.get(c,u)-(a*e[c]+i*n[c]));n[u]=r.get(s-1,u),r.set(s,u,0)}}n[s]=o}for(s=0;s<t-1;s++){if(r.set(t-1,s,r.get(s,s)),r.set(s,s,1),0!==(o=n[s+1])){for(c=0;c<=s;c++)n[c]=r.get(c,s+1)/o;for(u=0;u<=s;u++){for(i=0,c=0;c<=s;c++)i+=r.get(c,s+1)*r.get(c,u);for(c=0;c<=s;c++)r.set(c,u,r.get(c,u)-i*n[c])}}for(c=0;c<=s;c++)r.set(c,s+1,0)}for(u=0;u<t;u++)n[u]=r.get(t-1,u),r.set(t-1,u,0);r.set(t-1,t-1,1),e[0]=0}(c,f,h,l),function(t,e,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;var w=0,x=0,k=Number.EPSILON;for(c=0;c<t;c++){for(x=Math.max(x,Math.abs(n[c])+Math.abs(e[c])),l=c;l<t&&!(Math.abs(e[l])<=k*x);)l++;if(l>c){0;do{for(1,a=n[c],h=(n[c+1]-a)/(2*e[c]),f=(0,Z.G)(h,1),h<0&&(f=-f),n[c]=e[c]/(h+f),n[c+1]=e[c]*(h+f),d=n[c+1],i=a-n[c],o=c+2;o<t;o++)n[o]-=i;for(w+=i,h=n[l],v=p=1,g=p,m=e[c+1],y=0,b=0,o=l-1;o>=c;o--)for(g=v,v=p,b=y,a=p*e[o],i=p*h,f=(0,Z.G)(h,e[o]),e[o+1]=y*f,y=e[o]/f,h=(p=h/f)*n[o]-y*a,n[o+1]=i+y*(p*a+y*n[o]),u=0;u<t;u++)i=r.get(u,o+1),r.set(u,o+1,y*r.get(u,o)+p*i),r.set(u,o,p*r.get(u,o)-y*i);h=-y*b*g*m*e[c]/d,e[c]=y*h,n[c]=p*h}while(Math.abs(e[c])>k*x)}n[c]=n[c]+w,e[c]=0}for(o=0;o<t-1;o++){for(u=o,h=n[o],s=o+1;s<t;s++)n[s]<h&&(u=s,h=n[s]);if(u!==o)for(n[u]=n[o],n[o]=h,s=0;s<t;s++)h=r.get(s,o),r.set(s,o,r.get(s,u)),r.set(s,u,h)}}(c,f,h,l)}else{var p=new r.Z(c,c),v=new Float64Array(c);for(u=0;u<c;u++)for(s=0;s<c;s++)p.set(s,u,d.get(s,u));!function(t,e,n,r){var a,i,o,s,u,c,l,h=0,f=t-1;for(c=h+1;c<=f-1;c++){for(l=0,s=c;s<=f;s++)l+=Math.abs(e.get(s,c-1));if(0!==l){for(o=0,s=f;s>=c;s--)n[s]=e.get(s,c-1)/l,o+=n[s]*n[s];for(i=Math.sqrt(o),n[c]>0&&(i=-i),o-=n[c]*i,n[c]=n[c]-i,u=c;u<t;u++){for(a=0,s=f;s>=c;s--)a+=n[s]*e.get(s,u);for(a/=o,s=c;s<=f;s++)e.set(s,u,e.get(s,u)-a*n[s])}for(s=0;s<=f;s++){for(a=0,u=f;u>=c;u--)a+=n[u]*e.get(s,u);for(a/=o,u=c;u<=f;u++)e.set(s,u,e.get(s,u)-a*n[u])}n[c]=l*n[c],e.set(c,c-1,l*i)}}for(s=0;s<t;s++)for(u=0;u<t;u++)r.set(s,u,s===u?1:0);for(c=f-1;c>=h+1;c--)if(0!==e.get(c,c-1)){for(s=c+1;s<=f;s++)n[s]=e.get(s,c-1);for(u=c;u<=f;u++){for(i=0,s=c;s<=f;s++)i+=n[s]*r.get(s,u);for(i=i/n[c]/e.get(c,c-1),s=c;s<=f;s++)r.set(s,u,r.get(s,u)+i*n[s])}}}(c,p,v,l),function(t,e,n,r,a){var i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,w=t-1,x=0,k=t-1,I=Number.EPSILON,S=0,_=0,C=0,E=0,A=0,T=0,N=0,D=0;for(i=0;i<t;i++)for((i<x||i>k)&&(n[i]=a.get(i,i),e[i]=0),o=Math.max(i-1,0);o<t;o++)_+=Math.abs(a.get(i,o));for(;w>=x;){for(u=w;u>x&&(0===(T=Math.abs(a.get(u-1,u-1))+Math.abs(a.get(u,u)))&&(T=_),!(Math.abs(a.get(u,u-1))<I*T));)u--;if(u===w)a.set(w,w,a.get(w,w)+S),n[w]=a.get(w,w),e[w]=0,w--,D=0;else if(u===w-1){if(h=a.get(w,w-1)*a.get(w-1,w),E=(C=(a.get(w-1,w-1)-a.get(w,w))/2)*C+h,N=Math.sqrt(Math.abs(E)),a.set(w,w,a.get(w,w)+S),a.set(w-1,w-1,a.get(w-1,w-1)+S),f=a.get(w,w),E>=0){for(N=C>=0?C+N:C-N,n[w-1]=f+N,n[w]=n[w-1],0!==N&&(n[w]=f-h/N),e[w-1]=0,e[w]=0,C=(f=a.get(w,w-1))/(T=Math.abs(f)+Math.abs(N)),E=N/T,C/=A=Math.sqrt(C*C+E*E),E/=A,o=w-1;o<t;o++)N=a.get(w-1,o),a.set(w-1,o,E*N+C*a.get(w,o)),a.set(w,o,E*a.get(w,o)-C*N);for(i=0;i<=w;i++)N=a.get(i,w-1),a.set(i,w-1,E*N+C*a.get(i,w)),a.set(i,w,E*a.get(i,w)-C*N);for(i=x;i<=k;i++)N=r.get(i,w-1),r.set(i,w-1,E*N+C*r.get(i,w)),r.set(i,w,E*r.get(i,w)-C*N)}else n[w-1]=f+C,n[w]=f+C,e[w-1]=N,e[w]=-N;w-=2,D=0}else{if(f=a.get(w,w),d=0,h=0,u<w&&(d=a.get(w-1,w-1),h=a.get(w,w-1)*a.get(w-1,w)),10===D){for(S+=f,i=x;i<=w;i++)a.set(i,i,a.get(i,i)-f);f=d=.75*(T=Math.abs(a.get(w,w-1))+Math.abs(a.get(w-1,w-2))),h=-.4375*T*T}if(30===D&&(T=(T=(d-f)/2)*T+h)>0){for(T=Math.sqrt(T),d<f&&(T=-T),T=f-h/((d-f)/2+T),i=x;i<=w;i++)a.set(i,i,a.get(i,i)-T);S+=T,f=d=h=.964}for(D+=1,c=w-2;c>=u&&(C=((A=f-(N=a.get(c,c)))*(T=d-N)-h)/a.get(c+1,c)+a.get(c,c+1),E=a.get(c+1,c+1)-N-A-T,A=a.get(c+2,c+1),C/=T=Math.abs(C)+Math.abs(E)+Math.abs(A),E/=T,A/=T,c!==u)&&!(Math.abs(a.get(c,c-1))*(Math.abs(E)+Math.abs(A))<I*(Math.abs(C)*(Math.abs(a.get(c-1,c-1))+Math.abs(N)+Math.abs(a.get(c+1,c+1)))));)c--;for(i=c+2;i<=w;i++)a.set(i,i-2,0),i>c+2&&a.set(i,i-3,0);for(s=c;s<=w-1&&(y=s!==w-1,s!==c&&(C=a.get(s,s-1),E=a.get(s+1,s-1),A=y?a.get(s+2,s-1):0,0!==(f=Math.abs(C)+Math.abs(E)+Math.abs(A))&&(C/=f,E/=f,A/=f)),0!==f);s++)if(T=Math.sqrt(C*C+E*E+A*A),C<0&&(T=-T),0!==T){for(s!==c?a.set(s,s-1,-T*f):u!==c&&a.set(s,s-1,-a.get(s,s-1)),f=(C+=T)/T,d=E/T,N=A/T,E/=C,A/=C,o=s;o<t;o++)C=a.get(s,o)+E*a.get(s+1,o),y&&(C+=A*a.get(s+2,o),a.set(s+2,o,a.get(s+2,o)-C*N)),a.set(s,o,a.get(s,o)-C*f),a.set(s+1,o,a.get(s+1,o)-C*d);for(i=0;i<=Math.min(w,s+3);i++)C=f*a.get(i,s)+d*a.get(i,s+1),y&&(C+=N*a.get(i,s+2),a.set(i,s+2,a.get(i,s+2)-C*A)),a.set(i,s,a.get(i,s)-C),a.set(i,s+1,a.get(i,s+1)-C*E);for(i=x;i<=k;i++)C=f*r.get(i,s)+d*r.get(i,s+1),y&&(C+=N*r.get(i,s+2),r.set(i,s+2,r.get(i,s+2)-C*A)),r.set(i,s,r.get(i,s)-C),r.set(i,s+1,r.get(i,s+1)-C*E)}}}if(0===_)return;for(w=t-1;w>=0;w--)if(C=n[w],0===(E=e[w]))for(u=w,a.set(w,w,1),i=w-1;i>=0;i--){for(h=a.get(i,i)-C,A=0,o=u;o<=w;o++)A+=a.get(i,o)*a.get(o,w);if(e[i]<0)N=h,T=A;else if(u=i,0===e[i]?a.set(i,w,0!==h?-A/h:-A/(I*_)):(f=a.get(i,i+1),d=a.get(i+1,i),l=(f*T-N*A)/(E=(n[i]-C)*(n[i]-C)+e[i]*e[i]),a.set(i,w,l),a.set(i+1,w,Math.abs(f)>Math.abs(N)?(-A-h*l)/f:(-T-d*l)/N)),I*(l=Math.abs(a.get(i,w)))*l>1)for(o=i;o<=w;o++)a.set(o,w,a.get(o,w)/l)}else if(E<0)for(u=w-1,Math.abs(a.get(w,w-1))>Math.abs(a.get(w-1,w))?(a.set(w-1,w-1,E/a.get(w,w-1)),a.set(w-1,w,-(a.get(w,w)-C)/a.get(w,w-1))):(b=F(0,-a.get(w-1,w),a.get(w-1,w-1)-C,E),a.set(w-1,w-1,b[0]),a.set(w-1,w,b[1])),a.set(w,w-1,0),a.set(w,w,1),i=w-2;i>=0;i--){for(p=0,v=0,o=u;o<=w;o++)p+=a.get(i,o)*a.get(o,w-1),v+=a.get(i,o)*a.get(o,w);if(h=a.get(i,i)-C,e[i]<0)N=h,A=p,T=v;else if(u=i,0===e[i]?(b=F(-p,-v,h,E),a.set(i,w-1,b[0]),a.set(i,w,b[1])):(f=a.get(i,i+1),d=a.get(i+1,i),g=(n[i]-C)*(n[i]-C)+e[i]*e[i]-E*E,m=2*(n[i]-C)*E,0===g&&0===m&&(g=I*_*(Math.abs(h)+Math.abs(E)+Math.abs(f)+Math.abs(d)+Math.abs(N))),b=F(f*A-N*p+E*v,f*T-N*v-E*p,g,m),a.set(i,w-1,b[0]),a.set(i,w,b[1]),Math.abs(f)>Math.abs(N)+Math.abs(E)?(a.set(i+1,w-1,(-p-h*a.get(i,w-1)+E*a.get(i,w))/f),a.set(i+1,w,(-v-h*a.get(i,w)-E*a.get(i,w-1))/f)):(b=F(-A-d*a.get(i,w-1),-T-d*a.get(i,w),N,E),a.set(i+1,w-1,b[0]),a.set(i+1,w,b[1]))),I*(l=Math.max(Math.abs(a.get(i,w-1)),Math.abs(a.get(i,w))))*l>1)for(o=i;o<=w;o++)a.set(o,w-1,a.get(o,w-1)/l),a.set(o,w,a.get(o,w)/l)}for(i=0;i<t;i++)if(i<x||i>k)for(o=i;o<t;o++)r.set(i,o,a.get(i,o));for(o=t-1;o>=x;o--)for(i=x;i<=k;i++){for(N=0,s=x;s<=Math.min(o,k);s++)N+=r.get(i,s)*a.get(s,o);r.set(i,o,N)}}(c,f,h,l,p)}this.n=c,this.e=f,this.d=h,this.V=l}return(0,i.Z)(t,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var t,e,n=this.n,a=this.e,i=this.d,o=new r.Z(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o.set(t,e,0);o.set(t,t,i[t]),a[t]>0?o.set(t,t+1,a[t]):a[t]<0&&o.set(t,t-1,a[t])}return o}}]),t}();function F(t,e,n,r){var a,i;return Math.abs(n)>Math.abs(r)?[(t+(a=r/n)*e)/(i=n+a*r),(e-a*t)/i]:[((a=n/r)*t+e)/(i=r+a*n),(a*e-t)/i]}var O=function(){function t(e){if((0,a.Z)(this,t),!(e=x.Z.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");var n,i,o,s=e,u=s.rows,c=new r.Z(u,u),l=!0;for(i=0;i<u;i++){var h=0;for(o=0;o<i;o++){var f=0;for(n=0;n<o;n++)f+=c.get(o,n)*c.get(i,n);f=(s.get(i,o)-f)/c.get(o,o),c.set(i,o,f),h+=f*f}for(l&=(h=s.get(i,i)-h)>0,c.set(i,i,Math.sqrt(Math.max(h,0))),o=i+1;o<u;o++)c.set(i,o,0)}this.L=c,this.positiveDefinite=Boolean(l)}return(0,i.Z)(t,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(t){t=x.Z.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var r,a,i,o=t.columns,s=t.clone();for(i=0;i<n;i++)for(a=0;a<o;a++){for(r=0;r<i;r++)s.set(i,a,s.get(i,a)-s.get(r,a)*e.get(i,r));s.set(i,a,s.get(i,a)/e.get(i,i))}for(i=n-1;i>=0;i--)for(a=0;a<o;a++){for(r=i+1;r<n;r++)s.set(i,a,s.get(i,a)-s.get(r,a)*e.get(r,i));s.set(i,a,s.get(i,a)/e.get(i,i))}return s}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),t}(),B=n(22080),L=(0,i.Z)((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.Z)(this,t),e=x.Z.checkMatrix(e);var i,o=n.Y,s=n.scaleScores,u=void 0!==s&&s,c=n.maxIterations,l=void 0===c?1e3:c,h=n.terminationCriteria,f=void 0===h?1e-10:h;if(o){if((o=(0,b.N)(o)&&"number"===typeof o[0]?r.Z.columnVector(o):x.Z.checkMatrix(o)).rows!==e.rows)throw new Error("Y should have the same number of rows as X");i=o.getColumnVector(0)}else i=e.getColumnVector(0);for(var d,p,v,g,m=1,y=0;y<l&&m>f;y++)v=(v=e.transpose().mmul(i).div(i.transpose().mmul(i).get(0,0))).div(v.norm()),d=e.mmul(v).div(v.transpose().mmul(v).get(0,0)),y>0&&(m=d.clone().sub(g).pow(2).sum()),g=d.clone(),o?(p=(p=o.transpose().mmul(d).div(d.transpose().mmul(d).get(0,0))).div(p.norm()),i=o.mmul(p).div(p.transpose().mmul(p).get(0,0))):i=d;if(o){var w=e.transpose().mmul(d).div(d.transpose().mmul(d).get(0,0));w=w.div(w.norm());var k=e.clone().sub(d.clone().mmul(w.transpose())),I=i.transpose().mmul(d).div(d.transpose().mmul(d).get(0,0)),S=o.clone().sub(d.clone().mulS(I.get(0,0)).mmul(p.transpose()));this.t=d,this.p=w.transpose(),this.w=v.transpose(),this.q=p,this.u=i,this.s=d.transpose().mmul(d),this.xResidual=k,this.yResidual=S,this.betas=I}else this.w=v.transpose(),this.s=d.transpose().mmul(d).sqrt(),this.t=u?d.clone().div(this.s.get(0,0)):d,this.xResidual=e.sub(d.mmul(v.transpose()))}))},61730:function(t,e,n){"use strict";n.d(e,{X:function(){return g},Z:function(){return y}});var r=n(82963),a=n(60136),i=n(29388),o=n(15671),s=n(43144),u=n(78061);function c(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,u.N)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!(0,u.N)(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,u.N)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,a=e.toIndex,i=void 0===a?t.length:a;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],s=r+1;s<i;s++)t[s]<o&&(o=t[s]);return o}(t),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,u.N)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,a=e.toIndex,i=void 0===a?t.length:a;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],s=r+1;s<i;s++)t[s]>o&&(o=t[s]);return o}(t);if(r===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,o=void 0===i?n.autoMinMax?r:0:i,s=n.max,c=void 0===s?n.autoMinMax?a:1:s;if(o>=c)throw new RangeError("min option must be smaller than max option");for(var l=(c-o)/(a-r),h=0;h<t.length;h++)e[h]=(t[h]-r)*l+o;return e}var l=" ".repeat(2),h=" ".repeat(4);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,a=e.maxColumns,i=void 0===a?10:a,o=e.maxNumSize,s=void 0===o?8:o,u=e.padMinus,c=void 0===u?"auto":u;return"".concat(t.constructor.name," {\n").concat(l,"[\n").concat(h).concat(function(t,e,n,r,a){var i=t.rows,o=t.columns,s=Math.min(i,e),u=Math.min(o,n),c=[];if("auto"===a){a=!1;t:for(var l=0;l<s;l++)for(var f=0;f<u;f++)if(t.get(l,f)<0){a=!0;break t}}for(var p=0;p<s;p++){for(var v=[],g=0;g<u;g++)v.push(d(t.get(p,g),r,a));c.push("".concat(v.join(" ")))}u!==o&&(c[c.length-1]+=" ... ".concat(o-n," more columns"));s!==i&&c.push("... ".concat(i-e," more rows"));return c.join("\n".concat(h))}(t,r,i,s,c),"\n").concat(l,"]\n").concat(l,"rows: ").concat(t.rows,"\n").concat(l,"columns: ").concat(t.columns,"\n}")}function d(t,e,n){return(t>=0&&n?" ".concat(p(t,e-1)):p(t,e)).padEnd(e)}function p(t,e){var n=t.toString();if(n.length<=e)return n;var r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;var a=t.toExponential(e);return a.length>e&&(a=t.toExponential(Math.max(0,e-(a.length-e)))),a.slice(0)}var v=n(24020);var g=function(){function t(){(0,o.Z)(this,t)}return(0,s.Z)(t,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if("function"!==typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,a=!1;t<this.rows&&r;){for(e=0,a=!1;e<this.columns&&!1===a;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(a=!0,n=e):(r=!1,a=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,a=!1;t<this.rows&&r;){for(e=0,a=!1;e<this.columns&&!1===a;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(a=!0,n=e):(r=!1,a=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,a=e;a<t.rows;a++)t.get(a,n)>t.get(r,n)&&(r=a);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var i=t.get(e,n),o=n;o<t.columns;o++)t.set(e,o,t.get(e,o)/i);for(var s=e+1;s<t.rows;s++){var u=t.get(s,n)/t.get(e,n);t.set(s,n,0);for(var c=n+1;c<t.columns;c++)t.set(s,c,t.get(s,c)-t.get(e,c)*u)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var a=0,i=!1;a<n&&!1===i;)1===t.get(r,a)?i=!0:a++;for(var o=0;o<r;o++)for(var s=t.get(o,a),u=a;u<e;u++){var c=t.get(o,u)-s*t.get(r,u);t.set(o,u,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,a=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var i=new y(this.rows*n,this.columns*a),o=0;o<n;o++)for(var s=0;s<a;s++)i.setSubMatrix(this,this.rows*o,this.columns*s);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){(0,v.zb)(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return y.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){(0,v.zb)(this,t),e=(0,v.on)(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){(0,v.zb)(this,t),(0,v.zb)(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){(0,v.bp)(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return y.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){(0,v.bp)(this,t),e=(0,v.Um)(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){(0,v.bp)(this,t),(0,v.bp)(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=(0,v.on)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=(0,v.on)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=(0,v.on)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=(0,v.on)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=(0,v.Um)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=(0,v.Um)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=(0,v.Um)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=(0,v.Um)(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){(0,v.zb)(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){(0,v.bp)(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e[n]&&(e[n]=this.get(n,r));return e;case"column":for(var a=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),i=0;i<this.rows;i++)for(var o=0;o<this.columns;o++)this.get(i,o)>a[o]&&(a[o]=this.get(i,o));return a;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var c=0;c<this.columns;c++)this.get(u,c)>s&&(s=this.get(u,c));return s;default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){(0,v.cT)(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e[n]&&(e[n]=this.get(n,r));return e;case"column":for(var a=new Array(this.columns).fill(Number.POSITIVE_INFINITY),i=0;i<this.rows;i++)for(var o=0;o<this.columns;o++)this.get(i,o)<a[o]&&(a[o]=this.get(i,o));return a;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var c=0;c<this.columns;c++)this.get(u,c)<s&&(s=this.get(u,c));return s;default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){(0,v.cT)(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if((0,v.zb)(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){(0,v.zb)(this,t),(0,v.cT)(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if((0,v.zb)(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){(0,v.zb)(this,t),(0,v.cT)(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if((0,v.bp)(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){(0,v.bp)(this,t),(0,v.cT)(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if((0,v.bp)(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){(0,v.bp)(this,t),(0,v.cT)(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e+=this.get(n,r)*this.get(n,r);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,a=0;a<n.length;a++)r+=n[a]*e[a];return r}},{key:"mmul",value:function(t){t=y.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,a=new y(e,r),i=new Float64Array(n),o=0;o<r;o++){for(var s=0;s<n;s++)i[s]=t.get(s,o);for(var u=0;u<e;u++){for(var c=0,l=0;l<n;l++)c+=this.get(u,l)*i[l];a.set(u,o,c)}}return a}},{key:"strassen2x2",value:function(t){t=y.checkMatrix(t);var e=new y(2,2),n=this.get(0,0),r=t.get(0,0),a=this.get(0,1),i=t.get(0,1),o=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),h=(o+u)*r,f=n*(i-c),d=u*(s-r),p=(n+a)*c,v=l+d-p+(a-u)*(s+c),g=f+p,m=h+d,b=l-h+f+(o-n)*(r+i);return e.set(0,0,v),e.set(0,1,g),e.set(1,0,m),e.set(1,1,b),e}},{key:"strassen3x3",value:function(t){t=y.checkMatrix(t);var e=new y(3,3),n=this.get(0,0),r=this.get(0,1),a=this.get(0,2),i=this.get(1,0),o=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),h=t.get(0,0),f=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),g=t.get(1,2),m=t.get(2,0),b=t.get(2,1),w=t.get(2,2),x=(n-i)*(-f+v),k=(-n+i+o)*(h-f+v),I=(i+o)*(-h+f),S=n*h,_=(-n+u+c)*(h-d+g),C=(-n+u)*(d-g),E=(u+c)*(-h+d),A=(-a+c+l)*(v+m-b),T=(a-l)*(v-b),N=a*m,D=(c+l)*(-m+b),R=(-a+o+s)*(g+m-w),Z=(a-s)*(g-w),M=(o+s)*(-m+w),F=S+N+r*p,O=(n+r+a-i-o-c-l)*v+k+I+S+A+N+D,B=S+_+E+(n+r+a-o-s-u-c)*g+N+R+M,L=x+o*(-h+f+p-v-g-m+w)+k+S+N+R+Z,P=x+k+I+S+s*b,U=N+R+Z+M+i*d,z=S+_+C+c*(-h+d+p-v-g-m+b)+A+T+N,W=A+T+N+D+u*f,V=S+_+C+E+l*w;return e.set(0,0,F),e.set(0,1,O),e.set(0,2,B),e.set(1,0,L),e.set(1,1,P),e.set(1,2,U),e.set(2,0,z),e.set(2,1,W),e.set(2,2,V),e}},{key:"mmulStrassen",value:function(e){e=y.checkMatrix(e);var n=this.clone(),r=n.rows,a=n.columns,i=e.rows,o=e.columns;function s(e,n,r){var a=e.rows,i=e.columns;if(a===n&&i===r)return e;var o=t.zeros(n,r);return o=o.setSubMatrix(e,0,0)}a!==i&&console.warn("Multiplying ".concat(r," x ").concat(a," and ").concat(i," x ").concat(o," matrix: dimensions do not match."));var u=Math.max(r,i),c=Math.max(a,o);return function e(n,r,a,i){if(a<=512||i<=512)return n.mmul(r);a%2===1&&i%2===1?(n=s(n,a+1,i+1),r=s(r,a+1,i+1)):a%2===1?(n=s(n,a+1,i),r=s(r,a+1,i)):i%2===1&&(n=s(n,a,i+1),r=s(r,a,i+1));var o=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),c=n.subMatrix(0,o-1,0,u-1),l=r.subMatrix(0,o-1,0,u-1),h=n.subMatrix(0,o-1,u,n.columns-1),f=r.subMatrix(0,o-1,u,r.columns-1),d=n.subMatrix(o,n.rows-1,0,u-1),p=r.subMatrix(o,r.rows-1,0,u-1),v=n.subMatrix(o,n.rows-1,u,n.columns-1),g=r.subMatrix(o,r.rows-1,u,r.columns-1),m=e(t.add(c,v),t.add(l,g),o,u),y=e(t.add(d,v),l,o,u),b=e(c,t.sub(f,g),o,u),w=e(v,t.sub(p,l),o,u),x=e(t.add(c,h),g,o,u),k=e(t.sub(d,c),t.add(l,f),o,u),I=e(t.sub(h,v),t.add(p,g),o,u),S=t.add(m,w);S.sub(x),S.add(I);var _=t.add(b,x),C=t.add(y,w),E=t.sub(m,y);E.add(b),E.add(k);var A=t.zeros(2*S.rows,2*S.columns);return(A=(A=(A=(A=A.setSubMatrix(S,0,0)).setSubMatrix(_,S.rows,0)).setSubMatrix(C,0,S.columns)).setSubMatrix(E,S.rows,S.columns)).subMatrix(0,a-1,0,i-1)}(n=s(n,u,c),e=s(e,u,c),u,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,a=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(n>=a)throw new RangeError("min must be smaller than max");for(var i=new y(this.rows,this.columns),o=0;o<this.rows;o++){var s=this.getRow(o);s.length>0&&c(s,{min:n,max:a,output:s}),i.setRow(o,s)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,a=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(n>=a)throw new RangeError("min must be smaller than max");for(var i=new y(this.rows,this.columns),o=0;o<this.columns;o++){var s=this.getColumn(o);s.length&&c(s,{min:n,max:a,output:s}),i.setColumn(o,s)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),a=this.get(e,this.columns-1-n);this.set(e,n,a),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),a=this.get(this.rows-1-n,e);this.set(n,e,a),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=y.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,a=t.columns,i=new y(e*r,n*a),o=0;o<e;o++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<a;c++)i.set(r*o+u,a*s+c,this.get(o,s)*t.get(u,c));return i}},{key:"kroneckerSum",value:function(t){if(t=y.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,r=this.kroneckerProduct(y.eye(n,n)),a=y.eye(e,e).kroneckerProduct(t);return r.add(a)}},{key:"transpose",value:function(){for(var t=new y(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){(0,v.J5)(this,t,e,n,r);for(var a=new y(e-t+1,r-n+1),i=t;i<=e;i++)for(var o=n;o<=r;o++)a.set(i-t,o-n,this.get(i,o));return a}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new y(t.length,n-e+1),a=0;a<t.length;a++)for(var i=e;i<=n;i++){if(t[a]<0||t[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[a]));r.set(a,i-e,this.get(t[a],i))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new y(n-e+1,t.length),a=0;a<t.length;a++)for(var i=e;i<=n;i++){if(t[a]<0||t[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[a]));r.set(i-e,a,this.get(i,t[a]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=y.checkMatrix(t)).isEmpty())return this;var r=e+t.rows-1,a=n+t.columns-1;(0,v.J5)(this,e,r,n,a);for(var i=0;i<t.rows;i++)for(var o=0;o<t.columns;o++)this.set(e+i,n+o,t.get(i,o));return this}},{key:"selection",value:function(t,e){(0,v.ZR)(this,t),(0,v.g)(this,e);for(var n=new y(t.length,e.length),r=0;r<t.length;r++)for(var a=t[r],i=0;i<e.length;i++){var o=e[i];n.set(r,i,this.get(a,o))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new y(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=(0,v.B4)(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=(0,v.B4)(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=(0,v.B4)(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=(0,v.B4)(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");var n=e,r=n.unbiased,a=void 0===r||r,i=n.mean,o=void 0===i?this.mean(t):i;if("boolean"!==typeof a)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!(0,u.N)(o))throw new TypeError("mean must be an array");return function(t,e,n){for(var r=t.rows,a=t.columns,i=[],o=0;o<r;o++){for(var s=0,u=0,c=0,l=0;l<a;l++)s+=c=t.get(o,l)-n[o],u+=c*c;e?i.push((u-s*s/a)/(a-1)):i.push((u-s*s/a)/a)}return i}(this,a,o);case"column":if(!(0,u.N)(o))throw new TypeError("mean must be an array");return function(t,e,n){for(var r=t.rows,a=t.columns,i=[],o=0;o<a;o++){for(var s=0,u=0,c=0,l=0;l<r;l++)s+=c=t.get(l,o)-n[o],u+=c*c;e?i.push((u-s*s/r)/(r-1)):i.push((u-s*s/r)/r)}return i}(this,a,o);case void 0:if("number"!==typeof o)throw new TypeError("mean must be a number");return function(t,e,n){for(var r=t.rows,a=t.columns,i=r*a,o=0,s=0,u=0,c=0;c<r;c++)for(var l=0;l<a;l++)o+=u=t.get(c,l)-n,s+=u*u;return e?(s-o*o/i)/(i-1):(s-o*o/i)/i}(this,a,o);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===typeof t&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");var n=e.center,r=void 0===n?this.mean(t):n;switch(t){case"row":if(!(0,u.N)(r))throw new TypeError("center must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,r),this;case"column":if(!(0,u.N)(r))throw new TypeError("center must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,r),this;case void 0:if("number"!==typeof r)throw new TypeError("center must be a number");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,a=0;a<t.columns;a++)r+=Math.pow(t.get(n,a),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!(0,u.N)(n))throw new TypeError("scale must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,a=0;a<t.rows;a++)r+=Math.pow(t.get(a,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!(0,u.N)(n))throw new TypeError("scale must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var a=0;a<t.rows;a++)n+=Math.pow(t.get(a,r),2)/e;return Math.sqrt(n)}(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return f(this,t)}}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new y(t,e),a=0;a<t;a++)for(var i=0;i<e;i++)r.set(a,i,n[a*e+i]);return r}},{key:"rowVector",value:function(t){for(var e=new y(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new y(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new y(t,e)}},{key:"ones",value:function(t,e){return new y(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");for(var r=n.random,a=void 0===r?Math.random:r,i=new y(t,e),o=0;o<t;o++)for(var s=0;s<e;s++)i.set(o,s,a());return i}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");var r=n.min,a=void 0===r?0:r,i=n.max,o=void 0===i?1e3:i,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(a>=o)throw new RangeError("min must be smaller than max");for(var c=o-a,l=new y(t,e),h=0;h<t;h++)for(var f=0;f<e;f++){var d=a+Math.round(u()*c);l.set(h,f,d)}return l}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),a=this.zeros(t,e),i=0;i<r;i++)a.set(i,i,n);return a}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var a=Math.min(r,e,n),i=this.zeros(e,n),o=0;o<a;o++)i.set(o,o,t[o]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,a=new y(n,r),i=0;i<n;i++)for(var o=0;o<r;o++)a.set(i,o,Math.min(t.get(i,o),e.get(i,o)));return a}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,a=new this(n,r),i=0;i<n;i++)for(var o=0;o<r;o++)a.set(i,o,Math.max(t.get(i,o),e.get(i,o)));return a}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new y(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function m(t,e){return t-e}g.prototype.klass="Matrix","undefined"!==typeof Symbol&&(g.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return f(this)}),g.random=g.rand,g.randomInt=g.randInt,g.diagonal=g.diag,g.prototype.diagonal=g.prototype.diag,g.identity=g.eye,g.prototype.negate=g.prototype.neg,g.prototype.tensorProduct=g.prototype.kroneckerProduct;var y=function(t){(0,a.Z)(n,t);var e=(0,i.Z)(n);function n(t,a){var i;if((0,o.Z)(this,n),i=e.call(this),n.isMatrix(t))return(0,r.Z)(i,t.clone());if(Number.isInteger(t)&&t>=0){if(i.data=[],!(Number.isInteger(a)&&a>=0))throw new TypeError("nColumns must be a positive integer");for(var s=0;s<t;s++)i.data.push(new Float64Array(a))}else{if(!(0,u.N)(t))throw new TypeError("First argument must be a positive number or an array");var c=t;if("number"!==typeof(a=(t=c.length)?c[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var l=0;l<t;l++){if(c[l].length!==a)throw new RangeError("Inconsistent array dimensions");if(!c[l].every((function(t){return"number"===typeof t})))throw new TypeError("Input data contains non-numeric values");i.data.push(Float64Array.from(c[l]))}}return i.rows=t,i.columns=a,i}return(0,s.Z)(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return(0,v.zb)(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),(0,v.zb)(this,t,!0),e=Float64Array.from((0,v.on)(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){(0,v.bp)(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var a=t+1;a<this.columns;a++)n[a-1]=this.data[e][a];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){"undefined"===typeof e&&(e=t,t=this.columns),(0,v.bp)(this,t,!0),e=(0,v.Um)(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),a=0;a<t;a++)r[a]=this.data[n][a];for(r[a++]=e[n];a<this.columns+1;a++)r[a]=this.data[n][a-1];this.data[n]=r}return this.columns+=1,this}}]),n}(g);!function(t,e){t.prototype.add=function(t){return"number"===typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+t.get(n,r));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"===typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-t.get(n,r));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"===typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*t.get(n,r));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"===typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/t.get(n,r));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"===typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)%t.get(n,r));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"===typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)&t.get(n,r));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"===typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)|t.get(n,r));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"===typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)^t.get(n,r));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"===typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)<<t.get(n,r));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"===typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>t.get(n,r));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"===typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>>t.get(n,r));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"===typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,Math.pow(this.get(n,r),t.get(n,r)));return this}}(g,y)},24020:function(t,e,n){"use strict";n.d(e,{B4:function(){return h},J5:function(){return l},Um:function(){return s},ZR:function(){return u},bp:function(){return i},cT:function(){return d},g:function(){return c},on:function(){return o},zb:function(){return a}});var r=n(78061);function a(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function i(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function o(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function s(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function u(t,e){if(!(0,r.N)(e))throw new TypeError("row indices must be an array");for(var n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function c(t,e){if(!(0,r.N)(e))throw new TypeError("column indices must be an array");for(var n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function l(t,e,n,r,a){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(f("startRow",e),f("endRow",n),f("startColumn",r),f("endColumn",a),e>n||r>a||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||a<0||a>=t.columns)throw new RangeError("Submatrix indices are out of range")}function h(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function f(t,e){if("number"!==typeof e)throw new TypeError("".concat(t," must be a number"))}function d(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}},17690:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(43144),a=n(15671),i=n(60136),o=n(29388),s=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t,r,i){var o;return(0,a.Z)(this,n),(o=e.call(this)).matrix=t,o.rows=r,o.columns=i,o}return(0,r.Z)(n)}(n(61730).X)},45861:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,r.Z)(this,n),e.call(this,t,t.columns,t.rows)}return(0,a.Z)(n,[{key:"set",value:function(t,e,n){return this.matrix.set(e,t,n),this}},{key:"get",value:function(t,e){return this.matrix.get(e,t)}}]),n}(n(17690).Z)},70378:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this)).data=t,a.rows=t.length,a.columns=t[0].length,a}return(0,a.Z)(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}]),n}(n(61730).X)},25848:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(78061);function a(t,e){if(!(0,r.N)(t)||!(0,r.N)(e))throw new TypeError("x and y must be arrays");if(t.length!==e.length)throw new RangeError("x and y arrays must have the same length")}},49295:function(t,e,n){"use strict";n.d(e,{ZP:function(){return o}});var r=n(15671),a=n(43144),i=n(78061),o=function(){function t(){if((0,r.Z)(this,t),(this instanceof t?this.constructor:void 0)===t)throw new Error("BaseRegression must be subclassed")}return(0,a.Z)(t,[{key:"predict",value:function(t){if("number"===typeof t)return this._predict(t);if((0,i.N)(t)){for(var e=[],n=0;n<t.length;n++)e.push(this._predict(t[n]));return e}throw new TypeError("x must be a number or array")}},{key:"_predict",value:function(){throw new Error("_predict must be implemented")}},{key:"train",value:function(){}},{key:"toString",value:function(){return""}},{key:"toLaTeX",value:function(){return""}},{key:"score",value:function(t,e){if(!(0,i.N)(t)||!(0,i.N)(e)||t.length!==e.length)throw new Error("x and y must be arrays of the same length");for(var n=t.length,r=new Array(n),a=0;a<n;a++)r[a]=this._predict(t[a]);for(var o=0,s=0,u=0,c=0,l=0,h=0,f=0,d=0;d<n;d++)o+=r[d],s+=e[d],l+=r[d]*r[d],h+=e[d]*e[d],f+=r[d]*e[d],0!==e[d]&&(u+=(e[d]-r[d])*(e[d]-r[d])/e[d]),c+=(e[d]-r[d])*(e[d]-r[d]);var p=(n*f-o*s)/Math.sqrt((n*l-o*o)*(n*h-s*s));return{r:p,r2:p*p,chi2:u,rmsd:Math.sqrt(c/n)}}}]),t}()},76558:function(t,e,n){"use strict";function r(t,e){return t<0?(t=0-t,"- ".concat("number"===typeof e?t.toPrecision(e):t.toString())):"number"===typeof e?t.toPrecision(e):t.toString()}n.d(e,{Z:function(){return r}})},76997:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(15671),a=n(43144),i=n(97326),o=n(60136),s=n(29388),u=n(61730),c=n(45861),l=n(59222),h=n(25848),f=n(76558),d=function(t){(0,o.Z)(n,t);var e=(0,s.Z)(n);function n(t,a,o){var s;return(0,r.Z)(this,n),s=e.call(this),!0===t?(s.degree=a.degree,s.powers=a.powers,s.coefficients=a.coefficients):((0,h.Z)(t,a),function(t,e,n,r){var a,i=e.length;if(Array.isArray(r))r=(a=r).length;else{r++,a=new Array(r);for(var o=0;o<r;o++)a[o]=o}for(var s=new u.Z(i,r),h=new u.Z([n]),f=0;f<r;f++)for(var d=0;d<i;d++)0===a[f]?s.set(d,f,1):s.set(d,f,Math.pow(e[d],a[f]));var p=new c.Z(s),v=p.mmul(s),g=p.mmul(new c.Z(h));t.degree=r-1,t.powers=a,t.coefficients=(0,l.F)(v,g).to1DArray()}((0,i.Z)(s),t,a,o)),s}return(0,a.Z)(n,[{key:"_predict",value:function(t){for(var e=0,n=0;n<this.powers.length;n++)e+=this.coefficients[n]*Math.pow(t,this.powers[n]);return e}},{key:"toJSON",value:function(){return{name:"polynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}},{key:"toString",value:function(t){return this._toFormula(t,!1)}},{key:"toLaTeX",value:function(t){return this._toFormula(t,!0)}},{key:"_toFormula",value:function(t,e){var n="^",r="",a=" * ";e&&(n="^{",r="}",a="");for(var i="",o="",s=0;s<this.coefficients.length;s++)o="",0!==this.coefficients[s]&&(o=0===this.powers[s]?(0,f.Z)(this.coefficients[s],t):1===this.powers[s]?"".concat((0,f.Z)(this.coefficients[s],t)+a,"x"):"".concat((0,f.Z)(this.coefficients[s],t)+a,"x").concat(n).concat(this.powers[s]).concat(r),this.coefficients[s]>0&&s!==this.coefficients.length-1?o=" + ".concat(o):s!==this.coefficients.length-1&&(o=" ".concat(o))),i=o+i;return"+"===i.charAt(0)&&(i=i.slice(1)),"f(x) = ".concat(i)}}],[{key:"load",value:function(t){if("polynomialRegression"!==t.name)throw new TypeError("not a polynomial regression model");return new n(!0,t)}}]),n}(n(49295).ZP)},11749:function(t,e,n){"use strict";n(22334)},78148:function(t,e,n){"use strict";n.d(e,{f6:function(){return a.Z}});var r=n(5407),a=n(99178);n(65657),n(11749),r.Z},99178:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(61730),u=n(59222),c=n(61533),l=n.n(c),h=n(49295),f={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1},d=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t,a,i){var o;if((0,r.Z)(this,n),o=e.call(this),!0===t)o.alpha=a.alpha,o.inputs=a.inputs,o.kernelType=a.kernelType,o.kernelOptions=a.kernelOptions,o.kernel=new(l())(a.kernelType,a.kernelOptions);else{t=s.Z.checkMatrix(t),i=Object.assign({},f,i);var c=new(l())(i.kernelType,i.kernelOptions),h=c.compute(t),d=t.rows;h.add(s.Z.eye(d,d).mul(i.lambda)),o.alpha=(0,u.F)(h,a),o.inputs=t,o.kernelType=i.kernelType,o.kernelOptions=i.kernelOptions,o.kernel=c}return o}return(0,a.Z)(n,[{key:"_predict",value:function(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha).getRow(0)}},{key:"toJSON",value:function(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}}],[{key:"load",value:function(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new n(!0,t)}}]),n}(h.ZP)},65657:function(t,e,n){"use strict"},5407:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(76558),u=n(49295),c=n(76997),l=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t,a,i){var o;if((0,r.Z)(this,n),o=e.call(this),!0===t)o.A=a.A,o.M=a.M;else{if(t.length!==a.length)throw new RangeError("input and output array have a different length");var s=new c.Z(t,a,[i]);o.A=s.coefficients[0],o.M=i}return o}return(0,a.Z)(n,[{key:"_predict",value:function(t){return this.A*Math.pow(t,this.M)}},{key:"toJSON",value:function(){return{name:"potentialRegression",A:this.A,M:this.M}}},{key:"toString",value:function(t){return"f(x) = ".concat((0,s.Z)(this.A,t)," * x^").concat(this.M)}},{key:"toLaTeX",value:function(t){return this.M>=0?"f(x) = ".concat((0,s.Z)(this.A,t),"x^{").concat(this.M,"}"):"f(x) = \\frac{".concat((0,s.Z)(this.A,t),"}{x^{").concat(-this.M,"}}")}}],[{key:"load",value:function(t){if("potentialRegression"!==t.name)throw new TypeError("not a potential regression model");return new n(!0,t)}}]),n}(u.ZP)},65960:function(t,e,n){"use strict";function r(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sorted||(t=t.slice().sort(i));for(var e=t.length,n=new Array(2*e),r=0,o=0;o<e;o++){for(var s=t[o];r>=2&&a(n[r-2],n[r-1],s)<=0;)r--;n[r++]=s}for(var u=r+1,c=e-2;c>=0;c--){for(var l=t[c];r>=u&&a(n[r-2],n[r-1],l)<=0;)r--;n[r++]=l}return n.slice(0,r-1)}function a(t,e,n){return(e[1]-t[1])*(n[0]-t[0])-(e[0]-t[0])*(n[1]-t[1])}function i(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}n.d(e,{Z:function(){return r}})},40049:function(t){t.exports=function(t,e){t=t||0;for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n}},21257:function(t){t.exports=function(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1)}},89010:function(t){t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,a){if("function"!==typeof r)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:r,ctx:a}),t},off:function(n,r){if("undefined"===typeof n)return e=Object.create(null),t;if(e[n])if("function"!==typeof r)delete e[n];else for(var a=e[n],i=0;i<a.length;++i)a[i].callback===r&&a.splice(i,1);return t},fire:function(n){var r,a=e[n];if(!a)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<a.length;++i){var o=a[i];o.callback.apply(o.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},41700:function(t,e,n){t.exports=function(t){"uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);if("function"!==typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=[],c={},l=0,h=t.multigraph?function(t,e,n){var r=u(t,e),a=c.hasOwnProperty(r);if(a||C(t,e)){a||(c[r]=0);var i="@"+ ++c[r];r=u(t+i,e+i)}return new s(t,e,n,r)}:function(t,e,n){var r=u(t,e);return new s(t,e,n,r)},f=[],d=E,p=E,v=E,g=E,m={addNode:w,addLink:function(t,e,r){v();var a=x(t)||w(t),i=x(e)||w(e),s=h(t,e,r);n.push(s),o(a,s),t!==e&&o(i,s);return d(s,"add"),g(),s},removeLink:_,removeNode:k,getNode:x,getNodeCount:I,getLinkCount:S,getLinksCount:S,getNodesCount:I,getLinks:function(t){var e=x(t);return e?e.links:null},forEachNode:N,forEachLinkedNode:function(t,n,r){var a=x(t);if(a&&a.links&&"function"===typeof n)return r?function(t,n,r){for(var a=0;a<t.length;++a){var i=t[a];if(i.fromId===n&&r(e.get(i.toId),i))return!0}}(a.links,t,n):function(t,n,r){for(var a=0;a<t.length;++a){var i=t[a],o=i.fromId===n?i.toId:i.fromId;if(r(e.get(o),i))return!0}}(a.links,t,n)},forEachLink:function(t){var e,r;if("function"===typeof t)for(e=0,r=n.length;e<r;++e)t(n[e])},beginUpdate:v,endUpdate:g,clear:function(){v(),N((function(t){k(t.id)})),g()},hasLink:C,hasNode:x,getLink:C};return r(m),function(){var t=m.on;function e(){return m.beginUpdate=v=A,m.endUpdate=g=T,d=y,p=b,m.on=t,t.apply(m,arguments)}m.on=e}(),m;function y(t,e){f.push({link:t,changeType:e})}function b(t,e){f.push({node:t,changeType:e})}function w(t,n){if(void 0===t)throw new Error("Invalid node identifier");v();var r=x(t);return r?(r.data=n,p(r,"update")):(r=new i(t,n),p(r,"add")),e.set(t,r),g(),r}function x(t){return e.get(t)}function k(t){var n=x(t);if(!n)return!1;v();var r=n.links;if(r){n.links=null;for(var a=0;a<r.length;++a)_(r[a])}return e.delete(t),p(n,"remove"),g(),!0}function I(){return e.size}function S(){return n.length}function _(t){if(!t)return!1;var e=a(t,n);if(e<0)return!1;v(),n.splice(e,1);var r=x(t.fromId),i=x(t.toId);return r&&(e=a(t,r.links))>=0&&r.links.splice(e,1),i&&(e=a(t,i.links))>=0&&i.links.splice(e,1),d(t,"remove"),g(),!0}function C(t,e){var n,r=x(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var a=r.links[n];if(a.fromId===t&&a.toId===e)return a}return null}function E(){}function A(){l+=1}function T(){0===(l-=1)&&f.length>0&&(m.fire("changed",f),f.length=0)}function N(t){if("function"!==typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var n=e.values(),r=n.next();!r.done;){if(t(r.value))return!0;r=n.next()}}};var r=n(89010);function a(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function i(t,e){this.id=t,this.links=null,this.data=e}function o(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function u(t,e){return t.toString()+"\ud83d\udc49 "+e.toString()}},51794:function(t,e,n){"use strict";var r=n(53731),a=n(16750),i=n(26639),o=n(93126);function s(t,e,n,r){return function(n,a,i){var o=t(t(e(a[1],i[0]),e(-i[1],a[0])),t(e(n[1],a[0]),e(-a[1],n[0]))),s=t(e(n[1],i[0]),e(-i[1],n[0])),u=r(o,s);return u[u.length-1]}}function u(t,e,n,r){return function(a,i,o,s){var u=t(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),s[2])))),c=t(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),t(n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),o[2])))),l=r(u,c);return l[l.length-1]}}function c(t,e,n,r){return function(a,i,o,s,u){var c=t(t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),i[3]),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-o[3]),n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),s[3]))),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-u[3]),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),a[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),-i[3])))),t(t(n(t(n(t(e(i[1],u[0]),e(-u[1],i[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),u[2]))),s[3]),t(n(t(n(t(e(i[1],s[0]),e(-s[1],i[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),s[2]))),-u[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),a[3]))),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-i[3]),t(n(t(n(t(e(i[1],s[0]),e(-s[1],i[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),s[2]))),o[3]),n(t(n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),o[2]))),-s[3]))))),l=t(t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),a[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),-o[3])),t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-u[3]))),t(t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),a[3]),n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),-i[3])),t(n(t(n(t(e(i[1],u[0]),e(-u[1],i[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),u[2]))),o[3]),n(t(n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]),t(n(t(e(a[1],o[0]),e(-o[1],a[0])),-i[2]),n(t(e(a[1],i[0]),e(-i[1],a[0])),o[2]))),-u[3])))),h=r(c,l);return h[h.length-1]}}function l(t){return(3===t?s:4===t?u:c)(a,r,i,o)}var h=l(3),f=l(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,a=(t[1]-n[1])*(e[0]-n[0]),i=(t[0]-n[0])*(e[1]-n[1]),o=a-i;if(a>0){if(i<=0)return o;r=a+i}else{if(!(a<0))return o;if(i>=0)return o;r=-(a+i)}var s=33306690738754716e-32*r;return o>=s||o<=-s?o:h(t,e,n)},function(t,e,n,r){var a=t[0]-r[0],i=e[0]-r[0],o=n[0]-r[0],s=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],h=e[2]-r[2],d=n[2]-r[2],p=i*c,v=o*u,g=o*s,m=a*c,y=a*u,b=i*s,w=l*(p-v)+h*(g-m)+d*(y-b),x=7771561172376103e-31*((Math.abs(p)+Math.abs(v))*Math.abs(l)+(Math.abs(g)+Math.abs(m))*Math.abs(h)+(Math.abs(y)+Math.abs(b))*Math.abs(d));return w>x||-w>x?w:f(t,e,n,r)}];function p(t){var e=d[t.length];return e||(e=d[t.length]=l(t.length)),e.apply(void 0,t)}function v(t,e,n,r,a,i,o){return function(e,n,s,u,c){switch(arguments.length){case 0:case 1:return 0;case 2:return r(e,n);case 3:return a(e,n,s);case 4:return i(e,n,s,u);case 5:return o(e,n,s,u,c)}for(var l=new Array(arguments.length),h=0;h<arguments.length;++h)l[h]=arguments[h];return t(l)}}!function(){for(;d.length<=5;)d.push(l(d.length));t.exports=v.apply(void 0,[p].concat(d));for(var e=0;e<=5;++e)t.exports[e]=d[e]}()},49689:function(t,e,n){t.exports=function(t,e){for(var n=e[0],a=e[1],i=t.length,o=1,s=i,u=0,c=i-1;u<s;c=u++){var l=t[u],h=t[c],f=l[1],d=h[1];if(d<f){if(d<a&&a<f){if(0===(p=r(l,h,e)))return 0;o^=0<p|0}else if(a===f){if(f<t[(u+1)%i][1]){if(0===(p=r(l,h,e)))return 0;o^=0<p|0}}}else if(f<d){if(f<a&&a<d){if(0===(p=r(l,h,e)))return 0;o^=p<0|0}else if(a===f){if(t[(u+1)%i][1]<f){var p;if(0===(p=r(l,h,e)))return 0;o^=p<0|0}}}else if(a===f){var v=Math.min(l[0],h[0]),g=Math.max(l[0],h[0]);if(0===u){for(;c>0;){var m=(c+i-1)%i;if((w=t[m])[1]!==a)break;var y=w[0];v=Math.min(v,y),g=Math.max(g,y),c=m}if(0===c)return v<=n&&n<=g?0:1;s=c+1}for(var b=t[(c+i-1)%i][1];u+1<s;){var w;if((w=t[u+1])[1]!==a)break;y=w[0];v=Math.min(v,y),g=Math.max(g,y),u+=1}if(v<=n&&n<=g)return 0;var x=t[(u+1)%i][1];n<v&&b<a!==x<a&&(o^=1)}}return 2*o-1};var r=n(51794)},26639:function(t,e,n){"use strict";var r=n(53731),a=n(91764);t.exports=function(t,e){var n=t.length;if(1===n){var i=r(t[0],e);return i[0]?i:[i[1]]}var o=new Array(2*n),s=[.1,.1],u=[.1,.1],c=0;r(t[0],e,s),s[0]&&(o[c++]=s[0]);for(var l=1;l<n;++l){r(t[l],e,u);var h=s[1];a(h,u[0],s),s[0]&&(o[c++]=s[0]);var f=u[1],d=s[1],p=f+d,v=d-(p-f);s[1]=p,v&&(o[c++]=v)}s[1]&&(o[c++]=s[1]);0===c&&(o[c++]=0);return o.length=c,o}},93126:function(t){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,a=n-r,i=e-r,o=t-a,s=o+i;if(s)return[s,n];return[n]}(t[0],-e[0]);var a,i,o=new Array(n+r),s=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),d=-e[c],p=l(d);f<p?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=d,(c+=1)<r&&(p=l(d=-e[c])));u<n&&f<p||c>=r?(a=h,(u+=1)<n&&(f=l(h=t[u]))):(a=d,(c+=1)<r&&(p=l(d=-e[c])));var v,g,m=a+i,y=m-a,b=i-y,w=b,x=m;for(;u<n&&c<r;)f<p?(a=h,(u+=1)<n&&(f=l(h=t[u]))):(a=d,(c+=1)<r&&(p=l(d=-e[c]))),(b=(i=w)-(y=(m=a+i)-a))&&(o[s++]=b),w=x-((v=x+m)-(g=v-x))+(m-g),x=v;for(;u<n;)(b=(i=w)-(y=(m=(a=h)+i)-a))&&(o[s++]=b),w=x-((v=x+m)-(g=v-x))+(m-g),x=v,(u+=1)<n&&(h=t[u]);for(;c<r;)(b=(i=w)-(y=(m=(a=d)+i)-a))&&(o[s++]=b),w=x-((v=x+m)-(g=v-x))+(m-g),x=v,(c+=1)<r&&(d=-e[c]);w&&(o[s++]=w);x&&(o[s++]=x);s||(o[s++]=0);return o.length=s,o}},16750:function(t){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,a=n-r,i=e-r,o=t-a,s=o+i;if(s)return[s,n];return[n]}(t[0],e[0]);var a,i,o=new Array(n+r),s=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),d=e[c],p=l(d);f<p?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=d,(c+=1)<r&&(p=l(d=e[c])));u<n&&f<p||c>=r?(a=h,(u+=1)<n&&(f=l(h=t[u]))):(a=d,(c+=1)<r&&(p=l(d=e[c])));var v,g,m=a+i,y=m-a,b=i-y,w=b,x=m;for(;u<n&&c<r;)f<p?(a=h,(u+=1)<n&&(f=l(h=t[u]))):(a=d,(c+=1)<r&&(p=l(d=e[c]))),(b=(i=w)-(y=(m=a+i)-a))&&(o[s++]=b),w=x-((v=x+m)-(g=v-x))+(m-g),x=v;for(;u<n;)(b=(i=w)-(y=(m=(a=h)+i)-a))&&(o[s++]=b),w=x-((v=x+m)-(g=v-x))+(m-g),x=v,(u+=1)<n&&(h=t[u]);for(;c<r;)(b=(i=w)-(y=(m=(a=d)+i)-a))&&(o[s++]=b),w=x-((v=x+m)-(g=v-x))+(m-g),x=v,(c+=1)<r&&(d=e[c]);w&&(o[s++]=w);x&&(o[s++]=x);s||(o[s++]=0);return o.length=s,o}},96699:function(t,e,n){var r=n(22501),a=n(69112),i=n(92132),o=n(20890),s=n(94113),u=n(91725),c=n(63411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,t.exports=c},22501:function(t,e,n){var r;!function(t,a,i){function o(t){var e=this,n=function(){var t=4022871197,e=function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new o(t),r=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.alea=u}(0,t=n.nmd(t),n.amdD)},91725:function(t,e,n){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,a=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^a,e.a=a-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.tychei=u}(0,t=n.nmd(t),n.amdD)},69112:function(t,e,n){var r;!function(t,a,i){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor128=u}(0,t=n.nmd(t),n.amdD)},94113:function(t,e,n){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.w,a=e.X,i=e.i;return e.w=r=r+1640531527|0,n=a[i+34&127],t=a[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=a[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,a,i,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),a=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(e&&e.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;t.w=o,t.X=s,t.i=a}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor4096=u}(0,t=n.nmd(t),n.amdD)},20890:function(t,e,n){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.x,a=e.i;return t=r[a],n=(t^=t>>>7)^t<<24,n^=(t=r[a+1&7])^t>>>10,n^=(t=r[a+3&7])^t>>>3,n^=(t=r[a+4&7])^t<<7,t=r[a+7&7],n^=(t^=t<<13)^t<<9,r[a]=n,e.i=a+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorshift7=u}(0,t=n.nmd(t),n.amdD)},92132:function(t,e,n){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorwow=u}(0,t=n.nmd(t),n.amdD)},63411:function(t,e,n){var r;!function(a,i,o){var s,u=256,c=o.pow(u,6),l=o.pow(2,52),h=2*l,f=u-1;function d(t,e,n){var r=[],f=m(g((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(i)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(u):(t=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(t)),y(t)}catch(r){var e=a.navigator,n=e&&e.plugins;return[+new Date,a,n,a.screen,y(i)]}}():t,3),r),d=new p(r),b=function(){for(var t=d.g(6),e=c,n=0;t<l;)t=(t+n)*u,e*=u,n=d.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,m(y(d.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&v(r,d),t.state=function(){return v(d,{})}),n?(o.random=t,e):t})(b,f,"global"in e?e.global:this==o,e.state)}function p(t){var e,n=t.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+t[a%n]+(e=o[a])],o[i]=e;(r.g=function(t){for(var e,n=0,a=r.i,i=r.j,o=r.S;t--;)e=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+e])+(o[i]=e)];return r.i=a,r.j=i,n})(u)}function v(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var n,r=[],a=typeof t;if(e&&"object"==a)for(n in t)try{r.push(g(t[n],e-1))}catch(i){}return r.length?r:"string"==a?t:t+"\0"}function m(t,e){for(var n,r=t+"",a=0;a<r.length;)e[f&a]=f&(n^=19*e[f&a])+r.charCodeAt(a++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(m(o.random(),i),t.exports){t.exports=d;try{s=n(75042)}catch(b){}}else void 0===(r=function(){return d}.call(e,n,e,t))||(t.exports=r)}("undefined"!==typeof self?self:this,[],Math)},16940:function(t,e,n){var r,a,i;!function(o,s){"use strict";a=[n(44711)],r=function(t){return{backtrace:function(e){var n=[],r=10;"object"===typeof e&&"number"===typeof e.maxStackSize&&(r=e.maxStackSize);for(var a=arguments.callee;a&&n.length<r&&a.arguments;){for(var i=new Array(a.arguments.length),o=0;o<i.length;++o)i[o]=a.arguments[o];/function(?:\s+([\w$]+))+\s*\(/.test(a.toString())?n.push(new t({functionName:RegExp.$1||void 0,args:i})):n.push(new t({args:i}));try{a=a.caller}catch(s){break}}return n}}},void 0===(i="function"===typeof r?r.apply(e,a):r)||(t.exports=i)}()},44711:function(t,e){var n,r,a;!function(i,o){"use strict";r=[],void 0===(a="function"===typeof(n=function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}function n(t){return function(){return this[t]}}var r=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],i=["fileName","functionName","source"],o=["args"],s=["evalOrigin"],u=r.concat(a,i,o,s);function c(t){if(t)for(var n=0;n<u.length;n++)void 0!==t[u[n]]&&this["set"+e(u[n])](t[u[n]])}c.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof c)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new c(t)}},toString:function(){var t=this.getFileName()||"",e=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?t?"[eval] ("+t+":"+e+":"+n+")":"[eval]:"+e+":"+n:r?r+" ("+t+":"+e+":"+n+")":t+":"+e+":"+n}},c.fromString=function(t){var e=t.indexOf("("),n=t.lastIndexOf(")"),r=t.substring(0,e),a=t.substring(e+1,n).split(","),i=t.substring(n+1);if(0===i.indexOf("@"))var o=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),s=o[1],u=o[2],l=o[3];return new c({functionName:r,args:a||void 0,fileName:s,lineNumber:u||void 0,columnNumber:l||void 0})};for(var l=0;l<r.length;l++)c.prototype["get"+e(r[l])]=n(r[l]),c.prototype["set"+e(r[l])]=function(t){return function(e){this[t]=Boolean(e)}}(r[l]);for(var h=0;h<a.length;h++)c.prototype["get"+e(a[h])]=n(a[h]),c.prototype["set"+e(a[h])]=function(e){return function(n){if(!t(n))throw new TypeError(e+" must be a Number");this[e]=Number(n)}}(a[h]);for(var f=0;f<i.length;f++)c.prototype["get"+e(i[f])]=n(i[f]),c.prototype["set"+e(i[f])]=function(t){return function(e){this[t]=String(e)}}(i[f]);return c})?n.apply(e,r):n)||(t.exports=a)}()},67818:function(t,e,n){var r=n(6629),a=Object.prototype.hasOwnProperty;function i(){this._array=[],this._set=Object.create(null)}i.fromArray=function(t,e){for(var n=new i,r=0,a=t.length;r<a;r++)n.add(t[r],e);return n},i.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(t,e){var n=r.toSetString(t),i=a.call(this._set,n),o=this._array.length;i&&!e||this._array.push(t),i||(this._set[n]=o)},i.prototype.has=function(t){var e=r.toSetString(t);return a.call(this._set,e)},i.prototype.indexOf=function(t){var e=r.toSetString(t);if(a.call(this._set,e))return this._set[e];throw new Error('"'+t+'" is not in the set.')},i.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},i.prototype.toArray=function(){return this._array.slice()},e.I=i},47040:function(t,e,n){var r=n(38217);e.encode=function(t){var e,n="",a=function(t){return t<0?1+(-t<<1):0+(t<<1)}(t);do{e=31&a,(a>>>=5)>0&&(e|=32),n+=r.encode(e)}while(a>0);return n},e.decode=function(t,e,n){var a,i,o=t.length,s=0,u=0;do{if(e>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=r.decode(t.charCodeAt(e++))))throw new Error("Invalid base64 digit: "+t.charAt(e-1));a=!!(32&i),s+=(i&=31)<<u,u+=5}while(a);n.value=function(t){var e=t>>1;return 1===(1&t)?-e:e}(s),n.rest=e}},38217:function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");e.encode=function(t){if(0<=t&&t<n.length)return n[t];throw new TypeError("Must be between 0 and 63: "+t)},e.decode=function(t){return 65<=t&&t<=90?t-65:97<=t&&t<=122?t-97+26:48<=t&&t<=57?t-48+52:43==t?62:47==t?63:-1}},63748:function(t,e){function n(t,r,a,i,o,s){var u=Math.floor((r-t)/2)+t,c=o(a,i[u],!0);return 0===c?u:c>0?r-u>1?n(u,r,a,i,o,s):s==e.LEAST_UPPER_BOUND?r<i.length?r:-1:u:u-t>1?n(t,u,a,i,o,s):s==e.LEAST_UPPER_BOUND?u:t<0?-1:t}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(t,r,a,i){if(0===r.length)return-1;var o=n(-1,r.length,t,r,a,i||e.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&0===a(r[o],r[o-1],!0);)--o;return o}},53911:function(t,e,n){var r=n(6629);function a(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}a.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},a.prototype.add=function(t){!function(t,e){var n=t.generatedLine,a=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return a>n||a==n&&o>=i||r.compareByGeneratedPositionsInflated(t,e)<=0}(this._last,t)?(this._sorted=!1,this._array.push(t)):(this._last=t,this._array.push(t))},a.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e.H=a},88951:function(t,e){function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e,a,i){if(a<i){var o=a-1;n(t,(l=a,h=i,Math.round(l+Math.random()*(h-l))),i);for(var s=t[i],u=a;u<i;u++)e(t[u],s)<=0&&n(t,o+=1,u);n(t,o+1,u);var c=o+1;r(t,e,a,c-1),r(t,e,c+1,i)}var l,h}e.U=function(t,e){r(t,e,0,t.length-1)}},59819:function(t,e,n){var r=n(6629),a=n(63748),i=n(67818).I,o=n(47040),s=n(88951).U;function u(t){var e=t;return"string"===typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,""))),null!=e.sections?new h(e):new c(e)}function c(t){var e=t;"string"===typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,"")));var n=r.getArg(e,"version"),a=r.getArg(e,"sources"),o=r.getArg(e,"names",[]),s=r.getArg(e,"sourceRoot",null),u=r.getArg(e,"sourcesContent",null),c=r.getArg(e,"mappings"),l=r.getArg(e,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a=a.map(String).map(r.normalize).map((function(t){return s&&r.isAbsolute(s)&&r.isAbsolute(t)?r.relative(s,t):t})),this._names=i.fromArray(o.map(String),!0),this._sources=i.fromArray(a,!0),this.sourceRoot=s,this.sourcesContent=u,this._mappings=c,this.file=l}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function h(t){var e=t;"string"===typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,"")));var n=r.getArg(e,"version"),a=r.getArg(e,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new i,this._names=new i;var o={line:-1,column:0};this._sections=a.map((function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var e=r.getArg(t,"offset"),n=r.getArg(e,"line"),a=r.getArg(e,"column");if(n<o.line||n===o.line&&a<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=e,{generatedOffset:{generatedLine:n+1,generatedColumn:a+1},consumer:new u(r.getArg(t,"map"))}}))}u.fromSourceMap=function(t){return c.fromSourceMap(t)},u.prototype._version=3,u.prototype.__generatedMappings=null,Object.defineProperty(u.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),u.prototype.__originalMappings=null,Object.defineProperty(u.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),u.prototype._charIsMappingSeparator=function(t,e){var n=t.charAt(e);return";"===n||","===n},u.prototype._parseMappings=function(t,e){throw new Error("Subclasses must implement _parseMappings")},u.GENERATED_ORDER=1,u.ORIGINAL_ORDER=2,u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.prototype.eachMapping=function(t,e,n){var a,i=e||null;switch(n||u.GENERATED_ORDER){case u.GENERATED_ORDER:a=this._generatedMappings;break;case u.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;a.map((function(t){var e=null===t.source?null:this._sources.at(t.source);return null!=e&&null!=o&&(e=r.join(o,e)),{source:e,generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}}),this).forEach(t,i)},u.prototype.allGeneratedPositionsFor=function(t){var e=r.getArg(t,"line"),n={source:r.getArg(t,"source"),originalLine:e,originalColumn:r.getArg(t,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(void 0===t.column)for(var u=s.originalLine;s&&s.originalLine===u;)i.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var c=s.originalColumn;s&&s.originalLine===e&&s.originalColumn==c;)i.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i},e.SourceMapConsumer=u,c.prototype=Object.create(u.prototype),c.prototype.consumer=u,c.fromSourceMap=function(t){var e=Object.create(c.prototype),n=e._names=i.fromArray(t._names.toArray(),!0),a=e._sources=i.fromArray(t._sources.toArray(),!0);e.sourceRoot=t._sourceRoot,e.sourcesContent=t._generateSourcesContent(e._sources.toArray(),e.sourceRoot),e.file=t._file;for(var o=t._mappings.toArray().slice(),u=e.__generatedMappings=[],h=e.__originalMappings=[],f=0,d=o.length;f<d;f++){var p=o[f],v=new l;v.generatedLine=p.generatedLine,v.generatedColumn=p.generatedColumn,p.source&&(v.source=a.indexOf(p.source),v.originalLine=p.originalLine,v.originalColumn=p.originalColumn,p.name&&(v.name=n.indexOf(p.name)),h.push(v)),u.push(v)}return s(e.__originalMappings,r.compareByOriginalPositions),e},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._sources.toArray().map((function(t){return null!=this.sourceRoot?r.join(this.sourceRoot,t):t}),this)}}),c.prototype._parseMappings=function(t,e){for(var n,a,i,u,c,h=1,f=0,d=0,p=0,v=0,g=0,m=t.length,y=0,b={},w={},x=[],k=[];y<m;)if(";"===t.charAt(y))h++,y++,f=0;else if(","===t.charAt(y))y++;else{for((n=new l).generatedLine=h,u=y;u<m&&!this._charIsMappingSeparator(t,u);u++);if(i=b[a=t.slice(y,u)])y+=a.length;else{for(i=[];y<u;)o.decode(t,y,w),c=w.value,y=w.rest,i.push(c);if(2===i.length)throw new Error("Found a source, but no line and column");if(3===i.length)throw new Error("Found a source and line, but no column");b[a]=i}n.generatedColumn=f+i[0],f=n.generatedColumn,i.length>1&&(n.source=v+i[1],v+=i[1],n.originalLine=d+i[2],d=n.originalLine,n.originalLine+=1,n.originalColumn=p+i[3],p=n.originalColumn,i.length>4&&(n.name=g+i[4],g+=i[4])),k.push(n),"number"===typeof n.originalLine&&x.push(n)}s(k,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=k,s(x,r.compareByOriginalPositions),this.__originalMappings=x},c.prototype._findMapping=function(t,e,n,r,i,o){if(t[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[n]);if(t[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[r]);return a.search(t,e,i,o)},c.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var e=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var n=this._generatedMappings[t+1];if(e.generatedLine===n.generatedLine){e.lastGeneratedColumn=n.generatedColumn-1;continue}}e.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(t){var e={generatedLine:r.getArg(t,"line"),generatedColumn:r.getArg(t,"column")},n=this._findMapping(e,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(t,"bias",u.GREATEST_LOWER_BOUND));if(n>=0){var a=this._generatedMappings[n];if(a.generatedLine===e.generatedLine){var i=r.getArg(a,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=r.join(this.sourceRoot,i)));var o=r.getArg(a,"name",null);return null!==o&&(o=this._names.at(o)),{source:i,line:r.getArg(a,"originalLine",null),column:r.getArg(a,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(t){return null==t})))},c.prototype.sourceContentFor=function(t,e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var a=t.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!n.path||"/"==n.path)&&this._sources.has("/"+t))return this.sourcesContent[this._sources.indexOf("/"+t)]}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(t){var e=r.getArg(t,"source");if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),!this._sources.has(e))return{line:null,column:null,lastColumn:null};var n={source:e=this._sources.indexOf(e),originalLine:r.getArg(t,"line"),originalColumn:r.getArg(t,"column")},a=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(t,"bias",u.GREATEST_LOWER_BOUND));if(a>=0){var i=this._originalMappings[a];if(i.source===n.source)return{line:r.getArg(i,"generatedLine",null),column:r.getArg(i,"generatedColumn",null),lastColumn:r.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},h.prototype=Object.create(u.prototype),h.prototype.constructor=u,h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}}),h.prototype.originalPositionFor=function(t){var e={generatedLine:r.getArg(t,"line"),generatedColumn:r.getArg(t,"column")},n=a.search(e,this._sections,(function(t,e){var n=t.generatedLine-e.generatedOffset.generatedLine;return n||t.generatedColumn-e.generatedOffset.generatedColumn})),i=this._sections[n];return i?i.consumer.originalPositionFor({line:e.generatedLine-(i.generatedOffset.generatedLine-1),column:e.generatedColumn-(i.generatedOffset.generatedLine===e.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(t){return t.consumer.hasContentsOfAllSources()}))},h.prototype.sourceContentFor=function(t,e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(t,!0);if(r)return r}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(t){for(var e=0;e<this._sections.length;e++){var n=this._sections[e];if(-1!==n.consumer.sources.indexOf(r.getArg(t,"source"))){var a=n.consumer.generatedPositionFor(t);if(a)return{line:a.line+(n.generatedOffset.generatedLine-1),column:a.column+(n.generatedOffset.generatedLine===a.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},h.prototype._parseMappings=function(t,e){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var a=this._sections[n],i=a.consumer._generatedMappings,o=0;o<i.length;o++){var u=i[o],c=a.consumer._sources.at(u.source);null!==a.consumer.sourceRoot&&(c=r.join(a.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var l=a.consumer._names.at(u.name);this._names.add(l),l=this._names.indexOf(l);var h={source:c,generatedLine:u.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(a.generatedOffset.generatedLine===u.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:l};this.__generatedMappings.push(h),"number"===typeof h.originalLine&&this.__originalMappings.push(h)}s(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),s(this.__originalMappings,r.compareByOriginalPositions)}},41126:function(t,e,n){var r=n(47040),a=n(6629),i=n(67818).I,o=n(53911).H;function s(t){t||(t={}),this._file=a.getArg(t,"file",null),this._sourceRoot=a.getArg(t,"sourceRoot",null),this._skipValidation=a.getArg(t,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new o,this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(t){var e=t.sourceRoot,n=new s({file:t.file,sourceRoot:e});return t.eachMapping((function(t){var r={generated:{line:t.generatedLine,column:t.generatedColumn}};null!=t.source&&(r.source=t.source,null!=e&&(r.source=a.relative(e,r.source)),r.original={line:t.originalLine,column:t.originalColumn},null!=t.name&&(r.name=t.name)),n.addMapping(r)})),t.sources.forEach((function(e){var r=t.sourceContentFor(e);null!=r&&n.setSourceContent(e,r)})),n},s.prototype.addMapping=function(t){var e=a.getArg(t,"generated"),n=a.getArg(t,"original",null),r=a.getArg(t,"source",null),i=a.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,n,r,i),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=i&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:i})},s.prototype.setSourceContent=function(t,e){var n=t;null!=this._sourceRoot&&(n=a.relative(this._sourceRoot,n)),null!=e?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[a.toSetString(n)]=e):this._sourcesContents&&(delete this._sourcesContents[a.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(t,e,n){var r=e;if(null==e){if(null==t.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=t.file}var o=this._sourceRoot;null!=o&&(r=a.relative(o,r));var s=new i,u=new i;this._mappings.unsortedForEach((function(e){if(e.source===r&&null!=e.originalLine){var i=t.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=i.source&&(e.source=i.source,null!=n&&(e.source=a.join(n,e.source)),null!=o&&(e.source=a.relative(o,e.source)),e.originalLine=i.line,e.originalColumn=i.column,null!=i.name&&(e.name=i.name))}var c=e.source;null==c||s.has(c)||s.add(c);var l=e.name;null==l||u.has(l)||u.add(l)}),this),this._sources=s,this._names=u,t.sources.forEach((function(e){var r=t.sourceContentFor(e);null!=r&&(null!=n&&(e=a.join(n,e)),null!=o&&(e=a.relative(o,e)),this.setSourceContent(e,r))}),this)},s.prototype._validateMapping=function(t,e,n,r){if((!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0)||e||n||r)&&!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:n,original:e,name:r}))},s.prototype._serializeMappings=function(){for(var t,e,n,i,o=0,s=1,u=0,c=0,l=0,h=0,f="",d=this._mappings.toArray(),p=0,v=d.length;p<v;p++){if(t="",(e=d[p]).generatedLine!==s)for(o=0;e.generatedLine!==s;)t+=";",s++;else if(p>0){if(!a.compareByGeneratedPositionsInflated(e,d[p-1]))continue;t+=","}t+=r.encode(e.generatedColumn-o),o=e.generatedColumn,null!=e.source&&(i=this._sources.indexOf(e.source),t+=r.encode(i-h),h=i,t+=r.encode(e.originalLine-1-c),c=e.originalLine-1,t+=r.encode(e.originalColumn-u),u=e.originalColumn,null!=e.name&&(n=this._names.indexOf(e.name),t+=r.encode(n-l),l=n)),f+=t}return f},s.prototype._generateSourcesContent=function(t,e){return t.map((function(t){if(!this._sourcesContents)return null;null!=e&&(t=a.relative(e,t));var n=a.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},s.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(t.file=this._file),null!=this._sourceRoot&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.SourceMapGenerator=s},21469:function(t,e,n){var r=n(41126).SourceMapGenerator,a=n(6629),i=/(\r?\n)/,o="$$$isSourceNode$$$";function s(t,e,n,r,a){this.children=[],this.sourceContents={},this.line=null==t?null:t,this.column=null==e?null:e,this.source=null==n?null:n,this.name=null==a?null:a,this[o]=!0,null!=r&&this.add(r)}s.fromStringWithSourceMap=function(t,e,n){var r=new s,o=t.split(i),u=function(){return o.shift()+(o.shift()||"")},c=1,l=0,h=null;return e.eachMapping((function(t){if(null!==h){if(!(c<t.generatedLine)){var e=(n=o[0]).substr(0,t.generatedColumn-l);return o[0]=n.substr(t.generatedColumn-l),l=t.generatedColumn,f(h,e),void(h=t)}f(h,u()),c++,l=0}for(;c<t.generatedLine;)r.add(u()),c++;if(l<t.generatedColumn){var n=o[0];r.add(n.substr(0,t.generatedColumn)),o[0]=n.substr(t.generatedColumn),l=t.generatedColumn}h=t}),this),o.length>0&&(h&&f(h,u()),r.add(o.join(""))),e.sources.forEach((function(t){var i=e.sourceContentFor(t);null!=i&&(null!=n&&(t=a.join(n,t)),r.setSourceContent(t,i))})),r;function f(t,e){if(null===t||void 0===t.source)r.add(e);else{var i=n?a.join(n,t.source):t.source;r.add(new s(t.originalLine,t.originalColumn,i,e,t.name))}}},s.prototype.add=function(t){if(Array.isArray(t))t.forEach((function(t){this.add(t)}),this);else{if(!t[o]&&"string"!==typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);t&&this.children.push(t)}return this},s.prototype.prepend=function(t){if(Array.isArray(t))for(var e=t.length-1;e>=0;e--)this.prepend(t[e]);else{if(!t[o]&&"string"!==typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);this.children.unshift(t)}return this},s.prototype.walk=function(t){for(var e,n=0,r=this.children.length;n<r;n++)(e=this.children[n])[o]?e.walk(t):""!==e&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(t){var e,n,r=this.children.length;if(r>0){for(e=[],n=0;n<r-1;n++)e.push(this.children[n]),e.push(t);e.push(this.children[n]),this.children=e}return this},s.prototype.replaceRight=function(t,e){var n=this.children[this.children.length-1];return n[o]?n.replaceRight(t,e):"string"===typeof n?this.children[this.children.length-1]=n.replace(t,e):this.children.push("".replace(t,e)),this},s.prototype.setSourceContent=function(t,e){this.sourceContents[a.toSetString(t)]=e},s.prototype.walkSourceContents=function(t){for(var e=0,n=this.children.length;e<n;e++)this.children[e][o]&&this.children[e].walkSourceContents(t);var r=Object.keys(this.sourceContents);for(e=0,n=r.length;e<n;e++)t(a.fromSetString(r[e]),this.sourceContents[r[e]])},s.prototype.toString=function(){var t="";return this.walk((function(e){t+=e})),t},s.prototype.toStringWithSourceMap=function(t){var e={code:"",line:1,column:0},n=new r(t),a=!1,i=null,o=null,s=null,u=null;return this.walk((function(t,r){e.code+=t,null!==r.source&&null!==r.line&&null!==r.column?(i===r.source&&o===r.line&&s===r.column&&u===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e.line,column:e.column},name:r.name}),i=r.source,o=r.line,s=r.column,u=r.name,a=!0):a&&(n.addMapping({generated:{line:e.line,column:e.column}}),i=null,a=!1);for(var c=0,l=t.length;c<l;c++)10===t.charCodeAt(c)?(e.line++,e.column=0,c+1===l?(i=null,a=!1):a&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e.line,column:e.column},name:r.name})):e.column++})),this.walkSourceContents((function(t,e){n.setSourceContent(t,e)})),{code:e.code,map:n}},e.SourceNode=s},6629:function(t,e){e.getArg=function(t,e,n){if(e in t)return t[e];if(3===arguments.length)return n;throw new Error('"'+e+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function a(t){var e=t.match(n);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function i(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}function o(t){var n=t,r=a(t);if(r){if(!r.path)return t;n=r.path}for(var o,s=e.isAbsolute(n),u=n.split(/\/+/),c=0,l=u.length-1;l>=0;l--)"."===(o=u[l])?u.splice(l,1):".."===o?c++:c>0&&(""===o?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return""===(n=u.join("/"))&&(n=s?"/":"."),r?(r.path=n,i(r)):n}e.urlParse=a,e.urlGenerate=i,e.normalize=o,e.join=function(t,e){""===t&&(t="."),""===e&&(e=".");var n=a(e),s=a(t);if(s&&(t=s.path||"/"),n&&!n.scheme)return s&&(n.scheme=s.scheme),i(n);if(n||e.match(r))return e;if(s&&!s.host&&!s.path)return s.host=e,i(s);var u="/"===e.charAt(0)?e:o(t.replace(/\/+$/,"")+"/"+e);return s?(s.path=u,i(s)):u},e.isAbsolute=function(t){return"/"===t.charAt(0)||!!t.match(n)},e.relative=function(t,e){""===t&&(t="."),t=t.replace(/\/$/,"");for(var n=0;0!==e.indexOf(t+"/");){var r=t.lastIndexOf("/");if(r<0)return e;if((t=t.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)};var s=!("__proto__"in Object.create(null));function u(t){return t}function c(t){if(!t)return!1;var e=t.length;if(e<9)return!1;if(95!==t.charCodeAt(e-1)||95!==t.charCodeAt(e-2)||111!==t.charCodeAt(e-3)||116!==t.charCodeAt(e-4)||111!==t.charCodeAt(e-5)||114!==t.charCodeAt(e-6)||112!==t.charCodeAt(e-7)||95!==t.charCodeAt(e-8)||95!==t.charCodeAt(e-9))return!1;for(var n=e-10;n>=0;n--)if(36!==t.charCodeAt(n))return!1;return!0}function l(t,e){return t===e?0:t>e?1:-1}e.toSetString=s?u:function(t){return c(t)?"$"+t:t},e.fromSetString=s?u:function(t){return c(t)?t.slice(1):t},e.compareByOriginalPositions=function(t,e,n){var r=t.source-e.source;return 0!==r||0!==(r=t.originalLine-e.originalLine)||0!==(r=t.originalColumn-e.originalColumn)||n||0!==(r=t.generatedColumn-e.generatedColumn)||0!==(r=t.generatedLine-e.generatedLine)?r:t.name-e.name},e.compareByGeneratedPositionsDeflated=function(t,e,n){var r=t.generatedLine-e.generatedLine;return 0!==r||0!==(r=t.generatedColumn-e.generatedColumn)||n||0!==(r=t.source-e.source)||0!==(r=t.originalLine-e.originalLine)||0!==(r=t.originalColumn-e.originalColumn)?r:t.name-e.name},e.compareByGeneratedPositionsInflated=function(t,e){var n=t.generatedLine-e.generatedLine;return 0!==n||0!==(n=t.generatedColumn-e.generatedColumn)||0!==(n=l(t.source,e.source))||0!==(n=t.originalLine-e.originalLine)||0!==(n=t.originalColumn-e.originalColumn)?n:l(t.name,e.name)}},73803:function(t,e,n){e.SourceMapGenerator=n(41126).SourceMapGenerator,e.SourceMapConsumer=n(59819).SourceMapConsumer,e.SourceNode=n(21469).SourceNode},61988:function(t,e,n){var r,a,i;!function(o,s){"use strict";a=[n(73803),n(44711)],void 0===(i="function"===typeof(r=function(t,e){function n(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("get",t),r.onerror=n,r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||"file://"===t.substr(0,7)&&r.responseText?e(r.responseText):n(new Error("HTTP status: "+r.status+" retrieving "+t)))},r.send()}))}function r(t){if("undefined"!==typeof window&&window.atob)return window.atob(t);throw new Error("You must supply a polyfill for window.atob in this environment")}function a(t){if("undefined"!==typeof JSON&&JSON.parse)return JSON.parse(t);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(t,e){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=t.split("\n"),a="",i=Math.min(e,20),o=0;o<i;++o){var s=r[e-o-1],u=s.indexOf("//");if(u>=0&&(s=s.substr(0,u)),s){a=s+a;for(var c=n.length,l=0;l<c;l++){var h=n[l].exec(a);if(h&&h[1])return h[1]}}}}function o(){if("function"!==typeof Object.defineProperty||"function"!==typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function s(t){if("object"!==typeof t)throw new TypeError("Given StackFrame is not an object");if("string"!==typeof t.fileName)throw new TypeError("Given file name is not a String");if("number"!==typeof t.lineNumber||t.lineNumber%1!==0||t.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!==typeof t.columnNumber||t.columnNumber%1!==0||t.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(t){for(var e,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(t);)e=n[1];if(e)return e;throw new Error("sourceMappingURL not found")}function c(t,n,r){return new Promise((function(a,i){var o=n.originalPositionFor({line:t.lineNumber,column:t.columnNumber});if(o.source){var s=n.sourceContentFor(o.source);s&&(r[o.source]=s),a(new e({functionName:o.name||t.functionName,args:t.args,fileName:o.source,lineNumber:o.line,columnNumber:o.column}))}else i(new Error("Could not get original source for given stackframe and source map"))}))}return function l(h){if(!(this instanceof l))return new l(h);h=h||{},this.sourceCache=h.sourceCache||{},this.sourceMapConsumerCache=h.sourceMapConsumerCache||{},this.ajax=h.ajax||n,this._atob=h.atob||r,this._get=function(t){return new Promise(function(e,n){var r="data:"===t.substr(0,5);if(this.sourceCache[t])e(this.sourceCache[t]);else if(h.offline&&!r)n(new Error("Cannot make network requests in offline mode"));else if(r){var a=/^data:application\/json;([\w=:"-]+;)*base64,/,i=t.match(a);if(i){var o=i[0].length,s=t.substr(o),u=this._atob(s);this.sourceCache[t]=u,e(u)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var c=this.ajax(t,{method:"get"});this.sourceCache[t]=c,c.then(e,n)}}.bind(this))},this._getSourceMapConsumer=function(e,n){return new Promise(function(r){if(this.sourceMapConsumerCache[e])r(this.sourceMapConsumerCache[e]);else{var i=new Promise(function(r,i){return this._get(e).then((function(e){"string"===typeof e&&(e=a(e.replace(/^\)\]\}'/,""))),"undefined"===typeof e.sourceRoot&&(e.sourceRoot=n),r(new t.SourceMapConsumer(e))})).catch(i)}.bind(this));this.sourceMapConsumerCache[e]=i,r(i)}}.bind(this))},this.pinpoint=function(t){return new Promise(function(e,n){this.getMappedLocation(t).then(function(t){function n(){e(t)}this.findFunctionName(t).then(e,n).catch(n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(t){return new Promise(function(n,r){s(t),this._get(t.fileName).then((function(r){var a=t.lineNumber,o=t.columnNumber,s=i(r,a,o);n(s?new e({functionName:s,args:t.args,fileName:t.fileName,lineNumber:a,columnNumber:o}):t)}),r).catch(r)}.bind(this))},this.getMappedLocation=function(t){return new Promise(function(e,n){o(),s(t);var r=this.sourceCache,a=t.fileName;this._get(a).then(function(n){var i=u(n),o="data:"===i.substr(0,5),s=a.substring(0,a.lastIndexOf("/")+1);return"/"===i[0]||o||/^https?:\/\/|^\/\//i.test(i)||(i=s+i),this._getSourceMapConsumer(i,s).then((function(n){return c(t,n,r).then(e).catch((function(){e(t)}))}))}.bind(this),n).catch(n)}.bind(this))}}})?r.apply(e,a):r)||(t.exports=i)}()},95598:function(t,e,n){var r,a,i;!function(o,s){"use strict";a=[n(20858),n(16940),n(61988)],r=function(t,e,n){var r={filter:function(t){return-1===(t.functionName||"").indexOf("StackTrace$$")&&-1===(t.functionName||"").indexOf("ErrorStackParser$$")&&-1===(t.functionName||"").indexOf("StackTraceGPS$$")&&-1===(t.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},a=function(){try{throw new Error}catch(t){return t}};function i(t,e){var n={};return[t,e].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n})),n}function o(t){return t.stack||t["opera#sourceloc"]}function s(t,e){return"function"===typeof e?t.filter(e):t}return{get:function(t){var e=a();return o(e)?this.fromError(e,t):this.generateArtificially(t)},getSync:function(n){n=i(r,n);var u=a();return s(o(u)?t.parse(u):e.backtrace(n),n.filter)},fromError:function(e,a){a=i(r,a);var o=new n(a);return new Promise(function(n){var r=s(t.parse(e),a.filter);n(Promise.all(r.map((function(t){return new Promise((function(e){function n(){e(t)}o.pinpoint(t).then(e,n).catch(n)}))}))))}.bind(this))},generateArtificially:function(t){t=i(r,t);var n=e.backtrace(t);return"function"===typeof t.filter&&(n=n.filter(t.filter)),Promise.resolve(n)},instrument:function(t,e,n,r){if("function"!==typeof t)throw new Error("Cannot instrument non-function object");if("function"===typeof t.__stacktraceOriginalFn)return t;var a=function(){try{return this.get().then(e,n).catch(n),t.apply(r||this,arguments)}catch(a){throw o(a)&&this.fromError(a).then(e,n).catch(n),a}}.bind(this);return a.__stacktraceOriginalFn=t,a},deinstrument:function(t){if("function"!==typeof t)throw new Error("Cannot de-instrument non-function object");return"function"===typeof t.__stacktraceOriginalFn?t.__stacktraceOriginalFn:t},report:function(t,e,n,r){return new Promise((function(a,i){var o=new XMLHttpRequest;if(o.onerror=i,o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<400?a(o.responseText):i(new Error("POST to "+e+" failed with status: "+o.status)))},o.open("post",e),o.setRequestHeader("Content-Type","application/json"),r&&"object"===typeof r.headers){var s=r.headers;for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&o.setRequestHeader(u,s[u])}var c={stack:t};void 0!==n&&null!==n&&(c.message=n),o.send(JSON.stringify(c))}))}}},void 0===(i="function"===typeof r?r.apply(e,a):r)||(t.exports=i)}()},18389:function(t,e,n){"use strict";function r(t){if(1!==t.compression)throw new Error("missing mandatory StripByteCounts field in compressed image");var e=t.rowsPerStrip*t.width*t.samplesPerPixel*(t.bitsPerSample/8);return new Array(t.stripOffsets.length).fill(e)}n.d(e,{K:function(){return r}})},25366:function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<t.length;){for(var a=n;a<e*n;a+=n)for(var i=0;i<n;i++)t[r+a+i]=t[r+a+i]+t[r+a-(n-i)]&255;r+=e*n}}function a(t,e,n){for(var r=0;r<t.length;){for(var a=n;a<e*n;a+=n)for(var i=0;i<n;i++)t[r+a+i]=t[r+a+i]+t[r+a-(n-i)]&65535;r+=e*n}}n.d(e,{I:function(){return a},Q:function(){return r}})},38750:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(37762),a=n(15671),i=n(43144),o=n(78859),s=n(91292),u={standard:n(845),exif:o,gps:s},c=function(){function t(e){if((0,a.Z)(this,t),!e)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=e,this._hasMap=!1,this._map={}}return(0,i.Z)(t,[{key:"get",value:function(t){if("number"===typeof t)return this.fields.get(t);if("string"===typeof t)return this.fields.get(u[this.kind].tagsByName[t]);throw new Error("expected a number or string")}},{key:"map",get:function(){if(!this._hasMap){var t,e=u[this.kind].tagsById,n=(0,r.Z)(this.fields.keys());try{for(n.s();!(t=n.n()).done;){var a=t.value;e[a]&&(this._map[e[a]]=this.fields.get(a))}}catch(i){n.e(i)}finally{n.f()}this._hasMap=!0}return this._map}}]),t}()},71524:function(t,e,n){"use strict";n.d(e,{E:function(){return a},x:function(){return i}});var r=new Map([[1,[1,o]],[2,[1,function(t,e){for(var n=[],r="",a=0;a<e;a++){var i=String.fromCharCode(t.readUint8());"\0"===i?(n.push(r),r=""):r+=i}return 1===n.length?n[0]:n}]],[3,[2,function(t,e){if(1===e)return t.readUint16();for(var n=new Uint16Array(e),r=0;r<e;r++)n[r]=t.readUint16();return n}]],[4,[4,function(t,e){if(1===e)return t.readUint32();for(var n=new Uint32Array(e),r=0;r<e;r++)n[r]=t.readUint32();return n}]],[5,[8,function(t,e){if(1===e)return t.readUint32()/t.readUint32();for(var n=new Array(e),r=0;r<e;r++)n[r]=t.readUint32()/t.readUint32();return n}]],[6,[1,function(t,e){if(1===e)return t.readInt8();for(var n=new Int8Array(e),r=0;r<e;r++)n[r]=t.readInt8();return n}]],[7,[1,o]],[8,[2,function(t,e){if(1===e)return t.readInt16();for(var n=new Int16Array(e),r=0;r<e;r++)n[r]=t.readInt16();return n}]],[9,[4,function(t,e){if(1===e)return t.readInt32();for(var n=new Int32Array(e),r=0;r<e;r++)n[r]=t.readInt32();return n}]],[10,[8,function(t,e){if(1===e)return t.readInt32()/t.readInt32();for(var n=new Array(e),r=0;r<e;r++)n[r]=t.readInt32()/t.readInt32();return n}]],[11,[4,function(t,e){if(1===e)return t.readFloat32();for(var n=new Float32Array(e),r=0;r<e;r++)n[r]=t.readFloat32();return n}]],[12,[8,function(t,e){if(1===e)return t.readFloat64();for(var n=new Float64Array(e),r=0;r<e;r++)n[r]=t.readFloat64();return n}]]]);function a(t,e){var n=r.get(t);if(!n)throw new Error("type not found: ".concat(t));return n[0]*e}function i(t,e,n){var a=r.get(e);if(!a)throw new Error("type not found: ".concat(e));return a[1](t,n)}function o(t,e){if(1===e)return t.readUint8();for(var n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.readUint8();return n}},3334:function(t,e,n){"use strict";n.d(e,{Jx:function(){return a}});var r=n(97540);function a(t,e){return new r.Z(t).decode(e)}},22048:function(t,e,n){"use strict";n.d(e,{z:function(){return l}});var r=n(15671),a=n(43144),i=n(71352),o=[];var s=[511,1023,2047,4095],u=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095],c=function(){function t(e){(0,r.Z)(this,t),this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=258,this.currentBitLength=9,this.stripArray=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.outData=new i.IOBuffer(e.byteLength),this.initializeTable()}return(0,a.Z)(t,[{key:"decode",value:function(){for(var t=0,e=0;257!==(t=this.getNextCode());)if(256===t){if(this.initializeTable(),257===(t=this.getNextCode()))break;this.writeString(this.stringFromCode(t)),e=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(e).concat(this.stringFromCode(t)[0])),e=t;else{var n=this.stringFromCode(e).concat(this.stringFromCode(e)[0]);this.writeString(n),this.addStringToTable(n),e=t}var r=this.outData.toArray();return new DataView(r.buffer,r.byteOffset,r.byteLength)}},{key:"initializeTable",value:function(){!function(){if(0===o.length){for(var t=0;t<256;t++)o.push([t]);for(var e=[],n=256;n<4096;n++)o.push(e)}}(),this.tableLength=258,this.currentBitLength=9}},{key:"writeString",value:function(t){this.outData.writeBytes(t)}},{key:"stringFromCode",value:function(t){return o[t]}},{key:"isInTable",value:function(t){return t<this.tableLength}},{key:"addStringToTable",value:function(t){if(o[this.tableLength++]=t,o.length>4096)throw o=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===u[this.currentBitLength]&&this.currentBitLength++}},{key:"getNextCode",value:function(){this.nextData=this.nextData<<8|255&this.stripArray[this.bytePointer++],this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|255&this.stripArray[this.bytePointer++],this.nextBits+=8);var t=this.nextData>>this.nextBits-this.currentBitLength&s[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:t}}]),t}();function l(t){return new c(t).decode()}},78859:function(t,e,n){"use strict";n.r(e),n.d(e,{tagsById:function(){return r},tagsByName:function(){return a}});var r={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},a={};for(var i in r)a[r[i]]=Number(i)},91292:function(t,e,n){"use strict";n.r(e),n.d(e,{tagsById:function(){return r},tagsByName:function(){return a}});var r={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},a={};for(var i in r)a[r[i]]=Number(i)},845:function(t,e,n){"use strict";n.r(e),n.d(e,{tagsById:function(){return r},tagsByName:function(){return a}});var r={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},a={};for(var i in r)a[r[i]]=Number(i)},97540:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(71352),u=n(18389),c=n(25366),l=n(38750),h=n(71524),f=n(22048),d=n(23702),p=n(84763),v={ignoreImageData:!1,onlyFirst:!1},g=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;return(0,r.Z)(this,n),(a=e.call(this,t))._nextIFD=0,a}return(0,a.Z)(n,[{key:"isMultiPage",get:function(){var t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),2===t)return!0;if(1===t)return!1;throw m("ifdCount",t)}},{key:"pageCount",get:function(){var t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw m("ifdCount",t)}},{key:"decode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},v,t);var e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t,!0)),t.onlyFirst)return[e[0]];return e}},{key:"decodeHeader",value:function(){var t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error("invalid byte order: 0x".concat(t.toString(16)));this.setBigEndian()}if(42!==this.readUint16())throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}},{key:"decodeIFD",value:function(t,e){var n;if(this.seek(this._nextIFD),e)n=new d.Z;else{if(!t.kind)throw new Error("kind is missing");n=new l.Z(t.kind)}for(var r=this.readUint16(),a=0;a<r;a++)this.decodeIFDEntry(n);if(!t.ignoreImageData){if(!(n instanceof d.Z))throw new Error("must be a tiff ifd");this.decodeImageData(n)}return this._nextIFD=this.readUint32(),n}},{key:"decodeIFDEntry",value:function(t){var e=this.offset,n=this.readUint16(),r=this.readUint16(),a=this.readUint32();if(r<1||r>12)this.skip(4);else{(0,h.E)(r,a)>4&&this.seek(this.readUint32());var i=(0,h.x)(this,r,a);if(t.fields.set(n,i),34665===n||34853===n){var o=this.offset,s="exif";34665===n?s="exif":34853===n&&(s="gps"),this._nextIFD=i,t[s]=this.decodeIFD({kind:s,ignoreImageData:!0},!1),this.offset=o}this.seek(e),this.skip(12)}}},{key:"decodeImageData",value:function(t){var e=t.orientation;if(e&&1!==e)throw m("orientation",e);switch(t.type){case 0:case 1:case 2:case 3:this.readStripData(t);break;default:throw m("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),0===t.type)for(var n=t.bitsPerSample,r=Math.pow(2,n)-1,a=0;a<t.data.length;a++)t.data[a]=r-t.data[a]}},{key:"readStripData",value:function(t){for(var e=t.width,n=t.height,r=t.bitsPerSample,a=t.sampleFormat,i=e*n*t.samplesPerPixel,o=function(t,e,n){if(8===e)return new Uint8Array(t);if(16===e)return new Uint16Array(t);if(32===e&&3===n)return new Float32Array(t);throw m("bit depth / sample format","".concat(e," / ").concat(n))}(i,r,a),s=t.rowsPerStrip*e*t.samplesPerPixel,c=t.stripOffsets,l=t.stripByteCounts||(0,u.K)(t),h=i,d=0,v=0;v<c.length;v++){var g=new DataView(this.buffer,this.byteOffset+c[v],l[v]),y=h>s?s:h;h-=y;var b=g;switch(t.compression){case 1:break;case 5:b=(0,f.z)(g);break;case 8:b=(0,p.C)(g);break;case 2:throw m("Compression","CCITT Group 3");case 32773:throw m("Compression","PackBits");default:throw m("Compression",t.compression)}d=this.fillUncompressed(r,a,o,b,d,y)}t.data=o}},{key:"fillUncompressed",value:function(t,e,n,r,a,i){if(8===t)return function(t,e,n,r){for(var a=0;a<r;a++)t[n++]=e.getUint8(a);return n}(n,r,a,i);if(16===t)return function(t,e,n,r,a){for(var i=0;i<2*r;i+=2)t[n++]=e.getUint16(i,a);return n}(n,r,a,i,this.isLittleEndian());if(32===t&&3===e)return function(t,e,n,r,a){for(var i=0;i<4*r;i+=4)t[n++]=e.getFloat32(i,a);return n}(n,r,a,i,this.isLittleEndian());throw m("bitDepth",t)}},{key:"applyPredictor",value:function(t){var e=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:if(8===e)(0,c.Q)(t.data,t.width,t.components);else{if(16!==e)throw new Error("Horizontal differencing is only supported for images with a bit depth of ".concat(e));(0,c.I)(t.data,t.width,t.components)}break;default:throw new Error("invalid predictor: ".concat(t.predictor))}}},{key:"convertAlpha",value:function(t){if(t.alpha&&t.associatedAlpha)for(var e=t.data,n=t.components,r=t.maxSampleValue,a=0;a<e.length;a+=n)for(var i=e[a+n-1],o=0;o<n-1;o++)e[a+o]=Math.round(e[a+o]*r/i)}}]),n}(s.IOBuffer);function m(t,e){return new Error("Unsupported ".concat(t,": ").concat(e))}},23702:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(15671),a=n(43144),i=n(60136),o=n(29388),s=n(38750),u=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,c=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.call(this,"standard")}return(0,a.Z)(n,[{key:"size",get:function(){return this.width*this.height}},{key:"width",get:function(){return this.imageWidth}},{key:"height",get:function(){return this.imageLength}},{key:"components",get:function(){return this.samplesPerPixel}},{key:"date",get:function(){var t=new Date,e=u.exec(this.dateTime);if(null===e)throw new Error("invalid dateTime: ".concat(this.dateTime));return t.setFullYear(Number(e[1]),Number(e[2])-1,Number(e[3])),t.setHours(Number(e[4]),Number(e[5]),Number(e[6])),t}},{key:"newSubfileType",get:function(){return this.get("NewSubfileType")}},{key:"imageWidth",get:function(){return this.get("ImageWidth")}},{key:"imageLength",get:function(){return this.get("ImageLength")}},{key:"bitsPerSample",get:function(){var t=this.get("BitsPerSample");return t&&"number"!==typeof t?t[0]:t}},{key:"alpha",get:function(){var t=this.extraSamples;return!!t&&0!==t[0]}},{key:"associatedAlpha",get:function(){var t=this.extraSamples;return!!t&&1===t[0]}},{key:"extraSamples",get:function(){return l(this.get("ExtraSamples"))}},{key:"compression",get:function(){return this.get("Compression")||1}},{key:"type",get:function(){return this.get("PhotometricInterpretation")}},{key:"fillOrder",get:function(){return this.get("FillOrder")||1}},{key:"documentName",get:function(){return this.get("DocumentName")}},{key:"imageDescription",get:function(){return this.get("ImageDescription")}},{key:"stripOffsets",get:function(){return l(this.get("StripOffsets"))}},{key:"orientation",get:function(){return this.get("Orientation")}},{key:"samplesPerPixel",get:function(){return this.get("SamplesPerPixel")||1}},{key:"rowsPerStrip",get:function(){return this.get("RowsPerStrip")}},{key:"stripByteCounts",get:function(){return l(this.get("StripByteCounts"))}},{key:"minSampleValue",get:function(){return this.get("MinSampleValue")||0}},{key:"maxSampleValue",get:function(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}},{key:"xResolution",get:function(){return this.get("XResolution")}},{key:"yResolution",get:function(){return this.get("YResolution")}},{key:"planarConfiguration",get:function(){return this.get("PlanarConfiguration")||1}},{key:"resolutionUnit",get:function(){return this.get("ResolutionUnit")||2}},{key:"dateTime",get:function(){return this.get("DateTime")}},{key:"predictor",get:function(){return this.get("Predictor")||1}},{key:"sampleFormat",get:function(){return this.get("SampleFormat")||1}},{key:"sMinSampleValue",get:function(){return this.get("SMinSampleValue")||this.minSampleValue}},{key:"sMaxSampleValue",get:function(){return this.get("SMaxSampleValue")||this.maxSampleValue}},{key:"palette",get:function(){var t=Math.pow(2,this.bitsPerSample),e=this.get("ColorMap");if(e){if(e.length!==3*t)throw new Error("ColorMap size must be ".concat(t));for(var n=[],r=0;r<t;r++)n.push([e[r],e[r+t],e[r+2*t]]);return n}}}]),n}(s.Z);function l(t){return"number"===typeof t?[t]:t}},84763:function(t,e,n){"use strict";n.d(e,{C:function(){return a}});var r=n(58308);function a(t){var e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=(0,r.rr)(e);return new DataView(n.buffer,n.byteOffset,n.byteLength)}},53731:function(t){"use strict";t.exports=function(t,n,r){var a=t*n,i=e*t,o=i-(i-t),s=t-o,u=e*n,c=u-(u-n),l=n-c,h=s*l-(a-o*c-s*c-o*l);if(r)return r[0]=h,r[1]=a,r;return[h,a]};var e=+(Math.pow(2,27)+1)},91764:function(t){"use strict";t.exports=function(t,e,n){var r=t+e,a=r-t,i=e-a,o=t-(r-a);if(n)return n[0]=o+i,n[1]=r,n;return[o+i,r]}},52024:function(t,e,n){"use strict";var r=n(74704).default,a=n(18675),i=navigator.hardwareConcurrency||1;Function.prototype;function o(t,e){if("string"!==typeof t&&"function"!==typeof t)throw new TypeError("func argument must be a function");if(void 0===e&&(e={}),"object"!==typeof e||null===e)throw new TypeError("options argument must be an object");this._workerCode=t.toString(),void 0===e.maxWorkers||"auto"===e.maxWorkers?this._numWorkers=Math.min(i-1,1):e.maxWorkers>0?this._numWorkers=Math.min(e.maxWorkers,i):this._numWorkers=i,this._workers=new Map,this._timeout=e.timeout||0,this._terminateOnError=!!e.terminateOnError;var n=e.deps;"string"===typeof n&&(n=[n]),Array.isArray(n)||(n=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(n)}o.prototype._init=function(t){for(var e=a.newWorkerURL(this._workerCode,t),n=0;n<this._numWorkers;n++){var r=new Worker(e);r.onmessage=this._onmessage.bind(this,r),r.onerror=this._onerror.bind(this,r),r.running=!1,r.id=n,this._workers.set(r,null)}URL.revokeObjectURL(e)},o.prototype._onerror=function(t,e){if(!this._terminated){this._working--,t.running=!1;var n=this._workers.get(t);n&&n[1](e.message),this._workers.set(t,null),this._terminateOnError?this.terminate():this._exec()}},o.prototype._onmessage=function(t,e){if(!this._terminated){this._working--,t.running=!1;var n=this._workers.get(t);n&&n[0](e.data.data),this._workers.set(t,null),this._exec()}},o.prototype._exec=function(){var t,e=r(this._workers.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this._working===this._numWorkers||0===this._waiting.length)return;if(!n.running)for(var a=0;a<this._waiting.length;a++){var i=this._waiting[a];if("number"!==typeof i[4]||i[4]===n.id){this._waiting.splice(a,1),n.postMessage({action:"exec",event:i[0],args:i[1]},i[2]),n.running=!0,n.time=Date.now(),this._workers.set(n,i[3]),this._working++;break}}}}catch(o){e.e(o)}finally{e.f()}},o.prototype.terminate=function(){if(!this._terminated){var t,e=r(this._workers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n[0].terminate(),n[1]&&n[1][1](new Error("Terminated"))}}catch(a){e.e(a)}finally{e.f()}this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},o.prototype.postAll=function(t,e){if(this._terminated)throw new Error("Cannot post (terminated)");var n,a=[],i=r(this._workers.keys());try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(this.post(t,e,[],o.id))}}catch(s){i.e(s)}finally{i.f()}return Promise.all(a)},o.prototype.post=function(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);var a=this;return new Promise((function(i,o){if(a._terminated)throw new Error("Cannot post (terminated)");a._waiting.push([t,e,n,[i,o],r]),a._exec()}))},t.exports=o},18675:function(t,e){"use strict";var n=function(){self.window=self;function t(){this._listeners={}}t.prototype.on=function(t,e){if(this._listeners[t])throw new RangeError("there is already a listener for "+t);if("function"!==typeof e)throw new TypeError("callback argument must be a function");this._listeners[t]=e},t.prototype._send=function(t,e,n){void 0===n?n=[]:Array.isArray(n)||(n=[n]),self.postMessage({id:t,data:e},n)},t.prototype._trigger=function(t,e){if(!this._listeners[t])throw new Error("event "+t+" is not defined");this._listeners[t].apply(null,e)};var e=new t;self.onmessage=function(t){switch(t.data.action){case"exec":t.data.args.unshift((function(n,r){e._send(t.data.id,n,r)})),e._trigger(t.data.event,t.data.args);break;case"ping":e._send(t.data.id,"pong");break;default:throw new Error("unexpected action: "+t.data.action)}}}.toString().split('"CODE";');e.newWorkerURL=function(t,e){var r=new Blob(["(",n[0],"importScripts.apply(self, "+JSON.stringify(e)+");\n","(",t,")();",n[1],")();"],{type:"application/javascript"});return URL.createObjectURL(r)}},73897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},63405:function(t,e,n){var r=n(73897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},66115:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},56690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},89728:function(t,e,n){var r=n(64062);function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,r(a.key),a)}}t.exports=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},74704:function(t,e,n){var r=n(86116);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},t.exports.__esModule=!0,t.exports.default=t.exports},26389:function(t,e,n){var r=n(73808),a=n(69617),i=n(94993);t.exports=function(t){var e=a();return function(){var n,a=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},38416:function(t,e,n){var r=n(64062);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},73808:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},61655:function(t,e,n){var r=n(6015);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},69617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},79498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},42281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},42122:function(t,e,n){var r=n(38416);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},t.exports.__esModule=!0,t.exports.default=t.exports},94993:function(t,e,n){var r=n(18698).default,a=n(66115);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6015:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var r=n(63405),a=n(79498),i=n(86116),o=n(42281);t.exports=function(t){return r(t)||a(t)||i(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},95036:function(t,e,n){var r=n(18698).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},64062:function(t,e,n){var r=n(18698).default,a=n(95036);t.exports=function(t){var e=a(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},18698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},86116:function(t,e,n){var r=n(73897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},30907:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},83878:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,{Z:function(){return r}})},97326:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return r}})},15861:function(t,e,n){"use strict";function r(t,e,n,r,a,i,o){try{var s=t[i](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,u,"next",t)}function u(t){r(o,a,i,s,u,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return a}})},15671:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return r}})},5647:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(89611),a=n(78814);function i(t,e,n){return i=(0,a.Z)()?Reflect.construct.bind():function(t,e,n){var a=[null];a.push.apply(a,e);var i=new(Function.bind.apply(t,a));return n&&(0,r.Z)(i,n.prototype),i},i.apply(null,arguments)}},43144:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(49142);function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(0,r.Z)(a.key),a)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},37762:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(40181);function a(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},29388:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(61120),a=n(78814),i=n(82963);function o(t){var e=(0,a.Z)();return function(){var n,a=(0,r.Z)(t);if(e){var o=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}},4942:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(49142);function a(t,e,n){return(e=(0,r.Z)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},87462:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{Z:function(){return r}})},88301:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(18415);function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var a=(0,r.Z)(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},a.apply(this,arguments)}},61120:function(t,e,n){"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,{Z:function(){return r}})},60136:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(89611);function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,r.Z)(t,e)}},48989:function(t,e,n){"use strict";function r(t){return-1!==Function.toString.call(t).indexOf("[native code]")}n.d(e,{Z:function(){return r}})},78814:function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n.d(e,{Z:function(){return r}})},59199:function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n.d(e,{Z:function(){return r}})},25267:function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,{Z:function(){return r}})},82963:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(71002),a=n(97326);function i(t,e){if(e&&("object"===(0,r.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(t)}},74165:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(71002);function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(N){l=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new E(r||[]);return i(o,"_invoke",{value:I(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=h;var d={};function p(){}function v(){}function g(){}var m={};l(m,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==e&&n.call(b,s)&&(m=b);var w=g.prototype=p.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function a(i,o,s,u){var c=f(t[i],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==(0,r.Z)(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){a("next",t,s,u)}),(function(t){a("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return a("throw",t,s,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function I(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=f(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,d;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function A(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=g,i(w,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(k.prototype),l(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new k(h(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=A,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}},89611:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}n.d(e,{Z:function(){return r}})},29439:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(83878);var a=n(40181),i=n(25267);function o(t,e){return(0,r.Z)(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,a=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(t,e)||(0,a.Z)(t,e)||(0,i.Z)()}},18415:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(61120);function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,r.Z)(t)););return t}},93433:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(30907);var a=n(59199),i=n(40181);function o(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||(0,a.Z)(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},49142:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(71002);function a(t){var e=function(t,e){if("object"!==(0,r.Z)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===(0,r.Z)(e)?e:String(e)}},71002:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{Z:function(){return r}})},40181:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(30907);function a(t,e){if(t){if("string"===typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}},7112:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(61120),a=n(89611),i=n(48989),o=n(5647);function s(t){var e="function"===typeof Map?new Map:void 0;return s=function(t){if(null===t||!(0,i.Z)(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return(0,o.Z)(t,arguments,(0,r.Z)(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,a.Z)(n,t)},s(t)}},70804:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(71002),a=n(89611),i=n(60136);function o(){o=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,r,i){var o=new RegExp(t,r);return e.set(o,i||e.get(t)),(0,a.Z)(o,n.prototype)}function s(t,n){var r=e.get(n);return Object.keys(r).reduce((function(e,n){var a=r[n];if("number"==typeof a)e[n]=t[a];else{for(var i=0;void 0===t[a[i]]&&i+1<a.length;)i++;e[n]=t[a[i]]}return e}),Object.create(null))}return(0,i.Z)(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);if(n){n.groups=s(n,this);var r=n.indices;r&&(r.groups=s(r,this))}return n},n.prototype[Symbol.replace]=function(n,a){if("string"==typeof a){var i=e.get(this);return t[Symbol.replace].call(this,n,a.replace(/\$<([^>]+)>/g,(function(t,e){var n=i[e];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof a){var o=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=(0,r.Z)(t[t.length-1])&&(t=[].slice.call(t)).push(s(t,o)),a.apply(this,t)}))}return t[Symbol.replace].call(this,n,a)},o.apply(this,arguments)}},58308:function(t,e,n){"use strict";n.d(e,{T_:function(){return pn},Wt:function(){return dn},rr:function(){return vn}});function r(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,i=286,o=30,s=15,u=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);r(f);var d=new Array(60);r(d);var p=new Array(512);r(p);var v=new Array(256);r(v);var g=new Array(29);r(g);var m,y,b,w=new Array(o);function x(t,e,n,r,a){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=t&&t.length}function k(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}r(w);var I=function(t){return t<256?p[t]:p[256+(t>>>7)]},S=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},_=function(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},C=function(t,e,n){_(t,n[2*e],n[2*e+1])},E=function(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},A=function(t,e,n){var r,a,i=new Array(16),o=0;for(r=1;r<=s;r++)o=o+n[r-1]<<1,i[r]=o;for(a=0;a<=e;a++){var u=t[2*a+1];0!==u&&(t[2*a]=E(i[u]++,u))}},T=function(t){var e;for(e=0;e<i;e++)t.dyn_ltree[2*e]=0;for(e=0;e<o;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},N=function(t){t.bi_valid>8?S(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},D=function(t,e,n,r){var a=2*e,i=2*n;return t[a]<t[i]||t[a]===t[i]&&r[e]<=r[n]},R=function(t,e,n){for(var r=t.heap[n],a=n<<1;a<=t.heap_len&&(a<t.heap_len&&D(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!D(e,r,t.heap[a],t.depth));)t.heap[n]=t.heap[a],n=a,a<<=1;t.heap[n]=r},Z=function(t,e,n){var r,i,o,s,l=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+l++],r+=(255&t.pending_buf[t.sym_buf+l++])<<8,i=t.pending_buf[t.sym_buf+l++],0===r?C(t,i,e):(o=v[i],C(t,o+a+1,e),0!==(s=u[o])&&(i-=g[o],_(t,i,s)),r--,o=I(r),C(t,o,n),0!==(s=c[o])&&(r-=w[o],_(t,r,s)))}while(l<t.sym_next);C(t,256,e)},M=function(t,e){var n,r,a,i=e.dyn_tree,o=e.stat_desc.static_tree,u=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)i[2*(a=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[a]=0,t.opt_len--,u&&(t.static_len-=o[2*a+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)R(t,i,n);a=c;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,i[2*a]=i[2*n]+i[2*r],t.depth[a]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,i[2*n+1]=i[2*r+1]=a,t.heap[1]=a++,R(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,a,i,o,u,c=e.dyn_tree,l=e.max_code,h=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,v=e.stat_desc.max_length,g=0;for(i=0;i<=s;i++)t.bl_count[i]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(i=c[2*c[2*(r=t.heap[n])+1]+1]+1)>v&&(i=v,g++),c[2*r+1]=i,r>l||(t.bl_count[i]++,o=0,r>=p&&(o=d[r-p]),u=c[2*r],t.opt_len+=u*(i+o),f&&(t.static_len+=u*(h[2*r+1]+o)));if(0!==g){do{for(i=v-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[v]--,g-=2}while(g>0);for(i=v;0!==i;i--)for(r=t.bl_count[i];0!==r;)(a=t.heap[--n])>l||(c[2*a+1]!==i&&(t.opt_len+=(i-c[2*a+1])*c[2*a],c[2*a+1]=i),r--)}}(t,e),A(i,l,t.bl_count)},F=function(t,e,n){var r,a,i=-1,o=e[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=e[2*(r+1)+1],++s<u&&a===o||(s<c?t.bl_tree[2*a]+=s:0!==a?(a!==i&&t.bl_tree[2*a]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,i=a,0===o?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4))},O=function(t,e,n){var r,a,i=-1,o=e[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),r=0;r<=n;r++)if(a=o,o=e[2*(r+1)+1],!(++s<u&&a===o)){if(s<c)do{C(t,a,t.bl_tree)}while(0!==--s);else 0!==a?(a!==i&&(C(t,a,t.bl_tree),s--),C(t,16,t.bl_tree),_(t,s-3,2)):s<=10?(C(t,17,t.bl_tree),_(t,s-3,3)):(C(t,18,t.bl_tree),_(t,s-11,7));s=0,i=a,0===o?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4)}},B=!1,L=function(t,e,n,r){_(t,0+(r?1:0),3),N(t),S(t,n),S(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n},P=function(t,e,n,r){var i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),M(t,t.l_desc),M(t,t.d_desc),s=function(t){var e;for(F(t,t.dyn_ltree,t.l_desc.max_code),F(t,t.dyn_dtree,t.d_desc.max_code),M(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?L(t,e,n,r):4===t.strategy||o===i?(_(t,2+(r?1:0),3),Z(t,f,d)):(_(t,4+(r?1:0),3),function(t,e,n,r){var a;for(_(t,e-257,5),_(t,n-1,5),_(t,r-4,4),a=0;a<r;a++)_(t,t.bl_tree[2*h[a]+1],3);O(t,t.dyn_ltree,e-1),O(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Z(t,t.dyn_ltree,t.dyn_dtree)),T(t),r&&N(t)},U={_tr_init:function(t){B||(!function(){var t,e,n,r,a,h=new Array(16);for(n=0,r=0;r<28;r++)for(g[r]=n,t=0;t<1<<u[r];t++)v[n++]=r;for(v[n-1]=r,a=0,r=0;r<16;r++)for(w[r]=a,t=0;t<1<<c[r];t++)p[a++]=r;for(a>>=7;r<o;r++)for(w[r]=a<<7,t=0;t<1<<c[r]-7;t++)p[256+a++]=r;for(e=0;e<=s;e++)h[e]=0;for(t=0;t<=143;)f[2*t+1]=8,t++,h[8]++;for(;t<=255;)f[2*t+1]=9,t++,h[9]++;for(;t<=279;)f[2*t+1]=7,t++,h[7]++;for(;t<=287;)f[2*t+1]=8,t++,h[8]++;for(A(f,287,h),t=0;t<o;t++)d[2*t+1]=5,d[2*t]=E(t,5);m=new x(f,u,257,i,s),y=new x(d,c,0,o,s),b=new x(new Array(0),l,0,19,7)}(),B=!0),t.l_desc=new k(t.dyn_ltree,m),t.d_desc=new k(t.dyn_dtree,y),t.bl_desc=new k(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,T(t)},_tr_stored_block:L,_tr_flush_block:P,_tr_tally:function(t,e,n){return t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(v[n]+a+1)]++,t.dyn_dtree[2*I(e)]++),t.sym_next===t.sym_end},_tr_align:function(t){_(t,2,3),C(t,256,f),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},z=function(t,e,n,r){for(var a=65535&t|0,i=t>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+e[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},W=new Uint32Array(function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}()),V=function(t,e,n,r){var a=W,i=r+n;t^=-1;for(var o=r;o<i;o++)t=t>>>8^a[255&(t^e[o])];return-1^t},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},H=U._tr_init,X=U._tr_stored_block,q=U._tr_flush_block,Y=U._tr_tally,K=U._tr_align,Q=j.Z_NO_FLUSH,J=j.Z_PARTIAL_FLUSH,$=j.Z_FULL_FLUSH,tt=j.Z_FINISH,et=j.Z_BLOCK,nt=j.Z_OK,rt=j.Z_STREAM_END,at=j.Z_STREAM_ERROR,it=j.Z_DATA_ERROR,ot=j.Z_BUF_ERROR,st=j.Z_DEFAULT_COMPRESSION,ut=j.Z_FILTERED,ct=j.Z_HUFFMAN_ONLY,lt=j.Z_RLE,ht=j.Z_FIXED,ft=j.Z_DEFAULT_STRATEGY,dt=j.Z_UNKNOWN,pt=j.Z_DEFLATED,vt=258,gt=262,mt=42,yt=113,bt=666,wt=function(t,e){return t.msg=G[e],e},xt=function(t){return 2*t-(t>4?9:0)},kt=function(t){for(var e=t.length;--e>=0;)t[e]=0},It=function(t){var e,n,r,a=t.w_size;r=e=t.hash_size;do{n=t.head[--r],t.head[r]=n>=a?n-a:0}while(--e);r=e=a;do{n=t.prev[--r],t.prev[r]=n>=a?n-a:0}while(--e)},St=function(t,e,n){return(e<<t.hash_shift^n)&t.hash_mask},_t=function(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Ct=function(t,e){q(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,_t(t.strm)},Et=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Tt=function(t,e,n,r){var a=t.avail_in;return a>r&&(a=r),0===a?0:(t.avail_in-=a,e.set(t.input.subarray(t.next_in,t.next_in+a),n),1===t.state.wrap?t.adler=z(t.adler,e,a,n):2===t.state.wrap&&(t.adler=V(t.adler,e,a,n)),t.next_in+=a,t.total_in+=a,a)},Nt=function(t,e){var n,r,a=t.max_chain_length,i=t.strstart,o=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-gt?t.strstart-(t.w_size-gt):0,c=t.window,l=t.w_mask,h=t.prev,f=t.strstart+vt,d=c[i+o-1],p=c[i+o];t.prev_length>=t.good_match&&(a>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+o]===p&&c[n+o-1]===d&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(r=vt-(f-i),i=f-vt,r>o){if(t.match_start=e,o=r,r>=s)break;d=c[i+o-1],p=c[i+o]}}}while((e=h[e&l])>u&&0!==--a);return o<=t.lookahead?o:t.lookahead},Dt=function(t){var e,n,r,a=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-gt)&&(t.window.set(t.window.subarray(a,a+a-n),0),t.match_start-=a,t.strstart-=a,t.block_start-=a,t.insert>t.strstart&&(t.insert=t.strstart),It(t),n+=a),0===t.strm.avail_in)break;if(e=Tt(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=e,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=St(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=St(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<gt&&0!==t.strm.avail_in)},Rt=function(t,e){var n,r,a,i=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,s=t.strm.avail_in;do{if(n=65535,a=t.bi_valid+42>>3,t.strm.avail_out<a)break;if(a=t.strm.avail_out-a,n>(r=t.strstart-t.block_start)+t.strm.avail_in&&(n=r+t.strm.avail_in),n>a&&(n=a),n<i&&(0===n&&e!==tt||e===Q||n!==r+t.strm.avail_in))break;o=e===tt&&n===r+t.strm.avail_in?1:0,X(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,_t(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(Tt(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===o);return(s-=t.strm.avail_in)&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==Q&&e!==tt&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(a=t.window_size-t.strstart,t.strm.avail_in>a&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,a+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),a>t.strm.avail_in&&(a=t.strm.avail_in),a&&(Tt(t.strm,t.window,t.strstart,a),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.high_water<t.strstart&&(t.high_water=t.strstart),a=t.bi_valid+42>>3,i=(a=t.pending_buf_size-a>65535?65535:t.pending_buf_size-a)>t.w_size?t.w_size:a,((r=t.strstart-t.block_start)>=i||(r||e===tt)&&e!==Q&&0===t.strm.avail_in&&r<=a)&&(n=r>a?a:r,o=e===tt&&0===t.strm.avail_in&&n===r?1:0,X(t,t.block_start,n,o),t.block_start+=n,_t(t.strm)),o?3:1)},Zt=function(t,e){for(var n,r;;){if(t.lookahead<gt){if(Dt(t),t.lookahead<gt&&e===Q)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=St(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-gt&&(t.match_length=Nt(t,n)),t.match_length>=3)if(r=Y(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=St(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=St(t,t.ins_h,t.window[t.strstart+1]);else r=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===tt?(Ct(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ct(t,!1),0===t.strm.avail_out)?1:2},Mt=function(t,e){for(var n,r,a;;){if(t.lookahead<gt){if(Dt(t),t.lookahead<gt&&e===Q)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=St(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-gt&&(t.match_length=Nt(t,n),t.match_length<=5&&(t.strategy===ut||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-3,r=Y(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=a&&(t.ins_h=St(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Ct(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=Y(t,0,t.window[t.strstart-1]))&&Ct(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Y(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===tt?(Ct(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ct(t,!1),0===t.strm.avail_out)?1:2};function Ft(t,e,n,r,a){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=a}var Ot=[new Ft(0,0,0,0,Rt),new Ft(4,4,8,4,Zt),new Ft(4,5,16,8,Zt),new Ft(4,6,32,32,Zt),new Ft(4,4,16,16,Mt),new Ft(8,16,32,32,Mt),new Ft(8,16,128,128,Mt),new Ft(8,32,128,256,Mt),new Ft(32,128,258,1024,Mt),new Ft(32,258,258,4096,Mt)];function Bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),kt(this.dyn_ltree),kt(this.dyn_dtree),kt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),kt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),kt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Lt=function(t){if(!t)return 1;var e=t.state;return!e||e.strm!==t||e.status!==mt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==yt&&e.status!==bt?1:0},Pt=function(t){if(Lt(t))return wt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?mt:yt,t.adler=2===e.wrap?0:1,e.last_flush=-2,H(e),nt},Ut=function(t){var e,n=Pt(t);return n===nt&&((e=t.state).window_size=2*e.w_size,kt(e.head),e.max_lazy_match=Ot[e.level].max_lazy,e.good_match=Ot[e.level].good_length,e.nice_match=Ot[e.level].nice_length,e.max_chain_length=Ot[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n},zt=function(t,e,n,r,a,i){if(!t)return at;var o=1;if(e===st&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>9||n!==pt||r<8||r>15||e<0||e>9||i<0||i>ht||8===r&&1!==o)return wt(t,at);8===r&&(r=9);var s=new Bt;return t.state=s,s.strm=t,s.status=mt,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=e,s.strategy=i,s.method=n,Ut(t)},Wt={deflateInit:function(t,e){return zt(t,e,pt,15,8,ft)},deflateInit2:zt,deflateReset:Ut,deflateResetKeep:Pt,deflateSetHeader:function(t,e){return Lt(t)||2!==t.state.wrap?at:(t.state.gzhead=e,nt)},deflate:function(t,e){if(Lt(t)||e>et||e<0)return t?wt(t,at):at;var n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===bt&&e!==tt)return wt(t,0===t.avail_out?ot:at);var r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(_t(t),0===t.avail_out)return n.last_flush=-1,nt}else if(0===t.avail_in&&xt(e)<=xt(r)&&e!==tt)return wt(t,ot);if(n.status===bt&&0!==t.avail_in)return wt(t,ot);if(n.status===mt&&0===n.wrap&&(n.status=yt),n.status===mt){var a=pt+(n.w_bits-8<<4)<<8;if(a|=(n.strategy>=ct||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),At(n,a+=31-a%31),0!==n.strstart&&(At(n,t.adler>>>16),At(n,65535&t.adler)),t.adler=1,n.status=yt,_t(t),0!==n.pending)return n.last_flush=-1,nt}if(57===n.status)if(t.adler=0,Et(n,31),Et(n,139),Et(n,8),n.gzhead)Et(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Et(n,255&n.gzhead.time),Et(n,n.gzhead.time>>8&255),Et(n,n.gzhead.time>>16&255),Et(n,n.gzhead.time>>24&255),Et(n,9===n.level?2:n.strategy>=ct||n.level<2?4:0),Et(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Et(n,255&n.gzhead.extra.length),Et(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=V(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Et(n,0),Et(n,0),Et(n,0),Et(n,0),Et(n,0),Et(n,9===n.level?2:n.strategy>=ct||n.level<2?4:0),Et(n,3),n.status=yt,_t(t),0!==n.pending)return n.last_flush=-1,nt;if(69===n.status){if(n.gzhead.extra){for(var i=n.pending,o=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+o>n.pending_buf_size;){var s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(t.adler=V(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,_t(t),0!==n.pending)return n.last_flush=-1,nt;i=0,o-=s}var u=new Uint8Array(n.gzhead.extra);n.pending_buf.set(u.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(t.adler=V(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var c,l=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>l&&(t.adler=V(t.adler,n.pending_buf,n.pending-l,l)),_t(t),0!==n.pending)return n.last_flush=-1,nt;l=0}c=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Et(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>l&&(t.adler=V(t.adler,n.pending_buf,n.pending-l,l)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var h,f=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>f&&(t.adler=V(t.adler,n.pending_buf,n.pending-f,f)),_t(t),0!==n.pending)return n.last_flush=-1,nt;f=0}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Et(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>f&&(t.adler=V(t.adler,n.pending_buf,n.pending-f,f))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(_t(t),0!==n.pending))return n.last_flush=-1,nt;Et(n,255&t.adler),Et(n,t.adler>>8&255),t.adler=0}if(n.status=yt,_t(t),0!==n.pending)return n.last_flush=-1,nt}if(0!==t.avail_in||0!==n.lookahead||e!==Q&&n.status!==bt){var d=0===n.level?Rt(n,e):n.strategy===ct?function(t,e){for(var n;;){if(0===t.lookahead&&(Dt(t),0===t.lookahead)){if(e===Q)return 1;break}if(t.match_length=0,n=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===tt?(Ct(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(n,e):n.strategy===lt?function(t,e){for(var n,r,a,i,o=t.window;;){if(t.lookahead<=vt){if(Dt(t),t.lookahead<=vt&&e===Q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=o[a=t.strstart-1])===o[++a]&&r===o[++a]&&r===o[++a]){i=t.strstart+vt;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);t.match_length=vt-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=Y(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===tt?(Ct(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(n,e):Ot[n.level].func(n,e);if(3!==d&&4!==d||(n.status=bt),1===d||3===d)return 0===t.avail_out&&(n.last_flush=-1),nt;if(2===d&&(e===J?K(n):e!==et&&(X(n,0,0,!1),e===$&&(kt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),_t(t),0===t.avail_out))return n.last_flush=-1,nt}return e!==tt?nt:n.wrap<=0?rt:(2===n.wrap?(Et(n,255&t.adler),Et(n,t.adler>>8&255),Et(n,t.adler>>16&255),Et(n,t.adler>>24&255),Et(n,255&t.total_in),Et(n,t.total_in>>8&255),Et(n,t.total_in>>16&255),Et(n,t.total_in>>24&255)):(At(n,t.adler>>>16),At(n,65535&t.adler)),_t(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?nt:rt)},deflateEnd:function(t){if(Lt(t))return at;var e=t.state.status;return t.state=null,e===yt?wt(t,it):nt},deflateSetDictionary:function(t,e){var n=e.length;if(Lt(t))return at;var r=t.state,a=r.wrap;if(2===a||1===a&&r.status!==mt||r.lookahead)return at;if(1===a&&(t.adler=z(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===a&&(kt(r.head),r.strstart=0,r.block_start=0,r.insert=0);var i=new Uint8Array(r.w_size);i.set(e.subarray(n-r.w_size,n),0),e=i,n=r.w_size}var o=t.avail_in,s=t.next_in,u=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Dt(r);r.lookahead>=3;){var c=r.strstart,l=r.lookahead-2;do{r.ins_h=St(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--l);r.strstart=c,r.lookahead=2,Dt(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=s,t.input=u,t.avail_in=o,r.wrap=a,nt},deflateInfo:"pako deflate (from Nodeca project)"},Vt=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Gt={assign:function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)Vt(n,r)&&(t[r]=n[r])}}return t},flattenChunks:function(t){for(var e=0,n=0,r=t.length;n<r;n++)e+=t[n].length;for(var a=new Uint8Array(e),i=0,o=0,s=t.length;i<s;i++){var u=t[i];a.set(u,o),o+=u.length}return a}},jt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(gn){jt=!1}for(var Ht=new Uint8Array(256),Xt=0;Xt<256;Xt++)Ht[Xt]=Xt>=252?6:Xt>=248?5:Xt>=240?4:Xt>=224?3:Xt>=192?2:1;Ht[254]=Ht[254]=1;var qt={string2buf:function(t){if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,n,r,a,i,o=t.length,s=0;for(a=0;a<o;a++)55296===(64512&(n=t.charCodeAt(a)))&&a+1<o&&56320===(64512&(r=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),i=0,a=0;i<s;a++)55296===(64512&(n=t.charCodeAt(a)))&&a+1<o&&56320===(64512&(r=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e},buf2string:function(t,e){var n,r,a=e||t.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));var i=new Array(2*a);for(r=0,n=0;n<a;){var o=t[n++];if(o<128)i[r++]=o;else{var s=Ht[o];if(s>4)i[r++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&n<a;)o=o<<6|63&t[n++],s--;s>1?i[r++]=65533:o<65536?i[r++]=o:(o-=65536,i[r++]=55296|o>>10&1023,i[r++]=56320|1023&o)}}}return function(t,e){if(e<65534&&t.subarray&&jt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}(i,r)},utf8border:function(t,e){(e=e||t.length)>t.length&&(e=t.length);for(var n=e-1;n>=0&&128===(192&t[n]);)n--;return n<0||0===n?e:n+Ht[t[n]]>e?n:e}};var Yt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Kt=Object.prototype.toString,Qt=j.Z_NO_FLUSH,Jt=j.Z_SYNC_FLUSH,$t=j.Z_FULL_FLUSH,te=j.Z_FINISH,ee=j.Z_OK,ne=j.Z_STREAM_END,re=j.Z_DEFAULT_COMPRESSION,ae=j.Z_DEFAULT_STRATEGY,ie=j.Z_DEFLATED;function oe(t){this.options=Gt.assign({level:re,method:ie,chunkSize:16384,windowBits:15,memLevel:8,strategy:ae},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yt,this.strm.avail_out=0;var n=Wt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==ee)throw new Error(G[n]);if(e.header&&Wt.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"===typeof e.dictionary?qt.string2buf(e.dictionary):"[object ArrayBuffer]"===Kt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=Wt.deflateSetDictionary(this.strm,r))!==ee)throw new Error(G[n]);this._dict_set=!0}}function se(t,e){var n=new oe(e);if(n.push(t,!0),n.err)throw n.msg||G[n.err];return n.result}oe.prototype.push=function(t,e){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=e===~~e?e:!0===e?te:Qt,"string"===typeof t?a.input=qt.string2buf(t):"[object ArrayBuffer]"===Kt.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(r===Jt||r===$t)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((n=Wt.deflate(a,r))===ne)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Wt.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ee;if(0!==a.avail_out){if(r>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},oe.prototype.onData=function(t){this.chunks.push(t)},oe.prototype.onEnd=function(t){t===ee&&(this.result=Gt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ue={Deflate:oe,deflate:se,deflateRaw:function(t,e){return(e=e||{}).raw=!0,se(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,se(t,e)},constants:j},ce=16209,le=function(t,e){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,w,x,k,I,S,_,C=t.state;n=t.next_in,S=t.input,r=n+(t.avail_in-5),a=t.next_out,_=t.output,i=a-(e-t.avail_out),o=a+(t.avail_out-257),s=C.dmax,u=C.wsize,c=C.whave,l=C.wnext,h=C.window,f=C.hold,d=C.bits,p=C.lencode,v=C.distcode,g=(1<<C.lenbits)-1,m=(1<<C.distbits)-1;t:do{d<15&&(f+=S[n++]<<d,d+=8,f+=S[n++]<<d,d+=8),y=p[f&g];e:for(;;){if(f>>>=b=y>>>24,d-=b,0===(b=y>>>16&255))_[a++]=65535&y;else{if(!(16&b)){if(0===(64&b)){y=p[(65535&y)+(f&(1<<b)-1)];continue e}if(32&b){C.mode=16191;break t}t.msg="invalid literal/length code",C.mode=ce;break t}w=65535&y,(b&=15)&&(d<b&&(f+=S[n++]<<d,d+=8),w+=f&(1<<b)-1,f>>>=b,d-=b),d<15&&(f+=S[n++]<<d,d+=8,f+=S[n++]<<d,d+=8),y=v[f&m];n:for(;;){if(f>>>=b=y>>>24,d-=b,!(16&(b=y>>>16&255))){if(0===(64&b)){y=v[(65535&y)+(f&(1<<b)-1)];continue n}t.msg="invalid distance code",C.mode=ce;break t}if(x=65535&y,d<(b&=15)&&(f+=S[n++]<<d,(d+=8)<b&&(f+=S[n++]<<d,d+=8)),(x+=f&(1<<b)-1)>s){t.msg="invalid distance too far back",C.mode=ce;break t}if(f>>>=b,d-=b,x>(b=a-i)){if((b=x-b)>c&&C.sane){t.msg="invalid distance too far back",C.mode=ce;break t}if(k=0,I=h,0===l){if(k+=u-b,b<w){w-=b;do{_[a++]=h[k++]}while(--b);k=a-x,I=_}}else if(l<b){if(k+=u+l-b,(b-=l)<w){w-=b;do{_[a++]=h[k++]}while(--b);if(k=0,l<w){w-=b=l;do{_[a++]=h[k++]}while(--b);k=a-x,I=_}}}else if(k+=l-b,b<w){w-=b;do{_[a++]=h[k++]}while(--b);k=a-x,I=_}for(;w>2;)_[a++]=I[k++],_[a++]=I[k++],_[a++]=I[k++],w-=3;w&&(_[a++]=I[k++],w>1&&(_[a++]=I[k++]))}else{k=a-x;do{_[a++]=_[k++],_[a++]=_[k++],_[a++]=_[k++],w-=3}while(w>2);w&&(_[a++]=_[k++],w>1&&(_[a++]=_[k++]))}break}}break}}while(n<r&&a<o);n-=w=d>>3,f&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=a<o?o-a+257:257-(a-o),C.hold=f,C.bits=d},he=15,fe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),de=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ve=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ge=function(t,e,n,r,a,i,o,s){var u,c,l,h,f,d,p,v,g,m=s.bits,y=0,b=0,w=0,x=0,k=0,I=0,S=0,_=0,C=0,E=0,A=null,T=new Uint16Array(16),N=new Uint16Array(16),D=null;for(y=0;y<=he;y++)T[y]=0;for(b=0;b<r;b++)T[e[n+b]]++;for(k=m,x=he;x>=1&&0===T[x];x--);if(k>x&&(k=x),0===x)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(w=1;w<x&&0===T[w];w++);for(k<w&&(k=w),_=1,y=1;y<=he;y++)if(_<<=1,(_-=T[y])<0)return-1;if(_>0&&(0===t||1!==x))return-1;for(N[1]=0,y=1;y<he;y++)N[y+1]=N[y]+T[y];for(b=0;b<r;b++)0!==e[n+b]&&(o[N[e[n+b]]++]=b);if(0===t?(A=D=o,d=20):1===t?(A=fe,D=de,d=257):(A=pe,D=ve,d=0),E=0,b=0,y=w,f=i,I=k,S=0,l=-1,h=(C=1<<k)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){p=y-S,o[b]+1<d?(v=0,g=o[b]):o[b]>=d?(v=D[o[b]-d],g=A[o[b]-d]):(v=96,g=0),u=1<<y-S,w=c=1<<I;do{a[f+(E>>S)+(c-=u)]=p<<24|v<<16|g|0}while(0!==c);for(u=1<<y-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,b++,0===--T[y]){if(y===x)break;y=e[n+o[b]]}if(y>k&&(E&h)!==l){for(0===S&&(S=k),f+=w,_=1<<(I=y-S);I+S<x&&!((_-=T[I+S])<=0);)I++,_<<=1;if(C+=1<<I,1===t&&C>852||2===t&&C>592)return 1;a[l=E&h]=k<<24|I<<16|f-i|0}}return 0!==E&&(a[f+E]=y-S<<24|64<<16|0),s.bits=k,0},me=j.Z_FINISH,ye=j.Z_BLOCK,be=j.Z_TREES,we=j.Z_OK,xe=j.Z_STREAM_END,ke=j.Z_NEED_DICT,Ie=j.Z_STREAM_ERROR,Se=j.Z_DATA_ERROR,_e=j.Z_MEM_ERROR,Ce=j.Z_BUF_ERROR,Ee=j.Z_DEFLATED,Ae=16180,Te=16190,Ne=16191,De=16192,Re=16194,Ze=16199,Me=16200,Fe=16206,Oe=16209,Be=function(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)};function Le(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Pe,Ue,ze=function(t){if(!t)return 1;var e=t.state;return!e||e.strm!==t||e.mode<Ae||e.mode>16211?1:0},We=function(t){if(ze(t))return Ie;var e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ae,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,we},Ve=function(t){if(ze(t))return Ie;var e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,We(t)},Ge=function(t,e){var n;if(ze(t))return Ie;var r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ie:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Ve(t))},je=function(t,e){if(!t)return Ie;var n=new Le;t.state=n,n.strm=t,n.window=null,n.mode=Ae;var r=Ge(t,e);return r!==we&&(t.state=null),r},He=!0,Xe=function(t){if(He){Pe=new Int32Array(512),Ue=new Int32Array(32);for(var e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ge(1,t.lens,0,288,Pe,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ge(2,t.lens,0,32,Ue,0,t.work,{bits:5}),He=!1}t.lencode=Pe,t.lenbits=9,t.distcode=Ue,t.distbits=5},qe=function(t,e,n,r){var a,i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),i.window.set(e.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Ye={inflateReset:Ve,inflateReset2:Ge,inflateResetKeep:We,inflateInit:function(t){return je(t,15)},inflateInit2:je,inflate:function(t,e){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,g,m,y,b,w,x,k,I,S,_,C=0,E=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ze(t)||!t.output||!t.input&&0!==t.avail_in)return Ie;(n=t.state).mode===Ne&&(n.mode=De),o=t.next_out,a=t.output,u=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,c=n.hold,l=n.bits,h=s,f=u,I=we;t:for(;;)switch(n.mode){case Ae:if(0===n.wrap){n.mode=De;break}for(;l<16;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,E[0]=255&c,E[1]=c>>>8&255,n.check=V(n.check,E,2,0),c=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Oe;break}if((15&c)!==Ee){t.msg="unknown compression method",n.mode=Oe;break}if(l-=4,k=8+(15&(c>>>=4)),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){t.msg="invalid window size",n.mode=Oe;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&c?16189:Ne,c=0,l=0;break;case 16181:for(;l<16;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(n.flags=c,(255&n.flags)!==Ee){t.msg="unknown compression method",n.mode=Oe;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Oe;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=V(n.check,E,2,0)),c=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,n.check=V(n.check,E,4,0)),c=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=V(n.check,E,2,0)),c=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(E[0]=255&c,E[1]=c>>>8&255,n.check=V(n.check,E,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((d=n.length)>s&&(d=s),d&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+d),k)),512&n.flags&&4&n.wrap&&(n.check=V(n.check,r,d,i)),s-=d,i+=d,n.length-=d),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break t;d=0;do{k=r[i+d++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&d<s);if(512&n.flags&&4&n.wrap&&(n.check=V(n.check,r,d,i)),s-=d,i+=d,k)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break t;d=0;do{k=r[i+d++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&d<s);if(512&n.flags&&4&n.wrap&&(n.check=V(n.check,r,d,i)),s-=d,i+=d,k)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(4&n.wrap&&c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Oe;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Ne;break;case 16189:for(;l<32;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}t.adler=n.check=Be(c),c=0,l=0,n.mode=Te;case Te:if(0===n.havedict)return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=s,n.hold=c,n.bits=l,ke;t.adler=n.check=1,n.mode=Ne;case Ne:if(e===ye||e===be)break t;case De:if(n.last){c>>>=7&l,l-=7&l,n.mode=Fe;break}for(;l<3;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}switch(n.last=1&c,l-=1,3&(c>>>=1)){case 0:n.mode=16193;break;case 1:if(Xe(n),n.mode=Ze,e===be){c>>>=2,l-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Oe}c>>>=2,l-=2;break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if((65535&c)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Oe;break}if(n.length=65535&c,c=0,l=0,n.mode=Re,e===be)break t;case Re:n.mode=16195;case 16195:if(d=n.length){if(d>s&&(d=s),d>u&&(d=u),0===d)break t;a.set(r.subarray(i,i+d),o),s-=d,i+=d,u-=d,o+=d,n.length-=d;break}n.mode=Ne;break;case 16196:for(;l<14;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(n.nlen=257+(31&c),c>>>=5,l-=5,n.ndist=1+(31&c),c>>>=5,l-=5,n.ncode=4+(15&c),c>>>=4,l-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Oe;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}n.lens[A[n.have++]]=7&c,c>>>=3,l-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},I=ge(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,I){t.msg="invalid code lengths set",n.mode=Oe;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(C=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&C,!((g=C>>>24)<=l);){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(y<16)c>>>=g,l-=g,n.lens[n.have++]=y;else{if(16===y){for(_=g+2;l<_;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(c>>>=g,l-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=Oe;break}k=n.lens[n.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===y){for(_=g+3;l<_;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}l-=g,k=0,d=3+(7&(c>>>=g)),c>>>=3,l-=3}else{for(_=g+7;l<_;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}l-=g,k=0,d=11+(127&(c>>>=g)),c>>>=7,l-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Oe;break}for(;d--;)n.lens[n.have++]=k}}if(n.mode===Oe)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Oe;break}if(n.lenbits=9,S={bits:n.lenbits},I=ge(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,I){t.msg="invalid literal/lengths set",n.mode=Oe;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},I=ge(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,I){t.msg="invalid distances set",n.mode=Oe;break}if(n.mode=Ze,e===be)break t;case Ze:n.mode=Me;case Me:if(s>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=s,n.hold=c,n.bits=l,le(t,f),o=t.next_out,a=t.output,u=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,c=n.hold,l=n.bits,n.mode===Ne&&(n.back=-1);break}for(n.back=0;m=(C=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&C,!((g=C>>>24)<=l);){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(m&&0===(240&m)){for(b=g,w=m,x=y;m=(C=n.lencode[x+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&C,!(b+(g=C>>>24)<=l);){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}c>>>=b,l-=b,n.back+=b}if(c>>>=g,l-=g,n.back+=g,n.length=y,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Ne;break}if(64&m){t.msg="invalid literal/length code",n.mode=Oe;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(_=n.extra;l<_;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(C=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&C,!((g=C>>>24)<=l);){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(0===(240&m)){for(b=g,w=m,x=y;m=(C=n.distcode[x+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&C,!(b+(g=C>>>24)<=l);){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}c>>>=b,l-=b,n.back+=b}if(c>>>=g,l-=g,n.back+=g,64&m){t.msg="invalid distance code",n.mode=Oe;break}n.offset=y,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(_=n.extra;l<_;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Oe;break}n.mode=16204;case 16204:if(0===u)break t;if(d=f-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Oe;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),v=n.window}else v=a,p=o-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{a[o++]=v[p++]}while(--d);0===n.length&&(n.mode=Me);break;case 16205:if(0===u)break t;a[o++]=n.length,u--,n.mode=Me;break;case Fe:if(n.wrap){for(;l<32;){if(0===s)break t;s--,c|=r[i++]<<l,l+=8}if(f-=u,t.total_out+=f,n.total+=f,4&n.wrap&&f&&(t.adler=n.check=n.flags?V(n.check,a,f,o-f):z(n.check,a,f,o-f)),f=u,4&n.wrap&&(n.flags?c:Be(c))!==n.check){t.msg="incorrect data check",n.mode=Oe;break}c=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===s)break t;s--,c+=r[i++]<<l,l+=8}if(4&n.wrap&&c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Oe;break}c=0,l=0}n.mode=16208;case 16208:I=xe;break t;case Oe:I=Se;break t;case 16210:return _e;default:return Ie}return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=s,n.hold=c,n.bits=l,(n.wsize||f!==t.avail_out&&n.mode<Oe&&(n.mode<Fe||e!==me))&&qe(t,t.output,t.next_out,f-t.avail_out),h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,n.total+=f,4&n.wrap&&f&&(t.adler=n.check=n.flags?V(n.check,a,f,t.next_out-f):z(n.check,a,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Ne?128:0)+(n.mode===Ze||n.mode===Re?256:0),(0===h&&0===f||e===me)&&I===we&&(I=Ce),I},inflateEnd:function(t){if(ze(t))return Ie;var e=t.state;return e.window&&(e.window=null),t.state=null,we},inflateGetHeader:function(t,e){if(ze(t))return Ie;var n=t.state;return 0===(2&n.wrap)?Ie:(n.head=e,e.done=!1,we)},inflateSetDictionary:function(t,e){var n,r=e.length;return ze(t)||0!==(n=t.state).wrap&&n.mode!==Te?Ie:n.mode===Te&&z(1,e,r,0)!==n.check?Se:qe(t,e,r,r)?(n.mode=16210,_e):(n.havedict=1,we)},inflateInfo:"pako inflate (from Nodeca project)"};var Ke=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Qe=Object.prototype.toString,Je=j.Z_NO_FLUSH,$e=j.Z_FINISH,tn=j.Z_OK,en=j.Z_STREAM_END,nn=j.Z_NEED_DICT,rn=j.Z_STREAM_ERROR,an=j.Z_DATA_ERROR,on=j.Z_MEM_ERROR;function sn(t){this.options=Gt.assign({chunkSize:65536,windowBits:15,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yt,this.strm.avail_out=0;var n=Ye.inflateInit2(this.strm,e.windowBits);if(n!==tn)throw new Error(G[n]);if(this.header=new Ke,Ye.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"===typeof e.dictionary?e.dictionary=qt.string2buf(e.dictionary):"[object ArrayBuffer]"===Qe.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Ye.inflateSetDictionary(this.strm,e.dictionary))!==tn))throw new Error(G[n])}function un(t,e){var n=new sn(e);if(n.push(t),n.err)throw n.msg||G[n.err];return n.result}sn.prototype.push=function(t,e){var n,r,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(r=e===~~e?e:!0===e?$e:Je,"[object ArrayBuffer]"===Qe.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n=Ye.inflate(i,r))===nn&&s&&((n=Ye.inflateSetDictionary(i,s))===tn?n=Ye.inflate(i,r):n===an&&(n=nn));i.avail_in>0&&n===en&&i.state.wrap>0&&0!==t[i.next_in];)Ye.inflateReset(i),n=Ye.inflate(i,r);switch(n){case rn:case an:case nn:case on:return this.onEnd(n),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||n===en))if("string"===this.options.to){var u=qt.utf8border(i.output,i.next_out),c=i.next_out-u,l=qt.buf2string(i.output,u);i.next_out=c,i.avail_out=o-c,c&&i.output.set(i.output.subarray(u,u+c),0),this.onData(l)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==tn||0!==a){if(n===en)return n=Ye.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},sn.prototype.onData=function(t){this.chunks.push(t)},sn.prototype.onEnd=function(t){t===tn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Gt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var cn={Inflate:sn,inflate:un,inflateRaw:function(t,e){return(e=e||{}).raw=!0,un(t,e)},ungzip:un,constants:j},ln=ue.deflate,hn=cn.Inflate,fn=cn.inflate,dn=ln,pn=hn,vn=fn},12898:function(t){"use strict";t.exports={version:"1.0.1"}}}]);
//# sourceMappingURL=631.4d4724be.chunk.js.map