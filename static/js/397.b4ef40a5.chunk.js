!function(){"use strict";var r={23397:function(r,n,e){var t=e(74165),a=e(4942),i=e(15861),u=e(38380),o=(e(763),e(98222),e(71773),e(16393),e(29439)),c=e(46152),s=e(37762);e(69728);function f(r,n,e){switch(e){case 0:return[r,n+1];case 1:return[r-1,n+1];case 2:return[r-1,n];case 3:return[r-1,n-1];case 4:return[r,n-1];case 5:return[r+1,n-1];case 6:return[r+1,n];case 7:return[r+1,n+1];default:throw new Error("Incorrect id, (".concat(e,"), must be in [0, 7]"))}}function l(r,n,e,t){var a=e-r,i=t-n;if(0===a&&1===i)return 0;if(-1===a&&1===i)return 1;if(-1===a&&0===i)return 2;if(-1===a&&-1===i)return 3;if(0===a&&-1===i)return 4;if(1===a&&-1===i)return 5;if(1===a&&0===i)return 6;if(1===a&&1===i)return 7;throw new Error("Cannot find id with di ".concat(a,", dj ").concat(i))}function h(r,n,e,t,a,i,u,o){for(var c=!1,s=l(t,a,i,u),h=0;h<8;h++){var v=(h+s+o+16)%8;c=0===v||c;var d=f(t,a,v);if(0!==r.get(d[0],d[1]))return{ij:d,rightExamined:c}}return{ij:null,rightExamined:c}}function v(r,n,e,t,a,i,u,o){for(var c=l(t,a,i,u),s=0;s<8;s++){var h=f(t,a,(-s+c-o+16)%8);if(0!==r.get(h[0],h[1]))return h}return null}var d=function(r,n,e){for(var t=[],a=1;a<e-1;a++)r[a*n]=0,r[a*n+n-1]=0;for(var i=0;i<n;i++)r[i]=0,r[n*e-1-i]=0;for(var u=1,f=1,l=function(r,n,e){return{get:function(e,t){return r[e*n+t]},set:function(e,t,a){r[e*n+t]=a}}}(r,n),d=1;d<e-1;d++){f=1;for(var m=1;m<n-1;m++){var p=0,g=0;if(0!==l.get(d,m)){var y={isHole:void 0,seqNum:void 0,points:[{y:d,x:m}]};if(1===l.get(d,m)&&0===l.get(d,m-1))u++,p=d,g=m-1,y.isHole=!1,y.seqNum=u;else{if(!(l.get(d,m)>=1&&0===l.get(d,m+1))){1!==l.get(d,m)&&(f=Math.abs(l.get(d,m)));continue}u++,p=d,g=m+1,l.get(d,m)>1&&(f=l.get(d,m)),y.isHole=!0,y.seqNum=u}t.push(y);for(var b={seqNum:f,points:[],parent:f},w=0;w<t.length;w++)if(t[w].seqNum===f){b=t[w];break}b.isHole?y.isHole?y.parent=b.parent:y.parent=b.seqNum:y.isHole?y.parent=b.seqNum:y.parent=b.parent;var E=v(l,0,0,d,m,p,g,0);if(null!==E)for(var k=(0,o.Z)(E,2),x=k[0],M=k[1],S=x,Z=M,q=d,j=m;;){var A=h(l,0,0,q,j,S,Z,1),O=A.ij,D=A.rightExamined,P=O,H=(0,o.Z)(P,2),N=H[0],I=H[1];if(t[t.length-1].points.push({y:N,x:I}),0===l.get(q,j+1)?l.set(q,j,D||y.isHole?-u:u):0!==l.get(q,j+1)&&1===l.get(q,j)&&l.set(q,j,u),N===d&&I===m&&q===x&&j===M){1!==l.get(d,m)&&(f=Math.abs(l.get(d,m)));break}S=q,Z=j,q=N,j=I}else l.set(d,m,-u),1!==l.get(d,m)&&(f=Math.abs(l.get(d,m)))}}}return function(r){var n,e=[],t=(0,s.Z)(r);try{for(t.s();!(n=t.n()).done;){var a=n.value;e.push((0,c.Z)((0,c.Z)({},a),{},{points:a.points.map((function(r){return{x:r.x-1,y:r.y-1}}))}))}}catch(i){t.e(i)}finally{t.f()}return e}(t)},m=(e(55612),function(r){return(0,u.lub)((function(){var n=r.mul(-1);return(0,u.hg7)(n,n.size).values.mul(-1)}))}),p=function(r,n){return(0,u.lub)((function(){n||(r=m(r));var e=r.size/2,t=r.slice(e,1);if(r.size%2===0){var a=r.slice(e+1,1);return t.add(a).div(2)}return t}))},g=function(r,n,e){return(0,u.lub)((function(){e||(r=m(r));var t=Math.floor(r.size*n);return(0,u.hg7)(r,t).values.min()}))},y=function(r,n){var e=m(r),t=void 0;switch(n){case"intensity-total":t=(0,u.lub)((function(){return r.sum().arraySync()}));break;case"intensity-mean":t=(0,u.lub)((function(){return r.mean().arraySync()}));break;case"intensity-median":var a=(0,u.lub)((function(){return p(e,!0).arraySync()}));t=Array.isArray(a)?a[0]:a;break;case"intensity-std":var i=(0,u.lub)((function(){return(r=e,(0,u.lub)((function(){return(0,u.Gi7)(r).variance.sqrt()}))).arraySync();var r}));t=Array.isArray(i)?i[0]:i;break;case"intensity-MAD":var o=(0,u.lub)((function(){return(r=e,n=!0,(0,u.lub)((function(){var e=p(r,n),t=r.sub(e).abs();return p(t)}))).arraySync();var r,n}));t=Array.isArray(o)?o[0]:o;break;case"intensity-min":t=(0,u.lub)((function(){return r.min().arraySync()}));break;case"intensity-max":t=(0,u.lub)((function(){return r.max().arraySync()}));break;case"intensity-upper-quartile":var c=(0,u.lub)((function(){return g(e,.25,!0).arraySync()}));t=Array.isArray(c)?c[0]:c;break;case"intensity-lower-quartile":var s=(0,u.lub)((function(){return g(e,.75,!0).arraySync()}));t=Array.isArray(s)?s[0]:s}return e.dispose(),t},b=function(r,n){var e=[];return Array.from(r).forEach((function(r){e.push(r/255)})),d(Int8Array.from(e),n.width,n.height).reduce((function(r,n){return r+w(n.points.map((function(r){return[r.x,r.y]})))}),0)},w=function(r){for(var n=0,e=0;e<r.length;e++){var t=r[e][0],a=r[e][1],i=r[e===r.length-1?0:e+1][0],u=r[e===r.length-1?0:e+1][1];n+=Math.sqrt(Math.pow(i-t,2)+Math.pow(u-a,2))}return n},E=function(r,n,e){var t=function(r){return 2*Math.sqrt(r*Math.PI)}(r);return t/b(n,e)};self.onmessage=function(){var r=(0,i.Z)((0,t.Z)().mark((function r(n){var e,i,o,c,s,f,l,h,v;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=n.data,i=e.currentMeasurements,o=e.activeMeasurements,c=e.thingIds,s={},f=o.length,l=c.length,h=function(r){self.postMessage({loadValue:Math.floor(r/(f*l)*100)})},v=0,o.forEach((function(r){if(r.includes("intensity")){var n=r.split("-channel-"),e=n[0],t=+n[1];c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var o=i[n].channelData,c=u.lub((function(){return u.odF(o).slice(t,1).squeeze()})),f=y(c,e);if(void 0===f)throw new Error("Error calculating ".concat(e," on channel ").concat(t));n in s?s[n][r]=f:s[n]=(0,a.Z)({},r,f),c.dispose(),h(++v)}}))}else r.includes("geometry")&&(r.includes("area")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=i[n].channelData[0].length;if(void 0===e)throw new Error("Error calculating area ");n in s?s[n][r]=e:s[n]=(0,a.Z)({},r,e),h(++v)}})),r.includes("perimeter")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=b(i[n].maskData,i[n].maskShape);if(void 0===e)throw new Error("Error calculating area ");n in s?s[n][r]=e:s[n]=(0,a.Z)({},r,e),h(++v)}})),r.includes("extent")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=i[n].channelData[0].length,t=i[n].maskShape,u=e/(t.width*t.height);if(void 0===u)throw new Error("Error calculating area ");n in s?s[n][r]=u:s[n]=(0,a.Z)({},r,u),h(++v)}})),r.includes("bbox")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=i[n].maskShape,t=e.width*e.height;if(void 0===t)throw new Error("Error calculating area ");n in s?s[n][r]=t:s[n]=(0,a.Z)({},r,t),h(++v)}})),r.includes("eqpc")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e,t=(e=i[n].channelData[0].length,2*Math.sqrt(e/Math.PI));if(void 0===t)throw new Error("Error calculating area ");n in s?s[n][r]=t:s[n]=(0,a.Z)({},r,t),h(++v)}})),r.includes("ped")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=b(i[n].maskData,i[n].maskShape)/Math.PI;if(void 0===e)throw new Error("Error calculating area ");n in s?s[n][r]=e:s[n]=(0,a.Z)({},r,e),h(++v)}})),r.includes("sphericity")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=E(i[n].channelData[0].length,i[n].maskData,i[n].maskShape);if(void 0===e)throw new Error("Error calculating area ");n in s?s[n][r]=e:s[n]=(0,a.Z)({},r,e),h(++v)}})),r.includes("compactness")&&c.forEach((function(n){if(!(n in i)||!(r in i[n].measurements)){var e=1/E(i[n].channelData[0].length,i[n].maskData,i[n].maskShape);if(void 0===e)throw new Error("Error calculating area ");n in s?s[n][r]=e:s[n]=(0,a.Z)({},r,e),h(++v)}})))})),self.postMessage({data:s});case 8:case"end":return r.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}()}},n={};function e(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return r[t].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}e.m=r,e.x=function(){var r=e.O(void 0,[803,84,543],(function(){return e(23397)}));return r=e.O(r)},e.amdD=function(){throw new Error("define cannot be used indirect")},e.amdO={},function(){var r=[];e.O=function(n,t,a,i){if(!t){var u=1/0;for(f=0;f<r.length;f++){t=r[f][0],a=r[f][1],i=r[f][2];for(var o=!0,c=0;c<t.length;c++)(!1&i||u>=i)&&Object.keys(e.O).every((function(r){return e.O[r](t[c])}))?t.splice(c--,1):(o=!1,i<u&&(u=i));if(o){r.splice(f--,1);var s=a();void 0!==s&&(n=s)}}return n}i=i||0;for(var f=r.length;f>0&&r[f-1][2]>i;f--)r[f]=r[f-1];r[f]=[t,a,i]}}(),e.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(n,{a:n}),n},e.d=function(r,n){for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},e.f={},e.e=function(r){return Promise.all(Object.keys(e.f).reduce((function(n,t){return e.f[t](r,n),n}),[]))},e.u=function(r){return"static/js/"+r+"."+{84:"1d757b56",543:"57a7a27c",803:"a6df8bfa"}[r]+".chunk.js"},e.miniCssF=function(r){},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"===typeof window)return window}}(),e.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},e.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.nmd=function(r){return r.paths=[],r.children||(r.children=[]),r},e.p="/",function(){var r={397:1};e.f.i=function(n,t){r[n]||importScripts(e.p+e.u(n))};var n=self.webpackChunkpiximi=self.webpackChunkpiximi||[],t=n.push.bind(n);n.push=function(n){var a=n[0],i=n[1],u=n[2];for(var o in i)e.o(i,o)&&(e.m[o]=i[o]);for(u&&u(e);a.length;)r[a.pop()]=1;t(n)}}(),function(){var r=e.x;e.x=function(){return Promise.all([803,84,543].map(e.e,e)).then(r)}}();e.x()}();
//# sourceMappingURL=397.b4ef40a5.chunk.js.map